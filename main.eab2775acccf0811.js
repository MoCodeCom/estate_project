(self.webpackChunkestate=self.webpackChunkestate||[]).push([[179],{2011:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Dh:()=>je,GT:()=>Ee,Ot:()=>$e,cc:()=>it,hO:()=>tt,on:()=>he,pX:()=>Oe,xv:()=>Ne});var o=z(4650),ee=z(9260),W=z(4976);Yt=z.hmd(Yt);const Te=["ngOnDestroy"],Oe=(st,ut,mt,nt={})=>new Proxy(st,{get:(Qe,lt)=>mt.runOutsideAngular(()=>{var vt;if(st[lt])return!(null===(vt=nt?.spy)||void 0===vt)&&vt.get&&nt.spy.get(lt,st[lt]),st[lt];if(Te.indexOf(lt)>-1)return()=>{};const rt=ut.toPromise().then(Se=>{const Lt=Se&&Se[lt];return"function"==typeof Lt?Lt.bind(Se):Lt&&Lt.then?Lt.then(tn=>mt.run(()=>tn)):mt.run(()=>Lt)});return new Proxy(()=>{},{get:(Se,Lt)=>rt[Lt],apply:(Se,Lt,tn)=>rt.then(Zt=>{var dn;const zt=Zt&&Zt(...tn);return!(null===(dn=nt?.spy)||void 0===dn)&&dn.apply&&nt.spy.apply(lt,tn,zt),zt})})})}),Ee=(st,ut)=>{ut.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(nt=>{Object.defineProperty(st.prototype,nt,Object.getOwnPropertyDescriptor(mt.prototype||mt,nt))})})};class $e{constructor(ut){return ut}}const je=new o.OlP("angularfire2.app.options"),Ne=new o.OlP("angularfire2.app.name");function he(st,ut,mt){const Qe="object"==typeof mt&&mt||{};Qe.name=Qe.name||"string"==typeof mt&&mt||"[DEFAULT]";const vt=ee.Z.apps.filter(rt=>rt&&rt.name===Qe.name)[0]||ut.runOutsideAngular(()=>ee.Z.initializeApp(st,Qe));try{JSON.stringify(st)!==JSON.stringify(vt.options)&&fe("error",`${vt.name} Firebase App already initialized with different options${Yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new $e(vt)}const fe=(st,...ut)=>{(0,o.X6Q)()&&typeof console<"u"&&console[st](...ut)},Ce={provide:$e,useFactory:he,deps:[je,o.R0b,[new o.FiY,Ne]]};let tt=(()=>{class st{constructor(mt){ee.Z.registerVersion("angularfire",W.q4.full,"core"),ee.Z.registerVersion("angularfire",W.q4.full,"app-compat"),ee.Z.registerVersion("angular",o.q4F.full,mt.toString())}static initializeApp(mt,nt){return{ngModule:st,providers:[{provide:je,useValue:mt},{provide:Ne,useValue:nt}]}}}return st.\u0275fac=function(mt){return new(mt||st)(o.LFG(o.Lbi))},st.\u0275mod=o.oAB({type:st}),st.\u0275inj=o.cJS({providers:[Ce]}),st})();function it(st,ut,mt,nt,Qe){const[,lt,vt]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===st)||[];if(lt)return function Et(st,ut){try{return st.toString()===ut.toString()}catch{return st===ut}}(Qe,vt)||(Be("error",`${ut} was already initialized on the ${mt} Firebase App with different settings.${Vt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:Qe,was:vt})),lt;{const rt=nt();return globalThis.\u0275AngularfireInstanceCache.push([st,rt,Qe]),rt}}const Vt=!!Yt.hot,Be=(st,...ut)=>{(0,o.X6Q)()&&typeof console<"u"&&console[st](...ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Yt,Xe,z)=>{"use strict";z.d(Xe,{q4:()=>Lr,iC:()=>xf,fc:()=>Df,HU:()=>tc,vb:()=>Fp,JM:()=>Du,u3:()=>Bp});var o=z(4650),ee=z(259),W=z(5861),Te=z(6881),Oe=z(2090),Ee=z(4859),$e=z(1877);const je=(A,k)=>k.some(B=>A instanceof B);let Ne,he;const tt=new WeakMap,it=new WeakMap,Et=new WeakMap,Vt=new WeakMap,Be=new WeakMap;let mt={get(A,k,B){if(A instanceof IDBTransaction){if("done"===k)return it.get(A);if("objectStoreNames"===k)return A.objectStoreNames||Et.get(A);if("store"===k)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return vt(A[k])},set:(A,k,B)=>(A[k]=B,!0),has:(A,k)=>A instanceof IDBTransaction&&("done"===k||"store"===k)||k in A};function lt(A){return"function"==typeof A?function Qe(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...k){return A.apply(rt(this),k),vt(tt.get(this))}:function(...k){return vt(A.apply(rt(this),k))}:function(k,...B){const X=A.call(rt(this),k,...B);return Et.set(X,k.sort?k.sort():[k]),vt(X)}}(A):(A instanceof IDBTransaction&&function ut(A){if(it.has(A))return;const k=new Promise((B,X)=>{const me=()=>{A.removeEventListener("complete",ye),A.removeEventListener("error",Ve),A.removeEventListener("abort",Ve)},ye=()=>{B(),me()},Ve=()=>{X(A.error||new DOMException("AbortError","AbortError")),me()};A.addEventListener("complete",ye),A.addEventListener("error",Ve),A.addEventListener("abort",Ve)});it.set(A,k)}(A),je(A,function fe(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,mt):A)}function vt(A){if(A instanceof IDBRequest)return function st(A){const k=new Promise((B,X)=>{const me=()=>{A.removeEventListener("success",ye),A.removeEventListener("error",Ve)},ye=()=>{B(vt(A.result)),me()},Ve=()=>{X(A.error),me()};A.addEventListener("success",ye),A.addEventListener("error",Ve)});return k.then(B=>{B instanceof IDBCursor&&tt.set(B,A)}).catch(()=>{}),Be.set(k,A),k}(A);if(Vt.has(A))return Vt.get(A);const k=lt(A);return k!==A&&(Vt.set(A,k),Be.set(k,A)),k}const rt=A=>Be.get(A),tn=["get","getKey","getAll","getAllKeys","count"],Zt=["put","add","delete","clear"],dn=new Map;function zt(A,k){if(!(A instanceof IDBDatabase)||k in A||"string"!=typeof k)return;if(dn.get(k))return dn.get(k);const B=k.replace(/FromIndex$/,""),X=k!==B,me=Zt.includes(B);if(!(B in(X?IDBIndex:IDBObjectStore).prototype)||!me&&!tn.includes(B))return;const ye=function(){var Ve=(0,W.Z)(function*(Dt,...Tt){const Jt=this.transaction(Dt,me?"readwrite":"readonly");let Sn=Jt.store;return X&&(Sn=Sn.index(Tt.shift())),(yield Promise.all([Sn[B](...Tt),me&&Jt.done]))[0]});return function(Tt){return Ve.apply(this,arguments)}}();return dn.set(k,ye),ye}!function nt(A){mt=A(mt)}(A=>({...A,get:(k,B,X)=>zt(k,B)||A.get(k,B,X),has:(k,B)=>!!zt(k,B)||A.has(k,B)}));const Cn="@firebase/installations",Fe="0.6.4",xe=1e4,ze=`w:${Fe}`,Ke="FIS_v2",pt="https://firebaseinstallations.googleapis.com/v1",Je=36e5,Pt=new Oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rn(A){return A instanceof Oe.ZR&&A.code.includes("request-failed")}function Vn({projectId:A}){return`${pt}/projects/${A}/installations`}function ri(A){return{token:A.token,requestStatus:2,expiresIn:To(A.expiresIn),creationTime:Date.now()}}function _i(A,k){return Or.apply(this,arguments)}function Or(){return(Or=(0,W.Z)(function*(A,k){const X=(yield k.json()).error;return Pt.create("request-failed",{requestName:A,serverCode:X.code,serverMessage:X.message,serverStatus:X.status})})).apply(this,arguments)}function ar({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function ir(A){return ao.apply(this,arguments)}function ao(){return(ao=(0,W.Z)(function*(A){const k=yield A();return k.status>=500&&k.status<600?A():k})).apply(this,arguments)}function To(A){return Number(A.replace("s","000"))}function jt(){return(jt=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:k},{fid:B}){const X=Vn(A),me=ar(A),ye=k.getImmediate({optional:!0});if(ye){const Jt=yield ye.getHeartbeatsHeader();Jt&&me.append("x-firebase-client",Jt)}const Dt={method:"POST",headers:me,body:JSON.stringify({fid:B,authVersion:Ke,appId:A.appId,sdkVersion:ze})},Tt=yield ir(()=>fetch(X,Dt));if(Tt.ok){const Jt=yield Tt.json();return{fid:Jt.fid||B,registrationStatus:2,refreshToken:Jt.refreshToken,authToken:ri(Jt.authToken)}}throw yield _i("Create Installation",Tt)})).apply(this,arguments)}function Ki(A){return new Promise(k=>{setTimeout(k,A)})}const lr=/^[cdef][\w-]{21}$/,lo="";function Wr(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const B=function ti(A){return function Es(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return lr.test(B)?B:lo}catch{return lo}}function Ln(A){return`${A.appName}!${A.appId}`}const Wt=new Map;function xn(A,k){const B=Ln(A);Hi(B,k),function Gr(A,k){const B=function Tr(){return!Qi&&"BroadcastChannel"in self&&(Qi=new BroadcastChannel("[Firebase] FID Change"),Qi.onmessage=A=>{Hi(A.data.key,A.data.fid)}),Qi}();B&&B.postMessage({key:A,fid:k}),function kn(){0===Wt.size&&Qi&&(Qi.close(),Qi=null)}()}(B,k)}function Hi(A,k){const B=Wt.get(A);if(B)for(const X of B)X(k)}let Qi=null;const Ko="firebase-installations-database",zn=1,Eo="firebase-installations-store";let Rn=null;function rr(){return Rn||(Rn=function Se(A,k,{blocked:B,upgrade:X,blocking:me,terminated:ye}={}){const Ve=indexedDB.open(A,k),Dt=vt(Ve);return X&&Ve.addEventListener("upgradeneeded",Tt=>{X(vt(Ve.result),Tt.oldVersion,Tt.newVersion,vt(Ve.transaction))}),B&&Ve.addEventListener("blocked",()=>B()),Dt.then(Tt=>{ye&&Tt.addEventListener("close",()=>ye()),me&&Tt.addEventListener("versionchange",()=>me())}).catch(()=>{}),Dt}(Ko,zn,{upgrade:(A,k)=>{0===k&&A.createObjectStore(Eo)}})),Rn}function Ji(A,k){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,W.Z)(function*(A,k){const B=Ln(A),me=(yield rr()).transaction(Eo,"readwrite"),ye=me.objectStore(Eo),Ve=yield ye.get(B);return yield ye.put(k,B),yield me.done,(!Ve||Ve.fid!==k.fid)&&xn(A,k.fid),k})).apply(this,arguments)}function cr(A){return Do.apply(this,arguments)}function Do(){return(Do=(0,W.Z)(function*(A){const k=Ln(A),X=(yield rr()).transaction(Eo,"readwrite");yield X.objectStore(Eo).delete(k),yield X.done})).apply(this,arguments)}function co(A,k){return xo.apply(this,arguments)}function xo(){return(xo=(0,W.Z)(function*(A,k){const B=Ln(A),me=(yield rr()).transaction(Eo,"readwrite"),ye=me.objectStore(Eo),Ve=yield ye.get(B),Dt=k(Ve);return void 0===Dt?yield ye.delete(B):yield ye.put(Dt,B),yield me.done,Dt&&(!Ve||Ve.fid!==Dt.fid)&&xn(A,Dt.fid),Dt})).apply(this,arguments)}function le(A){return oe.apply(this,arguments)}function oe(){return oe=(0,W.Z)(function*(A){let k;const B=yield co(A.appConfig,X=>{const me=function G(A){return cn(A||{fid:Wr(),registrationStatus:0})}(X),ye=function Y(A,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Pt.create("app-offline"))};const B={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},X=function q(A,k){return ge.apply(this,arguments)}(A,B);return{installationEntry:B,registrationPromise:X}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:De(A)}:{installationEntry:k}}(A,me);return k=ye.registrationPromise,ye.installationEntry});return B.fid===lo?{installationEntry:yield k}:{installationEntry:B,registrationPromise:k}}),oe.apply(this,arguments)}function ge(){return ge=(0,W.Z)(function*(A,k){try{const B=yield function Yi(A,k){return jt.apply(this,arguments)}(A,k);return Ji(A.appConfig,B)}catch(B){throw rn(B)&&409===B.customData.serverCode?yield cr(A.appConfig):yield Ji(A.appConfig,{fid:k.fid,registrationStatus:0}),B}}),ge.apply(this,arguments)}function De(A){return kt.apply(this,arguments)}function kt(){return(kt=(0,W.Z)(function*(A){let k=yield pn(A.appConfig);for(;1===k.registrationStatus;)yield Ki(100),k=yield pn(A.appConfig);if(0===k.registrationStatus){const{installationEntry:B,registrationPromise:X}=yield le(A);return X||B}return k})).apply(this,arguments)}function pn(A){return co(A,k=>{if(!k)throw Pt.create("installation-not-found");return cn(k)})}function cn(A){return function Fn(A){return 1===A.registrationStatus&&A.registrationTime+xe<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Ai(){return(Ai=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:k},B){const X=function En(A,{fid:k}){return`${Vn(A)}/${k}/authTokens:generate`}(A,B),me=function Rr(A,{refreshToken:k}){const B=ar(A);return B.append("Authorization",function nl(A){return`${Ke} ${A}`}(k)),B}(A,B),ye=k.getImmediate({optional:!0});if(ye){const Jt=yield ye.getHeartbeatsHeader();Jt&&me.append("x-firebase-client",Jt)}const Dt={method:"POST",headers:me,body:JSON.stringify({installation:{sdkVersion:ze,appId:A.appId}})},Tt=yield ir(()=>fetch(X,Dt));if(Tt.ok)return ri(yield Tt.json());throw yield _i("Generate Auth Token",Tt)})).apply(this,arguments)}function Er(A){return ua.apply(this,arguments)}function ua(){return ua=(0,W.Z)(function*(A,k=!1){let B;const X=yield co(A.appConfig,ye=>{if(!Nn(ye))throw Pt.create("not-registered");const Ve=ye.authToken;if(!k&&function on(A){return 2===A.requestStatus&&!function pi(A){const k=Date.now();return k<A.creationTime||A.creationTime+A.expiresIn<k+Je}(A)}(Ve))return ye;if(1===Ve.requestStatus)return B=function He(A,k){return Me.apply(this,arguments)}(A,k),ye;{if(!navigator.onLine)throw Pt.create("app-offline");const Dt=function Xn(A){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:k})}(ye);return B=function Kt(A,k){return wn.apply(this,arguments)}(A,Dt),Dt}});return B?yield B:X.authToken}),ua.apply(this,arguments)}function Me(){return(Me=(0,W.Z)(function*(A,k){let B=yield ht(A.appConfig);for(;1===B.authToken.requestStatus;)yield Ki(100),B=yield ht(A.appConfig);const X=B.authToken;return 0===X.requestStatus?Er(A,k):X})).apply(this,arguments)}function ht(A){return co(A,k=>{if(!Nn(k))throw Pt.create("not-registered");return function uo(A){return 1===A.requestStatus&&A.requestTime+xe<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function wn(){return wn=(0,W.Z)(function*(A,k){try{const B=yield function _n(A,k){return Ai.apply(this,arguments)}(A,k),X=Object.assign(Object.assign({},k),{authToken:B});return yield Ji(A.appConfig,X),B}catch(B){if(!rn(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const X=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Ji(A.appConfig,X)}else yield cr(A.appConfig);throw B}}),wn.apply(this,arguments)}function Nn(A){return void 0!==A&&2===A.registrationStatus}function Fl(){return(Fl=(0,W.Z)(function*(A){const k=A,{installationEntry:B,registrationPromise:X}=yield le(k);return X?X.catch(console.error):Er(k).catch(console.error),B.fid})).apply(this,arguments)}function da(){return da=(0,W.Z)(function*(A,k=!1){const B=A;return yield function Dr(A){return xt.apply(this,arguments)}(B),(yield Er(B,k)).token}),da.apply(this,arguments)}function xt(){return(xt=(0,W.Z)(function*(A){const{registrationPromise:k}=yield le(A);k&&(yield k)})).apply(this,arguments)}function si(A){return Pt.create("missing-app-config-values",{valueName:A})}const On="installations",hs=A=>{const k=A.getProvider("app").getImmediate(),B=function Fi(A){if(!A||!A.options)throw si("App Configuration");if(!A.name)throw si("App Name");const k=["projectId","apiKey","appId"];for(const B of k)if(!A.options[B])throw si(B);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(k);return{app:k,appConfig:B,heartbeatServiceProvider:(0,Te._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},ka=A=>{const k=A.getProvider("app").getImmediate(),B=(0,Te._getProvider)(k,On).getImmediate();return{getId:()=>function Nr(A){return Fl.apply(this,arguments)}(B),getToken:me=>function wc(A){return da.apply(this,arguments)}(B,me)}};(function Fo(){(0,Te._registerComponent)(new Ee.wA(On,hs,"PUBLIC")),(0,Te._registerComponent)(new Ee.wA("installations-internal",ka,"PRIVATE"))})(),(0,Te.registerVersion)(Cn,Fe),(0,Te.registerVersion)(Cn,Fe,"esm2017");const Yn="@firebase/remote-config",_r=new Oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ho{constructor(k,B,X,me){this.client=k,this.storage=B,this.storageCache=X,this.logger=me}isCachedDataFresh(k,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const X=Date.now()-B,me=X<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${X}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${me}.`),me}fetch(k){var B=this;return(0,W.Z)(function*(){const[X,me]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(me&&B.isCachedDataFresh(k.cacheMaxAgeMillis,X))return me;k.eTag=me&&me.eTag;const ye=yield B.client.fetch(k),Ve=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ye.status&&Ve.push(B.storage.setLastSuccessfulFetchResponse(ye)),yield Promise.all(Ve),ye})()}}function Na(A=navigator){return A.languages&&A.languages[0]||A.language}class Xd{constructor(k,B,X,me,ye,Ve){this.firebaseInstallations=k,this.sdkVersion=B,this.namespace=X,this.projectId=me,this.apiKey=ye,this.appId=Ve}fetch(k){var B=this;return(0,W.Z)(function*(){const[X,me]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),Ve=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Tt={sdk_version:B.sdkVersion,app_instance_id:X,app_instance_id_token:me,app_id:B.appId,language_code:Na()},Jt={method:"POST",headers:Dt,body:JSON.stringify(Tt)},Sn=fetch(Ve,Jt),Dn=new Promise((Os,Zo)=>{k.signal.addEventListener(()=>{const Dh=new Error("The operation was aborted.");Dh.name="AbortError",Zo(Dh)})});let br;try{yield Promise.race([Sn,Dn]),br=yield Sn}catch(Os){let Zo="fetch-client-network";throw"AbortError"===Os?.name&&(Zo="fetch-timeout"),_r.create(Zo,{originalErrorMessage:Os?.message})}let fn=br.status;const ya=br.headers.get("ETag")||void 0;let If,Xs;if(200===br.status){let Os;try{Os=yield br.json()}catch(Zo){throw _r.create("fetch-client-parse",{originalErrorMessage:Zo?.message})}If=Os.entries,Xs=Os.state}if("INSTANCE_STATE_UNSPECIFIED"===Xs?fn=500:"NO_CHANGE"===Xs?fn=304:("NO_TEMPLATE"===Xs||"EMPTY_CONFIG"===Xs)&&(If={}),304!==fn&&200!==fn)throw _r.create("fetch-status",{httpStatus:fn});return{status:fn,eTag:ya,config:If}})()}}class Xu{constructor(k,B){this.client=k,this.storage=B}fetch(k){var B=this;return(0,W.Z)(function*(){const X=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(k,X)})()}attemptFetch(k,{throttleEndTimeMillis:B,backoffCount:X}){var me=this;return(0,W.Z)(function*(){yield function Ju(A,k){return new Promise((B,X)=>{const me=Math.max(k-Date.now(),0),ye=setTimeout(B,me);A.addEventListener(()=>{clearTimeout(ye),X(_r.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,B);try{const ye=yield me.client.fetch(k);return yield me.storage.deleteThrottleMetadata(),ye}catch(ye){if(!function Dp(A){if(!(A instanceof Oe.ZR&&A.customData))return!1;const k=Number(A.customData.httpStatus);return 429===k||500===k||503===k||504===k}(ye))throw ye;const Ve={throttleEndTimeMillis:Date.now()+(0,Oe.$s)(X),backoffCount:X+1};return yield me.storage.setThrottleMetadata(Ve),me.attemptFetch(k,Ve)}})()}}class th{constructor(k,B,X,me,ye){this.app=k,this._client=B,this._storageCache=X,this._storage=me,this._logger=ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Un(A,k){const B=A.target.error||void 0;return _r.create(k,{originalErrorMessage:B&&B?.message})}const As="app_namespace_store";class ih{constructor(k,B,X,me=function nh(){return new Promise((A,k)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=X=>{k(Un(X,"storage-open"))},B.onsuccess=X=>{A(X.target.result)},B.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(As,{keyPath:"compositeKey"})}}catch(B){k(_r.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=k,this.appName=B,this.namespace=X,this.openDbPromise=me}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var B=this;return(0,W.Z)(function*(){const X=yield B.openDbPromise;return new Promise((me,ye)=>{const Dt=X.transaction([As],"readonly").objectStore(As),Tt=B.createCompositeKey(k);try{const Jt=Dt.get(Tt);Jt.onerror=Sn=>{ye(Un(Sn,"storage-get"))},Jt.onsuccess=Sn=>{const Dn=Sn.target.result;me(Dn?Dn.value:void 0)}}catch(Jt){ye(_r.create("storage-get",{originalErrorMessage:Jt?.message}))}})})()}set(k,B){var X=this;return(0,W.Z)(function*(){const me=yield X.openDbPromise;return new Promise((ye,Ve)=>{const Tt=me.transaction([As],"readwrite").objectStore(As),Jt=X.createCompositeKey(k);try{const Sn=Tt.put({compositeKey:Jt,value:B});Sn.onerror=Dn=>{Ve(Un(Dn,"storage-set"))},Sn.onsuccess=()=>{ye()}}catch(Sn){Ve(_r.create("storage-set",{originalErrorMessage:Sn?.message}))}})})()}delete(k){var B=this;return(0,W.Z)(function*(){const X=yield B.openDbPromise;return new Promise((me,ye)=>{const Dt=X.transaction([As],"readwrite").objectStore(As),Tt=B.createCompositeKey(k);try{const Jt=Dt.delete(Tt);Jt.onerror=Sn=>{ye(Un(Sn,"storage-delete"))},Jt.onsuccess=()=>{me()}}catch(Jt){ye(_r.create("storage-delete",{originalErrorMessage:Jt?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class ha{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,W.Z)(function*(){const B=k.storage.getLastFetchStatus(),X=k.storage.getLastSuccessfulFetchTimestampMillis(),me=k.storage.getActiveConfig(),ye=yield B;ye&&(k.lastFetchStatus=ye);const Ve=yield X;Ve&&(k.lastSuccessfulFetchTimestampMillis=Ve);const Dt=yield me;Dt&&(k.activeConfig=Dt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function oh(){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,W.Z)(function*(){if(!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch{return!1}})).apply(this,arguments)}!function ol(){(0,Te._registerComponent)(new Ee.wA("remote-config",function A(k,{instanceIdentifier:B}){const X=k.getProvider("app").getImmediate(),me=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw _r.create("registration-window");if(!(0,Oe.hl)())throw _r.create("indexed-db-unavailable");const{projectId:ye,apiKey:Ve,appId:Dt}=X.options;if(!ye)throw _r.create("registration-project-id");if(!Ve)throw _r.create("registration-api-key");if(!Dt)throw _r.create("registration-app-id");const Tt=new ih(Dt,X.name,B=B||"firebase"),Jt=new ha(Tt),Sn=new $e.Yd(Yn);Sn.logLevel=$e.in.ERROR;const Dn=new Xd(me,Te.SDK_VERSION,B,ye,Ve,Dt),br=new Xu(Dn,Tt),fn=new ho(br,Tt,Jt,Sn),ya=new th(X,fn,Jt,Tt,Sn);return function an(A){const k=(0,Oe.m9)(A);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ya),ya},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Yn,"0.4.4"),(0,Te.registerVersion)(Yn,"0.4.4","esm2017")}();const uf=(A,k)=>k.some(B=>A instanceof B);let Jr,ed;const sl=new WeakMap,La=new WeakMap,Ui=new WeakMap,Tc=new WeakMap,Ec=new WeakMap;let ll={get(A,k,B){if(A instanceof IDBTransaction){if("done"===k)return La.get(A);if("objectStoreNames"===k)return A.objectStoreNames||Ui.get(A);if("store"===k)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return fo(A[k])},set:(A,k,B)=>(A[k]=B,!0),has:(A,k)=>A instanceof IDBTransaction&&("done"===k||"store"===k)||k in A};function Dc(A){return"function"==typeof A?function df(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fa(){return ed||(ed=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...k){return A.apply(dr(this),k),fo(sl.get(this))}:function(...k){return fo(A.apply(dr(this),k))}:function(k,...B){const X=A.call(dr(this),k,...B);return Ui.set(X,k.sort?k.sort():[k]),fo(X)}}(A):(A instanceof IDBTransaction&&function al(A){if(La.has(A))return;const k=new Promise((B,X)=>{const me=()=>{A.removeEventListener("complete",ye),A.removeEventListener("error",Ve),A.removeEventListener("abort",Ve)},ye=()=>{B(),me()},Ve=()=>{X(A.error||new DOMException("AbortError","AbortError")),me()};A.addEventListener("complete",ye),A.addEventListener("error",Ve),A.addEventListener("abort",Ve)});La.set(A,k)}(A),uf(A,function Cc(){return Jr||(Jr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,ll):A)}function fo(A){if(A instanceof IDBRequest)return function vr(A){const k=new Promise((B,X)=>{const me=()=>{A.removeEventListener("success",ye),A.removeEventListener("error",Ve)},ye=()=>{B(fo(A.result)),me()},Ve=()=>{X(A.error),me()};A.addEventListener("success",ye),A.addEventListener("error",Ve)});return k.then(B=>{B instanceof IDBCursor&&sl.set(B,A)}).catch(()=>{}),Ec.set(k,A),k}(A);if(Tc.has(A))return Tc.get(A);const k=Dc(A);return k!==A&&(Tc.set(A,k),Ec.set(k,A)),k}const dr=A=>Ec.get(A);function Ss(A,k,{blocked:B,upgrade:X,blocking:me,terminated:ye}={}){const Ve=indexedDB.open(A,k),Dt=fo(Ve);return X&&Ve.addEventListener("upgradeneeded",Tt=>{X(fo(Ve.result),Tt.oldVersion,Tt.newVersion,fo(Ve.transaction))}),B&&Ve.addEventListener("blocked",()=>B()),Dt.then(Tt=>{ye&&Tt.addEventListener("close",()=>ye()),me&&Tt.addEventListener("versionchange",()=>me())}).catch(()=>{}),Dt}function Fa(A,{blocked:k}={}){const B=indexedDB.deleteDatabase(A);return k&&B.addEventListener("blocked",()=>k()),fo(B).then(()=>{})}const Vl=["get","getKey","getAll","getAllKeys","count"],yr=["put","add","delete","clear"],Zl=new Map;function cl(A,k){if(!(A instanceof IDBDatabase)||k in A||"string"!=typeof k)return;if(Zl.get(k))return Zl.get(k);const B=k.replace(/FromIndex$/,""),X=k!==B,me=yr.includes(B);if(!(B in(X?IDBIndex:IDBObjectStore).prototype)||!me&&!Vl.includes(B))return;const ye=function(){var Ve=(0,W.Z)(function*(Dt,...Tt){const Jt=this.transaction(Dt,me?"readwrite":"readonly");let Sn=Jt.store;return X&&(Sn=Sn.index(Tt.shift())),(yield Promise.all([Sn[B](...Tt),me&&Jt.done]))[0]});return function(Tt){return Ve.apply(this,arguments)}}();return Zl.set(k,ye),ye}!function Ar(A){ll=A(ll)}(A=>({...A,get:(k,B,X)=>cl(k,B)||A.get(k,B,X),has:(k,B)=>!!cl(k,B)||A.has(k,B)}));const An="/firebase-messaging-sw.js",zl="/firebase-cloud-messaging-push-scope",td="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nd="https://fcmregistrations.googleapis.com/v1",id="google.c.a.c_id",fu="google.c.a.c_l",sh="google.c.a.ts",fs="google.c.a.e";var qe=(()=>{return(A=qe||(qe={})).PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",qe;var A})();function hn(A){const k=new Uint8Array(A);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rd(A){const B=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),X=atob(B),me=new Uint8Array(X.length);for(let ye=0;ye<X.length;++ye)me[ye]=X.charCodeAt(ye);return me}const Hs="fcm_token_details_db",hr=5,Hl="fcm_token_object_Store";function Io(){return Io=(0,W.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ye=>ye.name).includes(Hs))return null;let k=null;return(yield Ss(Hs,hr,{upgrade:(X=(0,W.Z)(function*(me,ye,Ve,Dt){var Tt;if(ye<2||!me.objectStoreNames.contains(Hl))return;const Jt=Dt.objectStore(Hl),Sn=yield Jt.index("fcmSenderId").get(A);if(yield Jt.clear(),Sn)if(2===ye){const Dn=Sn;if(!Dn.auth||!Dn.p256dh||!Dn.endpoint)return;k={token:Dn.fcmToken,createTime:null!==(Tt=Dn.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Dn.auth,p256dh:Dn.p256dh,endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:"string"==typeof Dn.vapidKey?Dn.vapidKey:hn(Dn.vapidKey)}}}else if(3===ye){const Dn=Sn;k={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:hn(Dn.auth),p256dh:hn(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:hn(Dn.vapidKey)}}}else if(4===ye){const Dn=Sn;k={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:hn(Dn.auth),p256dh:hn(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:hn(Dn.vapidKey)}}}}),function(ye,Ve,Dt,Tt){return X.apply(this,arguments)})})).close(),yield Fa(Hs),yield Fa("fcm_vapid_details_db"),yield Fa("undefined"),function pu(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:k}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}(k)?k:null;var X}),Io.apply(this,arguments)}const pa="firebase-messaging-database",Ac=1,Ua="firebase-messaging-store";let Ba=null;function Xr(){return Ba||(Ba=Ss(pa,Ac,{upgrade:(A,k)=>{0===k&&A.createObjectStore(Ua)}})),Ba}function or(A){return Va.apply(this,arguments)}function Va(){return Va=(0,W.Z)(function*(A){const k=od(A),X=yield(yield Xr()).transaction(Ua).objectStore(Ua).get(k);if(X)return X;{const me=yield function ul(A){return Io.apply(this,arguments)}(A.appConfig.senderId);if(me)return yield Vo(A,me),me}}),Va.apply(this,arguments)}function Vo(A,k){return qs.apply(this,arguments)}function qs(){return(qs=(0,W.Z)(function*(A,k){const B=od(A),me=(yield Xr()).transaction(Ua,"readwrite");return yield me.objectStore(Ua).put(k,B),yield me.done,k})).apply(this,arguments)}function Ws(){return(Ws=(0,W.Z)(function*(A){const k=od(A),X=(yield Xr()).transaction(Ua,"readwrite");yield X.objectStore(Ua).delete(k),yield X.done})).apply(this,arguments)}function od({appConfig:A}){return A.appId}const qi=new Oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ql(A,k){return Za.apply(this,arguments)}function Za(){return(Za=(0,W.Z)(function*(A,k){const B=yield za(A),X=Ic(k),me={method:"POST",headers:B,body:JSON.stringify(X)};let ye;try{ye=yield(yield fetch(sd(A.appConfig),me)).json()}catch(Ve){throw qi.create("token-subscribe-failed",{errorInfo:Ve?.toString()})}if(ye.error)throw qi.create("token-subscribe-failed",{errorInfo:ye.error.message});if(!ye.token)throw qi.create("token-subscribe-no-token");return ye.token})).apply(this,arguments)}function hl(){return(hl=(0,W.Z)(function*(A,k){const B=yield za(A),X=Ic(k.subscriptionOptions),me={method:"PATCH",headers:B,body:JSON.stringify(X)};let ye;try{ye=yield(yield fetch(`${sd(A.appConfig)}/${k.token}`,me)).json()}catch(Ve){throw qi.create("token-update-failed",{errorInfo:Ve?.toString()})}if(ye.error)throw qi.create("token-update-failed",{errorInfo:ye.error.message});if(!ye.token)throw qi.create("token-update-no-token");return ye.token})).apply(this,arguments)}function gu(A,k){return fl.apply(this,arguments)}function fl(){return(fl=(0,W.Z)(function*(A,k){const X={method:"DELETE",headers:yield za(A)};try{const ye=yield(yield fetch(`${sd(A.appConfig)}/${k}`,X)).json();if(ye.error)throw qi.create("token-unsubscribe-failed",{errorInfo:ye.error.message})}catch(me){throw qi.create("token-unsubscribe-failed",{errorInfo:me?.toString()})}})).apply(this,arguments)}function sd({projectId:A}){return`${nd}/projects/${A}/registrations`}function za(A){return ad.apply(this,arguments)}function ad(){return(ad=(0,W.Z)(function*({appConfig:A,installations:k}){const B=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function Ic({p256dh:A,auth:k,endpoint:B,vapidKey:X}){const me={web:{endpoint:B,auth:k,p256dh:A}};return X!==td&&(me.web.applicationPubKey=X),me}const lh=6048e5;function ch(){return ch=(0,W.Z)(function*(A){const k=yield function xp(A,k){return Wl.apply(this,arguments)}(A.swRegistration,A.vapidKey),B={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:k.endpoint,auth:hn(k.getKey("auth")),p256dh:hn(k.getKey("p256dh"))},X=yield or(A.firebaseDependencies);if(X){if(function Ap(A,k){return k.vapidKey===A.vapidKey&&k.endpoint===A.endpoint&&k.auth===A.auth&&k.p256dh===A.p256dh}(X.subscriptionOptions,B))return Date.now()>=X.createTime+lh?function ji(A,k){return Sc.apply(this,arguments)}(A,{token:X.token,createTime:Date.now(),subscriptionOptions:B}):X.token;try{yield gu(A.firebaseDependencies,X.token)}catch(me){console.warn(me)}return jl(A.firebaseDependencies,B)}return jl(A.firebaseDependencies,B)}),ch.apply(this,arguments)}function es(){return es=(0,W.Z)(function*(A){const k=yield or(A.firebaseDependencies);k&&(yield gu(A.firebaseDependencies,k.token),yield function js(A){return Ws.apply(this,arguments)}(A.firebaseDependencies));const B=yield A.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()}),es.apply(this,arguments)}function Sc(){return Sc=(0,W.Z)(function*(A,k){try{const B=yield function dl(A,k){return hl.apply(this,arguments)}(A.firebaseDependencies,k),X=Object.assign(Object.assign({},k),{token:B,createTime:Date.now()});return yield Vo(A.firebaseDependencies,X),B}catch(B){throw yield function Bi(A){return es.apply(this,arguments)}(A),B}}),Sc.apply(this,arguments)}function jl(A,k){return _u.apply(this,arguments)}function _u(){return(_u=(0,W.Z)(function*(A,k){const X={token:yield ql(A,k),createTime:Date.now(),subscriptionOptions:k};return yield Vo(A,X),X.token})).apply(this,arguments)}function Wl(){return(Wl=(0,W.Z)(function*(A,k){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rd(k)})})).apply(this,arguments)}function ga(A){const k={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function vu(A,k){if(!k.notification)return;A.notification={};const B=k.notification.title;B&&(A.notification.title=B);const X=k.notification.body;X&&(A.notification.body=X);const me=k.notification.image;me&&(A.notification.image=me);const ye=k.notification.icon;ye&&(A.notification.icon=ye)}(k,A),function ld(A,k){k.data&&(A.data=k.data)}(k,A),function uh(A,k){var B,X,me,ye,Ve;if(!(k.fcmOptions||null!==(B=k.notification)&&void 0!==B&&B.click_action))return;A.fcmOptions={};const Dt=null!==(me=null===(X=k.fcmOptions)||void 0===X?void 0:X.link)&&void 0!==me?me:null===(ye=k.notification)||void 0===ye?void 0:ye.click_action;Dt&&(A.fcmOptions.link=Dt);const Tt=null===(Ve=k.fcmOptions)||void 0===Ve?void 0:Ve.analytics_label;Tt&&(A.fcmOptions.analyticsLabel=Tt)}(k,A),k}function pl(A,k){const B=[];for(let X=0;X<A.length;X++)B.push(A.charAt(X)),X<k.length&&B.push(k.charAt(X));return B.join("")}function ts(A){return qi.create("missing-app-config-values",{valueName:A})}pl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ip{constructor(k,B,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const me=function $l(A){if(!A||!A.options)throw ts("App Configuration Object");if(!A.name)throw ts("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:B}=A;for(const X of k)if(!B[X])throw ts(X);return{appName:A.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:me,installations:B,analyticsProvider:X}}_delete(){return Promise.resolve()}}function yu(A){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,W.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(An,{scope:zl}),A.swRegistration.update().catch(()=>{})}catch(k){throw qi.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function $s(){return($s=(0,W.Z)(function*(A,k){if(!k&&!A.swRegistration&&(yield yu(A)),k||!A.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw qi.create("invalid-sw-registration");A.swRegistration=k}})).apply(this,arguments)}function Gl(){return(Gl=(0,W.Z)(function*(A,k){k?A.vapidKey=k:A.vapidKey||(A.vapidKey=td)})).apply(this,arguments)}function gl(){return gl=(0,W.Z)(function*(A,k){if(!navigator)throw qi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qi.create("permission-blocked");return yield function ud(A,k){return Gl.apply(this,arguments)}(A,k?.vapidKey),yield function cd(A,k){return $s.apply(this,arguments)}(A,k?.serviceWorkerRegistration),function mu(A){return ch.apply(this,arguments)}(A)}),gl.apply(this,arguments)}function ma(){return(ma=(0,W.Z)(function*(A,k,B){const X=function ml(A){switch(A){case qe.NOTIFICATION_CLICKED:return"notification_open";case qe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(k);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(X,{message_id:B[id],message_name:B[fu],message_time:B[sh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qa(){return qa=(0,W.Z)(function*(A,k){const B=k.data;if(!B.isFirebaseMessaging)return;A.onMessageHandler&&B.messageType===qe.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(ga(B)):A.onMessageHandler.next(ga(B)));const X=B.data;(function ps(A){return"object"==typeof A&&!!A&&id in A})(X)&&"1"===X[fs]&&(yield function dd(A,k,B){return ma.apply(this,arguments)}(A,B.messageType,X))}),qa.apply(this,arguments)}const Yl="@firebase/messaging",f="0.12.4",m=A=>{const k=new Ip(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function _l(A,k){return qa.apply(this,arguments)}(k,B)),k},T=A=>{const k=A.getProvider("messaging").getImmediate();return{getToken:X=>function Mc(A,k){return gl.apply(this,arguments)}(k,X)}};function N(){return H.apply(this,arguments)}function H(){return(H=(0,W.Z)(function*(){try{yield(0,Oe.eu)()}catch{return!1}return typeof window<"u"&&(0,Oe.hl)()&&(0,Oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function M(){(0,Te._registerComponent)(new Ee.wA("messaging",m,"PUBLIC")),(0,Te._registerComponent)(new Ee.wA("messaging-internal",T,"PRIVATE")),(0,Te.registerVersion)(Yl,f),(0,Te.registerVersion)(Yl,f,"esm2017")}();const Vi="analytics",So="firebase_id",Mo="origin",Gs=6e4,dh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wu="https://www.googletagmanager.com/gtag/js",Ir=new $e.Yd("@firebase/analytics"),er=new Oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function hh(A){if(!A.startsWith(wu)){const k=er.create("invalid-gtag-resource",{gtagURL:A});return Ir.warn(k.message),""}return A}function Si(A){return Promise.all(A.map(k=>k.catch(B=>B)))}function Ys(){return(Ys=(0,W.Z)(function*(A,k,B,X,me,ye){const Ve=X[me];try{if(Ve)yield k[Ve];else{const Tt=(yield Si(B)).find(Jt=>Jt.measurementId===me);Tt&&(yield k[Tt.appId])}}catch(Dt){Ir.error(Dt)}A("config",me,ye)})).apply(this,arguments)}function wl(){return(wl=(0,W.Z)(function*(A,k,B,X,me){try{let ye=[];if(me&&me.send_to){let Ve=me.send_to;Array.isArray(Ve)||(Ve=[Ve]);const Dt=yield Si(B);for(const Tt of Ve){const Jt=Dt.find(Dn=>Dn.measurementId===Tt),Sn=Jt&&k[Jt.appId];if(!Sn){ye=[];break}ye.push(Sn)}}0===ye.length&&(ye=Object.values(k)),yield Promise.all(ye),A("event",X,me||{})}catch(ye){Ir.error(ye)}})).apply(this,arguments)}const ph=30,Oc=new class Sp{constructor(k={},B=1e3){this.throttleMetadata=k,this.intervalMillis=B}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,B){this.throttleMetadata[k]=B}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function gh(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function di(){return(di=(0,W.Z)(function*(A){var k;const{appId:B,apiKey:X}=A,me={method:"GET",headers:gh(X)},ye=dh.replace("{app-id}",B),Ve=yield fetch(ye,me);if(200!==Ve.status&&304!==Ve.status){let Dt="";try{const Tt=yield Ve.json();null!==(k=Tt.error)&&void 0!==k&&k.message&&(Dt=Tt.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:Ve.status,responseMessage:Dt})}return Ve.json()})).apply(this,arguments)}function pf(){return(pf=(0,W.Z)(function*(A,k=Oc,B){const{appId:X,apiKey:me,measurementId:ye}=A.options;if(!X)throw er.create("no-app-id");if(!me){if(ye)return{measurementId:ye,appId:X};throw er.create("no-api-key")}const Ve=k.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dt=new xw;return setTimeout((0,W.Z)(function*(){Dt.abort()}),void 0!==B?B:Gs),mh({appId:X,apiKey:me,measurementId:ye},Ve,Dt,k)})).apply(this,arguments)}function mh(A,k,B){return _h.apply(this,arguments)}function _h(){return _h=(0,W.Z)(function*(A,{throttleEndTimeMillis:k,backoffCount:B},X,me=Oc){var ye;const{appId:Ve,measurementId:Dt}=A;try{yield function wm(A,k){return new Promise((B,X)=>{const me=Math.max(k-Date.now(),0),ye=setTimeout(B,me);A.addEventListener(()=>{clearTimeout(ye),X(er.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(X,k)}catch(Tt){if(Dt)return Ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:Ve,measurementId:Dt};throw Tt}try{const Tt=yield function Mp(A){return di.apply(this,arguments)}(A);return me.deleteThrottleMetadata(Ve),Tt}catch(Tt){const Jt=Tt;if(!function Dw(A){if(!(A instanceof Oe.ZR&&A.customData))return!1;const k=Number(A.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Jt)){if(me.deleteThrottleMetadata(Ve),Dt)return Ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Jt?.message}]`),{appId:Ve,measurementId:Dt};throw Tt}const Sn=503===Number(null===(ye=Jt?.customData)||void 0===ye?void 0:ye.httpStatus)?(0,Oe.$s)(B,me.intervalMillis,ph):(0,Oe.$s)(B,me.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+Sn,backoffCount:B+1};return me.setThrottleMetadata(Ve,Dn),Ir.debug(`Calling attemptFetch again in ${Sn} millis`),mh(A,Dn,X,me)}}),_h.apply(this,arguments)}class xw{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let Rc,_f;function bm(){return(bm=(0,W.Z)(function*(A,k,B,X,me){if(me&&me.global)A("event",B,X);else{const ye=yield k;A("event",B,Object.assign(Object.assign({},X),{send_to:ye}))}})).apply(this,arguments)}function ai(){return(ai=(0,W.Z)(function*(){if(!(0,Oe.hl)())return Ir.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Oe.eu)()}catch(A){return Ir.warn(er.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ht(){return Ht=(0,W.Z)(function*(A,k,B,X,me,ye,Ve){var Dt;const Tt=function ff(A){return pf.apply(this,arguments)}(A);Tt.then(fn=>{B[fn.measurementId]=fn.appId,A.options.measurementId&&fn.measurementId!==A.options.measurementId&&Ir.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${fn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fn=>Ir.error(fn)),k.push(Tt);const Jt=function Ks(){return ai.apply(this,arguments)}().then(fn=>{if(fn)return X.getId()}),[Sn,Dn]=yield Promise.all([Tt,Jt]);(function kc(A){const k=window.document.getElementsByTagName("script");for(const B of Object.values(k))if(B.src&&B.src.includes(wu)&&B.src.includes(A))return B;return null})(ye)||function Kl(A,k){const B=function yl(A,k){let B;return window.trustedTypes&&(B=window.trustedTypes.createPolicy(A,k)),B}("firebase-js-sdk-policy",{createScriptURL:hh}),X=document.createElement("script"),me=`${wu}?l=${A}&id=${k}`;X.src=B?B?.createScriptURL(me):me,X.async=!0,document.head.appendChild(X)}(ye,Sn.measurementId),_f&&(me("consent","default",_f),function wh(A){_f=A}(void 0)),me("js",new Date);const br=null!==(Dt=Ve?.config)&&void 0!==Dt?Dt:{};return br[Mo]="firebase",br.update=!0,null!=Dn&&(br[So]=Dn),me("config",Sn.measurementId,br),Rc&&(me("set",Rc),function vf(A){Rc=A}(void 0)),Sn.measurementId}),Ht.apply(this,arguments)}class ns{constructor(k){this.app=k}_delete(){return delete wr[this.app.options.appId],Promise.resolve()}}let wr={},kp=[];const md={};let Op,Js,Ti="dataLayer",yf="gtag",Jl=!1;function Xl(A,k,B){!function Nc(){const A=[];if((0,Oe.ru)()&&A.push("This is a browser extension environment."),(0,Oe.zI)()||A.push("Cookies are not available."),A.length>0){const k=A.map((X,me)=>`(${me+1}) ${X}`).join(" "),B=er.create("invalid-analytics-context",{errorInfo:k});Ir.warn(B.message)}}();const X=A.options.appId;if(!X)throw er.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw er.create("no-api-key");Ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wr[X])throw er.create("already-exists",{id:X});if(!Jl){!function hd(A){let k=[];Array.isArray(window[A])?k=window[A]:window[A]=k}(Ti);const{wrappedGtag:ye,gtagCore:Ve}=function Pc(A,k,B,X,me){let ye=function(...Ve){window[X].push(arguments)};return window[me]&&"function"==typeof window[me]&&(ye=window[me]),window[me]=function pd(A,k,B,X){function ye(){return ye=(0,W.Z)(function*(Ve,...Dt){try{if("event"===Ve){const[Tt,Jt]=Dt;yield function fh(A,k,B,X,me){return wl.apply(this,arguments)}(A,k,B,Tt,Jt)}else if("config"===Ve){const[Tt,Jt]=Dt;yield function fd(A,k,B,X,me,ye){return Ys.apply(this,arguments)}(A,k,B,X,Tt,Jt)}else if("consent"===Ve){const[Tt]=Dt;A("consent","update",Tt)}else if("get"===Ve){const[Tt,Jt,Sn]=Dt;A("get",Tt,Jt,Sn)}else if("set"===Ve){const[Tt]=Dt;A("set",Tt)}else A(Ve,...Dt)}catch(Tt){Ir.error(Tt)}}),ye.apply(this,arguments)}return function me(Ve){return ye.apply(this,arguments)}}(ye,A,k,B),{gtagCore:ye,wrappedGtag:window[me]}}(wr,kp,md,Ti,yf);Js=ye,Op=Ve,Jl=!0}return wr[X]=function Qs(A,k,B,X,me,ye,Ve){return Ht.apply(this,arguments)}(A,kp,md,k,Op,Ti,B),new ns(A)}function Rp(){return gs.apply(this,arguments)}function gs(){return(gs=(0,W.Z)(function*(){if((0,Oe.ru)()||!(0,Oe.zI)()||!(0,Oe.hl)())return!1;try{return yield(0,Oe.eu)()}catch{return!1}})).apply(this,arguments)}const bl="@firebase/analytics";!function Cf(){(0,Te._registerComponent)(new Ee.wA(Vi,(k,{options:B})=>Xl(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,Te._registerComponent)(new Ee.wA("analytics-internal",function A(k){try{const B=k.getProvider(Vi).getImmediate();return{logEvent:(X,me,ye)=>function Cm(A,k,B,X){A=(0,Oe.m9)(A),function Aw(A,k,B,X,me){return bm.apply(this,arguments)}(Js,wr[A.app.options.appId],k,B,X).catch(me=>Ir.error(me))}(B,X,me,ye)}}catch(B){throw er.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,Te.registerVersion)(bl,"0.10.0"),(0,Te.registerVersion)(bl,"0.10.0","esm2017")}();var Cu=z(4408),Ps=z(7565);const Sr=new class Tf extends Ps.v{}(class ec extends Cu.o{constructor(k,B){super(k,B),this.scheduler=k,this.work=B}schedule(k,B=0){return B>0?super.schedule(k,B):(this.delay=B,this.state=k,this.scheduler.flush(this),this)}execute(k,B){return B>0||this.closed?super.execute(k,B):this._execute(k,B)}requestAsyncId(k,B,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(k,B,X):(k.flush(this),0)}});var Lp=z(4986),Mi=z(9751),Fc=z(8505),_a=z(5363),is=z(9468);const Lr=new o.GfV("7.6.1"),bd="__angularfire_symbol__analyticsIsSupportedValue",Eh="__angularfire_symbol__analyticsIsSupported",Tu="__angularfire_symbol__remoteConfigIsSupportedValue",va="__angularfire_symbol__remoteConfigIsSupported",Cl="__angularfire_symbol__messagingIsSupportedValue",Fr="__angularfire_symbol__messagingIsSupported";function Du(A,k,B){if(k){if(1===k.length)return k[0];const ye=k.filter(Ve=>Ve.app===B);if(1===ye.length)return ye[0]}return B.container.getProvider(A).getImmediate({optional:!0})}globalThis[Eh]||(globalThis[Eh]=Rp().then(A=>globalThis[bd]=A).catch(()=>globalThis[bd]=!1)),globalThis[Fr]||(globalThis[Fr]=N().then(A=>globalThis[Cl]=A).catch(()=>globalThis[Cl]=!1)),globalThis[va]||(globalThis[va]=oh().then(A=>globalThis[Tu]=A).catch(()=>globalThis[Tu]=!1));const Fp=(A,k)=>{const B=k?[k]:(0,ee.C6)(),X=[];return B.forEach(me=>{me.container.getProvider(A).instances.forEach(Ve=>{X.includes(Ve)||X.push(Ve)})}),X};function Uc(){}class xu{constructor(k,B=Sr){this.zone=k,this.delegate=B}now(){return this.delegate.now()}schedule(k,B,X){const me=this.zone;return this.delegate.schedule(function(Ve){me.runGuarded(()=>{k.apply(this,[Ve])})},B,X)}}class bn{constructor(k){this.zone=k,this.task=null}call(k,B){const X=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uc,{},Uc,Uc)),B.pipe((0,Fc.b)({next:X,complete:X,error:X})).subscribe(k).add(X)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tc=(()=>{class A{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new xu(Zone.current)),this.insideAngular=B.run(()=>new xu(Zone.current,Lp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(B){return new(B||A)(o.LFG(o.R0b))},A.\u0275prov=o.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Bc(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function nc(A){return Bc().ngZone.run(()=>A())}function Df(A){return A.pipe((0,_a.Q)(Bc().outsideAngular))}function xf(A){return Bc(),function Up(A){return function(B){return(B=B.lift(new bn(A.ngZone))).pipe((0,is.R)(A.outsideAngular),(0,_a.Q)(A.insideAngular))}}(Bc())(A)}const Af=(A,k)=>function(){const X=arguments;return k&&setTimeout(()=>{"scheduled"===k.state&&k.invoke()},10),nc(()=>A.apply(void 0,X))},Bp=(A,k)=>function(){let B;const X=arguments;for(let ye=0;ye<arguments.length;ye++)"function"==typeof X[ye]&&(k&&(B||(B=nc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uc,{},Uc,Uc)))),X[ye]=Af(X[ye],B));const me=function Au(A){return Bc().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,X));if(!k){if(me instanceof Mi.y){const ye=Bc();return me.pipe((0,is.R)(ye.outsideAngular),(0,_a.Q)(ye.insideAngular))}return nc(()=>me)}return me instanceof Mi.y?me.pipe(xf):me instanceof Promise?nc(()=>new Promise((ye,Ve)=>me.then(Dt=>nc(()=>ye(Dt)),Dt=>nc(()=>Ve(Dt))))):"function"==typeof me&&B?function(){return setTimeout(()=>{B&&"scheduled"===B.state&&B.invoke()},10),me.apply(this,arguments)}:nc(()=>me)}},1389:(Yt,Xe,z)=>{"use strict";z.d(Xe,{$:()=>An,A:()=>fe,D:()=>it,I:()=>Qt,J:()=>hs,L:()=>Bo,N:()=>co,P:()=>Qs,Q:()=>ih,R:()=>yh,U:()=>rh,V:()=>oh,W:()=>Bl,X:()=>zs,Y:()=>Cc,Z:()=>fa,_:()=>Ec,a:()=>ke,a0:()=>td,a1:()=>id,a2:()=>xc,a3:()=>Hl,a4:()=>Io,a5:()=>pa,a6:()=>Ua,a7:()=>Xr,a8:()=>Va,a9:()=>qs,aA:()=>Se,aB:()=>Eh,aC:()=>cr,aD:()=>xo,aE:()=>Fc,aF:()=>yd,aG:()=>vd,aH:()=>oi,aL:()=>sn,aO:()=>Jr,aa:()=>js,ab:()=>od,ac:()=>ah,ad:()=>dl,ae:()=>gu,af:()=>sd,ai:()=>lh,aj:()=>ch,ak:()=>Bi,an:()=>df,ao:()=>vu,aq:()=>Gl,ar:()=>Yl,as:()=>tn,at:()=>cn,au:()=>De,av:()=>nt,aw:()=>Dn,ax:()=>Fr,ay:()=>Fn,az:()=>Qe,b:()=>ce,c:()=>Js,d:()=>Xl,e:()=>bh,f:()=>bl,g:()=>Tf,h:()=>Cu,i:()=>hf,j:()=>Lp,k:()=>Xs,l:()=>gd,m:()=>Dh,o:()=>Zp,p:()=>je,r:()=>Pp,s:()=>Ql,u:()=>Ks});var o=z(5861),ee=z(2090),W=z(6881),Te=z(7582),Oe=z(1877),Ee=z(4859);const je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const it=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Et=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vt=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new Oe.Yd("@firebase/auth");function mt(x,...y){st.logLevel<=Oe.in.ERROR&&st.error(`Auth (${W.SDK_VERSION}): ${x}`,...y)}function nt(x,...y){throw rt(x,...y)}function Qe(x,...y){return rt(x,...y)}function lt(x,y,C){const I=Object.assign(Object.assign({},Et()),{[y]:C});return new ee.LL("auth","Firebase",I).create(y,{appName:x.name})}function vt(x,y,C){if(!(y instanceof C))throw C.name!==y.constructor.name&&nt(x,"argument-error"),lt(x,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rt(x,...y){if("string"!=typeof x){const C=y[0],I=[...y.slice(1)];return I[0]&&(I[0].appName=x.name),x._errorFactory.create(C,...I)}return Vt.create(x,...y)}function Se(x,y,...C){if(!x)throw rt(y,...C)}function Lt(x){const y="INTERNAL ASSERTION FAILED: "+x;throw mt(y),new Error(y)}function tn(x,y){x||Lt(y)}function Zt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function dn(){return"http:"===zt()||"https:"===zt()}function zt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class xe{constructor(y,C){this.shortDelay=y,this.longDelay=C,tn(C>y,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function Cn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dn()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(x,y){tn(x.emulator,"Emulator should always be set here");const{url:C}=x.emulator;return y?`${C}${y.startsWith("/")?y.slice(1):y}`:C}class Ke{static initialize(y,C,I){this.fetchImpl=y,C&&(this.headersImpl=C),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Je=new xe(3e4,6e4);function We(x,y){return x.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:x.tenantId}):y}function gt(x,y,C,I){return ui.apply(this,arguments)}function ui(){return(ui=(0,o.Z)(function*(x,y,C,I,Z={}){return Pt(x,Z,(0,o.Z)(function*(){let $={},we={};I&&("GET"===y?we=I:$={body:JSON.stringify(I)});const Ue=(0,ee.xO)(Object.assign({key:x.config.apiKey},we)).slice(1),yt=yield x._getAdditionalHeaders();return yt["Content-Type"]="application/json",x.languageCode&&(yt["X-Firebase-Locale"]=x.languageCode),Ke.fetch()(_i(x,x.config.apiHost,C,Ue),Object.assign({method:y,headers:yt,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function Pt(x,y,C){return rn.apply(this,arguments)}function rn(){return(rn=(0,o.Z)(function*(x,y,C){x._canInitEmulator=!1;const I=Object.assign(Object.assign({},pt),y);try{const Z=new Or(x),$=yield Promise.race([C(),Z.promise]);Z.clearNetworkTimeout();const we=yield $.json();if("needConfirmation"in we)throw ar(x,"account-exists-with-different-credential",we);if($.ok&&!("errorMessage"in we))return we;{const Ue=$.ok?we.errorMessage:we.error.message,[yt,It]=Ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yt)throw ar(x,"credential-already-in-use",we);if("EMAIL_EXISTS"===yt)throw ar(x,"email-already-in-use",we);if("USER_DISABLED"===yt)throw ar(x,"user-disabled",we);const ln=I[yt]||yt.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw lt(x,ln,It);nt(x,ln)}}catch(Z){if(Z instanceof ee.ZR)throw Z;nt(x,"network-request-failed",{message:String(Z)})}})).apply(this,arguments)}function Vn(x,y,C,I){return ri.apply(this,arguments)}function ri(){return(ri=(0,o.Z)(function*(x,y,C,I,Z={}){const $=yield gt(x,y,C,I,Z);return"mfaPendingCredential"in $&&nt(x,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function _i(x,y,C,I){const Z=`${y}${C}?${I}`;return x.config.emulator?ze(x.config,Z):`${x.config.apiScheme}://${Z}`}class Or{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((C,I)=>{this.timer=setTimeout(()=>I(Qe(this.auth,"network-request-failed")),Je.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ar(x,y,C){const I={appName:x.name};C.email&&(I.email=C.email),C.phoneNumber&&(I.phoneNumber=C.phoneNumber);const Z=Qe(x,y,I);return Z.customData._tokenResponse=C,Z}function ir(){return(ir=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function To(){return(To=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Yi(){return(Yi=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function jt(x){if(x)try{const y=new Date(Number(x));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function lr(){return(lr=(0,o.Z)(function*(x,y=!1){const C=(0,ee.m9)(x),I=yield C.getIdToken(y),Z=Wr(I);Se(Z&&Z.exp&&Z.auth_time&&Z.iat,C.auth,"internal-error");const $="object"==typeof Z.firebase?Z.firebase:void 0,we=$?.sign_in_provider;return{claims:Z,token:I,authTime:jt(lo(Z.auth_time)),issuedAtTime:jt(lo(Z.iat)),expirationTime:jt(lo(Z.exp)),signInProvider:we||null,signInSecondFactor:$?.sign_in_second_factor||null}})).apply(this,arguments)}function lo(x){return 1e3*Number(x)}function Wr(x){const[y,C,I]=x.split(".");if(void 0===y||void 0===C||void 0===I)return mt("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,ee.tV)(C);return Z?JSON.parse(Z):(mt("Failed to decode base64 JWT payload"),null)}catch(Z){return mt("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function Ln(x,y){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,o.Z)(function*(x,y,C=!1){if(C)return y;try{return yield y}catch(I){throw I instanceof ee.ZR&&function xn({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}(I)&&x.auth.currentUser===x&&(yield x.auth.signOut()),I}})).apply(this,arguments)}class Zn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var C;if(y){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const Z=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(y=!1){var C=this;if(!this.isRunning)return;const I=this.getInterval(y);this.timerId=setTimeout((0,o.Z)(function*(){yield C.iteration()}),I)}iteration(){var y=this;return(0,o.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C?.code&&y.schedule(!0))}y.schedule()})()}}class $r{constructor(y,C){this.createdAt=y,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=jt(this.lastLoginAt),this.creationTime=jt(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hi(x){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,o.Z)(function*(x){var y;const C=x.auth,I=yield x.getIdToken(),Z=yield Ln(x,function nl(x,y){return Yi.apply(this,arguments)}(C,{idToken:I}));Se(Z?.users.length,C,"internal-error");const $=Z.users[0];x._notifyReloadListener($);const we=null!==(y=$.providerUserInfo)&&void 0!==y&&y.length?function Ko(x){return x.map(y=>{var{providerId:C}=y,I=(0,Te._T)(y,["providerId"]);return{providerId:C,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}($.providerUserInfo):[],Ue=function kn(x,y){return[...x.filter(I=>!y.some(Z=>Z.providerId===I.providerId)),...y]}(x.providerData,we),ln=!!x.isAnonymous&&!(x.email&&$.passwordHash||Ue?.length),Hn={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Ue,metadata:new $r($.createdAt,$.lastLoginAt),isAnonymous:ln};Object.assign(x,Hn)}),Gr.apply(this,arguments)}function Tr(){return(Tr=(0,o.Z)(function*(x){const y=(0,ee.m9)(x);yield Hi(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Eo(){return(Eo=(0,o.Z)(function*(x,y){const C=yield Pt(x,{},(0,o.Z)(function*(){const I=(0,ee.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:Z,apiKey:$}=x.config,we=_i(x,Z,"/v1/token",`key=${$}`),Ue=yield x._getAdditionalHeaders();return Ue["Content-Type"]="application/x-www-form-urlencoded",Ke.fetch()(we,{method:"POST",headers:Ue,body:I})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class Rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Se(y.idToken,"internal-error"),Se(typeof y.idToken<"u","internal-error"),Se(typeof y.refreshToken<"u","internal-error");const C="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function ti(x){const y=Wr(x);return Se(y,"internal-error"),Se(typeof y.exp<"u","internal-error"),Se(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,C)}getToken(y,C=!1){var I=this;return(0,o.Z)(function*(){return Se(!I.accessToken||I.refreshToken,y,"user-token-expired"),C||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(y,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,C){var I=this;return(0,o.Z)(function*(){const{accessToken:Z,refreshToken:$,expiresIn:we}=yield function zn(x,y){return Eo.apply(this,arguments)}(y,C);I.updateTokensAndExpiration(Z,$,Number(we))})()}updateTokensAndExpiration(y,C,I){this.refreshToken=C||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(y,C){const{refreshToken:I,accessToken:Z,expirationTime:$}=C,we=new Rn;return I&&(Se("string"==typeof I,"internal-error",{appName:y}),we.refreshToken=I),Z&&(Se("string"==typeof Z,"internal-error",{appName:y}),we.accessToken=Z),$&&(Se("number"==typeof $,"internal-error",{appName:y}),we.expirationTime=$),we}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Rn,this.toJSON())}_performRefresh(){return Lt("not implemented")}}function rr(x,y){Se("string"==typeof x||typeof x>"u","internal-error",{appName:y})}class Ji{constructor(y){var{uid:C,auth:I,stsTokenManager:Z}=y,$=(0,Te._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=I,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.providerData=$.providerData?[...$.providerData]:[],this.metadata=new $r($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(y){var C=this;return(0,o.Z)(function*(){const I=yield Ln(C,C.stsTokenManager.getToken(C.auth,y));return Se(I,C.auth,"internal-error"),C.accessToken!==I&&(C.accessToken=I,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),I})()}getIdTokenResult(y){return function Es(x){return lr.apply(this,arguments)}(this,y)}reload(){return function Qi(x){return Tr.apply(this,arguments)}(this)}_assign(y){this!==y&&(Se(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(C=>Object.assign({},C)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const C=new Ji(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return C.metadata._copy(this.metadata),C}_onReload(y){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,C=!1){var I=this;return(0,o.Z)(function*(){let Z=!1;y.idToken&&y.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(y),Z=!0),C&&(yield Hi(I)),yield I.auth._persistUserIfCurrent(I),Z&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var y=this;return(0,o.Z)(function*(){const C=yield y.getIdToken();return yield Ln(y,function Rr(x,y){return ir.apply(this,arguments)}(y.auth,{idToken:C})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,C){var I,Z,$,we,Ue,yt,It,ln;const Hn=null!==(I=C.displayName)&&void 0!==I?I:void 0,ms=null!==(Z=C.email)&&void 0!==Z?Z:void 0,Vc=null!==($=C.phoneNumber)&&void 0!==$?$:void 0,Su=null!==(we=C.photoURL)&&void 0!==we?we:void 0,Sf=null!==(Ue=C.tenantId)&&void 0!==Ue?Ue:void 0,El=null!==(yt=C._redirectEventId)&&void 0!==yt?yt:void 0,xm=null!==(It=C.createdAt)&&void 0!==It?It:void 0,zp=null!==(ln=C.lastLoginAt)&&void 0!==ln?ln:void 0,{uid:Mf,emailVerified:Mu,isAnonymous:Hp,providerData:qp,stsTokenManager:Sh}=C;Se(Mf&&Sh,y,"internal-error");const jp=Rn.fromJSON(this.name,Sh);Se("string"==typeof Mf,y,"internal-error"),rr(Hn,y.name),rr(ms,y.name),Se("boolean"==typeof Mu,y,"internal-error"),Se("boolean"==typeof Hp,y,"internal-error"),rr(Vc,y.name),rr(Su,y.name),rr(Sf,y.name),rr(El,y.name),rr(xm,y.name),rr(zp,y.name);const Mh=new Ji({uid:Mf,auth:y,email:ms,emailVerified:Mu,displayName:Hn,isAnonymous:Hp,photoURL:Su,phoneNumber:Vc,tenantId:Sf,stsTokenManager:jp,createdAt:xm,lastLoginAt:zp});return qp&&Array.isArray(qp)&&(Mh.providerData=qp.map(Pu=>Object.assign({},Pu))),El&&(Mh._redirectEventId=El),Mh}static _fromIdTokenResponse(y,C,I=!1){return(0,o.Z)(function*(){const Z=new Rn;Z.updateFromServerResponse(C);const $=new Ji({uid:C.localId,auth:y,stsTokenManager:Z,isAnonymous:I});return yield Hi($),$})()}}const Yr=new Map;function cr(x){tn(x instanceof Function,"Expected a class definition");let y=Yr.get(x);return y?(tn(y instanceof x,"Instance stored in cache mismatched with class"),y):(y=new x,Yr.set(x,y),y)}const co=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(C,I){var Z=this;return(0,o.Z)(function*(){Z.storage[C]=I})()}_get(C){var I=this;return(0,o.Z)(function*(){const Z=I.storage[C];return void 0===Z?null:Z})()}_remove(C){var I=this;return(0,o.Z)(function*(){delete I.storage[C]})()}_addListener(C,I){}_removeListener(C,I){}}return x.type="NONE",x})();function xo(x,y,C){return`firebase:${x}:${y}:${C}`}class le{constructor(y,C,I){this.persistence=y,this.auth=C,this.userKey=I;const{config:Z,name:$}=this.auth;this.fullUserKey=xo(this.userKey,Z.apiKey,$),this.fullPersistenceKey=xo("persistence",Z.apiKey,$),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,o.Z)(function*(){const C=yield y.persistence._get(y.fullUserKey);return C?Ji._fromJSON(y.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var C=this;return(0,o.Z)(function*(){if(C.persistence===y)return;const I=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=y,I?C.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,C,I="authUser"){return(0,o.Z)(function*(){if(!C.length)return new le(cr(co),y,I);const Z=(yield Promise.all(C.map(function(){var It=(0,o.Z)(function*(ln){if(yield ln._isAvailable())return ln});return function(ln){return It.apply(this,arguments)}}()))).filter(It=>It);let $=Z[0]||cr(co);const we=xo(I,y.config.apiKey,y.name);let Ue=null;for(const It of C)try{const ln=yield It._get(we);if(ln){const Hn=Ji._fromJSON(y,ln);It!==$&&(Ue=Hn),$=It;break}}catch{}const yt=Z.filter(It=>It._shouldAllowMigration);return $._shouldAllowMigration&&yt.length?($=yt[0],Ue&&(yield $._set(we,Ue.toJSON())),yield Promise.all(C.map(function(){var It=(0,o.Z)(function*(ln){if(ln!==$)try{yield ln._remove(we)}catch{}});return function(ln){return It.apply(this,arguments)}}())),new le($,y,I)):new le($,y,I)})()}}function oe(x){const y=x.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(ge(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(G(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(kt(y))return"Blackberry";if(pn(y))return"Webos";if(Y(y))return"Safari";if((y.includes("chrome/")||q(y))&&!y.includes("edge/"))return"Chrome";if(De(y))return"Android";{const I=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function G(x=(0,ee.z$)()){return/firefox\//i.test(x)}function Y(x=(0,ee.z$)()){const y=x.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function q(x=(0,ee.z$)()){return/crios\//i.test(x)}function ge(x=(0,ee.z$)()){return/iemobile/i.test(x)}function De(x=(0,ee.z$)()){return/android/i.test(x)}function kt(x=(0,ee.z$)()){return/blackberry/i.test(x)}function pn(x=(0,ee.z$)()){return/webos/i.test(x)}function cn(x=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(x)||/macintosh/i.test(x)&&/mobile/i.test(x)}function Fn(x=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function En(x=(0,ee.z$)()){return cn(x)||De(x)||pn(x)||kt(x)||/windows phone/i.test(x)||ge(x)}function ua(x,y=[]){let C;switch(x){case"Browser":C=oe((0,ee.z$)());break;case"Worker":C=`${oe((0,ee.z$)())}-${x}`;break;default:C=x}const I=y.length?y.join(","):"FirebaseCore-web";return`${C}/JsCore/${W.SDK_VERSION}/${I}`}function Me(){return(Me=(0,o.Z)(function*(x){return(yield gt(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(x,y){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,o.Z)(function*(x,y){return gt(x,"GET","/v2/recaptchaConfig",We(x,y))})).apply(this,arguments)}function wn(x){return void 0!==x&&void 0!==x.getResponse}function Nn(x){return void 0!==x&&void 0!==x.enterprise}class on{constructor(y){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===y.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=y.recaptchaKey.split("/")[3],this.emailPasswordEnabled=y.recaptchaEnforcementState.some(C=>"EMAIL_PASSWORD_PROVIDER"===C.provider&&"OFF"!==C.enforcementState)}}function Xn(x){return new Promise((y,C)=>{const I=document.createElement("script");I.setAttribute("src",x),I.onload=y,I.onerror=Z=>{const $=Qe("internal-error");$.customData=Z,C($)},I.type="text/javascript",I.charset="UTF-8",function pi(){var x,y;return null!==(y=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==y?y:document}().appendChild(I)})}function uo(x){return`__${x}${Math.floor(1e6*Math.random())}`}const wc="NO_RECAPTCHA";class da{constructor(y){this.type="recaptcha-enterprise",this.auth=oi(y)}verify(y="verify",C=!1){var I=this;return(0,o.Z)(function*(){function $(){return $=(0,o.Z)(function*(Ue){if(!C){if(null==Ue.tenantId&&null!=Ue._agentRecaptchaConfig)return Ue._agentRecaptchaConfig.siteKey;if(null!=Ue.tenantId&&void 0!==Ue._tenantRecaptchaConfigs[Ue.tenantId])return Ue._tenantRecaptchaConfigs[Ue.tenantId].siteKey}return new Promise(function(){var yt=(0,o.Z)(function*(It,ln){ht(Ue,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Hn=>{if(void 0!==Hn.recaptchaKey){const ms=new on(Hn);return null==Ue.tenantId?Ue._agentRecaptchaConfig=ms:Ue._tenantRecaptchaConfigs[Ue.tenantId]=ms,It(ms.siteKey)}ln(new Error("recaptcha Enterprise site key undefined"))}).catch(Hn=>{ln(Hn)})});return function(It,ln){return yt.apply(this,arguments)}}())}),$.apply(this,arguments)}function we(Ue,yt,It){const ln=window.grecaptcha;Nn(ln)?ln.enterprise.ready(()=>{ln.enterprise.execute(Ue,{action:y}).then(Hn=>{yt(Hn)}).catch(()=>{yt(wc)})}):It(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ue,yt)=>{(function Z(Ue){return $.apply(this,arguments)})(I.auth).then(It=>{if(!C&&Nn(window.grecaptcha))we(It,Ue,yt);else{if(typeof window>"u")return void yt(new Error("RecaptchaVerifier is only supported in browser"));Xn("https://www.google.com/recaptcha/enterprise.js?render="+It).then(()=>{we(It,Ue,yt)}).catch(ln=>{yt(ln)})}}).catch(It=>{yt(It)})})})()}}function Dr(x,y,C){return xt.apply(this,arguments)}function xt(){return(xt=(0,o.Z)(function*(x,y,C,I=!1){const Z=new da(x);let $;try{$=yield Z.verify(C)}catch{$=yield Z.verify(C,!0)}const we=Object.assign({},y);return Object.assign(we,I?{captchaResp:$}:{captchaResponse:$}),Object.assign(we,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(we,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),we})).apply(this,arguments)}class Ot{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,C){const I=$=>new Promise((we,Ue)=>{try{we(y($))}catch(yt){Ue(yt)}});I.onAbort=C,this.queue.push(I);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(y){var C=this;return(0,o.Z)(function*(){if(C.auth.currentUser===y)return;const I=[];try{for(const Z of C.queue)yield Z(y),Z.onAbort&&I.push(Z.onAbort)}catch(Z){I.reverse();for(const $ of I)try{$()}catch{}throw C.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}class In{constructor(y,C,I,Z){this.app=y,this.heartbeatServiceProvider=C,this.appCheckServiceProvider=I,this.config=Z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qo(this),this.idTokenSubscription=new Qo(this),this.beforeStateQueue=new Ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=Z.sdkClientVersion}_initializeWithPersistence(y,C){var I=this;return C&&(this._popupRedirectResolver=cr(C)),this._initializationPromise=this.queue((0,o.Z)(function*(){var Z,$;if(!I._deleted&&(I.persistenceManager=yield le.create(I,y),!I._deleted)){if(null!==(Z=I._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(C),I.lastNotifiedUid=(null===($=I.currentUser)||void 0===$?void 0:$.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,o.Z)(function*(){if(y._deleted)return;const C=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||C){if(y.currentUser&&C&&y.currentUser.uid===C.uid)return y._currentUser._assign(C),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(C,!0)}})()}initializeCurrentUser(y){var C=this;return(0,o.Z)(function*(){var I;const Z=yield C.assertedPersistence.getCurrentUser();let $=Z,we=!1;if(y&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const Ue=null===(I=C.redirectUser)||void 0===I?void 0:I._redirectEventId,yt=$?._redirectEventId,It=yield C.tryRedirectSignIn(y);(!Ue||Ue===yt)&&It?.user&&($=It.user,we=!0)}if(!$)return C.directlySetCurrentUser(null);if(!$._redirectEventId){if(we)try{yield C.beforeStateQueue.runMiddleware($)}catch(Ue){$=Z,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(Ue))}return $?C.reloadAndSetCurrentUserOrClear($):C.directlySetCurrentUser(null)}return Se(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===$._redirectEventId?C.directlySetCurrentUser($):C.reloadAndSetCurrentUserOrClear($)})()}tryRedirectSignIn(y){var C=this;return(0,o.Z)(function*(){let I=null;try{I=yield C._popupRedirectResolver._completeRedirectFn(C,y,!0)}catch{yield C._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(y){var C=this;return(0,o.Z)(function*(){try{yield Hi(y)}catch(I){if("auth/network-request-failed"!==I?.code)return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function Fe(){if(typeof navigator>"u")return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var y=this;return(0,o.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var C=this;return(0,o.Z)(function*(){const I=y?(0,ee.m9)(y):null;return I&&Se(I.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(I&&I._clone(C))})()}_updateCurrentUser(y,C=!1){var I=this;return(0,o.Z)(function*(){if(!I._deleted)return y&&Se(I.tenantId===y.tenantId,I,"tenant-id-mismatch"),C||(yield I.beforeStateQueue.runMiddleware(y)),I.queue((0,o.Z)(function*(){yield I.directlySetCurrentUser(y),I.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,o.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var C=this;return this.queue((0,o.Z)(function*(){yield C.assertedPersistence.setPersistence(cr(y))}))}initializeRecaptchaConfig(){var y=this;return(0,o.Z)(function*(){const C=yield ht(y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new on(C);null==y.tenantId?y._agentRecaptchaConfig=I:y._tenantRecaptchaConfigs[y.tenantId]=I,I.emailPasswordEnabled&&new da(y).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new ee.LL("auth","Firebase",y())}onAuthStateChanged(y,C,I){return this.registerStateListener(this.authStateSubscription,y,C,I)}beforeAuthStateChanged(y,C){return this.beforeStateQueue.pushCallback(y,C)}onIdTokenChanged(y,C,I){return this.registerStateListener(this.idTokenSubscription,y,C,I)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,C){var I=this;return(0,o.Z)(function*(){const Z=yield I.getOrInitRedirectPersistenceManager(C);return null===y?Z.removeCurrentUser():Z.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var C=this;return(0,o.Z)(function*(){if(!C.redirectPersistenceManager){const I=y&&cr(y)||C._popupRedirectResolver;Se(I,C,"argument-error"),C.redirectPersistenceManager=yield le.create(C,[cr(I._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(y){var C=this;return(0,o.Z)(function*(){var I,Z;return C._isInitialized&&(yield C.queue((0,o.Z)(function*(){}))),(null===(I=C._currentUser)||void 0===I?void 0:I._redirectEventId)===y?C._currentUser:(null===(Z=C.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===y?C.redirectUser:null})()}_persistUserIfCurrent(y){var C=this;return(0,o.Z)(function*(){if(y===C.currentUser)return C.queue((0,o.Z)(function*(){return C.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(C=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,C,I,Z){if(this._deleted)return()=>{};const $="function"==typeof C?C:C.next.bind(C),we=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(we,this,"internal-error"),we.then(()=>$(this.currentUser)),"function"==typeof C?y.addObserver(C,I,Z):y.addObserver(C)}directlySetCurrentUser(y){var C=this;return(0,o.Z)(function*(){C.currentUser&&C.currentUser!==y&&C._currentUser._stopProactiveRefresh(),y&&C.isProactiveRefreshEnabled&&y._startProactiveRefresh(),C.currentUser=y,y?yield C.assertedPersistence.setCurrentUser(y):yield C.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=ua(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,o.Z)(function*(){var C;const I={"X-Client-Version":y.clientVersion};y.app.options.appId&&(I["X-Firebase-gmpid"]=y.app.options.appId);const Z=yield null===(C=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();Z&&(I["X-Firebase-Client"]=Z);const $=yield y._getAppCheckToken();return $&&(I["X-Firebase-AppCheck"]=$),I})()}_getAppCheckToken(){var y=this;return(0,o.Z)(function*(){var C;const I=yield null===(C=y.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getToken();return I?.error&&function ut(x,...y){st.logLevel<=Oe.in.WARN&&st.warn(`Auth (${W.SDK_VERSION}): ${x}`,...y)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function oi(x){return(0,ee.m9)(x)}class Qo{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,ee.ne)(C=>this.observer=C)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qt(x,y,C){const I=oi(x);Se(I._canInitEmulator,I,"emulator-config-failed"),Se(/^https?:\/\//.test(y),I,"invalid-emulator-scheme");const Z=!!C?.disableWarnings,$=Fi(y),{host:we,port:Ue}=function si(x){const y=Fi(x),C=/(\/\/)?([^?#/]+)/.exec(x.substr(y.length));if(!C)return{host:"",port:null};const I=C[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(I);if(Z){const $=Z[1];return{host:$,port:On(I.substr($.length+1))}}{const[$,we]=I.split(":");return{host:$,port:On(we)}}}(y);I.config.emulator={url:`${$}//${we}${null===Ue?"":`:${Ue}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:we,port:Ue,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function Ao(){function x(){const y=document.createElement("p"),C=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function Fi(x){const y=x.indexOf(":");return y<0?"":x.substr(0,y+1)}function On(x){if(!x)return null;const y=Number(x);return isNaN(y)?null:y}class hs{constructor(y,C){this.providerId=y,this.signInMethod=C}toJSON(){return Lt("not implemented")}_getIdTokenResponse(y){return Lt("not implemented")}_linkToIdToken(y,C){return Lt("not implemented")}_getReauthenticationResolver(y){return Lt("not implemented")}}function ka(x,y){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:resetPassword",We(x,y))})).apply(this,arguments)}function Yn(x,y){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Kr(){return(Kr=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:update",We(x,y))})).apply(this,arguments)}function ur(x,y){return _r.apply(this,arguments)}function _r(){return(_r=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithPassword",We(x,y))})).apply(this,arguments)}function Ci(x,y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:sendOobCode",We(x,y))})).apply(this,arguments)}function il(){return(il=(0,o.Z)(function*(x,y){return Ci(x,y)})).apply(this,arguments)}function Oa(x,y){return xs.apply(this,arguments)}function xs(){return(xs=(0,o.Z)(function*(x,y){return Ci(x,y)})).apply(this,arguments)}function Ra(x,y){return xr.apply(this,arguments)}function xr(){return(xr=(0,o.Z)(function*(x,y){return Ci(x,y)})).apply(this,arguments)}function an(){return(an=(0,o.Z)(function*(x,y){return Ci(x,y)})).apply(this,arguments)}function fi(){return(fi=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithEmailLink",We(x,y))})).apply(this,arguments)}function rl(){return(rl=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithEmailLink",We(x,y))})).apply(this,arguments)}class Qr extends hs{constructor(y,C,I,Z=null){super("password",I),this._email=y,this._password=C,this._tenantId=Z}static _fromEmailAndPassword(y,C){return new Qr(y,C,"password")}static _fromEmailAndCode(y,C,I=null){return new Qr(y,C,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y;if(C?.email&&C?.password){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(y){var C=this;return(0,o.Z)(function*(){var I;switch(C.signInMethod){case"password":const Z={returnSecureToken:!0,email:C._email,password:C._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=y._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const $=yield Dr(y,Z,"signInWithPassword");return ur(y,$)}return ur(y,Z).catch(function(){var $=(0,o.Z)(function*(we){if("auth/missing-recaptcha-token"===we.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield Dr(y,Z,"signInWithPassword");return ur(y,Ue)}return Promise.reject(we)});return function(we){return $.apply(this,arguments)}}());case"emailLink":return function Ii(x,y){return fi.apply(this,arguments)}(y,{email:C._email,oobCode:C._password});default:nt(y,"internal-error")}})()}_linkToIdToken(y,C){var I=this;return(0,o.Z)(function*(){switch(I.signInMethod){case"password":return Yn(y,{idToken:C,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function bc(x,y){return rl.apply(this,arguments)}(y,{idToken:C,email:I._email,oobCode:I._password});default:nt(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Vs(x,y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithIdp",We(x,y))})).apply(this,arguments)}class Bo extends hs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const C=new Bo(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(C.idToken=y.idToken),y.accessToken&&(C.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(C.nonce=y.nonce),y.pendingToken&&(C.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(C.accessToken=y.oauthToken,C.secret=y.oauthTokenSecret):nt("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:Z}=C,$=(0,Te._T)(C,["providerId","signInMethod"]);if(!I||!Z)return null;const we=new Bo(I,Z);return we.idToken=$.idToken||void 0,we.accessToken=$.accessToken||void 0,we.secret=$.secret,we.nonce=$.nonce,we.pendingToken=$.pendingToken||null,we}_getIdTokenResponse(y){return Vs(y,this.buildRequest())}_linkToIdToken(y,C){const I=this.buildRequest();return I.idToken=C,Vs(y,I)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,Vs(y,C)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),y.postBody=(0,ee.xO)(C)}return y}}function Na(){return(Na=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:sendVerificationCode",We(x,y))})).apply(this,arguments)}function Ju(){return(Ju=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithPhoneNumber",We(x,y))})).apply(this,arguments)}function Xu(){return(Xu=(0,o.Z)(function*(x,y){const C=yield Vn(x,"POST","/v1/accounts:signInWithPhoneNumber",We(x,y));if(C.temporaryProof)throw ar(x,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const hu={USER_NOT_FOUND:"user-not-found"};function th(){return(th=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithPhoneNumber",We(x,Object.assign(Object.assign({},y),{operation:"REAUTH"})),hu)})).apply(this,arguments)}class Un extends hs{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,C){return new Un({verificationId:y,verificationCode:C})}static _fromTokenResponse(y,C){return new Un({phoneNumber:y,temporaryProof:C})}_getIdTokenResponse(y){return function Xd(x,y){return Ju.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,C){return function Dp(x,y){return Xu.apply(this,arguments)}(y,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function eh(x,y){return th.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:C,verificationId:I,verificationCode:Z}=this.params;return y&&C?{temporaryProof:y,phoneNumber:C}:{sessionInfo:I,code:Z}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:C,verificationCode:I,phoneNumber:Z,temporaryProof:$}=y;return I||C||Z||$?new Un({verificationId:C,verificationCode:I,phoneNumber:Z,temporaryProof:$}):null}}class Zs{constructor(y){var C,I,Z,$,we,Ue;const yt=(0,ee.zd)((0,ee.pd)(y)),It=null!==(C=yt.apiKey)&&void 0!==C?C:null,ln=null!==(I=yt.oobCode)&&void 0!==I?I:null,Hn=function As(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=yt.mode)&&void 0!==Z?Z:null);Se(It&&ln&&Hn,"argument-error"),this.apiKey=It,this.operation=Hn,this.code=ln,this.continueUrl=null!==($=yt.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(we=yt.languageCode)&&void 0!==we?we:null,this.tenantId=null!==(Ue=yt.tenantId)&&void 0!==Ue?Ue:null}static parseLink(y){const C=function Is(x){const y=(0,ee.zd)((0,ee.pd)(x)).link,C=y?(0,ee.zd)((0,ee.pd)(y)).deep_link_id:null,I=(0,ee.zd)((0,ee.pd)(x)).deep_link_id;return(I?(0,ee.zd)((0,ee.pd)(I)).link:null)||I||C||y||x}(y);try{return new Zs(C)}catch{return null}}}let ih=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(C,I){return Qr._fromEmailAndPassword(C,I)}static credentialWithLink(C,I){const Z=Zs.parseLink(I);return Se(Z,"argument-error"),Qr._fromEmailAndCode(C,Z.code,Z.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class ha{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class ol extends ha{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class zs extends ol{static credentialFromJSON(y){const C="string"==typeof y?JSON.parse(y):y;return Se("providerId"in C&&"signInMethod"in C,"argument-error"),Bo._fromParams(C)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return Se(y.idToken||y.accessToken,"argument-error"),Bo._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return zs.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return zs.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:I,oauthTokenSecret:Z,pendingToken:$,nonce:we,providerId:Ue}=y;if(!I&&!Z&&!C&&!$||!Ue)return null;try{return new zs(Ue)._credential({idToken:C,accessToken:I,nonce:we,pendingToken:$})}catch{return null}}}let rh=(()=>{class x extends ol{constructor(){super("facebook.com")}static credential(C){return Bo._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return x.credentialFromTaggedObject(C)}static credentialFromError(C){return x.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return x.credential(C.oauthAccessToken)}catch{return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),oh=(()=>{class x extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(C,I){return Bo._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:I})}static credentialFromResult(C){return x.credentialFromTaggedObject(C)}static credentialFromError(C){return x.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:I,oauthAccessToken:Z}=C;if(!I&&!Z)return null;try{return x.credential(I,Z)}catch{return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),Bl=(()=>{class x extends ol{constructor(){super("github.com")}static credential(C){return Bo._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return x.credentialFromTaggedObject(C)}static credentialFromError(C){return x.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return x.credential(C.oauthAccessToken)}catch{return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class Jr extends hs{constructor(y,C){super(y,y),this.pendingToken=C}_getIdTokenResponse(y){return Vs(y,this.buildRequest())}_linkToIdToken(y,C){const I=this.buildRequest();return I.idToken=C,Vs(y,I)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,Vs(y,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:Z,pendingToken:$}=C;return I&&Z&&$&&I===Z?new Jr(I,$):null}static _create(y,C){return new Jr(y,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cc extends ha{constructor(y){Se(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return Cc.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return Cc.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const C=Jr.fromJSON(y);return Se(C,"argument-error"),C}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:C,providerId:I}=y;if(!C||!I)return null;try{return Jr._create(I,C)}catch{return null}}}let fa=(()=>{class x extends ol{constructor(){super("twitter.com")}static credential(C,I){return Bo._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:I})}static credentialFromResult(C){return x.credentialFromTaggedObject(C)}static credentialFromError(C){return x.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:I,oauthTokenSecret:Z}=C;if(!I||!Z)return null;try{return x.credential(I,Z)}catch{return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function sl(x,y){return La.apply(this,arguments)}function La(){return(La=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signUp",We(x,y))})).apply(this,arguments)}class Ui{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,C,I,Z=!1){return(0,o.Z)(function*(){const $=yield Ji._fromIdTokenResponse(y,I,Z),we=Tc(I);return new Ui({user:$,providerId:we,_tokenResponse:I,operationType:C})})()}static _forOperation(y,C,I){return(0,o.Z)(function*(){yield y._updateTokensIfNecessary(I,!0);const Z=Tc(I);return new Ui({user:y,providerId:Z,_tokenResponse:I,operationType:C})})()}}function Tc(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function Ec(x){return vr.apply(this,arguments)}function vr(){return(vr=(0,o.Z)(function*(x){var y;const C=oi(x);if(yield C._initializationPromise,null!==(y=C.currentUser)&&void 0!==y&&y.isAnonymous)return new Ui({user:C.currentUser,providerId:null,operationType:"signIn"});const I=yield sl(C,{returnSecureToken:!0}),Z=yield Ui._fromIdTokenResponse(C,"signIn",I,!0);return yield C._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class al extends ee.ZR{constructor(y,C,I,Z){var $;super(C.code,C.message),this.operationType=I,this.user=Z,Object.setPrototypeOf(this,al.prototype),this.customData={appName:y.name,tenantId:null!==($=y.tenantId)&&void 0!==$?$:void 0,_serverResponse:C.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(y,C,I,Z){return new al(y,C,I,Z)}}function ll(x,y,C,I){return("reauthenticate"===y?C._getReauthenticationResolver(x):C._getIdTokenResponse(x)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?al._fromErrorAndOperation(x,$,y,I):$})}function Ar(x){return new Set(x.map(({providerId:y})=>y).filter(y=>!!y))}function df(x,y){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,o.Z)(function*(x,y){const C=(0,ee.m9)(x);yield Ss(!0,C,y);const{providerUserInfo:I}=yield function ao(x,y){return To.apply(this,arguments)}(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[y]}),Z=Ar(I||[]);return C.providerData=C.providerData.filter($=>Z.has($.providerId)),Z.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C}),Dc.apply(this,arguments)}function fo(x,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,o.Z)(function*(x,y,C=!1){const I=yield Ln(x,y._linkToIdToken(x.auth,yield x.getIdToken()),C);return Ui._forOperation(x,"link",I)})).apply(this,arguments)}function Ss(x,y,C){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,o.Z)(function*(x,y,C){yield Hi(y);const Z=!1===x?"provider-already-linked":"no-such-provider";Se(Ar(y.providerData).has(C)===x,y.auth,Z)})).apply(this,arguments)}function Vl(x,y){return yr.apply(this,arguments)}function yr(){return(yr=(0,o.Z)(function*(x,y,C=!1){const{auth:I}=x,Z="reauthenticate";try{const $=yield Ln(x,ll(I,Z,y,x),C);Se($.idToken,I,"internal-error");const we=Wr($.idToken);Se(we,I,"internal-error");const{sub:Ue}=we;return Se(x.uid===Ue,I,"user-mismatch"),Ui._forOperation(x,Z,$)}catch($){throw"auth/user-not-found"===$?.code&&nt(I,"user-mismatch"),$}})).apply(this,arguments)}function Zl(x,y){return cl.apply(this,arguments)}function cl(){return(cl=(0,o.Z)(function*(x,y,C=!1){const I="signIn",Z=yield ll(x,I,y),$=yield Ui._fromIdTokenResponse(x,I,Z);return C||(yield x._updateCurrentUser($.user)),$})).apply(this,arguments)}function An(x,y){return zl.apply(this,arguments)}function zl(){return(zl=(0,o.Z)(function*(x,y){return Zl(oi(x),y)})).apply(this,arguments)}function td(x,y){return nd.apply(this,arguments)}function nd(){return(nd=(0,o.Z)(function*(x,y){const C=(0,ee.m9)(x);return yield Ss(!1,C,y.providerId),fo(C,y)})).apply(this,arguments)}function id(x,y){return fu.apply(this,arguments)}function fu(){return(fu=(0,o.Z)(function*(x,y){return Vl((0,ee.m9)(x),y)})).apply(this,arguments)}function fs(){return(fs=(0,o.Z)(function*(x,y){return Vn(x,"POST","/v1/accounts:signInWithCustomToken",We(x,y))})).apply(this,arguments)}function xc(x,y){return qe.apply(this,arguments)}function qe(){return qe=(0,o.Z)(function*(x,y){const C=oi(x),I=yield function sh(x,y){return fs.apply(this,arguments)}(C,{token:y,returnSecureToken:!0}),Z=yield Ui._fromIdTokenResponse(C,"signIn",I);return yield C._updateCurrentUser(Z.user),Z}),qe.apply(this,arguments)}class hn{constructor(y,C){this.factorId=y,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(y,C){return"phoneInfo"in C?rd._fromServerResponse(y,C):"totpInfo"in C?Hs._fromServerResponse(y,C):nt(y,"internal-error")}}class rd extends hn{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,C){return new rd(C)}}class Hs extends hn{constructor(y){super("totp",y)}static _fromServerResponse(y,C){return new Hs(C)}}function hr(x,y,C){var I;Se((null===(I=C.url)||void 0===I?void 0:I.length)>0,x,"invalid-continue-uri"),Se(typeof C.dynamicLinkDomain>"u"||C.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),y.continueUrl=C.url,y.dynamicLinkDomain=C.dynamicLinkDomain,y.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(Se(C.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),y.iOSBundleId=C.iOS.bundleId),C.android&&(Se(C.android.packageName.length>0,x,"missing-android-pkg-name"),y.androidInstallApp=C.android.installApp,y.androidMinimumVersionCode=C.android.minimumVersion,y.androidPackageName=C.android.packageName)}function Hl(x,y,C){return ul.apply(this,arguments)}function ul(){return ul=(0,o.Z)(function*(x,y,C){var I;const Z=oi(x),$={requestType:"PASSWORD_RESET",email:y,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const we=yield Dr(Z,$,"getOobCode",!0);C&&hr(Z,we,C),yield Oa(Z,we)}else C&&hr(Z,$,C),yield Oa(Z,$).catch(function(){var we=(0,o.Z)(function*(Ue){if("auth/missing-recaptcha-token"!==Ue.code)return Promise.reject(Ue);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const yt=yield Dr(Z,$,"getOobCode",!0);C&&hr(Z,yt,C),yield Oa(Z,yt)}});return function(Ue){return we.apply(this,arguments)}}())}),ul.apply(this,arguments)}function Io(x,y,C){return pu.apply(this,arguments)}function pu(){return(pu=(0,o.Z)(function*(x,y,C){yield ka((0,ee.m9)(x),{oobCode:y,newPassword:C})})).apply(this,arguments)}function pa(x,y){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,o.Z)(function*(x,y){yield function Ds(x,y){return Kr.apply(this,arguments)}((0,ee.m9)(x),{oobCode:y})}),Ac.apply(this,arguments)}function Ua(x,y){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,o.Z)(function*(x,y){const C=(0,ee.m9)(x),I=yield ka(C,{oobCode:y}),Z=I.requestType;switch(Se(Z,C,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(I.newEmail,C,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(I.mfaInfo,C,"internal-error");default:Se(I.email,C,"internal-error")}let $=null;return I.mfaInfo&&($=hn._fromServerResponse(oi(C),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:$},operation:Z}})).apply(this,arguments)}function Xr(x,y){return or.apply(this,arguments)}function or(){return(or=(0,o.Z)(function*(x,y){const{data:C}=yield Ua((0,ee.m9)(x),y);return C.email})).apply(this,arguments)}function Va(x,y,C){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,o.Z)(function*(x,y,C){var I;const Z=oi(x),$={returnSecureToken:!0,email:y,password:C,clientType:"CLIENT_TYPE_WEB"};let we;if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const It=yield Dr(Z,$,"signUpPassword");we=sl(Z,It)}else we=sl(Z,$).catch(function(){var It=(0,o.Z)(function*(ln){if("auth/missing-recaptcha-token"===ln.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Hn=yield Dr(Z,$,"signUpPassword");return sl(Z,Hn)}return Promise.reject(ln)});return function(ln){return It.apply(this,arguments)}}());const Ue=yield we.catch(It=>Promise.reject(It)),yt=yield Ui._fromIdTokenResponse(Z,"signIn",Ue);return yield Z._updateCurrentUser(yt.user),yt}),Vo.apply(this,arguments)}function qs(x,y,C){return An((0,ee.m9)(x),ih.credential(y,C))}function js(x,y,C){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,o.Z)(function*(x,y,C){var I;const Z=oi(x),$={requestType:"EMAIL_SIGNIN",email:y,clientType:"CLIENT_TYPE_WEB"};function we(Ue,yt){Se(yt.handleCodeInApp,Z,"argument-error"),yt&&hr(Z,Ue,yt)}if(null!==(I=Z._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Ue=yield Dr(Z,$,"getOobCode",!0);we(Ue,C),yield Ra(Z,Ue)}else we($,C),yield Ra(Z,$).catch(function(){var Ue=(0,o.Z)(function*(yt){if("auth/missing-recaptcha-token"!==yt.code)return Promise.reject(yt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const It=yield Dr(Z,$,"getOobCode",!0);we(It,C),yield Ra(Z,It)}});return function(yt){return Ue.apply(this,arguments)}}())}),Ws.apply(this,arguments)}function od(x,y){return"EMAIL_SIGNIN"===Zs.parseLink(y)?.operation}function ah(x,y,C){return qi.apply(this,arguments)}function qi(){return(qi=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x),Z=ih.credentialWithLink(y,C||Zt());return Se(Z._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),An(I,Z)})).apply(this,arguments)}function Za(){return(Za=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:createAuthUri",We(x,y))})).apply(this,arguments)}function dl(x,y){return hl.apply(this,arguments)}function hl(){return hl=(0,o.Z)(function*(x,y){const I={identifier:y,continueUri:dn()?Zt():"http://localhost"},{signinMethods:Z}=yield function ql(x,y){return Za.apply(this,arguments)}((0,ee.m9)(x),I);return Z||[]}),hl.apply(this,arguments)}function gu(x,y){return fl.apply(this,arguments)}function fl(){return fl=(0,o.Z)(function*(x,y){const C=(0,ee.m9)(x),Z={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};y&&hr(C.auth,Z,y);const{email:$}=yield function Ul(x,y){return il.apply(this,arguments)}(C.auth,Z);$!==x.email&&(yield x.reload())}),fl.apply(this,arguments)}function sd(x,y,C){return za.apply(this,arguments)}function za(){return za=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:y};C&&hr(I.auth,$,C);const{email:we}=yield function Qd(x,y){return an.apply(this,arguments)}(I.auth,$);we!==x.email&&(yield x.reload())}),za.apply(this,arguments)}function Ic(){return(Ic=(0,o.Z)(function*(x,y){return gt(x,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function lh(x,y){return mu.apply(this,arguments)}function mu(){return mu=(0,o.Z)(function*(x,{displayName:y,photoURL:C}){if(void 0===y&&void 0===C)return;const I=(0,ee.m9)(x),$={idToken:yield I.getIdToken(),displayName:y,photoUrl:C,returnSecureToken:!0},we=yield Ln(I,function ad(x,y){return Ic.apply(this,arguments)}(I.auth,$));I.displayName=we.displayName||null,I.photoURL=we.photoUrl||null;const Ue=I.providerData.find(({providerId:yt})=>"password"===yt);Ue&&(Ue.displayName=I.displayName,Ue.photoURL=I.photoURL),yield I._updateTokensIfNecessary(we)}),mu.apply(this,arguments)}function ch(x,y){return es((0,ee.m9)(x),y,null)}function Bi(x,y){return es((0,ee.m9)(x),null,y)}function es(x,y,C){return ji.apply(this,arguments)}function ji(){return(ji=(0,o.Z)(function*(x,y,C){const{auth:I}=x,$={idToken:yield x.getIdToken(),returnSecureToken:!0};y&&($.email=y),C&&($.password=C);const we=yield Ln(x,Yn(I,$));yield x._updateTokensIfNecessary(we,!0)})).apply(this,arguments)}class jl{constructor(y,C,I={}){this.isNewUser=y,this.providerId=C,this.profile=I}}class _u extends jl{constructor(y,C,I,Z){super(y,C,I),this.username=Z}}class xp extends jl{constructor(y,C){super(y,"facebook.com",C)}}class Wl extends _u{constructor(y,C){super(y,"github.com",C,"string"==typeof C?.login?C?.login:null)}}class Ap extends jl{constructor(y,C){super(y,"google.com",C)}}class ga extends _u{constructor(y,C,I){super(y,"twitter.com",C,I)}}function vu(x){const{user:y,_tokenResponse:C}=x;return y.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function Sc(x){var y,C;if(!x)return null;const{providerId:I}=x,Z=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},$=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!I&&x?.idToken){const we=null===(C=null===(y=Wr(x.idToken))||void 0===y?void 0:y.firebase)||void 0===C?void 0:C.sign_in_provider;if(we)return new jl($,"anonymous"!==we&&"custom"!==we?we:null)}if(!I)return null;switch(I){case"facebook.com":return new xp($,Z);case"github.com":return new Wl($,Z);case"google.com":return new Ap($,Z);case"twitter.com":return new ga($,Z,x.screenName||null);case"custom":case"anonymous":return new jl($,null);default:return new jl($,I,Z)}}(C)}class $s{constructor(y,C,I){this.type=y,this.credential=C,this.auth=I}static _fromIdtoken(y,C){return new $s("enroll",y,C)}static _fromMfaPendingCredential(y){return new $s("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var C,I;if(y?.multiFactorSession){if(null!==(C=y.multiFactorSession)&&void 0!==C&&C.pendingCredential)return $s._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(I=y.multiFactorSession)&&void 0!==I&&I.idToken)return $s._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ud{constructor(y,C,I){this.session=y,this.hints=C,this.signInResolver=I}static _fromError(y,C){const I=oi(y),Z=C.customData._serverResponse,$=(Z.mfaInfo||[]).map(Ue=>hn._fromServerResponse(I,Ue));Se(Z.mfaPendingCredential,I,"internal-error");const we=$s._fromMfaPendingCredential(Z.mfaPendingCredential);return new ud(we,$,function(){var Ue=(0,o.Z)(function*(yt){const It=yield yt._process(I,we);delete Z.mfaInfo,delete Z.mfaPendingCredential;const ln=Object.assign(Object.assign({},Z),{idToken:It.idToken,refreshToken:It.refreshToken});switch(C.operationType){case"signIn":const Hn=yield Ui._fromIdTokenResponse(I,C.operationType,ln);return yield I._updateCurrentUser(Hn.user),Hn;case"reauthenticate":return Se(C.user,I,"internal-error"),Ui._forOperation(C.user,C.operationType,ln);default:nt(I,"internal-error")}});return function(yt){return Ue.apply(this,arguments)}}())}resolveSignIn(y){var C=this;return(0,o.Z)(function*(){return C.signInResolver(y)})()}}function Gl(x,y){var C;const I=(0,ee.m9)(x),Z=y;return Se(y.customData.operationType,I,"argument-error"),Se(null===(C=Z.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,I,"argument-error"),ud._fromError(I,Z)}class _l{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(I=>hn._fromServerResponse(y.auth,I)))})}static _fromUser(y){return new _l(y)}getSession(){var y=this;return(0,o.Z)(function*(){return $s._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,C){var I=this;return(0,o.Z)(function*(){const Z=y,$=yield I.getSession(),we=yield Ln(I.user,Z._process(I.user.auth,$,C));return yield I.user._updateTokensIfNecessary(we),I.user.reload()})()}unenroll(y){var C=this;return(0,o.Z)(function*(){const I="string"==typeof y?y:y.uid,Z=yield C.user.getIdToken();try{const $=yield Ln(C.user,function ml(x,y){return gt(x,"POST","/v2/accounts/mfaEnrollment:withdraw",We(x,y))}(C.user.auth,{idToken:Z,mfaEnrollmentId:I}));C.enrolledFactors=C.enrolledFactors.filter(({uid:we})=>we!==I),yield C.user._updateTokensIfNecessary($),yield C.user.reload()}catch($){throw $}})()}}const qa=new WeakMap;function Yl(x){const y=(0,ee.m9)(x);return qa.has(y)||qa.set(y,_l._fromUser(y)),qa.get(y)}const f="__sak";class m{constructor(y,C){this.storageRetriever=y,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(f,"1"),this.storage.removeItem(f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,C){return this.storage.setItem(y,JSON.stringify(C)),Promise.resolve()}_get(y){const C=this.storage.getItem(y);return Promise.resolve(C?JSON.parse(C):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const ce=(()=>{class x extends m{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,I)=>this.onStorageEvent(C,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function T(){const x=(0,ee.z$)();return Y(x)||cn(x)}()&&function Er(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=En(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const I of Object.keys(this.listeners)){const Z=this.storage.getItem(I),$=this.localCache[I];Z!==$&&C(I,$,Z)}}onStorageEvent(C,I=!1){if(!C.key)return void this.forAllChangedKeys((Ue,yt,It)=>{this.notifyListeners(Ue,It)});const Z=C.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ue=this.storage.getItem(Z);if(C.newValue!==Ue)null!==C.newValue?this.storage.setItem(Z,C.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===C.newValue&&!I)return}const $=()=>{const Ue=this.storage.getItem(Z);!I&&this.localCache[Z]===Ue||this.notifyListeners(Z,Ue)},we=this.storage.getItem(Z);!function Ai(){return(0,ee.w1)()&&10===document.documentMode}()||we===C.newValue||C.newValue===C.oldValue?$():setTimeout($,10)}notifyListeners(C,I){this.localCache[C]=I;const Z=this.listeners[C];if(Z)for(const $ of Array.from(Z))$(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,I,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:I,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(I)}_removeListener(C,I){this.listeners[C]&&(this.listeners[C].delete(I),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,I){var Z=()=>super._set,$=this;return(0,o.Z)(function*(){yield Z().call($,C,I),$.localCache[C]=JSON.stringify(I)})()}_get(C){var I=()=>super._get,Z=this;return(0,o.Z)(function*(){const $=yield I().call(Z,C);return Z.localCache[C]=JSON.stringify($),$})()}_remove(C){var I=()=>super._remove,Z=this;return(0,o.Z)(function*(){yield I().call(Z,C),delete Z.localCache[C]})()}}return x.type="LOCAL",x})(),ke=(()=>{class x extends m{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,I){}_removeListener(C,I){}}return x.type="SESSION",x})();let Rt=(()=>{class x{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const I=this.receivers.find($=>$.isListeningto(C));if(I)return I;const Z=new x(C);return this.receivers.push(Z),Z}isListeningto(C){return this.eventTarget===C}handleEvent(C){var I=this;return(0,o.Z)(function*(){const Z=C,{eventId:$,eventType:we,data:Ue}=Z.data,yt=I.handlersMap[we];if(!yt?.size)return;Z.ports[0].postMessage({status:"ack",eventId:$,eventType:we});const It=Array.from(yt).map(function(){var Hn=(0,o.Z)(function*(ms){return ms(Z.origin,Ue)});return function(ms){return Hn.apply(this,arguments)}}()),ln=yield function ct(x){return Promise.all(x.map(function(){var y=(0,o.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(I){return{fulfilled:!1,reason:I}}});return function(C){return y.apply(this,arguments)}}()))}(It);Z.ports[0].postMessage({status:"done",eventId:$,eventType:we,response:ln})})()}_subscribe(C,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(I)}_unsubscribe(C,I){this.handlersMap[C]&&I&&this.handlersMap[C].delete(I),(!I||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function sn(x="",y=10){let C="";for(let I=0;I<y;I++)C+=Math.floor(10*Math.random());return x+C}class jn{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,C,I=50){var Z=this;return(0,o.Z)(function*(){const $=typeof MessageChannel<"u"?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let we,Ue;return new Promise((yt,It)=>{const ln=sn("",20);$.port1.start();const Hn=setTimeout(()=>{It(new Error("unsupported_event"))},I);Ue={messageChannel:$,onMessage(ms){const Vc=ms;if(Vc.data.eventId===ln)switch(Vc.data.status){case"ack":clearTimeout(Hn),we=setTimeout(()=>{It(new Error("timeout"))},3e3);break;case"done":clearTimeout(we),yt(Vc.data.response);break;default:clearTimeout(Hn),clearTimeout(we),It(new Error("invalid_response"))}}},Z.handlers.add(Ue),$.port1.addEventListener("message",Ue.onMessage),Z.target.postMessage({eventType:y,eventId:ln,data:C},[$.port2])}).finally(()=>{Ue&&Z.removeMessageHandler(Ue)})})()}}function ni(){return window}function So(){return typeof ni().WorkerGlobalScope<"u"&&"function"==typeof ni().importScripts}function Gs(){return(Gs=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ir="firebaseLocalStorageDb",vl=1,er="firebaseLocalStorage",hh="fbase_key";class Si{constructor(y){this.request=y}toPromise(){return new Promise((y,C)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function yl(x,y){return x.transaction([er],y?"readwrite":"readonly").objectStore(er)}function hd(){const x=indexedDB.open(Ir,vl);return new Promise((y,C)=>{x.addEventListener("error",()=>{C(x.error)}),x.addEventListener("upgradeneeded",()=>{const I=x.result;try{I.createObjectStore(er,{keyPath:hh})}catch(Z){C(Z)}}),x.addEventListener("success",(0,o.Z)(function*(){const I=x.result;I.objectStoreNames.contains(er)?y(I):(I.close(),yield function Kl(){const x=indexedDB.deleteDatabase(Ir);return new Si(x).toPromise()}(),y(yield hd()))}))})}function fd(x,y,C){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,o.Z)(function*(x,y,C){const I=yl(x,!0).put({[hh]:y,value:C});return new Si(I).toPromise()})).apply(this,arguments)}function wl(){return(wl=(0,o.Z)(function*(x,y){const C=yl(x,!1).get(y),I=yield new Si(C).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function pd(x,y){const C=yl(x,!0).delete(y);return new Si(C).toPromise()}const hf=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,o.Z)(function*(){return C.db||(C.db=yield hd()),C.db})()}_withRetries(C){var I=this;return(0,o.Z)(function*(){let Z=0;for(;;)try{const $=yield I._openDb();return yield C($)}catch($){if(Z++>3)throw $;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,o.Z)(function*(){return So()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,o.Z)(function*(){C.receiver=Rt._getInstance(function wu(){return So()?self:null}()),C.receiver._subscribe("keyChanged",function(){var I=(0,o.Z)(function*(Z,$){return{keyProcessed:(yield C._poll()).includes($.key)}});return function(Z,$){return I.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var I=(0,o.Z)(function*(Z,$){return["keyChanged"]});return function(Z,$){return I.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,o.Z)(function*(){var I,Z;if(C.activeServiceWorker=yield function Mo(){return Gs.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new jn(C.activeServiceWorker);const $=yield C.sender._send("ping",{},800);$&&null!==(I=$[0])&&void 0!==I&&I.fulfilled&&null!==(Z=$[0])&&void 0!==Z&&Z.value.includes("keyChanged")&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var I=this;return(0,o.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function dh(){var x;return(null===(x=navigator?.serviceWorker)||void 0===x?void 0:x.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:C},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const C=yield hd();return yield fd(C,f,"1"),yield pd(C,f),!0}catch{}return!1})()}_withPendingWrite(C){var I=this;return(0,o.Z)(function*(){I.pendingWrites++;try{yield C()}finally{I.pendingWrites--}})()}_set(C,I){var Z=this;return(0,o.Z)(function*(){return Z._withPendingWrite((0,o.Z)(function*(){return yield Z._withRetries($=>fd($,C,I)),Z.localCache[C]=I,Z.notifyServiceWorker(C)}))})()}_get(C){var I=this;return(0,o.Z)(function*(){const Z=yield I._withRetries($=>function fh(x,y){return wl.apply(this,arguments)}($,C));return I.localCache[C]=Z,Z})()}_remove(C){var I=this;return(0,o.Z)(function*(){return I._withPendingWrite((0,o.Z)(function*(){return yield I._withRetries(Z=>pd(Z,C)),delete I.localCache[C],I.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,o.Z)(function*(){const I=yield C._withRetries(we=>{const Ue=yl(we,!1).getAll();return new Si(Ue).toPromise()});if(!I)return[];if(0!==C.pendingWrites)return[];const Z=[],$=new Set;for(const{fbase_key:we,value:Ue}of I)$.add(we),JSON.stringify(C.localCache[we])!==JSON.stringify(Ue)&&(C.notifyListeners(we,Ue),Z.push(we));for(const we of Object.keys(C.localCache))C.localCache[we]&&!$.has(we)&&(C.notifyListeners(we,null),Z.push(we));return Z})()}notifyListeners(C,I){this.localCache[C]=I;const Z=this.listeners[C];if(Z)for(const $ of Array.from(Z))$(I)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(I)}_removeListener(C,I){this.listeners[C]&&(this.listeners[C].delete(I),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})(),ff=1e12;class pf{constructor(y){this.auth=y,this.counter=ff,this._widgets=new Map}render(y,C){const I=this.counter;return this._widgets.set(I,new mh(y,this.auth.name,C||{})),this.counter++,I}reset(y){var C;const I=y||ff;null===(C=this._widgets.get(I))||void 0===C||C.delete(),this._widgets.delete(I)}getResponse(y){var C;return(null===(C=this._widgets.get(y||ff))||void 0===C?void 0:C.getResponse())||""}execute(y){var C=this;return(0,o.Z)(function*(){var I;return null===(I=C._widgets.get(y||ff))||void 0===I||I.execute(),""})()}}class mh{constructor(y,C,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof y?document.getElementById(y):y;Se(Z,"argument-error",{appName:C}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _h(x){const y=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<x;I++)y.push(C.charAt(Math.floor(Math.random()*C.length)));return y.join("")}(50);const{callback:y,"expired-callback":C}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,C)try{C()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wm=uo("rcb"),Dw=new xe(3e4,6e4);class Rc{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=ni().grecaptcha)||void 0===y||!y.render)}load(y,C=""){return Se(function Aw(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(C),y,"argument-error"),this.shouldResolveImmediately(C)&&wn(ni().grecaptcha)?Promise.resolve(ni().grecaptcha):new Promise((I,Z)=>{const $=ni().setTimeout(()=>{Z(Qe(y,"network-request-failed"))},Dw.get());ni()[wm]=()=>{ni().clearTimeout($),delete ni()[wm];const Ue=ni().grecaptcha;if(!Ue||!wn(Ue))return void Z(Qe(y,"internal-error"));const yt=Ue.render;Ue.render=(It,ln)=>{const Hn=yt(It,ln);return this.counter++,Hn},this.hostLanguage=C,I(Ue)},Xn(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:wm,render:"explicit",hl:C})}`).catch(()=>{clearTimeout($),Z(Qe(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var C;return!(null===(C=ni().grecaptcha)||void 0===C||!C.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bm{load(y){return(0,o.Z)(function*(){return new pf(y)})()}clearedOneInstance(){}}const eo="recaptcha",vh={theme:"light",type:"image"};class yh{constructor(y,C=Object.assign({},vh),I){this.parameters=C,this.type=eo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=oi(I),this.isInvisible="invisible"===this.parameters.size,Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof y?document.getElementById(y):y;Se(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bm:new Rc,this.validateStartingState()}verify(){var y=this;return(0,o.Z)(function*(){y.assertNotDestroyed();const C=yield y.render(),I=y.getAssertedRecaptcha();return I.getResponse(C)||new Promise($=>{const we=Ue=>{Ue&&(y.tokenChangeListeners.delete(we),$(Ue))};y.tokenChangeListeners.add(we),y.isInvisible&&I.execute(C)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return C=>{if(this.tokenChangeListeners.forEach(I=>I(C)),"function"==typeof y)y(C);else if("string"==typeof y){const I=ni()[y];"function"==typeof I&&I(C)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,o.Z)(function*(){if(yield y.init(),!y.widgetId){let C=y.container;if(!y.isInvisible){const I=document.createElement("div");C.appendChild(I),C=I}y.widgetId=y.getAssertedRecaptcha().render(C,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,o.Z)(function*(){Se(dn()&&!So(),y.auth,"internal-error"),yield function gf(){let x=null;return new Promise(y=>{"complete"!==document.readyState?(x=()=>y(),window.addEventListener("load",x)):y()}).catch(y=>{throw x&&window.removeEventListener("load",x),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const C=yield function He(x){return Me.apply(this,arguments)}(y.auth);Se(C,y.auth,"internal-error"),y.parameters.sitekey=C})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ms{constructor(y,C){this.verificationId=y,this.onConfirmation=C}confirm(y){const C=Un._fromVerification(this.verificationId,y);return this.onConfirmation(C)}}function Ql(x,y,C){return mf.apply(this,arguments)}function mf(){return(mf=(0,o.Z)(function*(x,y,C){const I=oi(x),Z=yield wh(I,y,(0,ee.m9)(C));return new Ms(Z,$=>An(I,$))})).apply(this,arguments)}function gd(x,y,C){return bu.apply(this,arguments)}function bu(){return(bu=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x);yield Ss(!1,I,"phone");const Z=yield wh(I.auth,y,(0,ee.m9)(C));return new Ms(Z,$=>td(I,$))})).apply(this,arguments)}function Pp(x,y,C){return _f.apply(this,arguments)}function _f(){return(_f=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x),Z=yield wh(I.auth,y,(0,ee.m9)(C));return new Ms(Z,$=>id(I,$))})).apply(this,arguments)}function wh(x,y,C){return vf.apply(this,arguments)}function vf(){return vf=(0,o.Z)(function*(x,y,C){var I;const Z=yield C.verify();try{let $;if(Se("string"==typeof Z,x,"argument-error"),Se(C.type===eo,x,"argument-error"),$="string"==typeof y?{phoneNumber:y}:y,"session"in $){const we=$.session;if("phoneNumber"in $)return Se("enroll"===we.type,x,"internal-error"),(yield function Mc(x,y){return gt(x,"POST","/v2/accounts/mfaEnrollment:start",We(x,y))}(x,{idToken:we.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{Se("signin"===we.type,x,"internal-error");const Ue=(null===(I=$.multiFactorHint)||void 0===I?void 0:I.uid)||$.multiFactorUid;return Se(Ue,x,"missing-multi-factor-info"),(yield function Sp(x,y){return gt(x,"POST","/v2/accounts/mfaSignIn:start",We(x,y))}(x,{mfaPendingCredential:we.credential,mfaEnrollmentId:Ue,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:we}=yield function ho(x,y){return Na.apply(this,arguments)}(x,{phoneNumber:$.phoneNumber,recaptchaToken:Z});return we}}finally{C._reset()}}),vf.apply(this,arguments)}function Ks(x,y){return ai.apply(this,arguments)}function ai(){return(ai=(0,o.Z)(function*(x,y){yield fo((0,ee.m9)(x),y)})).apply(this,arguments)}let Qs=(()=>{class x{constructor(C){this.providerId=x.PROVIDER_ID,this.auth=oi(C)}verifyPhoneNumber(C,I){return wh(this.auth,C,(0,ee.m9)(I))}static credential(C,I){return Un._fromVerification(C,I)}static credentialFromResult(C){return x.credentialFromTaggedObject(C)}static credentialFromError(C){return x.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:I,temporaryProof:Z}=C;return I&&Z?Un._fromTokenResponse(I,Z):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function Ht(x,y){return y?cr(y):(Se(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class ns extends hs{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Vs(y,this._buildIdpRequest())}_linkToIdToken(y,C){return Vs(y,this._buildIdpRequest(C))}_getReauthenticationResolver(y){return Vs(y,this._buildIdpRequest())}_buildIdpRequest(y){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(C.idToken=y),C}}function wr(x){return Zl(x.auth,new ns(x),x.bypassAuthState)}function kp(x){const{auth:y,user:C}=x;return Se(C,y,"internal-error"),Vl(C,new ns(x),x.bypassAuthState)}function md(x){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,o.Z)(function*(x){const{auth:y,user:C}=x;return Se(C,y,"internal-error"),fo(C,new ns(x),x.bypassAuthState)})).apply(this,arguments)}class yf{constructor(y,C,I,Z,$=!1){this.auth=y,this.resolver=I,this.user=Z,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var y=this;return new Promise(function(){var C=(0,o.Z)(function*(I,Z){y.pendingPromise={resolve:I,reject:Z};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch($){y.reject($)}});return function(I,Z){return C.apply(this,arguments)}}())}onAuthEvent(y){var C=this;return(0,o.Z)(function*(){const{urlResponse:I,sessionId:Z,postBody:$,tenantId:we,error:Ue,type:yt}=y;if(Ue)return void C.reject(Ue);const It={auth:C.auth,requestUri:I,sessionId:Z,tenantId:we||void 0,postBody:$||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(yt)(It))}catch(ln){C.reject(ln)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return wr;case"linkViaPopup":case"linkViaRedirect":return md;case"reauthViaPopup":case"reauthViaRedirect":return kp;default:nt(this.auth,"internal-error")}}resolve(y){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Op=new xe(2e3,1e4);function Js(x,y,C){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,o.Z)(function*(x,y,C){const I=oi(x);vt(x,y,ha);const Z=Ht(I,C);return new wf(I,"signInViaPopup",y,Z).executeNotNull()})).apply(this,arguments)}function bh(x,y,C){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x);vt(I.auth,y,ha);const Z=Ht(I.auth,C);return new wf(I.auth,"reauthViaPopup",y,Z,I).executeNotNull()})).apply(this,arguments)}function Xl(x,y,C){return qt.apply(this,arguments)}function qt(){return(qt=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x);vt(I.auth,y,ha);const Z=Ht(I.auth,C);return new wf(I.auth,"linkViaPopup",y,Z,I).executeNotNull()})).apply(this,arguments)}let wf=(()=>{class x extends yf{constructor(C,I,Z,$,we){super(C,I,$,we),this.provider=Z,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var C=this;return(0,o.Z)(function*(){const I=yield C.execute();return Se(I,C.auth,"internal-error"),I})()}onExecution(){var C=this;return(0,o.Z)(function*(){tn(1===C.filter.length,"Popup operations only handle one event");const I=sn();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],I),C.authWindow.associatedEvent=I,C.resolver._originValidation(C.auth).catch(Z=>{C.reject(Z)}),C.resolver._isIframeWebStorageSupported(C.auth,Z=>{Z||C.reject(Qe(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const C=()=>{var I,Z;this.pollId=null!==(Z=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(C,Op.get())};C()}}return x.currentPopupAction=null,x})();const Rp="pendingRedirect",gs=new Map;class Ch extends yf{constructor(y,C,I=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,I),this.eventId=null}execute(){var y=()=>super.execute,C=this;return(0,o.Z)(function*(){let I=gs.get(C.auth._key());if(!I){try{const $=(yield function fr(x,y){return _d.apply(this,arguments)}(C.resolver,C.auth))?yield y().call(C):null;I=()=>Promise.resolve($)}catch(Z){I=()=>Promise.reject(Z)}gs.set(C.auth._key(),I)}return C.bypassAuthState||gs.set(C.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(y){var C=()=>super.onAuthEvent,I=this;return(0,o.Z)(function*(){if("signInViaRedirect"===y.type)return C().call(I,y);if("unknown"!==y.type){if(y.eventId){const Z=yield I.auth._redirectUserForId(y.eventId);if(Z)return I.user=Z,C().call(I,y);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function _d(){return(_d=(0,o.Z)(function*(x,y){const C=Th(y),I=Cm(x);if(!(yield I._isAvailable()))return!1;const Z="true"===(yield I._get(C));return yield I._remove(C),Z})).apply(this,arguments)}function bf(x,y){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,o.Z)(function*(x,y){return Cm(x)._set(Th(y),"true")})).apply(this,arguments)}function vd(){gs.clear()}function yd(x,y){gs.set(x._key(),y)}function Cm(x){return cr(x._redirectPersistence)}function Th(x){return xo(Rp,x.config.apiKey,x.name)}function bl(x,y,C){return function Np(x,y,C){return Cf.apply(this,arguments)}(x,y,C)}function Cf(){return(Cf=(0,o.Z)(function*(x,y,C){const I=oi(x);vt(x,y,ha),yield I._initializationPromise;const Z=Ht(I,C);return yield bf(Z,I),Z._openRedirect(I,y,"signInViaRedirect")})).apply(this,arguments)}function Cu(x,y,C){return function ec(x,y,C){return Ps.apply(this,arguments)}(x,y,C)}function Ps(){return(Ps=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x);vt(I.auth,y,ha),yield I.auth._initializationPromise;const Z=Ht(I.auth,C);yield bf(Z,I.auth);const $=yield is(I);return Z._openRedirect(I.auth,y,"reauthViaRedirect",$)})).apply(this,arguments)}function Tf(x,y,C){return function Sr(x,y,C){return wd.apply(this,arguments)}(x,y,C)}function wd(){return(wd=(0,o.Z)(function*(x,y,C){const I=(0,ee.m9)(x);vt(I.auth,y,ha),yield I.auth._initializationPromise;const Z=Ht(I.auth,C);yield Ss(!1,I,y.providerId),yield bf(Z,I.auth);const $=yield is(I);return Z._openRedirect(I.auth,y,"linkViaRedirect",$)})).apply(this,arguments)}function Lp(x,y){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,o.Z)(function*(x,y){return yield oi(x)._initializationPromise,Fc(x,y,!1)})).apply(this,arguments)}function Fc(x,y){return _a.apply(this,arguments)}function _a(){return(_a=(0,o.Z)(function*(x,y,C=!1){const I=oi(x),Z=Ht(I,y),we=yield new Ch(I,Z,C).execute();return we&&!C&&(delete we.user._redirectEventId,yield I._persistUserIfCurrent(we.user),yield I._setRedirectUser(null,y)),we})).apply(this,arguments)}function is(x){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,o.Z)(function*(x){const y=sn(`${x.uid}:::`);return x._redirectEventId=y,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),y})).apply(this,arguments)}class Eh{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let C=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(y,I)&&(C=!0,this.sendToConsumer(y,I),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Cl(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return va(x);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=y,C=!0)),C}sendToConsumer(y,C){var I;if(y.error&&!va(y)){const Z=(null===(I=y.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";C.onError(Qe(this.auth,Z))}else C.onAuthEvent(y)}isEventForConsumer(y,C){const I=null===C.eventId||!!y.eventId&&y.eventId===C.eventId;return C.filter.includes(y.type)&&I}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tu(y))}saveEventToCache(y){this.cachedEventUids.add(Tu(y)),this.lastProcessedEventTime=Date.now()}}function Tu(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(y=>y).join("-")}function va({type:x,error:y}){return"unknown"===x&&"auth/no-auth-event"===y?.code}function Fr(x){return ks.apply(this,arguments)}function ks(){return(ks=(0,o.Z)(function*(x,y={}){return gt(x,"GET","/v1/projects",y)})).apply(this,arguments)}const Iw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eu=/^https?/;function Du(){return(Du=(0,o.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:y}=yield Fr(x);for(const C of y)try{if(Fp(C))return}catch{}nt(x,"unauthorized-domain")})).apply(this,arguments)}function Fp(x){const y=Zt(),{protocol:C,hostname:I}=new URL(y);if(x.startsWith("chrome-extension://")){const we=new URL(x);return""===we.hostname&&""===I?"chrome-extension:"===C&&x.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===C&&we.hostname===I}if(!Eu.test(C))return!1;if(Iw.test(x))return I===x;const Z=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(I)}const Uc=new xe(3e4,6e4);function xu(){const x=ni().___jsl;if(x?.H)for(const y of Object.keys(x.H))if(x.H[y].r=x.H[y].r||[],x.H[y].L=x.H[y].L||[],x.H[y].r=[...x.H[y].L],x.CP)for(let C=0;C<x.CP.length;C++)x.CP[C]=null}let tc=null;const Au=new xe(5e3,15e3),nc="__/auth/iframe",Df="emulator/auth/iframe",Tl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Up(x){const y=x.config;Se(y.authDomain,x,"auth-domain-config-required");const C=y.emulator?ze(y,Df):`https://${x.config.authDomain}/${nc}`,I={apiKey:y.apiKey,appName:x.name,v:W.SDK_VERSION},Z=xf.get(x.config.apiHost);Z&&(I.eid=Z);const $=x._getFrameworks();return $.length&&(I.fw=$.join(",")),`${C}?${(0,ee.xO)(I).slice(1)}`}function Bp(){return Bp=(0,o.Z)(function*(x){const y=yield function Bc(x){return tc=tc||function bn(x){return new Promise((y,C)=>{var I,Z,$;function we(){xu(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{xu(),C(Qe(x,"network-request-failed"))},timeout:Uc.get()})}if(null!==(Z=null===(I=ni().gapi)||void 0===I?void 0:I.iframes)&&void 0!==Z&&Z.Iframe)y(gapi.iframes.getContext());else{if(null===($=ni().gapi)||void 0===$||!$.load){const Ue=uo("iframefcb");return ni()[Ue]=()=>{gapi.load?we():C(Qe(x,"network-request-failed"))},Xn(`https://apis.google.com/js/api.js?onload=${Ue}`).catch(yt=>C(yt))}we()}}).catch(y=>{throw tc=null,y})}(x),tc}(x),C=ni().gapi;return Se(C,x,"internal-error"),y.open({where:document.body,url:Up(x),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tl,dontclear:!0},I=>new Promise(function(){var Z=(0,o.Z)(function*($,we){yield I.restyle({setHideOnLeave:!1});const Ue=Qe(x,"network-request-failed"),yt=ni().setTimeout(()=>{we(Ue)},Au.get());function It(){ni().clearTimeout(yt),$(I)}I.ping(It).then(It,()=>{we(Ue)})});return function($,we){return Z.apply(this,arguments)}}()))}),Bp.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k=500,B=600,X="_blank",me="http://localhost";class ye{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Tt="__/auth/handler",Jt="emulator/auth/handler",Sn=encodeURIComponent("fac");function Dn(x,y,C,I,Z,$){return br.apply(this,arguments)}function br(){return(br=(0,o.Z)(function*(x,y,C,I,Z,$){Se(x.config.authDomain,x,"auth-domain-config-required"),Se(x.config.apiKey,x,"invalid-api-key");const we={apiKey:x.config.apiKey,appName:x.name,authType:C,redirectUrl:I,v:W.SDK_VERSION,eventId:Z};if(y instanceof ha){y.setDefaultLanguage(x.languageCode),we.providerId=y.providerId||"",(0,ee.xb)(y.getCustomParameters())||(we.customParameters=JSON.stringify(y.getCustomParameters()));for(const[ln,Hn]of Object.entries($||{}))we[ln]=Hn}if(y instanceof ol){const ln=y.getScopes().filter(Hn=>""!==Hn);ln.length>0&&(we.scopes=ln.join(","))}x.tenantId&&(we.tid=x.tenantId);const Ue=we;for(const ln of Object.keys(Ue))void 0===Ue[ln]&&delete Ue[ln];const yt=yield x._getAppCheckToken(),It=yt?`#${Sn}=${encodeURIComponent(yt)}`:"";return`${function fn({config:x}){return x.emulator?ze(x,Jt):`https://${x.authDomain}/${Tt}`}(x)}?${(0,ee.xO)(Ue).slice(1)}${It}`})).apply(this,arguments)}const ya="webStorageSupport",Xs=class If{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ke,this._completeRedirectFn=Fc,this._overrideRedirectResult=yd}_openPopup(y,C,I,Z){var $=this;return(0,o.Z)(function*(){var we;tn(null===(we=$.eventManagers[y._key()])||void 0===we?void 0:we.manager,"_initialize() not called before _openPopup()");const Ue=yield Dn(y,C,I,Zt(),Z);return function Ve(x,y,C,I=k,Z=B){const $=Math.max((window.screen.availHeight-Z)/2,0).toString(),we=Math.max((window.screen.availWidth-I)/2,0).toString();let Ue="";const yt=Object.assign(Object.assign({},A),{width:I.toString(),height:Z.toString(),top:$,left:we}),It=(0,ee.z$)().toLowerCase();C&&(Ue=q(It)?X:C),G(It)&&(y=y||me,yt.scrollbars="yes");const ln=Object.entries(yt).reduce((ms,[Vc,Su])=>`${ms}${Vc}=${Su},`,"");if(function _n(x=(0,ee.z$)()){var y;return cn(x)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(It)&&"_self"!==Ue)return function Dt(x,y){const C=document.createElement("a");C.href=x,C.target=y;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(I)}(y||"",Ue),new ye(null);const Hn=window.open(y||"",Ue,ln);Se(Hn,x,"popup-blocked");try{Hn.focus()}catch{}return new ye(Hn)}(y,Ue,sn())})()}_openRedirect(y,C,I,Z){var $=this;return(0,o.Z)(function*(){return yield $._originValidation(y),function Vi(x){ni().location.href=x}(yield Dn(y,C,I,Zt(),Z)),new Promise(()=>{})})()}_initialize(y){const C=y._key();if(this.eventManagers[C]){const{manager:Z,promise:$}=this.eventManagers[C];return Z?Promise.resolve(Z):(tn($,"If manager is not set, promise should be"),$)}const I=this.initAndGetManager(y);return this.eventManagers[C]={promise:I},I.catch(()=>{delete this.eventManagers[C]}),I}initAndGetManager(y){var C=this;return(0,o.Z)(function*(){const I=yield function Af(x){return Bp.apply(this,arguments)}(y),Z=new Eh(y);return I.register("authEvent",$=>(Se($?.authEvent,y,"invalid-auth-event"),{status:Z.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[y._key()]={manager:Z},C.iframes[y._key()]=I,Z})()}_isIframeWebStorageSupported(y,C){this.iframes[y._key()].send(ya,{type:ya},Z=>{var $;const we=null===($=Z?.[0])||void 0===$?void 0:$[ya];void 0!==we&&C(!!we),nt(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const C=y._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function Ef(x){return Du.apply(this,arguments)}(y)),this.originValidationPromises[C]}get _shouldInitProactively(){return En()||Y()||cn()}};class Os{constructor(y){this.factorId=y}_process(y,C,I){switch(C.type){case"enroll":return this._finalizeEnroll(y,C.credential,I);case"signin":return this._finalizeSignIn(y,C.credential);default:return Lt("unexpected MultiFactorSessionType")}}}class Zo extends Os{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Zo(y)}_finalizeEnroll(y,C,I){return function gl(x,y){return gt(x,"POST","/v2/accounts/mfaEnrollment:finalize",We(x,y))}(y,{idToken:C,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,C){return function Oc(x,y){return gt(x,"POST","/v2/accounts/mfaSignIn:finalize",We(x,y))}(y,{mfaPendingCredential:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dh=(()=>{class x{constructor(){}static assertion(C){return Zo._fromCredential(C)}}return x.FACTOR_ID="phone",x})();var Td="@firebase/auth";class Iu{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var C=this;return(0,o.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const C=this.auth.onIdTokenChanged(I=>{y(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,C),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const C=this.internalListeners.get(y);C&&(this.internalListeners.delete(y),C(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Dm=(0,ee.Pz)("authIdTokenMaxAge")||300;let Rv=null;const Sw=x=>function(){var y=(0,o.Z)(function*(C){const I=C&&(yield C.getIdTokenResult()),Z=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(Z&&Z>Dm)return;const $=I?.token;Rv!==$&&(Rv=$,yield fetch(x,{method:$?"POST":"DELETE",headers:$?{Authorization:`Bearer ${$}`}:{}}))});return function(C){return y.apply(this,arguments)}}();function Zp(x=(0,W.getApp)()){const y=(0,W._getProvider)(x,"auth");if(y.isInitialized())return y.getImmediate();const C=function Xi(x,y){const C=(0,W._getProvider)(x,"auth");if(C.isInitialized()){const Z=C.getImmediate(),$=C.getOptions();if((0,ee.vZ)($,y??{}))return Z;nt(Z,"already-initialized")}return C.initialize({options:y})}(x,{popupRedirectResolver:Xs,persistence:[hf,ce,ke]}),I=(0,ee.Pz)("authTokenSyncURL");if(I){const $=Sw(I);(function pl(x,y,C){(0,ee.m9)(x).beforeAuthStateChanged(y,C)})(C,$,()=>$(C.currentUser)),function ps(x,y,C,I){(0,ee.m9)(x).onIdTokenChanged(y,C,I)}(C,we=>$(we))}const Z=(0,ee.q4)("auth");return Z&&Qt(C,`http://${Z}`),C}!function Em(x){(0,W._registerComponent)(new Ee.wA("auth",(y,{options:C})=>{const I=y.getProvider("app").getImmediate(),Z=y.getProvider("heartbeat"),$=y.getProvider("app-check-internal"),{apiKey:we,authDomain:Ue}=I.options;Se(we&&!we.includes(":"),"invalid-api-key",{appName:I.name});const yt={apiKey:we,authDomain:Ue,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ua(x)},It=new In(I,Z,$,yt);return function Li(x,y){const C=y?.persistence||[],I=(Array.isArray(C)?C:[C]).map(cr);y?.errorMap&&x._updateErrorMap(y.errorMap),x._initializeWithPersistence(I,y?.popupRedirectResolver)}(It,C),It},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,C,I)=>{y.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new Ee.wA("auth-internal",y=>{const C=oi(y.getProvider("auth").getImmediate());return new Iu(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(Td,"0.23.2",function Ih(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,W.registerVersion)(Td,"0.23.2","esm2017")}("Browser")},2090:(Yt,Xe,z)=>{"use strict";z.d(Xe,{$s:()=>cr,BH:()=>lt,DV:()=>To,Dv:()=>Hi,G6:()=>ze,GJ:()=>ir,L:()=>Ne,LL:()=>ui,P0:()=>mt,Pz:()=>Qe,Sg:()=>vt,UG:()=>Lt,UI:()=>Yi,US:()=>Ee,Wj:()=>Tr,Wl:()=>ri,Yr:()=>xe,ZB:()=>Ce,ZR:()=>gt,aH:()=>nt,b$:()=>dn,cI:()=>Vn,dS:()=>Ko,eu:()=>pt,g5:()=>W,gK:()=>Gr,gQ:()=>ti,h$:()=>je,hl:()=>Ke,hu:()=>ee,jU:()=>tn,lb:()=>kn,m9:()=>xo,ne:()=>Ln,p$:()=>fe,pd:()=>Wr,q4:()=>ut,r3:()=>ao,ru:()=>Zt,tV:()=>he,uI:()=>Se,ug:()=>zn,vZ:()=>jt,w1:()=>Cn,w9:()=>Rr,xO:()=>lr,xb:()=>nl,z$:()=>rt,zI:()=>Je,zd:()=>lo});const o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function(le,oe){if(!le)throw W(oe)},W=function(le){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+le)},Te=function(le){const oe=[];let G=0;for(let Y=0;Y<le.length;Y++){let q=le.charCodeAt(Y);q<128?oe[G++]=q:q<2048?(oe[G++]=q>>6|192,oe[G++]=63&q|128):55296==(64512&q)&&Y+1<le.length&&56320==(64512&le.charCodeAt(Y+1))?(q=65536+((1023&q)<<10)+(1023&le.charCodeAt(++Y)),oe[G++]=q>>18|240,oe[G++]=q>>12&63|128,oe[G++]=q>>6&63|128,oe[G++]=63&q|128):(oe[G++]=q>>12|224,oe[G++]=q>>6&63|128,oe[G++]=63&q|128)}return oe},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(le,oe){if(!Array.isArray(le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=oe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let q=0;q<le.length;q+=3){const ge=le[q],De=q+1<le.length,kt=De?le[q+1]:0,pn=q+2<le.length,cn=pn?le[q+2]:0;let Ai=(15&kt)<<2|cn>>6,En=63&cn;pn||(En=64,De||(Ai=64)),Y.push(G[ge>>2],G[(3&ge)<<4|kt>>4],G[Ai],G[En])}return Y.join("")},encodeString(le,oe){return this.HAS_NATIVE_SUPPORT&&!oe?btoa(le):this.encodeByteArray(Te(le),oe)},decodeString(le,oe){return this.HAS_NATIVE_SUPPORT&&!oe?atob(le):function(le){const oe=[];let G=0,Y=0;for(;G<le.length;){const q=le[G++];if(q<128)oe[Y++]=String.fromCharCode(q);else if(q>191&&q<224){const ge=le[G++];oe[Y++]=String.fromCharCode((31&q)<<6|63&ge)}else if(q>239&&q<365){const pn=((7&q)<<18|(63&le[G++])<<12|(63&le[G++])<<6|63&le[G++])-65536;oe[Y++]=String.fromCharCode(55296+(pn>>10)),oe[Y++]=String.fromCharCode(56320+(1023&pn))}else{const ge=le[G++],De=le[G++];oe[Y++]=String.fromCharCode((15&q)<<12|(63&ge)<<6|63&De)}}return oe.join("")}(this.decodeStringToByteArray(le,oe))},decodeStringToByteArray(le,oe){this.init_();const G=oe?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let q=0;q<le.length;){const ge=G[le.charAt(q++)],kt=q<le.length?G[le.charAt(q)]:0;++q;const cn=q<le.length?G[le.charAt(q)]:64;++q;const _n=q<le.length?G[le.charAt(q)]:64;if(++q,null==ge||null==kt||null==cn||null==_n)throw new $e;Y.push(ge<<2|kt>>4),64!==cn&&(Y.push(kt<<4&240|cn>>2),64!==_n&&Y.push(cn<<6&192|_n))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let le=0;le<this.ENCODED_VALS.length;le++)this.byteToCharMap_[le]=this.ENCODED_VALS.charAt(le),this.charToByteMap_[this.byteToCharMap_[le]]=le,this.byteToCharMapWebSafe_[le]=this.ENCODED_VALS_WEBSAFE.charAt(le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[le]]=le,le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(le)]=le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(le)]=le)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const je=function(le){const oe=Te(le);return Ee.encodeByteArray(oe,!0)},Ne=function(le){return je(le).replace(/\./g,"")},he=function(le){try{return Ee.decodeString(le,!0)}catch(oe){console.error("base64Decode failed: ",oe)}return null};function fe(le){return Ce(void 0,le)}function Ce(le,oe){if(!(oe instanceof Object))return oe;switch(oe.constructor){case Date:return new Date(oe.getTime());case Object:void 0===le&&(le={});break;case Array:le=[];break;default:return oe}for(const G in oe)!oe.hasOwnProperty(G)||!tt(G)||(le[G]=Ce(le[G],oe[G]));return le}function tt(le){return"__proto__"!==le}const st=()=>{try{return function it(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const le=process.env.__FIREBASE_DEFAULTS__;return le?JSON.parse(le):void 0})()||(()=>{if(typeof document>"u")return;let le;try{le=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const oe=le&&he(le[1]);return oe&&JSON.parse(oe)})()}catch(le){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${le}`)}},ut=le=>{var oe,G;return null===(G=null===(oe=st())||void 0===oe?void 0:oe.emulatorHosts)||void 0===G?void 0:G[le]},mt=le=>{const oe=ut(le);if(!oe)return;const G=oe.lastIndexOf(":");if(G<=0||G+1===oe.length)throw new Error(`Invalid host ${oe} with no separate hostname and port!`);const Y=parseInt(oe.substring(G+1),10);return"["===oe[0]?[oe.substring(1,G-1),Y]:[oe.substring(0,G),Y]},nt=()=>{var le;return null===(le=st())||void 0===le?void 0:le.config},Qe=le=>{var oe;return null===(oe=st())||void 0===oe?void 0:oe[`_${le}`]};class lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((oe,G)=>{this.resolve=oe,this.reject=G})}wrapCallback(oe){return(G,Y)=>{G?this.reject(G):this.resolve(Y),"function"==typeof oe&&(this.promise.catch(()=>{}),1===oe.length?oe(G):oe(G,Y))}}}function vt(le,oe){if(le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=oe||"demo-project",q=le.iat||0,ge=le.sub||le.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:q,exp:q+3600,auth_time:q,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},le);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(De)),""].join(".")}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function Lt(){var le;const oe=null===(le=st())||void 0===le?void 0:le.forceEnvironment;if("node"===oe)return!0;if("browser"===oe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tn(){return"object"==typeof self&&self.self===self}function Zt(){const le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof le&&void 0!==le.id}function dn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Cn(){const le=rt();return le.indexOf("MSIE ")>=0||le.indexOf("Trident/")>=0}function xe(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN}function ze(){return!Lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){try{return"object"==typeof indexedDB}catch{return!1}}function pt(){return new Promise((le,oe)=>{try{let G=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Y);q.onsuccess=()=>{q.result.close(),G||self.indexedDB.deleteDatabase(Y),le(!0)},q.onupgradeneeded=()=>{G=!1},q.onerror=()=>{var ge;oe((null===(ge=q.error)||void 0===ge?void 0:ge.message)||"")}}catch(G){oe(G)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gt extends Error{constructor(oe,G,Y){super(G),this.code=oe,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ui.prototype.create)}}class ui{constructor(oe,G,Y){this.service=oe,this.serviceName=G,this.errors=Y}create(oe,...G){const Y=G[0]||{},q=`${this.service}/${oe}`,ge=this.errors[oe],De=ge?function Pt(le,oe){return le.replace(rn,(G,Y)=>{const q=oe[Y];return null!=q?String(q):`<${Y}?>`})}(ge,Y):"Error";return new gt(q,`${this.serviceName}: ${De} (${q}).`,Y)}}const rn=/\{\$([^}]+)}/g;function Vn(le){return JSON.parse(le)}function ri(le){return JSON.stringify(le)}const _i=function(le){let oe={},G={},Y={},q="";try{const ge=le.split(".");oe=Vn(he(ge[0])||""),G=Vn(he(ge[1])||""),q=ge[2],Y=G.d||{},delete G.d}catch{}return{header:oe,claims:G,data:Y,signature:q}},Rr=function(le){const G=_i(le).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},ir=function(le){const oe=_i(le).claims;return"object"==typeof oe&&!0===oe.admin};function ao(le,oe){return Object.prototype.hasOwnProperty.call(le,oe)}function To(le,oe){if(Object.prototype.hasOwnProperty.call(le,oe))return le[oe]}function nl(le){for(const oe in le)if(Object.prototype.hasOwnProperty.call(le,oe))return!1;return!0}function Yi(le,oe,G){const Y={};for(const q in le)Object.prototype.hasOwnProperty.call(le,q)&&(Y[q]=oe.call(G,le[q],q,le));return Y}function jt(le,oe){if(le===oe)return!0;const G=Object.keys(le),Y=Object.keys(oe);for(const q of G){if(!Y.includes(q))return!1;const ge=le[q],De=oe[q];if(Ki(ge)&&Ki(De)){if(!jt(ge,De))return!1}else if(ge!==De)return!1}for(const q of Y)if(!G.includes(q))return!1;return!0}function Ki(le){return null!==le&&"object"==typeof le}function lr(le){const oe=[];for(const[G,Y]of Object.entries(le))Array.isArray(Y)?Y.forEach(q=>{oe.push(encodeURIComponent(G)+"="+encodeURIComponent(q))}):oe.push(encodeURIComponent(G)+"="+encodeURIComponent(Y));return oe.length?"&"+oe.join("&"):""}function lo(le){const oe={};return le.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[q,ge]=Y.split("=");oe[decodeURIComponent(q)]=decodeURIComponent(ge)}}),oe}function Wr(le){const oe=le.indexOf("?");if(!oe)return"";const G=le.indexOf("#",oe);return le.substring(oe,G>0?G:void 0)}class ti{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let oe=1;oe<this.blockSize;++oe)this.pad_[oe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(oe,G){G||(G=0);const Y=this.W_;if("string"==typeof oe)for(let _n=0;_n<16;_n++)Y[_n]=oe.charCodeAt(G)<<24|oe.charCodeAt(G+1)<<16|oe.charCodeAt(G+2)<<8|oe.charCodeAt(G+3),G+=4;else for(let _n=0;_n<16;_n++)Y[_n]=oe[G]<<24|oe[G+1]<<16|oe[G+2]<<8|oe[G+3],G+=4;for(let _n=16;_n<80;_n++){const Ai=Y[_n-3]^Y[_n-8]^Y[_n-14]^Y[_n-16];Y[_n]=4294967295&(Ai<<1|Ai>>>31)}let cn,Fn,q=this.chain_[0],ge=this.chain_[1],De=this.chain_[2],kt=this.chain_[3],pn=this.chain_[4];for(let _n=0;_n<80;_n++){_n<40?_n<20?(cn=kt^ge&(De^kt),Fn=1518500249):(cn=ge^De^kt,Fn=1859775393):_n<60?(cn=ge&De|kt&(ge|De),Fn=2400959708):(cn=ge^De^kt,Fn=3395469782);const Ai=(q<<5|q>>>27)+cn+pn+Fn+Y[_n]&4294967295;pn=kt,kt=De,De=4294967295&(ge<<30|ge>>>2),ge=q,q=Ai}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+ge&4294967295,this.chain_[2]=this.chain_[2]+De&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(oe,G){if(null==oe)return;void 0===G&&(G=oe.length);const Y=G-this.blockSize;let q=0;const ge=this.buf_;let De=this.inbuf_;for(;q<G;){if(0===De)for(;q<=Y;)this.compress_(oe,q),q+=this.blockSize;if("string"==typeof oe){for(;q<G;)if(ge[De]=oe.charCodeAt(q),++De,++q,De===this.blockSize){this.compress_(ge),De=0;break}}else for(;q<G;)if(ge[De]=oe[q],++De,++q,De===this.blockSize){this.compress_(ge),De=0;break}}this.inbuf_=De,this.total_+=G}digest(){const oe=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&G,G/=256;this.compress_(this.buf_);let Y=0;for(let q=0;q<5;q++)for(let ge=24;ge>=0;ge-=8)oe[Y]=this.chain_[q]>>ge&255,++Y;return oe}}function Ln(le,oe){const G=new Wt(le,oe);return G.subscribe.bind(G)}class Wt{constructor(oe,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{oe(this)}).catch(Y=>{this.error(Y)})}next(oe){this.forEachObserver(G=>{G.next(oe)})}error(oe){this.forEachObserver(G=>{G.error(oe)}),this.close(oe)}complete(){this.forEachObserver(oe=>{oe.complete()}),this.close()}subscribe(oe,G,Y){let q;if(void 0===oe&&void 0===G&&void 0===Y)throw new Error("Missing Observer.");q=function Zn(le,oe){if("object"!=typeof le||null===le)return!1;for(const G of oe)if(G in le&&"function"==typeof le[G])return!0;return!1}(oe,["next","error","complete"])?oe:{next:oe,error:G,complete:Y},void 0===q.next&&(q.next=$r),void 0===q.error&&(q.error=$r),void 0===q.complete&&(q.complete=$r);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),ge}unsubscribeOne(oe){void 0===this.observers||void 0===this.observers[oe]||(delete this.observers[oe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(oe){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,oe)}sendOne(oe,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[oe])try{G(this.observers[oe])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(oe){this.finalized||(this.finalized=!0,void 0!==oe&&(this.finalError=oe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $r(){}const Hi=function(le,oe,G,Y){let q;if(Y<oe?q="at least "+oe:Y>G&&(q=0===G?"none":"no more than "+G),q)throw new Error(le+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+q+".")};function Gr(le,oe){return`${le} failed: ${oe} argument `}function Tr(le,oe,G,Y){if((!Y||G)&&"function"!=typeof G)throw new Error(Gr(le,oe)+"must be a valid function.")}function kn(le,oe,G,Y){if((!Y||G)&&("object"!=typeof G||null===G))throw new Error(Gr(le,oe)+"must be a valid context object.")}const Ko=function(le){const oe=[];let G=0;for(let Y=0;Y<le.length;Y++){let q=le.charCodeAt(Y);if(q>=55296&&q<=56319){const ge=q-55296;Y++,ee(Y<le.length,"Surrogate pair missing trail surrogate."),q=65536+(ge<<10)+(le.charCodeAt(Y)-56320)}q<128?oe[G++]=q:q<2048?(oe[G++]=q>>6|192,oe[G++]=63&q|128):q<65536?(oe[G++]=q>>12|224,oe[G++]=q>>6&63|128,oe[G++]=63&q|128):(oe[G++]=q>>18|240,oe[G++]=q>>12&63|128,oe[G++]=q>>6&63|128,oe[G++]=63&q|128)}return oe},zn=function(le){let oe=0;for(let G=0;G<le.length;G++){const Y=le.charCodeAt(G);Y<128?oe++:Y<2048?oe+=2:Y>=55296&&Y<=56319?(oe+=4,G++):oe+=3}return oe},Rn=1e3,rr=2,Ji=144e5,Yr=.5;function cr(le,oe=Rn,G=rr){const Y=oe*Math.pow(G,le),q=Math.round(Yr*Y*(Math.random()-.5)*2);return Math.min(Ji,Y+q)}function xo(le){return le&&le._delegate?le._delegate:le}},2432:(Yt,Xe,z)=>{"use strict";var o=z(4650);let ee=null;function W(){return ee}class Oe{}const Ee=new o.OlP("DocumentToken");let $e=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function je(){return(0,o.LFG)(he)}()},providedIn:"platform"}),n})();const Ne=new o.OlP("Location Initialized");let he=(()=>{class n extends $e{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(e){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){fe()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){fe()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ce(){return new he((0,o.LFG)(Ee))}()},providedIn:"platform"}),n})();function fe(){return!!window.history.pushState}function tt(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function it(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Et(n){return n&&"?"!==n[0]?"?"+n:n}let Vt=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(st)},providedIn:"root"}),n})();const Be=new o.OlP("appBaseHref");let st=(()=>{class n extends Vt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return tt(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Et(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const a=this.prepareExternalUrl(r+Et(s));this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,s){const a=this.prepareExternalUrl(r+Et(s));this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($e),o.LFG(Be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ut=(()=>{class n extends Vt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=tt(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let a=this.prepareExternalUrl(r+Et(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,s){let a=this.prepareExternalUrl(r+Et(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($e),o.LFG(Be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),mt=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function vt(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(it(lt(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Et(i))}normalize(e){return n.stripTrailingSlash(function Qe(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,lt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Et(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Et(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=Et,n.joinWithSlash=tt,n.stripTrailingSlash=it,n.\u0275fac=function(e){return new(e||n)(o.LFG(Vt))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function nt(){return new mt((0,o.LFG)(Vt))}()},providedIn:"root"}),n})();function lt(n){return n.replace(/\/index.html$/,"")}var Lt=(()=>((Lt=Lt||{})[Lt.Zero=0]="Zero",Lt[Lt.One=1]="One",Lt[Lt.Two=2]="Two",Lt[Lt.Few=3]="Few",Lt[Lt.Many=4]="Many",Lt[Lt.Other=5]="Other",Lt))(),tn=(()=>((tn=tn||{})[tn.Format=0]="Format",tn[tn.Standalone=1]="Standalone",tn))(),Zt=(()=>((Zt=Zt||{})[Zt.Narrow=0]="Narrow",Zt[Zt.Abbreviated=1]="Abbreviated",Zt[Zt.Wide=2]="Wide",Zt[Zt.Short=3]="Short",Zt))(),dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.Medium=1]="Medium",dn[dn.Long=2]="Long",dn[dn.Full=3]="Full",dn))(),zt=(()=>((zt=zt||{})[zt.Decimal=0]="Decimal",zt[zt.Group=1]="Group",zt[zt.List=2]="List",zt[zt.PercentSign=3]="PercentSign",zt[zt.PlusSign=4]="PlusSign",zt[zt.MinusSign=5]="MinusSign",zt[zt.Exponential=6]="Exponential",zt[zt.SuperscriptingExponent=7]="SuperscriptingExponent",zt[zt.PerMille=8]="PerMille",zt[zt.Infinity=9]="Infinity",zt[zt.NaN=10]="NaN",zt[zt.TimeSeparator=11]="TimeSeparator",zt[zt.CurrencyDecimal=12]="CurrencyDecimal",zt[zt.CurrencyGroup=13]="CurrencyGroup",zt))();function gt(n,t){return Yi((0,o.cg1)(n)[o.wAp.DateFormat],t)}function ui(n,t){return Yi((0,o.cg1)(n)[o.wAp.TimeFormat],t)}function Pt(n,t){return Yi((0,o.cg1)(n)[o.wAp.DateTimeFormat],t)}function rn(n,t){const e=(0,o.cg1)(n),i=e[o.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===zt.CurrencyDecimal)return e[o.wAp.NumberSymbols][zt.Decimal];if(t===zt.CurrencyGroup)return e[o.wAp.NumberSymbols][zt.Group]}return i}const Rr=o.kL8;function ir(n){if(!n[o.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[o.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Yi(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function jt(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const lo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wr={},ti=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ln=(()=>((Ln=Ln||{})[Ln.Short=0]="Short",Ln[Ln.ShortGMT=1]="ShortGMT",Ln[Ln.Long=2]="Long",Ln[Ln.Extended=3]="Extended",Ln))(),Wt=(()=>((Wt=Wt||{})[Wt.FullYear=0]="FullYear",Wt[Wt.Month=1]="Month",Wt[Wt.Date=2]="Date",Wt[Wt.Hours=3]="Hours",Wt[Wt.Minutes=4]="Minutes",Wt[Wt.Seconds=5]="Seconds",Wt[Wt.FractionalSeconds=6]="FractionalSeconds",Wt[Wt.Day=7]="Day",Wt))(),xn=(()=>((xn=xn||{})[xn.DayPeriods=0]="DayPeriods",xn[xn.Days=1]="Days",xn[xn.Months=2]="Months",xn[xn.Eras=3]="Eras",xn))();function Zn(n,t,e,i){let r=function q(n){if(De(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,a=1]=n.split("-").map(c=>+c);return $r(r,s-1,a)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(lo))return function ge(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const a=Number(n[4]||0)-e,c=Number(n[5]||0)-i,h=Number(n[6]||0),p=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,a,c,h,p),t}(i)}const t=new Date(n);if(!De(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Hi(e,t)||t;let c,a=[];for(;t;){if(c=ti.exec(t),!c){a.push(t);break}{a=a.concat(c.slice(1));const v=a.pop();if(!v)break;t=v}}let h=r.getTimezoneOffset();i&&(h=oe(i,h),r=function Y(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function G(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(oe(t,r)-r))}(r,i,!0));let p="";return a.forEach(v=>{const b=function le(n){if(xo[n])return xo[n];let t;switch(n){case"G":case"GG":case"GGG":t=zn(xn.Eras,Zt.Abbreviated);break;case"GGGG":t=zn(xn.Eras,Zt.Wide);break;case"GGGGG":t=zn(xn.Eras,Zt.Narrow);break;case"y":t=kn(Wt.FullYear,1,0,!1,!0);break;case"yy":t=kn(Wt.FullYear,2,0,!0,!0);break;case"yyy":t=kn(Wt.FullYear,3,0,!1,!0);break;case"yyyy":t=kn(Wt.FullYear,4,0,!1,!0);break;case"Y":t=co(1);break;case"YY":t=co(2,!0);break;case"YYY":t=co(3);break;case"YYYY":t=co(4);break;case"M":case"L":t=kn(Wt.Month,1,1);break;case"MM":case"LL":t=kn(Wt.Month,2,1);break;case"MMM":t=zn(xn.Months,Zt.Abbreviated);break;case"MMMM":t=zn(xn.Months,Zt.Wide);break;case"MMMMM":t=zn(xn.Months,Zt.Narrow);break;case"LLL":t=zn(xn.Months,Zt.Abbreviated,tn.Standalone);break;case"LLLL":t=zn(xn.Months,Zt.Wide,tn.Standalone);break;case"LLLLL":t=zn(xn.Months,Zt.Narrow,tn.Standalone);break;case"w":t=Do(1);break;case"ww":t=Do(2);break;case"W":t=Do(1,!0);break;case"d":t=kn(Wt.Date,1);break;case"dd":t=kn(Wt.Date,2);break;case"c":case"cc":t=kn(Wt.Day,1);break;case"ccc":t=zn(xn.Days,Zt.Abbreviated,tn.Standalone);break;case"cccc":t=zn(xn.Days,Zt.Wide,tn.Standalone);break;case"ccccc":t=zn(xn.Days,Zt.Narrow,tn.Standalone);break;case"cccccc":t=zn(xn.Days,Zt.Short,tn.Standalone);break;case"E":case"EE":case"EEE":t=zn(xn.Days,Zt.Abbreviated);break;case"EEEE":t=zn(xn.Days,Zt.Wide);break;case"EEEEE":t=zn(xn.Days,Zt.Narrow);break;case"EEEEEE":t=zn(xn.Days,Zt.Short);break;case"a":case"aa":case"aaa":t=zn(xn.DayPeriods,Zt.Abbreviated);break;case"aaaa":t=zn(xn.DayPeriods,Zt.Wide);break;case"aaaaa":t=zn(xn.DayPeriods,Zt.Narrow);break;case"b":case"bb":case"bbb":t=zn(xn.DayPeriods,Zt.Abbreviated,tn.Standalone,!0);break;case"bbbb":t=zn(xn.DayPeriods,Zt.Wide,tn.Standalone,!0);break;case"bbbbb":t=zn(xn.DayPeriods,Zt.Narrow,tn.Standalone,!0);break;case"B":case"BB":case"BBB":t=zn(xn.DayPeriods,Zt.Abbreviated,tn.Format,!0);break;case"BBBB":t=zn(xn.DayPeriods,Zt.Wide,tn.Format,!0);break;case"BBBBB":t=zn(xn.DayPeriods,Zt.Narrow,tn.Format,!0);break;case"h":t=kn(Wt.Hours,1,-12);break;case"hh":t=kn(Wt.Hours,2,-12);break;case"H":t=kn(Wt.Hours,1);break;case"HH":t=kn(Wt.Hours,2);break;case"m":t=kn(Wt.Minutes,1);break;case"mm":t=kn(Wt.Minutes,2);break;case"s":t=kn(Wt.Seconds,1);break;case"ss":t=kn(Wt.Seconds,2);break;case"S":t=kn(Wt.FractionalSeconds,1);break;case"SS":t=kn(Wt.FractionalSeconds,2);break;case"SSS":t=kn(Wt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Rn(Ln.Short);break;case"ZZZZZ":t=Rn(Ln.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Rn(Ln.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Rn(Ln.Long);break;default:return null}return xo[n]=t,t}(v);p+=b?b(r,e,h):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function $r(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Hi(n,t){const e=function Fe(n){return(0,o.cg1)(n)[o.wAp.LocaleId]}(n);if(Wr[e]=Wr[e]||{},Wr[e][t])return Wr[e][t];let i="";switch(t){case"shortDate":i=gt(n,dn.Short);break;case"mediumDate":i=gt(n,dn.Medium);break;case"longDate":i=gt(n,dn.Long);break;case"fullDate":i=gt(n,dn.Full);break;case"shortTime":i=ui(n,dn.Short);break;case"mediumTime":i=ui(n,dn.Medium);break;case"longTime":i=ui(n,dn.Long);break;case"fullTime":i=ui(n,dn.Full);break;case"short":const r=Hi(n,"shortTime"),s=Hi(n,"shortDate");i=Gr(Pt(n,dn.Short),[r,s]);break;case"medium":const a=Hi(n,"mediumTime"),c=Hi(n,"mediumDate");i=Gr(Pt(n,dn.Medium),[a,c]);break;case"long":const h=Hi(n,"longTime"),p=Hi(n,"longDate");i=Gr(Pt(n,dn.Long),[h,p]);break;case"full":const v=Hi(n,"fullTime"),b=Hi(n,"fullDate");i=Gr(Pt(n,dn.Full),[v,b])}return i&&(Wr[e][t]=i),i}function Gr(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Qi(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let a=String(n);for(;a.length<t;)a="0"+a;return i&&(a=a.slice(a.length-t)),s+a}function kn(n,t,e=0,i=!1,r=!1){return function(s,a){let c=function Ko(n,t){switch(n){case Wt.FullYear:return t.getFullYear();case Wt.Month:return t.getMonth();case Wt.Date:return t.getDate();case Wt.Hours:return t.getHours();case Wt.Minutes:return t.getMinutes();case Wt.Seconds:return t.getSeconds();case Wt.FractionalSeconds:return t.getMilliseconds();case Wt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||c>-e)&&(c+=e),n===Wt.Hours)0===c&&-12===e&&(c=12);else if(n===Wt.FractionalSeconds)return function Tr(n,t){return Qi(n,3).substring(0,t)}(c,t);const h=rn(a,zt.MinusSign);return Qi(c,t,h,i,r)}}function zn(n,t,e=tn.Format,i=!1){return function(r,s){return function Eo(n,t,e,i,r,s){switch(e){case xn.Months:return function Ke(n,t,e){const i=(0,o.cg1)(n),s=Yi([i[o.wAp.MonthsFormat],i[o.wAp.MonthsStandalone]],t);return Yi(s,e)}(t,r,i)[n.getMonth()];case xn.Days:return function ze(n,t,e){const i=(0,o.cg1)(n),s=Yi([i[o.wAp.DaysFormat],i[o.wAp.DaysStandalone]],t);return Yi(s,e)}(t,r,i)[n.getDay()];case xn.DayPeriods:const a=n.getHours(),c=n.getMinutes();if(s){const p=function ao(n){const t=(0,o.cg1)(n);return ir(t),(t[o.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?jt(i):[jt(i[0]),jt(i[1])])}(t),v=function To(n,t,e){const i=(0,o.cg1)(n);ir(i);const s=Yi([i[o.wAp.ExtraData][0],i[o.wAp.ExtraData][1]],t)||[];return Yi(s,e)||[]}(t,r,i),b=p.findIndex(D=>{if(Array.isArray(D)){const[P,R]=D,F=a>=P.hours&&c>=P.minutes,V=a<R.hours||a===R.hours&&c<R.minutes;if(P.hours<R.hours){if(F&&V)return!0}else if(F||V)return!0}else if(D.hours===a&&D.minutes===c)return!0;return!1});if(-1!==b)return v[b]}return function xe(n,t,e){const i=(0,o.cg1)(n),s=Yi([i[o.wAp.DayPeriodsFormat],i[o.wAp.DayPeriodsStandalone]],t);return Yi(s,e)}(t,r,i)[a<12?0:1];case xn.Eras:return function pt(n,t){return Yi((0,o.cg1)(n)[o.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function Rn(n){return function(t,e,i){const r=-1*i,s=rn(e,zt.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Ln.Short:return(r>=0?"+":"")+Qi(a,2,s)+Qi(Math.abs(r%60),2,s);case Ln.ShortGMT:return"GMT"+(r>=0?"+":"")+Qi(a,1,s);case Ln.Long:return"GMT"+(r>=0?"+":"")+Qi(a,2,s)+":"+Qi(Math.abs(r%60),2,s);case Ln.Extended:return 0===i?"Z":(r>=0?"+":"")+Qi(a,2,s)+":"+Qi(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const rr=0,Ji=4;function cr(n){return $r(n.getFullYear(),n.getMonth(),n.getDate()+(Ji-n.getDay()))}function Do(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,a=e.getDate();r=1+Math.floor((a+s)/7)}else{const s=cr(e),a=function Yr(n){const t=$r(n,rr,1).getDay();return $r(n,0,1+(t<=Ji?Ji:Ji+7)-t)}(s.getFullYear()),c=s.getTime()-a.getTime();r=1+Math.round(c/6048e5)}return Qi(r,n,rn(i,zt.MinusSign))}}function co(n,t=!1){return function(e,i){return Qi(cr(e).getFullYear(),n,rn(i,zt.MinusSign),t)}}const xo={};function oe(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function De(n){return n instanceof Date&&!isNaN(n.valueOf())}let uo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return e?i=new e:(r=o.LFG(o.soG),i=new Fl(r)),i;var r},providedIn:"root"}),n})();let Fl=(()=>{class n extends uo{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(Rr(i||this.locale)(e)){case Lt.Zero:return"zero";case Lt.One:return"one";case Lt.Two:return"two";case Lt.Few:return"few";case Lt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.soG))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function da(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}class Xi{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Li=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,a)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Xi(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const c=i.get(s);i.move(c,a),Qt(c,r)}});for(let r=0,s=i.length;r<s;r++){const c=i.get(r).context;c.index=r,c.count=s,c.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Qt(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Qt(n,t){n.context.$implicit=t.item}let si=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new On,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ao("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ao("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class On{constructor(){this.$implicit=null,this.ngIf=null}}function Ao(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let ur=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),a=-1===r.indexOf("-")?void 0:o.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,r,a)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();function Uo(n,t){return new o.vHH(2100,!1)}let Ii=(()=>{class n{transform(e){if(null==e)return null;if("string"!=typeof e)throw Uo();return e.toUpperCase()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})();const bc=new o.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),rl=new o.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Qr=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(null==e||""===e||e!=e)return null;try{return Zn(e,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(a){throw Uo()}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.soG,16),o.Y36(bc,24),o.Y36(rl,24))},n.\u0275pipe=o.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})();const Vs=/#/g;let Xo=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw Uo();return i[function Nr(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(Vs,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(uo,16))},n.\u0275pipe=o.Yjl({name:"i18nPlural",type:n,pure:!0,standalone:!0}),n})(),As=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Zs="server";function ol(n){return n===Zs}let Bl=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new uf((0,o.LFG)(Ee),window)}),n})();class uf{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ed(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Jr(this.window.history)||Jr(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Jr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fa{}class uh extends Oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ps extends uh{static makeCurrent(){!function Te(n){ee||(ee=n)}(new ps)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function $l(){return pl=pl||document.querySelector("base"),pl?pl.getAttribute("href"):null}();return null==e?null:function Ip(n){ts=ts||document.createElement("a"),ts.setAttribute("href",n);const t=ts.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return da(document.cookie,t)}}let ts,pl=null;const yu=new o.OlP("TRANSITION_ID"),cd=[{provide:o.ip1,useFactory:function Ha(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=W(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[yu,Ee,o.zs3],multi:!0}];let ud=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Gl=new o.OlP("EventManagerPlugins");let Mc=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const a=r[s];if(a.supports(e))return this._eventNameToPlugin.set(e,a),a}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Gl),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class gl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=W().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let dd=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,i){const r=this.usageCount;let s=r.get(e)??0;return s+=i,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ma=(()=>{class n extends dd{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.forEach(s=>s.remove()),i.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,i){const r=this.doc.createElement("style");r.textContent=i,e.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ml={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_l=/%COMP%/g,M=new o.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ce(n,t){return t.flat(100).map(e=>e.replace(_l,n))}function Ie(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ke=(()=>{class n{constructor(e,i,r,s){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new ct(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,i);return r instanceof So?r.applyToHost(e):r instanceof Vi&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const a=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestory;switch(i.encapsulation){case o.ifc.Emulated:s=new So(a,c,i,this.appId,h);break;case o.ifc.ShadowDom:return new ni(a,c,e,i);default:s=new Vi(a,c,i,h)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mc),o.LFG(ma),o.LFG(o.AFp),o.LFG(M))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ct{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ml[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(jn(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(jn(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=ml[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=ml[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ie(i)):this.eventManager.addEventListener(t,e,Ie(i))}}function jn(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ni extends ct{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ce(r.id,r.styles);for(const a of s){const c=document.createElement("style");c.textContent=a,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Vi extends ct{constructor(t,e,i,r,s=i.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=ce(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class So extends Vi{constructor(t,e,i,r,s){const a=r+"-"+i.id;super(t,e,i,s,a),this.contentAttr=function N(n){return"_ngcontent-%COMP%".replace(_l,n)}(a),this.hostAttr=function H(n){return"_nghost-%COMP%".replace(_l,n)}(a)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let Mo=(()=>{class n extends gl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Gs=["alt","control","meta","shift"],dh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ir=(()=>{class n extends gl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>W().onAndCancel(e,s.domEventName,a))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Gs.forEach(p=>{const v=i.indexOf(p);v>-1&&(i.splice(v,1),a+=p+".")}),a+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=a,h}static matchEventFullKeyCode(e,i){let r=dh[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Gs.forEach(a=>{a!==r&&(0,wu[a])(e)&&(s+=a+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const fh=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function Kl(){ps.makeCurrent()},multi:!0},{provide:Ee,useFactory:function fd(){return(0,o.RDi)(document),document},deps:[]}]),wl=new o.OlP(""),pd=[{provide:o.rWj,useClass:class $s{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,a=!1;const c=function(h){a=a||h,s--,0==s&&i(a)};r.forEach(function(h){h.whenStable(c)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?W().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],Pc=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function hd(){return new o.qLn},deps:[]},{provide:Gl,useClass:Mo,multi:!0,deps:[Ee,o.R0b,o.Lbi]},{provide:Gl,useClass:Ir,multi:!0,deps:[Ee]},{provide:ke,useClass:ke,deps:[Mc,ma,o.AFp,M]},{provide:o.FYo,useExisting:ke},{provide:dd,useExisting:ma},{provide:ma,useClass:ma,deps:[Ee]},{provide:Mc,useClass:Mc,deps:[Gl,o.R0b]},{provide:fa,useClass:ud,deps:[]},[]];let kc=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:yu,useExisting:o.AFp},cd]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wl,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...Pc,...pd],imports:[As,o.hGG]}),n})(),gh=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Oc(){return new gh((0,o.LFG)(Ee))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var ai=z(8996),Qs=z(3269);function Ht(...n){const t=(0,Qs.yG)(n);return(0,ai.D)(n,t)}var ns=z(7579);class wr extends ns.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const md=(0,z(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ti=z(9751);const{isArray:yf}=Array,{getPrototypeOf:Op,prototype:Js,keys:Jl}=Object;function bh(n){if(1===n.length){const t=n[0];if(yf(t))return{args:t,keys:null};if(function Nc(n){return n&&"object"==typeof n&&Op(n)===Js}(t)){const e=Jl(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Xl=z(4671),qt=z(4004);const{isArray:wf}=Array;function gs(n){return(0,qt.U)(t=>function Rp(n,t){return wf(t)?n(...t):n(t)}(n,t))}function Ch(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var fr=z(5403),_d=z(9672);function bf(...n){const t=(0,Qs.yG)(n),e=(0,Qs.jO)(n),{args:i,keys:r}=bh(n);if(0===i.length)return(0,ai.D)([],t);const s=new Ti.y(function Lc(n,t,e=Xl.y){return i=>{vd(t,()=>{const{length:r}=n,s=new Array(r);let a=r,c=r;for(let h=0;h<r;h++)vd(t,()=>{const p=(0,ai.D)(n[h],t);let v=!1;p.subscribe((0,fr.x)(i,b=>{s[h]=b,v||(v=!0,c--),c||i.next(e(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,t,r?a=>Ch(r,a):Xl.y));return e?s.pipe(gs(e)):s}function vd(n,t,e){n?(0,_d.f)(e,n,t):t()}var yd=z(8189);function Th(...n){return function Cm(){return(0,yd.J)(1)}()((0,ai.D)(n,(0,Qs.yG)(n)))}var bl=z(8421);function Np(n){return new Ti.y(t=>{(0,bl.Xf)(n()).subscribe(t)})}var Cf=z(9635),Cu=z(576);function ec(n,t){const e=(0,Cu.m)(n)?n:()=>n,i=r=>r.error(e());return new Ti.y(t?r=>t.schedule(i,0,r):i)}var Ps=z(515),Tf=z(727),Sr=z(4482);function wd(){return(0,Sr.e)((n,t)=>{let e=null;n._refCount++;const i=(0,fr.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Lp extends Ti.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Sr.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Tf.w0;const e=this.getSubject();t.add(this.source.subscribe((0,fr.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Tf.w0.EMPTY)}return t}refCount(){return wd()(this)}}function Mi(n,t){return(0,Sr.e)((e,i)=>{let r=null,s=0,a=!1;const c=()=>a&&!r&&i.complete();e.subscribe((0,fr.x)(i,h=>{r?.unsubscribe();let p=0;const v=s++;(0,bl.Xf)(n(h,v)).subscribe(r=(0,fr.x)(i,b=>i.next(t?t(h,b,v,p++):b),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function Fc(n){return n<=0?()=>Ps.E:(0,Sr.e)((t,e)=>{let i=0;t.subscribe((0,fr.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function _a(...n){const t=(0,Qs.yG)(n);return(0,Sr.e)((e,i)=>{(t?Th(n,e,t):Th(n,e)).subscribe(i)})}function is(n,t){return(0,Sr.e)((e,i)=>{let r=0;e.subscribe((0,fr.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var Lr=z(5577);function bd(n){return(0,Sr.e)((t,e)=>{let i=!1;t.subscribe((0,fr.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Eh(n=Tu){return(0,Sr.e)((t,e)=>{let i=!1;t.subscribe((0,fr.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Tu(){return new md}function va(n,t){const e=arguments.length>=2;return i=>i.pipe(n?is((r,s)=>n(r,s,i)):Xl.y,Fc(1),e?bd(t):Eh(()=>new md))}function Cl(n,t){return(0,Cu.m)(t)?(0,Lr.z)(n,t,1):(0,Lr.z)(n,1)}var Fr=z(8505);function ks(n){return(0,Sr.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,fr.x)(e,void 0,void 0,a=>{s=(0,bl.Xf)(n(a,ks(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Eu(n,t){return(0,Sr.e)(function Iw(n,t,e,i,r){return(s,a)=>{let c=e,h=t,p=0;s.subscribe((0,fr.x)(a,v=>{const b=p++;h=c?n(h,v,b):(c=!0,v),i&&a.next(h)},r&&(()=>{c&&a.next(h),a.complete()})))}}(n,t,arguments.length>=2,!0))}function Ef(n){return n<=0?()=>Ps.E:(0,Sr.e)((t,e)=>{let i=[];t.subscribe((0,fr.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Du(n,t){const e=arguments.length>=2;return i=>i.pipe(n?is((r,s)=>n(r,s,i)):Xl.y,Ef(1),e?bd(t):Eh(()=>new md))}function xu(n){return(0,Sr.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const bn="primary",tc=Symbol("RouteTitle");class Bc{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Au(n){return new Bc(n)}function nc(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const a=i[s],c=n[s];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Tl(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!xf(n[r],t[r]))return!1;return!0}function xf(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Up(n){return Array.prototype.concat.apply([],n)}function Af(n){return n.length>0?n[n.length-1]:null}function A(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function k(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,ai.D)(Promise.resolve(n)):Ht(n)}const B=!1,X={exact:function Dt(n,t,e){if(!Xs(n.segments,t.segments)||!Dn(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Dt(n.children[i],t.children[i],e))return!1;return!0},subset:Jt},me={exact:function Ve(n,t){return Tl(n,t)},subset:function Tt(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>xf(n[e],t[e]))},ignored:()=>!0};function ye(n,t,e){return X[e.paths](n.root,t.root,e.matrixParams)&&me[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Jt(n,t,e){return Sn(n,t,t.segments,e)}function Sn(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Xs(r,e)||t.hasChildren()||!Dn(r,e,i))}if(n.segments.length===e.length){if(!Xs(n.segments,e)||!Dn(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Jt(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Xs(n.segments,r)&&Dn(n.segments,r,i)&&n.children[bn])&&Sn(n.children[bn],t,s,i)}}function Dn(n,t,e){return t.every((i,r)=>me[e](n[r].parameters,i.parameters))}class br{constructor(t=new fn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Au(this.queryParams)),this._queryParamMap}toString(){return Vp.serialize(this)}}class fn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,A(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xh(this)}}class ya{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Au(this.parameters)),this._parameterMap}toString(){return Ov(this)}}function Xs(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Zo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new Dh},providedIn:"root"}),n})();class Dh{parse(t){const e=new Z(t);return new br(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ah(t.root,!0)}`,i=function Rv(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Td(e)}=${Td(r)}`).join("&"):`${Td(e)}=${Td(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Tm(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Vp=new Dh;function xh(n){return n.segments.map(t=>Ov(t)).join("/")}function Ah(n,t){if(!n.hasChildren())return xh(n);if(t){const e=n.children[bn]?Ah(n.children[bn],!1):"",i=[];return A(n.children,(r,s)=>{s!==bn&&i.push(`${s}:${Ah(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Os(n,t){let e=[];return A(n.children,(i,r)=>{r===bn&&(e=e.concat(t(i,r)))}),A(n.children,(i,r)=>{r!==bn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===bn?[Ah(n.children[bn],!1)]:[`${r}:${Ah(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bn]?`${xh(n)}/${e[0]}`:`${xh(n)}/(${e.join("//")})`}}function Cd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Td(n){return Cd(n).replace(/%3B/gi,";")}function Iu(n){return Cd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ih(n){return decodeURIComponent(n)}function Em(n){return Ih(n.replace(/\+/g,"%20"))}function Ov(n){return`${Iu(n.path)}${function Dm(n){return Object.keys(n).map(t=>`;${Iu(t)}=${Iu(n[t])}`).join("")}(n.parameters)}`}const Sw=/^[^\/()?;=#]+/;function Zp(n){const t=n.match(Sw);return t?t[0]:""}const x=/^[^=?&#]+/,C=/^[^&#]+/;class Z{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[bn]=new fn(t,e)),i}parseSegment(){const t=Zp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,B);return this.capture(t),new ya(Ih(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zp(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Zp(this.remaining);r&&(i=r,this.capture(i))}t[Ih(e)]=Ih(i)}parseQueryParam(t){const e=function y(n){const t=n.match(x);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const a=function I(n){const t=n.match(C);return t?t[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const r=Em(e),s=Em(i);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Zp(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,B);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=bn);const a=this.parseChildren();e[s]=1===Object.keys(a).length?a[bn]:new fn([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,B)}}function $(n){return n.segments.length>0?new fn([],{[bn]:n}):n}function we(n){const t={};for(const i of Object.keys(n.children)){const s=we(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function Ue(n){if(1===n.numberOfChildren&&n.children[bn]){const t=n.children[bn];return new fn(n.segments.concat(t.segments),t.children)}return n}(new fn(n.segments,t))}function yt(n){return n instanceof br}const It=!1;function Vc(n,t,e,i,r){if(0===e.length)return El(t.root,t.root,t.root,i,r);const s=function Mf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zp(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return A(s.outlets,(h,p)=>{c[p]="string"==typeof h?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((c,h)=>{0==h&&"."===c||(0==h&&""===c?e=!0:".."===c?t++:""!=c&&r.push(c))}),r):[...r,s]},[]);return new zp(e,t,i)}(e);return s.toRoot()?El(t.root,t.root,new fn([],{}),i,r):function a(h){const p=function qp(n,t,e,i){if(n.isAbsolute)return new Mu(t.root,!0,0);if(-1===i)return new Mu(e,e===t.root,0);return function Sh(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,It&&"Invalid number of '../'");r=i.segments.length}return new Mu(i,!1,r-s)}(e,i+(Su(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,h),v=p.processChildren?Pu(p.segmentGroup,p.index,s.commands):Mh(p.segmentGroup,p.index,s.commands);return El(t.root,p.segmentGroup,v,i,r)}(n.snapshot?._lastPathIndex)}function Su(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sf(n){return"object"==typeof n&&null!=n&&n.outlets}function El(n,t,e,i,r){let a,s={};i&&A(i,(h,p)=>{s[p]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),a=n===t?e:xm(n,t,e);const c=$(we(a));return new br(c,s,r)}function xm(n,t,e){const i={};return A(n.children,(r,s)=>{i[s]=r===t?e:xm(r,t,e)}),new fn(n.segments,i)}class zp{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Su(i[0]))throw new o.vHH(4003,It&&"Root segment cannot have matrix parameters");const r=i.find(Sf);if(r&&r!==Af(i))throw new o.vHH(4004,It&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mu{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Mh(n,t,e){if(n||(n=new fn([],{})),0===n.segments.length&&n.hasChildren())return Pu(n,t,e);const i=function Mw(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const a=n.segments[r],c=e[i];if(Sf(c))break;const h=`${c}`,p=i<e.length-1?e[i+1]:null;if(r>0&&void 0===h)break;if(h&&p&&"object"==typeof p&&void 0===p.outlets){if(!Pw(h,p,a))return s;i+=2}else{if(!Pw(h,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new fn(n.segments.slice(0,i.pathIndex),{});return s.children[bn]=new fn(n.segments.slice(i.pathIndex),n.children),Pu(s,0,r)}return i.match&&0===r.length?new fn(n.segments,{}):i.match&&!n.hasChildren()?Am(n,t,e):i.match?Pu(n,0,r):Am(n,t,e)}function Pu(n,t,e){if(0===e.length)return new fn(n.segments,{});{const i=function jp(n){return Sf(n[0])?n[0].outlets:{[bn]:n}}(e),r={};if(!i[bn]&&n.children[bn]&&1===n.numberOfChildren&&0===n.children[bn].segments.length){const s=Pu(n.children[bn],t,e);return new fn(n.segments,s.children)}return A(i,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[a]=Mh(n.children[a],t,s))}),A(n.children,(s,a)=>{void 0===i[a]&&(r[a]=s)}),new fn(n.segments,r)}}function Am(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Sf(s)){const h=Im(s.outlets);return new fn(i,h)}if(0===r&&Su(e[0])){i.push(new ya(n.segments[t].path,OD(e[0]))),r++;continue}const a=Sf(s)?s.outlets[bn]:`${s}`,c=r<e.length-1?e[r+1]:null;a&&c&&Su(c)?(i.push(new ya(a,OD(c))),r+=2):(i.push(new ya(a,{})),r++)}return new fn(i,{})}function Im(n){const t={};return A(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Am(new fn([],{}),0,e))}),t}function OD(n){const t={};return A(n,(e,i)=>t[i]=`${e}`),t}function Pw(n,t,e){return n==e.path&&Tl(t,e.parameters)}const Sm="imperative";class ku{constructor(t,e){this.id=t,this.url=e}}class kw extends ku{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ph extends ku{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mm extends ku{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pf extends ku{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class Pm extends ku{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wp extends ku{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fP extends ku{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pP extends ku{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class H3 extends ku{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gP extends ku{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ow{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mP{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RD{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nv{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rw{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ND{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nw{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _P=(()=>{class n{createUrlTree(e,i,r,s,a,c){return Vc(e||i.root,r,s,a,c)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),yP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){return _P.\u0275fac(t)},providedIn:"root"}),n})();class UD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Lw(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Lw(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ou(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Ou(t,this._root).map(e=>e.value)}}function Lw(n,t){if(n===t.value)return t;for(const e of t.children){const i=Lw(n,e);if(i)return i}return null}function Ou(n,t){if(n===t.value)return[t];for(const e of t.children){const i=Ou(n,e);if(i.length)return i.unshift(t),i}return[]}class Dl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function $p(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class wP extends UD{constructor(t,e){super(t),this.snapshot=e,Fw(this,t)}toString(){return this.snapshot.toString()}}function bP(n,t){const e=function q3(n,t){const a=new Lv([],{},{},"",{},bn,t,null,n.root,-1,{});return new VD("",new Dl(a,[]))}(n,t),i=new wr([new ya("",{})]),r=new wr({}),s=new wr({}),a=new wr({}),c=new wr(""),h=new km(i,r,a,c,s,bn,t,e.root);return h.snapshot=e.root,new wP(new Dl(h,[]),e)}class km{constructor(t,e,i,r,s,a,c,h){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=c,this.title=this.data?.pipe((0,qt.U)(p=>p[tc]))??Ht(void 0),this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,qt.U)(t=>Au(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,qt.U)(t=>Au(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function CP(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function BD(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Lv{get title(){return this.data?.[tc]}constructor(t,e,i,r,s,a,c,h,p,v,b){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=c,this.routeConfig=h,this._urlSegment=p,this._lastPathIndex=v,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Au(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Au(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VD extends UD{constructor(t,e){super(e),this.url=t,Fw(this,e)}toString(){return ZD(this._root)}}function Fw(n,t){t.value._routerState=n,t.children.forEach(e=>Fw(n,e))}function ZD(n){const t=n.children.length>0?` { ${n.children.map(ZD).join(", ")} } `:"";return`${n.value}${t}`}function Om(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Tl(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Tl(t.params,e.params)||n.params.next(e.params),function Df(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Tl(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Tl(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Zc(n,t){const e=Tl(n.params,t.params)&&function If(n,t){return Xs(n,t)&&n.every((e,i)=>Tl(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Zc(n.parent,t.parent))}function Gp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function zD(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Gp(n,i,r);return Gp(n,i)})}(n,t,e);return new Dl(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Gp(n,c)),a}}const i=function HD(n){return new km(new wr(n.url),new wr(n.params),new wr(n.queryParams),new wr(n.fragment),new wr(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Gp(n,s));return new Dl(i,r)}}const qD="ngNavigationCancelingError";function TP(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=yt(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=EP(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function EP(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[qD]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Fv(n){return Uv(n)&&yt(n.url)}function Uv(n){return n&&n[qD]}class j3{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bv,this.attachRef=null}}let Bv=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new j3,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nm=!1;let Uw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bn,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(Bv),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,Nm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,Nm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,Nm);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,Nm);this._activatedRoute=e;const r=this.location,a=e.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new DP(e,c,r.injector);if(i&&function xP(n){return!!n.resolveComponentFactory}(i)){const p=i.resolveComponentFactory(a);this.activated=r.createComponent(p,r.length,h)}else this.activated=r.createComponent(a,{index:r.length,injector:h,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),n})();class DP{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===km?this.route:t===Bv?this.childContexts:this.parent.get(t,e)}}let Bw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[Uw],encapsulation:2}),n})();function Vw(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Vv(n){const t=n.children&&n.children.map(Vv),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==bn&&(e.component=Bw),e}function ic(n){return n.outlet||bn}function WD(n,t){const e=n.filter(i=>ic(i)===t);return e.push(...n.filter(i=>ic(i)!==t)),e}function Lm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class $D{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Om(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=$p(e);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),A(r,(s,a)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=$p(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(i&&i.outlet){const a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=$p(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=$p(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new ND(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Nv(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(Om(r),r===s)if(r.component){const a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Om(c.route.value),this.activateChildRoutes(t,null,a.children)}else{const c=Lm(r.snapshot),h=c?.get(o._Vd)??null;a.attachRef=null,a.route=r,a.resolver=h,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,i)}}class MP{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Hw{constructor(t,e){this.component=t,this.route=e}}function Fm(n,t,e){const i=n._root;return Yp(i,t?t._root:null,e,[i.value])}function kf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function Yp(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=$p(t);return n.children.forEach(a=>{(function GD(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const h=function PP(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Xs(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Xs(n.url,t.url)||!Tl(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zc(n,t)||!Tl(n.queryParams,t.queryParams);default:return!Zc(n,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);h?r.canActivateChecks.push(new MP(i)):(s.data=a.data,s._resolvedData=a._resolvedData),Yp(n,t,s.component?c?c.children:null:e,i,r),h&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Hw(c.outlet.component,a))}else a&&Um(t,c,r),r.canActivateChecks.push(new MP(i)),Yp(n,null,s.component?c?c.children:null:e,i,r)})(a,s[a.value.outlet],e,i.concat([a.value]),r),delete s[a.value.outlet]}),A(s,(a,c)=>Um(a,e.getContext(c),r)),r}function Um(n,t,e){const i=$p(n),r=n.value;A(i,(s,a)=>{Um(s,r.component?t?t.children.getContext(a):null:t,e)}),e.canDeactivateChecks.push(new Hw(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Kp(n){return"function"==typeof n}function Ed(n){return n instanceof md||"EmptyError"===n?.name}const Zv=Symbol("INITIAL_VALUE");function kh(){return Mi(n=>bf(n.map(t=>t.pipe(Fc(1),_a(Zv)))).pipe((0,qt.U)(t=>{for(const e of t)if(!0!==e){if(e===Zv)return Zv;if(!1===e||e instanceof br)return e}return!0}),is(t=>t!==Zv),Fc(1)))}function Kw(n){return(0,Cf.z)((0,Fr.b)(t=>{if(yt(t))throw TP(0,t)}),(0,qt.U)(t=>!0===t))}const Qw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JD(n,t,e,i,r){const s=Jw(n,t,e);return s.matched?function Qp(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?Ht(r.map(a=>{const c=kf(a,n);return k(function $w(n){return n&&Kp(n.canMatch)}(c)?c.canMatch(t,e):n.runInContext(()=>c(t,e)))})).pipe(kh(),Kw()):Ht(!0)}(i=Vw(t,i),t,e).pipe((0,qt.U)(a=>!0===a?s:{...Qw})):Ht(s)}function Jw(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Qw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||nc)(e,n,t);if(!r)return{...Qw};const s={};A(r.posParams,(c,h)=>{s[h]=c.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Jp(n,t,e,i){if(e.length>0&&function UP(n,t,e){return e.some(i=>Xw(n,t,i)&&ic(i)!==bn)}(n,e,i)){const s=new fn(t,function XD(n,t,e,i){const r={};r[bn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&ic(s)!==bn){const a=new fn([],{});a._sourceSegment=n,a._segmentIndexShift=t.length,r[ic(s)]=a}return r}(n,t,i,new fn(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function e1(n,t,e){return e.some(i=>Xw(n,t,i))}(n,e,i)){const s=new fn(n.segments,function FP(n,t,e,i,r){const s={};for(const a of i)if(Xw(n,e,a)&&!r[ic(a)]){const c=new fn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,s[ic(a)]=c}return{...r,...s}}(n,t,e,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new fn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function Xw(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function t1(n,t,e,i){return!!(ic(n)===i||i!==bn&&Xw(t,e,n))&&("**"===n.path||Jw(t,n,e).matched)}function Xp(n,t,e){return 0===t.length&&!n.children[e]}const qv=!1;class Dd{constructor(t){this.segmentGroup=t||null}}class eg{constructor(t){this.urlTree=t}}function Bm(n){return ec(new Dd(n))}function eb(n){return ec(new eg(n))}class n1{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=Jp(this.urlTree.root,[],[],this.config).segmentGroup,e=new fn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,bn).pipe((0,qt.U)(s=>this.createUrlTree(we(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ks(s=>{if(s instanceof eg)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Dd?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,bn).pipe((0,qt.U)(r=>this.createUrlTree(we(r),t.queryParams,t.fragment))).pipe(ks(r=>{throw r instanceof Dd?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,qv)}createUrlTree(t,e,i){const r=$(t);return new br(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,qt.U)(s=>new fn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,ai.D)(r).pipe(Cl(s=>{const a=i.children[s],c=WD(e,s);return this.expandSegmentGroup(t,c,a,s).pipe((0,qt.U)(h=>({segment:h,outlet:s})))}),Eu((s,a)=>(s[a.outlet]=a.segment,s),{}),Du())}expandSegment(t,e,i,r,s,a){return(0,ai.D)(i).pipe(Cl(c=>this.expandSegmentAgainstRoute(t,e,i,c,r,s,a).pipe(ks(p=>{if(p instanceof Dd)return Ht(null);throw p}))),va(c=>!!c),ks((c,h)=>{if(Ed(c))return Xp(e,r,s)?Ht(new fn([],{})):Bm(e);throw c}))}expandSegmentAgainstRoute(t,e,i,r,s,a,c){return t1(r,e,s,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,a):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a):Bm(e):Bm(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?eb(s):this.lineralizeSegments(i,s).pipe((0,Lr.z)(a=>{const c=new fn(a,{});return this.expandSegment(t,c,e,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,a){const{matched:c,consumedSegments:h,remainingSegments:p,positionalParamSegments:v}=Jw(e,r,s);if(!c)return Bm(e);const b=this.applyRedirectCommands(h,r.redirectTo,v);return r.redirectTo.startsWith("/")?eb(b):this.lineralizeSegments(r,b).pipe((0,Lr.z)(D=>this.expandSegment(t,e,i,D.concat(p),a,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=Vw(i,t),i.loadChildren?(i._loadedRoutes?Ht({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,qt.U)(c=>(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,new fn(r,{})))):Ht(new fn(r,{}))):JD(e,i,r,t).pipe(Mi(({matched:a,consumedSegments:c,remainingSegments:h})=>a?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Lr.z)(v=>{const b=v.injector??t,D=v.routes,{segmentGroup:P,slicedSegments:R}=Jp(e,c,h,D),F=new fn(P.segments,P.children);if(0===R.length&&F.hasChildren())return this.expandChildren(b,D,F).pipe((0,qt.U)(re=>new fn(c,re)));if(0===D.length&&0===R.length)return Ht(new fn(c,{}));const V=ic(i)===s;return this.expandSegment(b,F,D,R,V?bn:s,!0).pipe((0,qt.U)(te=>new fn(c.concat(te.segments),te.children)))})):Bm(e)))}getChildConfig(t,e,i){return e.children?Ht({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Ht({routes:e._loadedRoutes,injector:e._loadedInjector}):function LP(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?Ht(!0):Ht(r.map(a=>{const c=kf(a,n);return k(function jw(n){return n&&Kp(n.canLoad)}(c)?c.canLoad(t,e):n.runInContext(()=>c(t,e)))})).pipe(kh(),Kw())}(t,e,i).pipe((0,Lr.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Fr.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function VP(n){return ec(EP(qv,3))}())):Ht({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ht(i);if(r.numberOfChildren>1||!r.children[bn])return t.redirectTo,ec(new o.vHH(4e3,qv));r=r.children[bn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new br(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return A(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const c=r.substring(1);i[s]=e[c]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let a={};return A(e.children,(c,h)=>{a[h]=this.createSegmentGroup(t,c,i,r)}),new fn(s,a)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,qv);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class tb{}class Vm{constructor(t,e,i,r,s,a,c){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c}recognize(){const t=Jp(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,bn).pipe((0,qt.U)(e=>{if(null===e)return null;const i=new Lv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Dl(i,e),s=new VD(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=CP(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,ai.D)(Object.keys(i.children)).pipe(Cl(r=>{const s=i.children[r],a=WD(e,r);return this.processSegmentGroup(t,a,s,r)}),Eu((r,s)=>r&&s?(r.push(...s),r):null),function Fp(n,t=!1){return(0,Sr.e)((e,i)=>{let r=0;e.subscribe((0,fr.x)(i,s=>{const a=n(s,r++);(a||t)&&i.next(s),!a&&i.complete()}))})}(r=>null!==r),bd(null),Du(),(0,qt.U)(r=>{if(null===r)return null;const s=o1(r);return function HP(n){n.sort((t,e)=>t.value.outlet===bn?-1:e.value.outlet===bn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,ai.D)(e).pipe(Cl(a=>this.processSegmentAgainstRoute(a._injector??t,a,i,r,s)),va(a=>!!a),ks(a=>{if(Ed(a))return Xp(i,r,s)?Ht([]):Ht(null);throw a}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!t1(e,i,r,s))return Ht(null);let a;if("**"===e.path){const c=r.length>0?Af(r).parameters:{},h=a1(i)+r.length;a=Ht({snapshot:new Lv(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ru(e),ic(e),e.component??e._loadedComponent??null,e,s1(i),h,l1(e)),consumedSegments:[],remainingSegments:[]})}else a=JD(i,e,r,t).pipe((0,qt.U)(({matched:c,consumedSegments:h,remainingSegments:p,parameters:v})=>{if(!c)return null;const b=a1(i)+h.length;return{snapshot:new Lv(h,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ru(e),ic(e),e.component??e._loadedComponent??null,e,s1(i),b,l1(e)),consumedSegments:h,remainingSegments:p}}));return a.pipe(Mi(c=>{if(null===c)return Ht(null);const{snapshot:h,consumedSegments:p,remainingSegments:v}=c;t=e._injector??t;const b=e._loadedInjector??t,D=function qP(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:P,slicedSegments:R}=Jp(i,p,v,D.filter(V=>void 0===V.redirectTo));if(0===R.length&&P.hasChildren())return this.processChildren(b,D,P).pipe((0,qt.U)(V=>null===V?null:[new Dl(h,V)]));if(0===D.length&&0===R.length)return Ht([new Dl(h,[])]);const F=ic(e)===s;return this.processSegment(b,D,P,R,F?bn:s).pipe((0,qt.U)(V=>null===V?null:[new Dl(h,V)]))}))}}function jP(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function o1(n){const t=[],e=new Set;for(const i of n){if(!jP(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=o1(i.children);t.push(new Dl(i.value,r))}return t.filter(i=>!e.has(i))}function s1(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function a1(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Ru(n){return n.data||{}}function l1(n){return n.resolve||{}}function ib(n){return"string"==typeof n.title||null===n.title}function rb(n){return Mi(t=>{const e=n(t);return e?(0,ai.D)(e).pipe((0,qt.U)(()=>t)):Ht(t)})}const tg=new o.OlP("ROUTES");let sb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,o.f3M)(o.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ht(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=k(e.loadComponent()).pipe((0,qt.U)(d1),(0,Fr.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),xu(()=>{this.componentLoaders.delete(e)})),r=new Lp(i,()=>new ns.x).pipe(wd());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ht({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,qt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(i);let h,p,v=!1;Array.isArray(c)?p=c:(h=c.create(e).injector,p=Up(h.get(tg,[],o.XFs.Self|o.XFs.Optional)));return{routes:p.map(Vv),injector:h}}),xu(()=>{this.childrenLoaders.delete(i)})),a=new Lp(s,()=>new ns.x).pipe(wd());return this.childrenLoaders.set(i,a),a}loadModuleFactoryOrRoutes(e){return k(e()).pipe((0,qt.U)(d1),(0,Lr.z)(i=>i instanceof o.YKP||Array.isArray(i)?Ht(i):(0,ai.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function d1(n){return function zc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Wv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ns.x,this.configLoader=(0,o.f3M)(sb),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(Zo),this.rootContexts=(0,o.f3M)(Bv),this.navigationId=0,this.afterPreactivation=()=>Ht(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new mP(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Ow(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new wr({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sm,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(is(i=>0!==i.id),(0,qt.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Mi(i=>{let r=!1,s=!1;return Ht(i).pipe((0,Fr.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mi(a=>{const c=e.browserUrlTree.toString(),h=!e.navigated||a.extractedUrl.toString()!==c||c!==e.currentUrlTree.toString();if(!h&&"reload"!==(a.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const v="";return this.events.next(new Pf(a.id,e.serializeUrl(i.rawUrl),v,0)),e.rawUrlTree=a.rawUrl,a.resolve(null),Ps.E}if(e.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return h1(a.source)&&(e.browserUrlTree=a.extractedUrl),Ht(a).pipe(Mi(v=>{const b=this.transitions?.getValue();return this.events.next(new kw(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),b!==this.transitions?.getValue()?Ps.E:Promise.resolve(v)}),function r1(n,t,e,i){return Mi(r=>function ZP(n,t,e,i,r){return new n1(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,qt.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,Fr.b)(v=>{this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects},i.urlAfterRedirects=v.urlAfterRedirects}),function $P(n,t,e,i,r){return(0,Lr.z)(s=>function nb(n,t,e,i,r,s,a="emptyOnly"){return new Vm(n,t,e,i,r,a,s).recognize().pipe(Mi(c=>null===c?function zP(n){return new Ti.y(t=>t.error(n))}(new tb):Ht(c)))}(n,t,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,qt.U)(a=>({...s,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Fr.b)(v=>{if(i.targetSnapshot=v.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!v.extras.skipLocationChange){const D=e.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl);e.setBrowserUrl(D,v)}e.browserUrlTree=v.urlAfterRedirects}const b=new Wp(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}));if(h&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:v,extractedUrl:b,source:D,restoredState:P,extras:R}=a,F=new kw(v,this.urlSerializer.serialize(b),D,P);this.events.next(F);const V=bP(b,this.rootComponentType).snapshot;return Ht(i={...a,targetSnapshot:V,urlAfterRedirects:b,extras:{...R,skipLocationChange:!1,replaceUrl:!1}})}{const v="";return this.events.next(new Pf(a.id,e.serializeUrl(i.extractedUrl),v,1)),e.rawUrlTree=a.rawUrl,a.resolve(null),Ps.E}}),(0,Fr.b)(a=>{const c=new fP(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),(0,qt.U)(a=>i={...a,guards:Fm(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function zv(n,t){return(0,Lr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=e;return 0===a.length&&0===s.length?Ht({...e,guardsResult:!0}):function RP(n,t,e,i){return(0,ai.D)(n).pipe((0,Lr.z)(r=>function NP(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Ht(s.map(c=>{const h=Lm(t)??r,p=kf(c,h);return k(function kP(n){return n&&Kp(n.canDeactivate)}(p)?p.canDeactivate(n,t,e,i):h.runInContext(()=>p(n,t,e,i))).pipe(va())})).pipe(kh()):Ht(!0)}(r.component,r.route,e,t,i)),va(r=>!0!==r,!0))}(a,i,r,n).pipe((0,Lr.z)(c=>c&&function YD(n){return"boolean"==typeof n}(c)?function Gw(n,t,e,i){return(0,ai.D)(t).pipe(Cl(r=>Th(function Of(n,t){return null!==n&&t&&t(new RD(n)),Ht(!0)}(r.route.parent,i),function Hv(n,t){return null!==n&&t&&t(new Rw(n)),Ht(!0)}(r.route,i),function Yw(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function qw(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(a)).filter(a=>null!==a).map(a=>Np(()=>Ht(a.guards.map(h=>{const p=Lm(a.node)??e,v=kf(h,p);return k(function Ww(n){return n&&Kp(n.canActivateChild)}(v)?v.canActivateChild(i,n):p.runInContext(()=>v(i,n))).pipe(va())})).pipe(kh())));return Ht(s).pipe(kh())}(n,r.path,e),function QD(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Ht(!0);const r=i.map(s=>Np(()=>{const a=Lm(t)??e,c=kf(s,a);return k(function G3(n){return n&&Kp(n.canActivate)}(c)?c.canActivate(t,n):a.runInContext(()=>c(t,n))).pipe(va())}));return Ht(r).pipe(kh())}(n,r.route,e))),va(r=>!0!==r,!0))}(i,s,n,t):Ht(c)),(0,qt.U)(c=>({...e,guardsResult:c})))})}(this.environmentInjector,a=>this.events.next(a)),(0,Fr.b)(a=>{if(i.guardsResult=a.guardsResult,yt(a.guardsResult))throw TP(0,a.guardsResult);const c=new pP(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),is(a=>!!a.guardsResult||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),rb(a=>{if(a.guards.canActivateChecks.length)return Ht(a).pipe((0,Fr.b)(c=>{const h=new H3(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Mi(c=>{let h=!1;return Ht(c).pipe(function Y3(n,t){return(0,Lr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ht(e);let s=0;return(0,ai.D)(r).pipe(Cl(a=>function K3(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!ib(r)&&(s[tc]=r.title),function c1(n,t,e,i){const r=function Q3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ht({});const s={};return(0,ai.D)(r).pipe((0,Lr.z)(a=>function u1(n,t,e,i){const r=Lm(t)??i,s=kf(n,r);return k(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[a],t,e,i).pipe(va(),(0,Fr.b)(c=>{s[a]=c}))),Ef(1),function Uc(n){return(0,qt.U)(()=>n)}(s),ks(a=>Ed(a)?Ps.E:ec(a)))}(s,n,t,i).pipe((0,qt.U)(a=>(n._resolvedData=a,n.data=CP(n,e).resolve,r&&ib(r)&&(n.data[tc]=r.title),null)))}(a.route,i,n,t)),(0,Fr.b)(()=>s++),Ef(1),(0,Lr.z)(a=>s===r.length?Ht(e):Ps.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,Fr.b)({next:()=>h=!0,complete:()=>{h||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),(0,Fr.b)(c=>{const h=new gP(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),rb(a=>{const c=h=>{const p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,Fr.b)(v=>{h.component=v}),(0,qt.U)(()=>{})));for(const v of h.children)p.push(...c(v));return p};return bf(c(a.targetSnapshot.root)).pipe(bd(),Fc(1))}),rb(()=>this.afterPreactivation()),(0,qt.U)(a=>{const c=function Rm(n,t,e){const i=Gp(n,t._root,e?e._root:void 0);return new wP(i,t)}(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:c}}),(0,Fr.b)(a=>{e.currentUrlTree=a.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),e.routerState=a.targetRouterState,"deferred"===e.urlUpdateStrategy&&(a.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,a),e.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>(0,qt.U)(i=>(new $D(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a)),Fc(1),(0,Fr.b)({next:a=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Ph(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{r=!0}}),xu(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ks(a=>{if(s=!0,Uv(a)){Fv(a)||(e.navigated=!0,e.restoreHistory(i,!0));const c=new Mm(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode);if(this.events.next(c),Fv(a)){const h=e.urlHandlingStrategy.merge(a.url,e.rawUrlTree),p={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||h1(i.source)};e.scheduleNavigation(h,Sm,null,p,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const c=new Pm(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);this.events.next(c);try{i.resolve(e.errorHandler(a))}catch(h){i.reject(h)}}return Ps.E}))}))}cancelNavigationTransition(e,i,r){const s=new Mm(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function h1(n){return n!==Sm}let f1=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===bn);return i}getResolvedTitleForRoute(e){return e.data[tc]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(GP)},providedIn:"root"}),n})(),GP=(()=>{class n extends f1{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(gh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),p1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(KP)},providedIn:"root"}),n})();class YP{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let KP=(()=>{class n extends YP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bn=new o.OlP("",{providedIn:"root",factory:()=>({})});let g1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(m1)},providedIn:"root"}),n})(),m1=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JP(n){throw n}function XP(n,t,e){return t.parse("/")}const _1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ek={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(Bn,{optional:!0})||{},this.errorHandler=this.options.errorHandler||JP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||XP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(g1),this.routeReuseStrategy=(0,o.f3M)(p1),this.urlCreationStrategy=(0,o.f3M)(yP),this.titleStrategy=(0,o.f3M)(f1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Up((0,o.f3M)(tg,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(Wv),this.urlSerializer=(0,o.f3M)(Zo),this.location=(0,o.f3M)(mt),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bP(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Sm,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const h={...r};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(s.state=h)}const c=this.parseUrl(e);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(Vv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:h}=i,p=h?this.currentUrlTree.fragment:a;let v=null;switch(c){case"merge":v={...this.currentUrlTree.queryParams,...s};break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=s||null}return null!==v&&(v=this.removeEmptyProps(v)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,v,p??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=yt(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Sm,null,i)}navigate(e,i={skipLocationChange:!1}){return function tk(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new o.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{..._1}:!1===i?{...ek}:i,yt(e))return ye(this.currentUrlTree,e,r);const s=this.parseUrl(e);return ye(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let c,h,p,v;return a?(c=a.resolve,h=a.reject,p=a.promise):p=new Promise((b,D)=>{c=b,h=D}),v="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:v,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:c,reject:h,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(b=>Promise.reject(b))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hm=(()=>{class n{constructor(e,i,r,s,a,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=a,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ns.x;const h=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===h||"area"===h,this.isAnchorElement?this.subscription=e.events.subscribe(p=>{p instanceof Ph&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,o.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,o.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,o.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,s,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,o.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(rs),o.Y36(km),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Vt))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class ab{}let lb=(()=>{class n{constructor(e,i,r,s,a){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(is(e=>e instanceof Ph),Cl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const a=s._injector??e,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,ai.D)(r).pipe((0,yd.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Ht(null);const s=r.pipe((0,Lr.z)(a=>null===a?Ht(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(i.loadComponent&&!i._loadedComponent){const a=this.loader.loadComponent(i);return(0,ai.D)([s,a]).pipe((0,yd.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(rs),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(ab),o.LFG(sb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qm=new o.OlP("");let y1=(()=>{class n{constructor(e,i,r,s,a={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof kw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ph&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Nw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Nw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();var rc=(()=>((rc=rc||{})[rc.COMPLETE=0]="COMPLETE",rc[rc.FAILED=1]="FAILED",rc[rc.REDIRECTING=2]="REDIRECTING",rc))();const jm=!1;function Rf(n,t){return{\u0275kind:n,\u0275providers:t}}const ub=new o.OlP("",{providedIn:"root",factory:()=>!1});function Wm(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get(rs),r=n.get(w1);1===n.get(Gv)&&i.initialNavigation(),n.get(b1,null,o.XFs.Optional)?.setUpPreloading(),n.get(qm,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const w1=new o.OlP(jm?"bootstrap done indicator":"",{factory:()=>new ns.x}),Gv=new o.OlP(jm?"initial navigation":"",{providedIn:"root",factory:()=>1});function ok(){let n=[];return n=jm?[{provide:o.Xts,multi:!0,useFactory:()=>{const t=(0,o.f3M)(rs);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function LD(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],Rf(1,n)}const b1=new o.OlP(jm?"router preloader":"");function sk(n){return Rf(0,[{provide:b1,useExisting:lb},{provide:ab,useExisting:n}])}const rg=!1,ck=new o.OlP(rg?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),db=[mt,{provide:Zo,useClass:Dh},rs,Bv,{provide:km,useFactory:function cb(n){return n.routerState.root},deps:[rs]},sb,rg?{provide:ub,useValue:!0}:[]];function uk(){return new o.PXZ("Router",rs)}let Yv=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[db,rg&&i?.enableTracing?ok().\u0275providers:[],{provide:tg,multi:!0,useValue:e},{provide:ck,useFactory:E1,deps:[[rs,new o.FiY,new o.tp0]]},{provide:Bn,useValue:i||{}},i?.useHash?{provide:Vt,useClass:ut}:{provide:Vt,useClass:st},{provide:qm,useFactory:()=>{const n=(0,o.f3M)(Bl),t=(0,o.f3M)(o.R0b),e=(0,o.f3M)(Bn),i=(0,o.f3M)(Wv),r=(0,o.f3M)(Zo);return e.scrollOffset&&n.setOffset(e.scrollOffset),new y1(r,i,n,t,e)}},i?.preloadingStrategy?sk(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:uk},i?.initialNavigation?hk(i):[],[{provide:D1,useFactory:Wm},{provide:o.tb,multi:!0,useExisting:D1}]]}}static forChild(e){return{ngModule:n,providers:[{provide:tg,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ck,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Bw]}),n})();function E1(n){if(rg&&n)throw new o.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function hk(n){return["disabled"===n.initialNavigation?Rf(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)(rs);return()=>{t.setUpLocationChangeListener()}}},{provide:Gv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Rf(2,[{provide:Gv,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(Ne,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(rs),s=t.get(w1);(function eB(n,t){n.events.pipe(is(e=>e instanceof Ph||e instanceof Mm||e instanceof Pm||e instanceof Pf),(0,qt.U)(e=>e instanceof Ph||e instanceof Pf?rc.COMPLETE:e instanceof Mm&&(0===e.code||1===e.code)?rc.REDIRECTING:rc.FAILED),is(e=>e!==rc.REDIRECTING),Fc(1)).subscribe(()=>{t()})})(r,()=>{i(!0)}),t.get(Wv).afterPreactivation=()=>(i(!0),s.closed?Ht(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const D1=new o.OlP(rg?"Router Initializer":"");function ae(n,t,e,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,i);else for(var c=n.length-1;c>=0;c--)(a=n[c])&&(s=(r<3?a(s):r>3?a(t,e,s):a(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s}function Nf(n,t){return function(e,i){t(e,i,n)}}function se(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function Nu(n,t,e,i){return new(e||(e=Promise))(function(s,a){function c(v){try{p(i.next(v))}catch(b){a(b)}}function h(v){try{p(i.throw(v))}catch(b){a(b)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(a){a(s)})}(v.value).then(c,h)}p((i=i.apply(n,t||[])).next())})}var Xv=z(4986),M1=z(3532);function k1(n,t,e){return e?k1(n,t).pipe(gs(e)):new Ti.y(i=>{const r=(...a)=>i.next(1===a.length?a[0]:a),s=n(r);return(0,Cu.m)(t)?()=>t(r,s):void 0})}var ey=z(6451),fb=z(6063);class pb extends ns.x{constructor(t=1/0,e=1/0,i=fb.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:a}=this;e||(i.push(t),!r&&i.push(s.now()+a)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let a=0;a<s.length&&!t.closed;a+=i?1:2)t.next(s[a]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const a=e.now();let c=0;for(let h=1;h<i.length&&i[h]<=a;h+=2)c=h;c&&i.splice(0,c+1)}}}var ty=z(9468),Km=z(5363);class _k extends ns.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(t){const{hasError:e,_hasValue:i,_value:r,thrownError:s,isStopped:a,_isComplete:c}=this;e?t.error(s):(a||c)&&(i&&t.next(r),t.complete())}next(t){this.isStopped||(this._value=t,this._hasValue=!0)}complete(){const{_hasValue:t,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,t&&super.next(e),super.complete())}}function gb(n,t,e,i){if(e){if(!(0,M1.K)(e))return function(...r){return gb(n,t,i).apply(this,r).pipe(gs(e))};i=e}return i?function(...r){return gb(n,t).apply(this,r).pipe((0,ty.R)(i),(0,Km.Q)(i))}:function(...r){const s=new _k;let a=!0;return new Ti.y(c=>{const h=s.subscribe(c);if(a){a=!1;let p=!1,v=!1;t.apply(this,[...r,(...b)=>{if(n){const D=b.shift();if(null!=D)return void s.error(D)}s.next(1<b.length?b:b[0]),v=!0,p&&s.complete()}]),v&&s.complete(),p=!0}return h})}}function Lu(n,t,e){return gb(!1,n,t,e)}const mb=Lr.z;var _b=z(5032),vb=z(3099);function yb(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,vb.B)({connector:()=>new pb(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function wb(n,t=Xl.y){return n=n??yk,(0,Sr.e)((e,i)=>{let r,s=!0;e.subscribe((0,fr.x)(i,a=>{const c=t(a);(s||!n(r,c))&&(s=!1,r=c,i.next(a))}))})}function yk(n,t){return n===t}const ny={connector:()=>new ns.x};const Ck=["*"];let Hc=(()=>{let n=class{};return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n})(),go=(()=>{let n=class{constructor(e,i){this._loader=e,this._zone=i,this._map=new Promise(r=>{this._mapResolver=r})}createMap(e,i){return this._zone.runOutsideAngular(()=>this._loader.load().then(()=>{const r=new google.maps.Map(e,i);this._mapResolver(r)}))}setMapOptions(e){return this._zone.runOutsideAngular(()=>{this._map.then(i=>{i.setOptions(e)})})}createMarker(e={},i=!0){return this._zone.runOutsideAngular(()=>this._map.then(r=>(i&&(e.map=r),new google.maps.Marker(e))))}createInfoWindow(e){return this._zone.runOutsideAngular(()=>this._map.then(()=>new google.maps.InfoWindow(e)))}createCircle(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>("string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),e.map=i,new google.maps.Circle(e))))}createRectangle(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>(e.map=i,new google.maps.Rectangle(e))))}createPolyline(e){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(i=>{let r=new google.maps.Polyline(e);return r.setMap(i),r}))}createPolygon(e){return this._zone.runOutsideAngular(()=>this.getNativeMap().then(i=>{let r=new google.maps.Polygon(e);return r.setMap(i),r}))}createDataLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>{let r=new google.maps.Data(e);return r.setMap(i),r}))}createTransitLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>{let r=new google.maps.TransitLayer;return r.setMap(e.visible?i:null),r}))}createBicyclingLayer(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>{let r=new google.maps.BicyclingLayer;return r.setMap(e.visible?i:null),r}))}containsLocation(e,i){return google.maps.geometry.poly.containsLocation(e,i)}subscribeToMapEvent(e){return new Ti.y(i=>{this._map.then(r=>{r.addListener(e,s=>{this._zone.run(()=>i.next(s))})})})}clearInstanceListeners(){return this._zone.runOutsideAngular(()=>{this._map.then(e=>{google.maps.event.clearInstanceListeners(e)})})}setCenter(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>i.setCenter(e)))}getZoom(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getZoom()))}getBounds(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getBounds()))}getMapTypeId(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getMapTypeId()))}setZoom(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>i.setZoom(e)))}getCenter(){return this._zone.runOutsideAngular(()=>this._map.then(e=>e.getCenter()))}panTo(e){return this._zone.runOutsideAngular(()=>this._map.then(i=>i.panTo(e)))}panBy(e,i){return this._zone.runOutsideAngular(()=>this._map.then(r=>r.panBy(e,i)))}fitBounds(e,i){return this._zone.runOutsideAngular(()=>this._map.then(r=>r.fitBounds(e,i)))}panToBounds(e,i){return this._zone.runOutsideAngular(()=>this._map.then(r=>r.panToBounds(e,i)))}getNativeMap(){return this._map}triggerMapEvent(e){return this._map.then(i=>google.maps.event.trigger(i,e))}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(Hc),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[Hc,o.R0b])],n),n})(),sg=(()=>{let n=class{constructor(e){this._wrapper=e,this._layers=new Map}addTransitLayer(e,i){const r=this._wrapper.createTransitLayer(i);this._layers.set(e,r)}addBicyclingLayer(e,i){const r=this._wrapper.createBicyclingLayer(i);this._layers.set(e,r)}deleteLayer(e){return this._layers.get(e).then(i=>{i.setMap(null),this._layers.delete(e)})}toggleLayerVisibility(e,i){return this._layers.get(e).then(r=>{if(i.visible)return this._wrapper.getNativeMap().then(s=>{r.setMap(s)});r.setMap(null)})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go])],n),n})(),Qm=(()=>{let n=class{constructor(e,i){this._apiWrapper=e,this._zone=i,this._circles=new Map}addCircle(e){this._circles.set(e,this._apiWrapper.createCircle({center:{lat:e.latitude,lng:e.longitude},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,radius:e.radius,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}removeCircle(e){return this._circles.get(e).then(i=>{i.setMap(null),this._circles.delete(e)})}setOptions(e,i){return this._circles.get(e).then(r=>{"string"==typeof i.strokePosition&&(i.strokePosition=google.maps.StrokePosition[i.strokePosition]),r.setOptions(i)})}getBounds(e){return this._circles.get(e).then(i=>i.getBounds())}getCenter(e){return this._circles.get(e).then(i=>i.getCenter())}getRadius(e){return this._circles.get(e).then(i=>i.getRadius())}setCenter(e){return this._circles.get(e).then(i=>i.setCenter({lat:e.latitude,lng:e.longitude}))}setEditable(e){return this._circles.get(e).then(i=>i.setEditable(e.editable))}setDraggable(e){return this._circles.get(e).then(i=>i.setDraggable(e.draggable))}setVisible(e){return this._circles.get(e).then(i=>i.setVisible(e.visible))}setRadius(e){return this._circles.get(e).then(i=>i.setRadius(e.radius))}getNativeCircle(e){return this._circles.get(e)}createEventObservable(e,i){return new Ti.y(r=>{let s=null;return this._circles.get(i).then(a=>{s=a.addListener(e,c=>this._zone.run(()=>r.next(c)))}),()=>{null!==s&&s.remove()}})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})();var Jm;let Kn=Jm=class{constructor(t){this._manager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.radius=0,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.centerChange=new o.vpe,this.circleClick=new o.vpe,this.circleDblClick=new o.vpe,this.drag=new o.vpe,this.dragEnd=new o.vpe,this.dragStart=new o.vpe,this.mouseDown=new o.vpe,this.mouseMove=new o.vpe,this.mouseOut=new o.vpe,this.mouseOver=new o.vpe,this.mouseUp=new o.vpe,this.radiusChange=new o.vpe,this.rightClick=new o.vpe,this._circleAddedToManager=!1,this._eventSubscriptions=[]}ngOnInit(){this._manager.addCircle(this),this._circleAddedToManager=!0,this._registerEventListeners()}ngOnChanges(t){this._circleAddedToManager&&((t.latitude||t.longitude)&&this._manager.setCenter(this),t.editable&&this._manager.setEditable(this),t.draggable&&this._manager.setDraggable(this),t.visible&&this._manager.setVisible(this),t.radius&&this._manager.setRadius(this),this._updateCircleOptionsChanges(t))}_updateCircleOptionsChanges(t){let e={},i=Object.keys(t).filter(r=>-1!==Jm._mapOptions.indexOf(r));i.forEach(r=>{e[r]=t[r].currentValue}),i.length>0&&this._manager.setOptions(this,e)}_registerEventListeners(){let t=new Map;t.set("center_changed",this.centerChange),t.set("click",this.circleClick),t.set("dblclick",this.circleDblClick),t.set("drag",this.drag),t.set("dragend",this.dragEnd),t.set("dragstart",this.dragStart),t.set("mousedown",this.mouseDown),t.set("mousemove",this.mouseMove),t.set("mouseout",this.mouseOut),t.set("mouseover",this.mouseOver),t.set("mouseup",this.mouseUp),t.set("radius_changed",this.radiusChange),t.set("rightclick",this.rightClick),t.forEach((e,i)=>{this._eventSubscriptions.push(this._manager.createEventObservable(i,this).subscribe(r=>{switch(i){case"radius_changed":this._manager.getRadius(this).then(s=>e.emit(s));break;case"center_changed":this._manager.getCenter(this).then(s=>e.emit({lat:s.lat(),lng:s.lng()}));break;default:e.emit({coords:{lat:r.latLng.lat(),lng:r.latLng.lng()}})}}))})}ngOnDestroy(){this._eventSubscriptions.forEach(function(t){t.unsubscribe()}),this._eventSubscriptions=null,this._manager.removeCircle(this)}getBounds(){return this._manager.getBounds(this)}getCenter(){return this._manager.getCenter(this)}};Kn.\u0275fac=function(t){return new(t||Kn)(o.Y36(Qm))},Kn.\u0275dir=o.lG2({type:Kn,selectors:[["agm-circle"]],inputs:{clickable:"clickable",draggable:["circleDraggable","draggable"],editable:"editable",radius:"radius",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",latitude:"latitude",longitude:"longitude",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{centerChange:"centerChange",circleClick:"circleClick",circleDblClick:"circleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",radiusChange:"radiusChange",rightClick:"rightClick"},features:[o.TTD]}),Kn._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],Kn.ctorParameters=()=>[{type:Qm}],ae([(0,o.IIB)(),se("design:type",Number)],Kn.prototype,"latitude",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Kn.prototype,"longitude",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Kn.prototype,"clickable",void 0),ae([(0,o.IIB)("circleDraggable"),se("design:type",Object)],Kn.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Kn.prototype,"editable",void 0),ae([(0,o.IIB)(),se("design:type",String)],Kn.prototype,"fillColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Kn.prototype,"fillOpacity",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Kn.prototype,"radius",void 0),ae([(0,o.IIB)(),se("design:type",String)],Kn.prototype,"strokeColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Kn.prototype,"strokeOpacity",void 0),ae([(0,o.IIB)(),se("design:type",String)],Kn.prototype,"strokePosition",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Kn.prototype,"strokeWeight",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Kn.prototype,"visible",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Kn.prototype,"zIndex",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"centerChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"circleClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"circleDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"drag",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"dragEnd",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"dragStart",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"mouseDown",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"mouseMove",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"mouseOut",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"mouseOver",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"mouseUp",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"radiusChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Kn.prototype,"rightClick",void 0),Kn=Jm=ae([se("design:paramtypes",[Qm])],Kn);let Oh=(()=>{let n=class{constructor(e,i){this._wrapper=e,this._zone=i,this._layers=new Map}addDataLayer(e){const i=this._wrapper.createDataLayer({style:e.style}).then(r=>(e.geoJson&&this.getDataFeatures(r,e.geoJson).then(s=>r.features=s),r));this._layers.set(e,i)}deleteDataLayer(e){this._layers.get(e).then(i=>{i.setMap(null),this._layers.delete(e)})}updateGeoJson(e,i){this._layers.get(e).then(r=>{r.forEach(function(s){r.remove(s);var a=r.features.indexOf(s,0);a>-1&&r.features.splice(a,1)}),this.getDataFeatures(r,i).then(s=>r.features=s)})}setDataOptions(e,i){this._layers.get(e).then(r=>{r.setControlPosition(i.controlPosition),r.setControls(i.controls),r.setDrawingMode(i.drawingMode),r.setStyle(i.style)})}createEventObservable(e,i){return new Ti.y(r=>{this._layers.get(i).then(s=>{s.addListener(e,a=>this._zone.run(()=>r.next(a)))})})}getDataFeatures(e,i){return new Promise((r,s)=>{if("object"==typeof i)try{r(e.addGeoJson(i))}catch(a){s(a)}else"string"==typeof i?e.loadGeoJson(i,null,r):s("Impossible to extract features from geoJson: wrong argument type")})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})();var ag;let Xm=0,sc=ag=class{constructor(t){this._manager=t,this._addedToManager=!1,this._id=(Xm++).toString(),this._subscriptions=[],this.layerClick=new o.vpe,this.geoJson=null}ngOnInit(){this._addedToManager||(this._manager.addDataLayer(this),this._addedToManager=!0,this._addEventListeners())}_addEventListeners(){[{name:"click",handler:e=>this.layerClick.emit(e)}].forEach(e=>{const i=this._manager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(i)})}id(){return this._id}toString(){return`AgmDataLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteDataLayer(this),this._subscriptions.forEach(t=>t.unsubscribe())}ngOnChanges(t){if(!this._addedToManager)return;var e=t.geoJson;e&&this._manager.updateGeoJson(this,e.currentValue);let i={};ag._dataOptionsAttributes.forEach(r=>i[r]=t.hasOwnProperty(r)?t[r].currentValue:this[r]),this._manager.setDataOptions(this,i)}};sc.\u0275fac=function(t){return new(t||sc)(o.Y36(Oh))},sc.\u0275dir=o.lG2({type:sc,selectors:[["agm-data-layer"]],inputs:{geoJson:"geoJson",style:"style"},outputs:{layerClick:"layerClick"},features:[o.TTD]}),sc._dataOptionsAttributes=["style"],sc.ctorParameters=()=>[{type:Oh}],ae([(0,o.r_U)(),se("design:type",o.vpe)],sc.prototype,"layerClick",void 0),ae([(0,o.IIB)(),se("design:type",Object)],sc.prototype,"geoJson",void 0),ae([(0,o.IIB)(),se("design:type",Function)],sc.prototype,"style",void 0),sc=ag=ae([se("design:paramtypes",[Oh])],sc);class e_{}let Lf=(()=>{let n=class{constructor(e){this._boundsChangeSampleTime$=new wr(200),this._includeInBounds$=new wr(new Map),this.bounds$=(0,ai.D)(e.load()).pipe(mb(()=>this._includeInBounds$),function vk(n){return(0,Sr.e)((t,e)=>{let i=!1,r=null;t.subscribe((0,fr.x)(e,s=>{i=!0,r=s})),(0,bl.Xf)(n).subscribe((0,fr.x)(e,()=>{if(i){i=!1;const s=r;r=null,e.next(s)}},_b.Z))})}(this._boundsChangeSampleTime$.pipe(Mi(i=>function P1(n=0,t,e=Xv.P){let i=-1;return null!=t&&((0,M1.K)(t)?e=t:i=t),new Ti.y(r=>{let s=function mk(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let a=0;return e.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(0,i)))),(0,qt.U)(i=>this._generateBounds(i)),yb(1))}_generateBounds(e){const i=new google.maps.LatLngBounds;return e.forEach(r=>i.extend(r)),i}addToBounds(e){const i=this._createIdentifier(e);if(this._includeInBounds$.value.has(i))return;const r=this._includeInBounds$.value;r.set(i,e),this._includeInBounds$.next(r)}removeFromBounds(e){const i=this._includeInBounds$.value;i.delete(this._createIdentifier(e)),this._includeInBounds$.next(i)}changeFitBoundsChangeSampleTime(e){this._boundsChangeSampleTime$.next(e)}getBounds$(){return this.bounds$}_createIdentifier(e){return`${e.lat}+${e.lng}`}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(Hc))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[Hc])],n),n})(),lg=(()=>{let n=class{constructor(e,i){this._mapsWrapper=e,this._zone=i,this._markers=new Map}convertAnimation(e){return Nu(this,void 0,void 0,function*(){return null===e?null:this._mapsWrapper.getNativeMap().then(()=>google.maps.Animation[e])})}deleteMarker(e){const i=this._markers.get(e);return null==i?Promise.resolve():i.then(r=>this._zone.run(()=>{r.setMap(null),this._markers.delete(e)}))}updateMarkerPosition(e){return this._markers.get(e).then(i=>i.setPosition({lat:e.latitude,lng:e.longitude}))}updateTitle(e){return this._markers.get(e).then(i=>i.setTitle(e.title))}updateLabel(e){return this._markers.get(e).then(i=>{i.setLabel(e.label)})}updateDraggable(e){return this._markers.get(e).then(i=>i.setDraggable(e.draggable))}updateIcon(e){return this._markers.get(e).then(i=>i.setIcon(e.iconUrl))}updateOpacity(e){return this._markers.get(e).then(i=>i.setOpacity(e.opacity))}updateVisible(e){return this._markers.get(e).then(i=>i.setVisible(e.visible))}updateZIndex(e){return this._markers.get(e).then(i=>i.setZIndex(e.zIndex))}updateClickable(e){return this._markers.get(e).then(i=>i.setClickable(e.clickable))}updateAnimation(e){return Nu(this,void 0,void 0,function*(){(yield this._markers.get(e)).setAnimation(yield this.convertAnimation(e.animation))})}addMarker(e){const i=new Promise(r=>Nu(this,void 0,void 0,function*(){return this._mapsWrapper.createMarker({position:{lat:e.latitude,lng:e.longitude},label:e.label,draggable:e.draggable,icon:e.iconUrl,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,title:e.title,clickable:e.clickable,animation:yield this.convertAnimation(e.animation)}).then(r)}));this._markers.set(e,i)}getNativeMarker(e){return this._markers.get(e)}createEventObservable(e,i){return new Ti.y(r=>{this._markers.get(i).then(s=>{s.addListener(e,a=>this._zone.run(()=>r.next(a)))})})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})(),Rh=(()=>{let n=class{constructor(e,i,r){this._mapsWrapper=e,this._zone=i,this._markerManager=r,this._infoWindows=new Map}deleteInfoWindow(e){const i=this._infoWindows.get(e);return null==i?Promise.resolve():i.then(r=>this._zone.run(()=>{r.close(),this._infoWindows.delete(e)}))}setPosition(e){return this._infoWindows.get(e).then(i=>i.setPosition({lat:e.latitude,lng:e.longitude}))}setZIndex(e){return this._infoWindows.get(e).then(i=>i.setZIndex(e.zIndex))}open(e){return this._infoWindows.get(e).then(i=>null!=e.hostMarker?this._markerManager.getNativeMarker(e.hostMarker).then(r=>this._mapsWrapper.getNativeMap().then(s=>i.open(s,r))):this._mapsWrapper.getNativeMap().then(r=>i.open(r)))}close(e){return this._infoWindows.get(e).then(i=>i.close())}setOptions(e,i){return this._infoWindows.get(e).then(r=>r.setOptions(i))}addInfoWindow(e){const i={content:e.content,maxWidth:e.maxWidth,zIndex:e.zIndex,disableAutoPan:e.disableAutoPan};"number"==typeof e.latitude&&"number"==typeof e.longitude&&(i.position={lat:e.latitude,lng:e.longitude});const r=this._mapsWrapper.createInfoWindow(i);this._infoWindows.set(e,r)}createEventObservable(e,i){return new Ti.y(r=>{this._infoWindows.get(i).then(s=>{s.addListener(e,a=>this._zone.run(()=>r.next(a)))})})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b),o.LFG(lg))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b,lg])],n),n})();var Cb;let uB=0,_s=Cb=class{constructor(t,e){this._infoWindowManager=t,this._el=e,this.isOpen=!1,this.infoWindowClose=new o.vpe,this._infoWindowAddedToManager=!1,this._id=(uB++).toString()}ngOnInit(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}ngOnChanges(t){this._infoWindowAddedToManager&&((t.latitude||t.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),t.zIndex&&this._infoWindowManager.setZIndex(this),t.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(t))}_registerEventListeners(){this._infoWindowManager.createEventObservable("closeclick",this).subscribe(()=>{this.isOpen=!1,this.infoWindowClose.emit()})}_updateOpenState(){this.isOpen?this.open():this.close()}_setInfoWindowOptions(t){let e={};Object.keys(t).filter(r=>-1!==Cb._infoWindowOptionsInputs.indexOf(r)).forEach(r=>{e[r]=t[r].currentValue}),this._infoWindowManager.setOptions(this,e)}open(){return this._infoWindowManager.open(this)}close(){return this._infoWindowManager.close(this).then(()=>{this.infoWindowClose.emit()})}id(){return this._id}toString(){return"AgmInfoWindow-"+this._id.toString()}ngOnDestroy(){this._infoWindowManager.deleteInfoWindow(this)}};_s.\u0275fac=function(t){return new(t||_s)(o.Y36(Rh),o.Y36(o.SBq))},_s.\u0275cmp=o.Xpm({type:_s,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[o.TTD],ngContentSelectors:Ck,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(t,e){1&t&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.qZA())},encapsulation:2}),_s._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],_s.ctorParameters=()=>[{type:Rh},{type:o.SBq}],ae([(0,o.IIB)(),se("design:type",Number)],_s.prototype,"latitude",void 0),ae([(0,o.IIB)(),se("design:type",Number)],_s.prototype,"longitude",void 0),ae([(0,o.IIB)(),se("design:type",Boolean)],_s.prototype,"disableAutoPan",void 0),ae([(0,o.IIB)(),se("design:type",Number)],_s.prototype,"zIndex",void 0),ae([(0,o.IIB)(),se("design:type",Number)],_s.prototype,"maxWidth",void 0),ae([(0,o.IIB)(),se("design:type",Object)],_s.prototype,"isOpen",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],_s.prototype,"infoWindowClose",void 0),_s=Cb=ae([se("design:paramtypes",[Rh,o.SBq])],_s);let oy=(()=>{let n=class{constructor(e,i){this._wrapper=e,this._zone=i,this._layers=new Map}addKmlLayer(e){const i=this._wrapper.getNativeMap().then(r=>new google.maps.KmlLayer({clickable:e.clickable,map:r,preserveViewport:e.preserveViewport,screenOverlays:e.screenOverlays,suppressInfoWindows:e.suppressInfoWindows,url:e.url,zIndex:e.zIndex}));this._layers.set(e,i)}setOptions(e,i){this._layers.get(e).then(r=>r.setOptions(i))}deleteKmlLayer(e){this._layers.get(e).then(i=>{i.setMap(null),this._layers.delete(e)})}createEventObservable(e,i){return new Ti.y(r=>{this._layers.get(i).then(s=>{s.addListener(e,a=>this._zone.run(()=>r.next(a)))})})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})();var Tb;let Ek=0,vs=Tb=class{constructor(t){this._manager=t,this._addedToManager=!1,this._id=(Ek++).toString(),this._subscriptions=[],this.clickable=!0,this.preserveViewport=!1,this.screenOverlays=!0,this.suppressInfoWindows=!1,this.url=null,this.zIndex=null,this.layerClick=new o.vpe,this.defaultViewportChange=new o.vpe,this.statusChange=new o.vpe}ngOnInit(){this._addedToManager||(this._manager.addKmlLayer(this),this._addedToManager=!0,this._addEventListeners())}ngOnChanges(t){this._addedToManager&&this._updatePolygonOptions(t)}_updatePolygonOptions(t){const e=Object.keys(t).filter(i=>-1!==Tb._kmlLayerOptions.indexOf(i)).reduce((i,r)=>(i[r]=t[r].currentValue,i),{});Object.keys(e).length>0&&this._manager.setOptions(this,e)}_addEventListeners(){[{name:"click",handler:e=>this.layerClick.emit(e)},{name:"defaultviewport_changed",handler:()=>this.defaultViewportChange.emit()},{name:"status_changed",handler:()=>this.statusChange.emit()}].forEach(e=>{const i=this._manager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(i)})}id(){return this._id}toString(){return`AgmKmlLayer-${this._id.toString()}`}ngOnDestroy(){this._manager.deleteKmlLayer(this),this._subscriptions.forEach(t=>t.unsubscribe())}};function Eb(n){const t=["insert_at","remove_at","set_at"];return k1(e=>t.map(i=>n.addListener(i,(r,s)=>e.apply(n,[{newArr:n.getArray(),evName:i,index:r,previous:s}]))),(e,i)=>i.forEach(r=>r.remove()))}vs.\u0275fac=function(t){return new(t||vs)(o.Y36(oy))},vs.\u0275dir=o.lG2({type:vs,selectors:[["agm-kml-layer"]],inputs:{clickable:"clickable",preserveViewport:"preserveViewport",screenOverlays:"screenOverlays",suppressInfoWindows:"suppressInfoWindows",url:"url",zIndex:"zIndex"},outputs:{layerClick:"layerClick",defaultViewportChange:"defaultViewportChange",statusChange:"statusChange"},features:[o.TTD]}),vs._kmlLayerOptions=["clickable","preserveViewport","screenOverlays","suppressInfoWindows","url","zIndex"],vs.ctorParameters=()=>[{type:oy}],ae([(0,o.IIB)(),se("design:type",Object)],vs.prototype,"clickable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vs.prototype,"preserveViewport",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vs.prototype,"screenOverlays",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vs.prototype,"suppressInfoWindows",void 0),ae([(0,o.IIB)(),se("design:type",String)],vs.prototype,"url",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vs.prototype,"zIndex",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vs.prototype,"layerClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vs.prototype,"defaultViewportChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vs.prototype,"statusChange",void 0),vs=Tb=ae([se("design:paramtypes",[oy])],vs);let t_=(()=>{let n=class{constructor(e,i){this._mapsWrapper=e,this._zone=i,this._polygons=new Map}addPolygon(e){const i=this._mapsWrapper.createPolygon({clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,geodesic:e.geodesic,paths:e.paths,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex});this._polygons.set(e,i)}updatePolygon(e){const i=this._polygons.get(e);return null==i?Promise.resolve():i.then(r=>this._zone.run(()=>{r.setPaths(e.paths)}))}setPolygonOptions(e,i){return this._polygons.get(e).then(r=>{r.setOptions(i)})}deletePolygon(e){const i=this._polygons.get(e);return null==i?Promise.resolve():i.then(r=>this._zone.run(()=>{r.setMap(null),this._polygons.delete(e)}))}getPath(e){return this._polygons.get(e).then(i=>i.getPath().getArray())}getPaths(e){return this._polygons.get(e).then(i=>i.getPaths().getArray().map(r=>r.getArray()))}createEventObservable(e,i){return new Ti.y(r=>{this._polygons.get(i).then(s=>{s.addListener(e,a=>this._zone.run(()=>r.next(a)))})})}createPathEventObservable(e){return Nu(this,void 0,void 0,function*(){const r=(yield this._polygons.get(e)).getPaths();return Eb(r).pipe(_a({newArr:r.getArray()}),Mi(a=>(0,ey.T)(...a.newArr.map((c,h)=>Eb(c).pipe((0,qt.U)(p=>({parentMVEvent:a,chMVCEvent:p,pathIndex:h}))))).pipe(_a({parentMVEvent:a,chMVCEvent:null,pathIndex:null}))),function wk(n){return is((t,e)=>n<=e)}(1),(0,qt.U)(({parentMVEvent:a,chMVCEvent:c,pathIndex:h})=>{let p;return c?(p={newArr:a.newArr.map(v=>v.getArray().map(b=>b.toJSON())),pathIndex:h,eventName:c.evName,index:c.index},c.previous&&(p.previous=c.previous)):(p={newArr:a.newArr.map(v=>v.getArray().map(b=>b.toJSON())),eventName:a.evName,index:a.index},a.previous&&(p.previous=a.previous.getArray())),p}))})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})();var xd;let ac=xd=class{constructor(t,e){this._mapsWrapper=t,this._zone=e,this._polylines=new Map}static _convertPoints(t){return t._getPoints().map(i=>({lat:i.latitude,lng:i.longitude}))}static _convertPath(t){const e=google.maps.SymbolPath[t];return"number"==typeof e?e:t}static _convertIcons(t){const e=t._getIcons().map(i=>({fixedRotation:i.fixedRotation,offset:i.offset,repeat:i.repeat,icon:{anchor:new google.maps.Point(i.anchorX,i.anchorY),fillColor:i.fillColor,fillOpacity:i.fillOpacity,path:xd._convertPath(i.path),rotation:i.rotation,scale:i.scale,strokeColor:i.strokeColor,strokeOpacity:i.strokeOpacity,strokeWeight:i.strokeWeight}}));return e.forEach(i=>{Object.entries(i).forEach(([r,s])=>{typeof s>"u"&&delete i[r]}),(typeof i.icon.anchor.x>"u"||typeof i.icon.anchor.y>"u")&&delete i.icon.anchor}),e}addPolyline(t){const e=this._mapsWrapper.getNativeMap().then(()=>[xd._convertPoints(t),xd._convertIcons(t)]).then(([i,r])=>this._mapsWrapper.createPolyline({clickable:t.clickable,draggable:t.draggable,editable:t.editable,geodesic:t.geodesic,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex,path:i,icons:r}));this._polylines.set(t,e)}updatePolylinePoints(t){const e=xd._convertPoints(t),i=this._polylines.get(t);return null==i?Promise.resolve():i.then(r=>this._zone.run(()=>{r.setPath(e)}))}updateIconSequences(t){return Nu(this,void 0,void 0,function*(){yield this._mapsWrapper.getNativeMap();const e=xd._convertIcons(t),i=this._polylines.get(t);if(null!=i)return i.then(r=>this._zone.run(()=>r.setOptions({icons:e})))})}setPolylineOptions(t,e){return this._polylines.get(t).then(i=>{i.setOptions(e)})}deletePolyline(t){const e=this._polylines.get(t);return null==e?Promise.resolve():e.then(i=>this._zone.run(()=>{i.setMap(null),this._polylines.delete(t)}))}getMVCPath(t){return Nu(this,void 0,void 0,function*(){return(yield this._polylines.get(t)).getPath()})}getPath(t){return Nu(this,void 0,void 0,function*(){return(yield this.getMVCPath(t)).getArray()})}createEventObservable(t,e){return new Ti.y(i=>{this._polylines.get(e).then(r=>{r.addListener(t,s=>this._zone.run(()=>i.next(s)))})})}createPathEventObservable(t){return Nu(this,void 0,void 0,function*(){return Eb(yield this.getMVCPath(t))})}};ac.\u0275fac=function(t){return new(t||ac)(o.LFG(go),o.LFG(o.R0b))},ac.\u0275prov=o.Yz7({token:ac,factory:function(n){return ac.\u0275fac(n)}}),ac.ctorParameters=()=>[{type:go},{type:o.R0b}],ac=xd=ae([se("design:paramtypes",[go,o.R0b])],ac);let cg=(()=>{let n=class{constructor(e,i){this._apiWrapper=e,this._zone=i,this._rectangles=new Map}addRectangle(e){this._rectangles.set(e,this._apiWrapper.createRectangle({bounds:{north:e.north,east:e.east,south:e.south,west:e.west},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}removeRectangle(e){return this._rectangles.get(e).then(i=>{i.setMap(null),this._rectangles.delete(e)})}setOptions(e,i){return this._rectangles.get(e).then(r=>r.setOptions(i))}getBounds(e){return this._rectangles.get(e).then(i=>i.getBounds())}setBounds(e){return this._rectangles.get(e).then(i=>i.setBounds({north:e.north,east:e.east,south:e.south,west:e.west}))}setEditable(e){return this._rectangles.get(e).then(i=>i.setEditable(e.editable))}setDraggable(e){return this._rectangles.get(e).then(i=>i.setDraggable(e.draggable))}setVisible(e){return this._rectangles.get(e).then(i=>i.setVisible(e.visible))}createEventObservable(e,i){return Ti.y.create(r=>{let s=null;return this._rectangles.get(i).then(a=>{s=a.addListener(e,c=>this._zone.run(()=>r.next(c)))}),()=>{null!==s&&s.remove()}})}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(go),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([se("design:paramtypes",[go,o.R0b])],n),n})();var Db;let vn=Db=class{constructor(t,e,i,r,s){this._elem=t,this._mapsWrapper=e,this._platformId=i,this._fitBoundsService=r,this._zone=s,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new o.vpe,this.mapRightClick=new o.vpe,this.mapDblClick=new o.vpe,this.centerChange=new o.vpe,this.boundsChange=new o.vpe,this.mapTypeIdChange=new o.vpe,this.idle=new o.vpe,this.zoomChange=new o.vpe,this.mapReady=new o.vpe,this.tilesLoaded=new o.vpe}ngOnInit(){if(ol(this._platformId))return;const t=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(t)}_initMapInstance(t){this._mapsWrapper.createMap(t,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then(()=>this._mapsWrapper.getNativeMap()).then(e=>this.mapReady.emit(e)),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}ngOnDestroy(){this._observableSubscriptions.forEach(t=>t.unsubscribe()),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}ngOnChanges(t){this._updateMapOptionsChanges(t),this._updatePosition(t)}_updateMapOptionsChanges(t){let e={};Object.keys(t).filter(r=>-1!==Db._mapOptionsAttributes.indexOf(r)).forEach(r=>{e[r]=t[r].currentValue}),this._mapsWrapper.setMapOptions(e)}triggerResize(t=!0){return new Promise(e=>{setTimeout(()=>this._mapsWrapper.triggerMapEvent("resize").then(()=>{t&&(null!=this.fitBounds?this._fitBounds():this._setCenter()),e()}))})}_updatePosition(t){if(null!=t.latitude||null!=t.longitude||t.fitBounds){if("fitBounds"in t)return void this._fitBounds();"number"!=typeof this.latitude||"number"!=typeof this.longitude||this._setCenter()}}_setCenter(){let t={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(t):this._mapsWrapper.setCenter(t)}_fitBounds(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}_subscribeToFitBoundsUpdates(){this._zone.runOutsideAngular(()=>{this._fitBoundsSubscription=this._fitBoundsService.getBounds$().subscribe(t=>{this._zone.run(()=>this._updateBounds(t,this.fitBoundsPadding))})})}_updateBounds(t,e){if(t){if(this._isLatLngBoundsLiteral(t)&&typeof google<"u"&&google&&google.maps&&google.maps.LatLngBounds){const i=new google.maps.LatLngBounds;i.union(t),t=i}if(this.usePanning)return void this._mapsWrapper.panToBounds(t,e);this._mapsWrapper.fitBounds(t,e)}}_isLatLngBoundsLiteral(t){return null!=t&&void 0===t.extend}_handleMapCenterChange(){const t=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe(()=>{this._mapsWrapper.getCenter().then(e=>{this.latitude=e.lat(),this.longitude=e.lng(),this.centerChange.emit({lat:this.latitude,lng:this.longitude})})});this._observableSubscriptions.push(t)}_handleBoundsChange(){const t=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe(()=>{this._mapsWrapper.getBounds().then(e=>{this.boundsChange.emit(e)})});this._observableSubscriptions.push(t)}_handleMapTypeIdChange(){const t=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe(()=>{this._mapsWrapper.getMapTypeId().then(e=>{this.mapTypeIdChange.emit(e)})});this._observableSubscriptions.push(t)}_handleMapZoomChange(){const t=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe(()=>{this._mapsWrapper.getZoom().then(e=>{this.zoom=e,this.zoomChange.emit(e)})});this._observableSubscriptions.push(t)}_handleIdleEvent(){const t=this._mapsWrapper.subscribeToMapEvent("idle").subscribe(()=>{this.idle.emit(void 0)});this._observableSubscriptions.push(t)}_handleTilesLoadedEvent(){const t=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe(()=>this.tilesLoaded.emit(void 0));this._observableSubscriptions.push(t)}_handleMapMouseEvents(){[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach(e=>{const i=this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(r=>{let s={coords:{lat:r.latLng.lat(),lng:r.latLng.lng()},placeId:r.placeId};s.placeId&&!this.showDefaultInfoWindow&&r.stop(),e.emitter.emit(s)});this._observableSubscriptions.push(i)})}};var xb;vn.\u0275fac=function(t){return new(t||vn)(o.Y36(o.SBq),o.Y36(go),o.Y36(o.Lbi),o.Y36(Lf),o.Y36(o.R0b))},vn.\u0275cmp=o.Xpm({type:vn,selectors:[["agm-map"]],hostVars:2,hostBindings:function(t,e){2&t&&o.ekj("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[o._Bn([Qm,Oh,Oh,Lf,go,Rh,oy,sg,lg,t_,ac,cg]),o.TTD],ngContentSelectors:Ck,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(t,e){1&t&&(o.F$t(),o._UZ(0,"div",0),o.TgZ(1,"div",1),o.Hsn(2),o.qZA())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),vn._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],vn.ctorParameters=()=>[{type:o.SBq},{type:go},{type:Object,decorators:[{type:o.tBr,args:[o.Lbi]}]},{type:Lf},{type:o.R0b}],ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"longitude",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"latitude",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"zoom",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vn.prototype,"minZoom",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vn.prototype,"maxZoom",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vn.prototype,"controlSize",void 0),ae([(0,o.IIB)("mapDraggable"),se("design:type",Object)],vn.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"disableDoubleClickZoom",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"disableDefaultUI",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"scrollwheel",void 0),ae([(0,o.IIB)(),se("design:type",String)],vn.prototype,"backgroundColor",void 0),ae([(0,o.IIB)(),se("design:type",String)],vn.prototype,"draggableCursor",void 0),ae([(0,o.IIB)(),se("design:type",String)],vn.prototype,"draggingCursor",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"keyboardShortcuts",void 0),ae([(0,o.IIB)(),se("design:type",Boolean)],vn.prototype,"zoomControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"zoomControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Array)],vn.prototype,"styles",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"usePanning",void 0),ae([(0,o.IIB)(),se("design:type",Boolean)],vn.prototype,"streetViewControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"streetViewControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"fitBounds",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"fitBoundsPadding",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"scaleControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"scaleControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"mapTypeControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"mapTypeControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"panControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"panControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"rotateControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"rotateControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"fullscreenControl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"fullscreenControlOptions",void 0),ae([(0,o.IIB)(),se("design:type",String)],vn.prototype,"mapTypeId",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"clickableIcons",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"showDefaultInfoWindow",void 0),ae([(0,o.IIB)(),se("design:type",String)],vn.prototype,"gestureHandling",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"tilt",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vn.prototype,"restriction",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"mapClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"mapRightClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"mapDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"centerChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"boundsChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"mapTypeIdChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"idle",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"zoomChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"mapReady",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vn.prototype,"tilesLoaded",void 0),vn=Db=ae([Nf(2,(0,o.tBr)(o.Lbi)),se("design:paramtypes",[o.SBq,go,Object,Lf,o.R0b])],vn);let Dk=0,Wi=xb=class{constructor(t){this._markerManager=t,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new o.vpe,this.markerClick=new o.vpe,this.markerDblClick=new o.vpe,this.markerRightClick=new o.vpe,this.dragStart=new o.vpe,this.drag=new o.vpe,this.dragEnd=new o.vpe,this.mouseOver=new o.vpe,this.mouseOut=new o.vpe,this.infoWindow=new o.n_E,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new pb(1),this._id=(Dk++).toString()}ngAfterContentInit(){this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe(()=>this.handleInfoWindowUpdate())}handleInfoWindowUpdate(){if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach(t=>{t.hostMarker=this})}ngOnChanges(t){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(t.latitude||t.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),t.title&&this._markerManager.updateTitle(this),t.label&&this._markerManager.updateLabel(this),t.draggable&&this._markerManager.updateDraggable(this),t.iconUrl&&this._markerManager.updateIcon(this),t.opacity&&this._markerManager.updateOpacity(this),t.visible&&this._markerManager.updateVisible(this),t.zIndex&&this._markerManager.updateZIndex(this),t.clickable&&this._markerManager.updateClickable(this),t.animation&&this._markerManager.updateAnimation(this)}}getFitBoundsDetails$(){return this._fitBoundsDetails$.asObservable()}_updateFitBoundsDetails(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}_addEventListeners(){const t=this._markerManager.createEventObservable("click",this).subscribe(()=>{this.openInfoWindow&&this.infoWindow.forEach(v=>v.open()),this.markerClick.emit(this)});this._observableSubscriptions.push(t);const e=this._markerManager.createEventObservable("dblclick",this).subscribe(()=>{this.markerDblClick.emit(null)});this._observableSubscriptions.push(e);const i=this._markerManager.createEventObservable("rightclick",this).subscribe(()=>{this.markerRightClick.emit(null)});this._observableSubscriptions.push(i);const r=this._markerManager.createEventObservable("dragstart",this).subscribe(v=>{this.dragStart.emit({coords:{lat:v.latLng.lat(),lng:v.latLng.lng()}})});this._observableSubscriptions.push(r);const s=this._markerManager.createEventObservable("drag",this).subscribe(v=>{this.drag.emit({coords:{lat:v.latLng.lat(),lng:v.latLng.lng()}})});this._observableSubscriptions.push(s);const a=this._markerManager.createEventObservable("dragend",this).subscribe(v=>{this.dragEnd.emit({coords:{lat:v.latLng.lat(),lng:v.latLng.lng()}})});this._observableSubscriptions.push(a);const c=this._markerManager.createEventObservable("mouseover",this).subscribe(v=>{this.mouseOver.emit({coords:{lat:v.latLng.lat(),lng:v.latLng.lng()}})});this._observableSubscriptions.push(c);const h=this._markerManager.createEventObservable("mouseout",this).subscribe(v=>{this.mouseOut.emit({coords:{lat:v.latLng.lat(),lng:v.latLng.lng()}})});this._observableSubscriptions.push(h);const p=this._markerManager.createEventObservable("animation_changed",this).subscribe(()=>{this.animationChange.emit(this.animation)});this._observableSubscriptions.push(p)}id(){return this._id}toString(){return"AgmMarker-"+this._id.toString()}ngOnDestroy(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(t=>t.unsubscribe())}};var Ab;Wi.\u0275fac=function(t){return new(t||Wi)(o.Y36(lg))},Wi.\u0275dir=o.lG2({type:Wi,selectors:[["agm-marker"]],contentQueries:function(t,e,i){if(1&t&&o.Suo(i,_s,4),2&t){let r;o.iGM(r=o.CRH())&&(e.infoWindow=r)}},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[o._Bn([{provide:e_,useExisting:(0,o.Gpc)(()=>xb)}]),o.TTD]}),Wi.ctorParameters=()=>[{type:lg}],ae([(0,o.IIB)(),se("design:type",Number)],Wi.prototype,"latitude",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Wi.prototype,"longitude",void 0),ae([(0,o.IIB)(),se("design:type",String)],Wi.prototype,"title",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Wi.prototype,"label",void 0),ae([(0,o.IIB)("markerDraggable"),se("design:type",Object)],Wi.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",String)],Wi.prototype,"iconUrl",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Wi.prototype,"visible",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Wi.prototype,"openInfoWindow",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Wi.prototype,"opacity",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Wi.prototype,"zIndex",void 0),ae([(0,o.IIB)("markerClickable"),se("design:type",Object)],Wi.prototype,"clickable",void 0),ae([(0,o.IIB)(),se("design:type",String)],Wi.prototype,"animation",void 0),ae([(0,o.r_U)(),se("design:type",Object)],Wi.prototype,"animationChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"markerClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"markerDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"markerRightClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"dragStart",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"drag",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"dragEnd",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"mouseOver",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Wi.prototype,"mouseOut",void 0),ae([(0,o.AcB)(_s),se("design:type",o.n_E)],Wi.prototype,"infoWindow",void 0),Wi=xb=ae([se("design:paramtypes",[lg])],Wi);let Pi=Ab=class{constructor(t){this._polygonManager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.paths=[],this.polyClick=new o.vpe,this.polyDblClick=new o.vpe,this.polyDrag=new o.vpe,this.polyDragEnd=new o.vpe,this.polyDragStart=new o.vpe,this.polyMouseDown=new o.vpe,this.polyMouseMove=new o.vpe,this.polyMouseOut=new o.vpe,this.polyMouseOver=new o.vpe,this.polyMouseUp=new o.vpe,this.polyRightClick=new o.vpe,this.polyPathsChange=new o.vpe,this._polygonAddedToManager=!1,this._subscriptions=[]}ngAfterContentInit(){this._polygonAddedToManager||this._init()}ngOnChanges(t){this._polygonAddedToManager?this._polygonManager.setPolygonOptions(this,this._updatePolygonOptions(t)):this._init()}_init(){this._polygonManager.addPolygon(this),this._polygonAddedToManager=!0,this._addEventListeners()}_addEventListeners(){[{name:"click",handler:e=>this.polyClick.emit(e)},{name:"dblclick",handler:e=>this.polyDblClick.emit(e)},{name:"drag",handler:e=>this.polyDrag.emit(e)},{name:"dragend",handler:e=>this.polyDragEnd.emit(e)},{name:"dragstart",handler:e=>this.polyDragStart.emit(e)},{name:"mousedown",handler:e=>this.polyMouseDown.emit(e)},{name:"mousemove",handler:e=>this.polyMouseMove.emit(e)},{name:"mouseout",handler:e=>this.polyMouseOut.emit(e)},{name:"mouseover",handler:e=>this.polyMouseOver.emit(e)},{name:"mouseup",handler:e=>this.polyMouseUp.emit(e)},{name:"rightclick",handler:e=>this.polyRightClick.emit(e)}].forEach(e=>{const i=this._polygonManager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(i)}),this._polygonManager.createPathEventObservable(this).then(e=>{const i=e.subscribe(r=>this.polyPathsChange.emit(r));this._subscriptions.push(i)})}_updatePolygonOptions(t){return Object.keys(t).filter(e=>-1!==Ab._polygonOptionsAttributes.indexOf(e)).reduce((e,i)=>(e[i]=t[i].currentValue,e),{})}id(){return this._id}ngOnDestroy(){this._polygonManager.deletePolygon(this),this._subscriptions.forEach(t=>t.unsubscribe())}getPath(){return this._polygonManager.getPath(this)}getPaths(){return this._polygonManager.getPaths(this)}};Pi.\u0275fac=function(t){return new(t||Pi)(o.Y36(t_))},Pi.\u0275dir=o.lG2({type:Pi,selectors:[["agm-polygon"]],inputs:{clickable:"clickable",draggable:["polyDraggable","draggable"],editable:"editable",geodesic:"geodesic",paths:"paths",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",visible:"visible",zIndex:"zIndex"},outputs:{polyClick:"polyClick",polyDblClick:"polyDblClick",polyDrag:"polyDrag",polyDragEnd:"polyDragEnd",polyDragStart:"polyDragStart",polyMouseDown:"polyMouseDown",polyMouseMove:"polyMouseMove",polyMouseOut:"polyMouseOut",polyMouseOver:"polyMouseOver",polyMouseUp:"polyMouseUp",polyRightClick:"polyRightClick",polyPathsChange:"polyPathsChange"},features:[o.TTD]}),Pi._polygonOptionsAttributes=["clickable","draggable","editable","fillColor","fillOpacity","geodesic","icon","map","paths","strokeColor","strokeOpacity","strokeWeight","visible","zIndex","draggable","editable","visible"],Pi.ctorParameters=()=>[{type:t_}],ae([(0,o.IIB)(),se("design:type",Object)],Pi.prototype,"clickable",void 0),ae([(0,o.IIB)("polyDraggable"),se("design:type",Object)],Pi.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Pi.prototype,"editable",void 0),ae([(0,o.IIB)(),se("design:type",String)],Pi.prototype,"fillColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Pi.prototype,"fillOpacity",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Pi.prototype,"geodesic",void 0),ae([(0,o.IIB)(),se("design:type",Array)],Pi.prototype,"paths",void 0),ae([(0,o.IIB)(),se("design:type",String)],Pi.prototype,"strokeColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Pi.prototype,"strokeOpacity",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Pi.prototype,"strokeWeight",void 0),ae([(0,o.IIB)(),se("design:type",Boolean)],Pi.prototype,"visible",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Pi.prototype,"zIndex",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyDrag",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyDragEnd",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyDragStart",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyMouseDown",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyMouseMove",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyMouseOut",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyMouseOver",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyMouseUp",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Pi.prototype,"polyRightClick",void 0),ae([(0,o.r_U)(),se("design:type",Object)],Pi.prototype,"polyPathsChange",void 0),Pi=Ab=ae([se("design:paramtypes",[t_])],Pi);let sy=(()=>{let n=class{ngOnInit(){if(null==this.path)throw new Error("Icon Sequence path is required")}};return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["agm-icon-sequence"]],inputs:{fixedRotation:"fixedRotation",offset:"offset",repeat:"repeat",anchorX:"anchorX",anchorY:"anchorY",fillColor:"fillColor",fillOpacity:"fillOpacity",path:"path",rotation:"rotation",scale:"scale",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight"}}),ae([(0,o.IIB)(),se("design:type",Boolean)],n.prototype,"fixedRotation",void 0),ae([(0,o.IIB)(),se("design:type",String)],n.prototype,"offset",void 0),ae([(0,o.IIB)(),se("design:type",String)],n.prototype,"repeat",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"anchorX",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"anchorY",void 0),ae([(0,o.IIB)(),se("design:type",String)],n.prototype,"fillColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"fillOpacity",void 0),ae([(0,o.IIB)(),se("design:type",String)],n.prototype,"path",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"rotation",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"scale",void 0),ae([(0,o.IIB)(),se("design:type",String)],n.prototype,"strokeColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"strokeOpacity",void 0),ae([(0,o.IIB)(),se("design:type",Number)],n.prototype,"strokeWeight",void 0),n})();var ay;let lc=ay=class{constructor(){this.positionChanged=new o.vpe}ngOnChanges(t){(t.latitude||t.longitude)&&this.positionChanged.emit({lat:t.latitude?t.latitude.currentValue:this.latitude,lng:t.longitude?t.longitude.currentValue:this.longitude})}getFitBoundsDetails$(){return this.positionChanged.pipe(_a({lat:this.latitude,lng:this.longitude}),(0,qt.U)(t=>({latLng:t})))}};var N1;lc.\u0275fac=function(t){return new(t||lc)},lc.\u0275dir=o.lG2({type:lc,selectors:[["agm-polyline-point"]],inputs:{latitude:"latitude",longitude:"longitude"},outputs:{positionChanged:"positionChanged"},features:[o._Bn([{provide:e_,useExisting:(0,o.Gpc)(()=>ay)}]),o.TTD]}),ae([(0,o.IIB)(),se("design:type",Number)],lc.prototype,"latitude",void 0),ae([(0,o.IIB)(),se("design:type",Number)],lc.prototype,"longitude",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],lc.prototype,"positionChanged",void 0),lc=ay=ae([se("design:paramtypes",[])],lc);let L1=0,Zi=N1=class{constructor(t){this._polylineManager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.geodesic=!1,this.visible=!0,this.lineClick=new o.vpe,this.lineDblClick=new o.vpe,this.lineDrag=new o.vpe,this.lineDragEnd=new o.vpe,this.lineDragStart=new o.vpe,this.lineMouseDown=new o.vpe,this.lineMouseMove=new o.vpe,this.lineMouseOut=new o.vpe,this.lineMouseOver=new o.vpe,this.lineMouseUp=new o.vpe,this.lineRightClick=new o.vpe,this.polyPathChange=new o.vpe,this._polylineAddedToManager=!1,this._subscriptions=[],this._id=(L1++).toString()}ngAfterContentInit(){this.points.length&&this.points.forEach(i=>{const r=i.positionChanged.subscribe(()=>{this._polylineManager.updatePolylinePoints(this)});this._subscriptions.push(r)}),this._polylineAddedToManager||this._init();const t=this.points.changes.subscribe(()=>this._polylineManager.updatePolylinePoints(this));this._subscriptions.push(t),this._polylineManager.updatePolylinePoints(this);const e=this.iconSequences.changes.subscribe(()=>this._polylineManager.updateIconSequences(this));this._subscriptions.push(e)}ngOnChanges(t){if(!this._polylineAddedToManager)return void this._init();let e={};Object.keys(t).filter(r=>-1!==N1._polylineOptionsAttributes.indexOf(r)).forEach(r=>e[r]=t[r].currentValue),this._polylineManager.setPolylineOptions(this,e)}getPath(){return this._polylineManager.getPath(this)}_init(){this._polylineManager.addPolyline(this),this._polylineAddedToManager=!0,this._addEventListeners()}_addEventListeners(){[{name:"click",handler:e=>this.lineClick.emit(e)},{name:"dblclick",handler:e=>this.lineDblClick.emit(e)},{name:"drag",handler:e=>this.lineDrag.emit(e)},{name:"dragend",handler:e=>this.lineDragEnd.emit(e)},{name:"dragstart",handler:e=>this.lineDragStart.emit(e)},{name:"mousedown",handler:e=>this.lineMouseDown.emit(e)},{name:"mousemove",handler:e=>this.lineMouseMove.emit(e)},{name:"mouseout",handler:e=>this.lineMouseOut.emit(e)},{name:"mouseover",handler:e=>this.lineMouseOver.emit(e)},{name:"mouseup",handler:e=>this.lineMouseUp.emit(e)},{name:"rightclick",handler:e=>this.lineRightClick.emit(e)}].forEach(e=>{const i=this._polylineManager.createEventObservable(e.name,this).subscribe(e.handler);this._subscriptions.push(i)}),this._polylineManager.createPathEventObservable(this).then(e=>{const i=e.subscribe(r=>this.polyPathChange.emit(r));this._subscriptions.push(i)})}_getPoints(){return this.points?this.points.toArray():[]}_getIcons(){return this.iconSequences?this.iconSequences.toArray():[]}id(){return this._id}ngOnDestroy(){this._polylineManager.deletePolyline(this),this._subscriptions.forEach(t=>t.unsubscribe())}};var ug;Zi.\u0275fac=function(t){return new(t||Zi)(o.Y36(ac))},Zi.\u0275dir=o.lG2({type:Zi,selectors:[["agm-polyline"]],contentQueries:function(t,e,i){if(1&t&&(o.Suo(i,lc,4),o.Suo(i,sy,4)),2&t){let r;o.iGM(r=o.CRH())&&(e.points=r),o.iGM(r=o.CRH())&&(e.iconSequences=r)}},inputs:{clickable:"clickable",draggable:["polylineDraggable","draggable"],editable:"editable",geodesic:"geodesic",visible:"visible",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",strokeWeight:"strokeWeight",zIndex:"zIndex"},outputs:{lineClick:"lineClick",lineDblClick:"lineDblClick",lineDrag:"lineDrag",lineDragEnd:"lineDragEnd",lineDragStart:"lineDragStart",lineMouseDown:"lineMouseDown",lineMouseMove:"lineMouseMove",lineMouseOut:"lineMouseOut",lineMouseOver:"lineMouseOver",lineMouseUp:"lineMouseUp",lineRightClick:"lineRightClick",polyPathChange:"polyPathChange"},features:[o.TTD]}),Zi._polylineOptionsAttributes=["draggable","editable","visible","geodesic","strokeColor","strokeOpacity","strokeWeight","zIndex"],Zi.ctorParameters=()=>[{type:ac}],ae([(0,o.IIB)(),se("design:type",Object)],Zi.prototype,"clickable",void 0),ae([(0,o.IIB)("polylineDraggable"),se("design:type",Object)],Zi.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Zi.prototype,"editable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Zi.prototype,"geodesic",void 0),ae([(0,o.IIB)(),se("design:type",String)],Zi.prototype,"strokeColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Zi.prototype,"strokeOpacity",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Zi.prototype,"strokeWeight",void 0),ae([(0,o.IIB)(),se("design:type",Object)],Zi.prototype,"visible",void 0),ae([(0,o.IIB)(),se("design:type",Number)],Zi.prototype,"zIndex",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineDrag",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineDragEnd",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineDragStart",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineMouseDown",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineMouseMove",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineMouseOut",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineMouseOver",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineMouseUp",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],Zi.prototype,"lineRightClick",void 0),ae([(0,o.r_U)(),se("design:type",Object)],Zi.prototype,"polyPathChange",void 0),ae([(0,o.AcB)(lc),se("design:type",o.n_E)],Zi.prototype,"points",void 0),ae([(0,o.AcB)(sy),se("design:type",o.n_E)],Zi.prototype,"iconSequences",void 0),Zi=N1=ae([se("design:paramtypes",[ac])],Zi);let vi=ug=class{constructor(t){this._manager=t,this.clickable=!0,this.draggable=!1,this.editable=!1,this.strokePosition="CENTER",this.strokeWeight=0,this.visible=!0,this.boundsChange=new o.vpe,this.rectangleClick=new o.vpe,this.rectangleDblClick=new o.vpe,this.drag=new o.vpe,this.dragEnd=new o.vpe,this.dragStart=new o.vpe,this.mouseDown=new o.vpe,this.mouseMove=new o.vpe,this.mouseOut=new o.vpe,this.mouseOver=new o.vpe,this.mouseUp=new o.vpe,this.rightClick=new o.vpe,this._rectangleAddedToManager=!1,this._eventSubscriptions=[]}ngOnInit(){this._manager.addRectangle(this),this._rectangleAddedToManager=!0,this._registerEventListeners()}ngOnChanges(t){this._rectangleAddedToManager&&((t.north||t.east||t.south||t.west)&&this._manager.setBounds(this),t.editable&&this._manager.setEditable(this),t.draggable&&this._manager.setDraggable(this),t.visible&&this._manager.setVisible(this),this._updateRectangleOptionsChanges(t))}_updateRectangleOptionsChanges(t){let e={},i=Object.keys(t).filter(r=>-1!==ug._mapOptions.indexOf(r));i.forEach(r=>{e[r]=t[r].currentValue}),i.length>0&&this._manager.setOptions(this,e)}_registerEventListeners(){let t=new Map;t.set("bounds_changed",this.boundsChange),t.set("click",this.rectangleClick),t.set("dblclick",this.rectangleDblClick),t.set("drag",this.drag),t.set("dragend",this.dragEnd),t.set("dragStart",this.dragStart),t.set("mousedown",this.mouseDown),t.set("mousemove",this.mouseMove),t.set("mouseout",this.mouseOut),t.set("mouseover",this.mouseOver),t.set("mouseup",this.mouseUp),t.set("rightclick",this.rightClick),t.forEach((e,i)=>{this._eventSubscriptions.push(this._manager.createEventObservable(i,this).subscribe(r=>{"bounds_changed"===i?this._manager.getBounds(this).then(s=>e.emit({north:s.getNorthEast().lat(),east:s.getNorthEast().lng(),south:s.getSouthWest().lat(),west:s.getSouthWest().lng()})):e.emit({coords:{lat:r.latLng.lat(),lng:r.latLng.lng()}})}))})}ngOnDestroy(){this._eventSubscriptions.forEach(function(t){t.unsubscribe()}),this._eventSubscriptions=null,this._manager.removeRectangle(this)}getBounds(){return this._manager.getBounds(this)}};vi.\u0275fac=function(t){return new(t||vi)(o.Y36(cg))},vi.\u0275dir=o.lG2({type:vi,selectors:[["agm-rectangle"]],inputs:{clickable:"clickable",draggable:["rectangleDraggable","draggable"],editable:"editable",strokePosition:"strokePosition",strokeWeight:"strokeWeight",visible:"visible",north:"north",east:"east",south:"south",west:"west",fillColor:"fillColor",fillOpacity:"fillOpacity",strokeColor:"strokeColor",strokeOpacity:"strokeOpacity",zIndex:"zIndex"},outputs:{boundsChange:"boundsChange",rectangleClick:"rectangleClick",rectangleDblClick:"rectangleDblClick",drag:"drag",dragEnd:"dragEnd",dragStart:"dragStart",mouseDown:"mouseDown",mouseMove:"mouseMove",mouseOut:"mouseOut",mouseOver:"mouseOver",mouseUp:"mouseUp",rightClick:"rightClick"},features:[o.TTD]}),vi._mapOptions=["fillColor","fillOpacity","strokeColor","strokeOpacity","strokePosition","strokeWeight","visible","zIndex","clickable"],vi.ctorParameters=()=>[{type:cg}],ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"north",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"east",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"south",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"west",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vi.prototype,"clickable",void 0),ae([(0,o.IIB)("rectangleDraggable"),se("design:type",Object)],vi.prototype,"draggable",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vi.prototype,"editable",void 0),ae([(0,o.IIB)(),se("design:type",String)],vi.prototype,"fillColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"fillOpacity",void 0),ae([(0,o.IIB)(),se("design:type",String)],vi.prototype,"strokeColor",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"strokeOpacity",void 0),ae([(0,o.IIB)(),se("design:type",String)],vi.prototype,"strokePosition",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vi.prototype,"strokeWeight",void 0),ae([(0,o.IIB)(),se("design:type",Object)],vi.prototype,"visible",void 0),ae([(0,o.IIB)(),se("design:type",Number)],vi.prototype,"zIndex",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"boundsChange",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"rectangleClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"rectangleDblClick",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"drag",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"dragEnd",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"dragStart",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"mouseDown",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"mouseMove",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"mouseOut",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"mouseOver",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"mouseUp",void 0),ae([(0,o.r_U)(),se("design:type",o.vpe)],vi.prototype,"rightClick",void 0),vi=ug=ae([se("design:paramtypes",[cg])],vi);var Id=(()=>{return(n=Id||(Id={})).ERROR="ERROR",n.INVALID_REQUEST="INVALID_REQUEST",n.OK="OK",n.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",n.REQUEST_DENIED="REQUEST_DENIED",n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.ZERO_RESULTS="ZERO_RESULTS",Id;var n})();let ba=class{constructor(t){const e=new Ti.y(i=>{t.load().then(()=>i.next())}).pipe((0,qt.U)(()=>this._createGeocoder()),function ry(n,t){const e=(0,Cu.m)(n)?n:()=>n;return(0,Cu.m)(t)?function iy(n,t=ny){const{connector:e}=t;return(0,Sr.e)((i,r)=>{const s=e();(0,bl.Xf)(n(function bk(n){return new Ti.y(t=>n.subscribe(t))}(s))).subscribe(r),r.add(i.subscribe(s))})}(t,{connector:e}):i=>new Lp(i,e)}(new pb(1)));e.connect(),this.geocoder$=e}geocode(t){return this.geocoder$.pipe(Mi(e=>this._getGoogleResults(e,t)))}_getGoogleResults(t,e){return Lu(t.geocode)(e).pipe(Mi(([r,s])=>s===Id.OK?Ht(r):ec(s)))}_createGeocoder(){return new google.maps.Geocoder}};ba.\u0275fac=function(t){return new(t||ba)(o.LFG(Hc))},ba.\u0275prov=o.Yz7({token:ba,factory:function(n){return ba.\u0275fac(n)},providedIn:"root"}),ba.ngInjectableDef=(0,o.Yz7)({factory:function(){return new ba((0,o.LFG)(Hc))},token:ba,providedIn:"root"}),ba=ae([se("design:paramtypes",[Hc])],ba);class Nh{getNativeWindow(){return window}}class Lh{getNativeDocument(){return document}}const hg=[Nh,Lh];var cc=(()=>{return(n=cc||(cc={}))[n.HTTP=1]="HTTP",n[n.HTTPS=2]="HTTPS",n[n.AUTO=3]="AUTO",cc;var n})();const Fh=new o.OlP("angular-google-maps LAZY_MAPS_API_CONFIG");let fg=(()=>{let n=class extends Hc{constructor(e=null,i,r,s){super(),this.localeId=s,this._SCRIPT_ID="agmGoogleMapsApiScript",this.callbackName="agmLazyMapsAPILoader",this._config=e||{},this._windowRef=i,this._documentRef=r}load(){const e=this._windowRef.getNativeWindow();if(e.google&&e.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;const i=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(i)return this._assignScriptLoadingPromise(i),this._scriptLoadingPromise;const r=this._documentRef.getNativeDocument().createElement("script");return r.type="text/javascript",r.async=!0,r.defer=!0,r.id=this._SCRIPT_ID,r.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(r),this._documentRef.getNativeDocument().body.appendChild(r),this._scriptLoadingPromise}_assignScriptLoadingPromise(e){this._scriptLoadingPromise=new Promise((i,r)=>{this._windowRef.getNativeWindow()[this.callbackName]=()=>{i()},e.onerror=s=>{r(s)}})}_getScriptSrc(e){let r;switch(this._config&&this._config.protocol||cc.HTTPS){case cc.AUTO:r="";break;case cc.HTTP:r="http:";break;case cc.HTTPS:r="https:"}const a={v:this._config.apiVersion||"quarterly",callback:e,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return`${r}//${this._config.hostAndPath||"maps.googleapis.com/maps/api/js"}?${Object.keys(a).filter(h=>null!=a[h]).filter(h=>!Array.isArray(a[h])||Array.isArray(a[h])&&a[h].length>0).map(h=>{let p=a[h];return Array.isArray(p)?{key:h,value:p.join(",")}:{key:h,value:a[h]}}).map(h=>`${h.key}=${h.value}`).join("&")}`}};return n.\u0275fac=function(e){return new(e||n)(o.LFG(Fh,8),o.LFG(Nh),o.LFG(Lh),o.LFG(o.soG))},n.\u0275prov=o.Yz7({token:n,factory:function(t){return n.\u0275fac(t)}}),n=ae([Nf(0,(0,o.FiY)()),Nf(0,(0,o.tBr)(Fh)),Nf(3,(0,o.tBr)(o.soG)),se("design:paramtypes",[Object,Nh,Lh,String])],n),n})();var Mb;let Ff=Mb=class{static forRoot(t){return{ngModule:Mb,providers:[...hg,{provide:Hc,useClass:fg},{provide:Fh,useValue:t}]}}};Ff.\u0275fac=function(t){return new(t||Ff)},Ff.\u0275mod=o.oAB({type:Ff}),Ff.\u0275inj=o.cJS({});var Po=z(2011),Sd=z(259),Wn=z(4976);class Uf{constructor(t){return t}}class Pb{constructor(){return(0,Sd.C6)()}}const kb=new o.OlP("angularfire2._apps"),U1={provide:Uf,useFactory:function Sk(n){return n&&1===n.length?n[0]:new Uf((0,Sd.Mq)())},deps:[[new o.FiY,kb]]},Mk={provide:Pb,deps:[[new o.FiY,kb]]};function B1(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new Uf(i)}}let Ob=(()=>{class n{constructor(e){(0,Sd.KN)("angularfire",Wn.q4.full,"core"),(0,Sd.KN)("angularfire",Wn.q4.full,"app"),(0,Sd.KN)("angular",o.q4F.full,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[U1,Mk]}),n})();function Rb(n,...t){return{ngModule:Ob,providers:[{provide:kb,useFactory:B1(n),multi:!0,deps:[o.R0b,o.zs3,Wn.HU,...t]}]}}const Fb=(0,Wn.u3)(Sd.ZF,!0);var cy=z(3942),be=z(5861),zo=z(6881),K=z(2090),xl=z(4859);const Ub="firebasestorage.googleapis.com",H1="storageBucket";class Ur extends K.ZR{constructor(t,e,i=0){super(uy(t),`Firebase Storage: ${e} (${uy(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return uy(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Cr=(()=>{return(n=Cr||(Cr={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Cr;var n})();function uy(n){return"storage/"+n}function dy(){return new Ur(Cr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Zb(){return new Ur(Cr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zb(){return new Ur(Cr.CANCELED,"User canceled the upload/download.")}function i_(){return new Ur(Cr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Bh(n){return new Ur(Cr.INVALID_ARGUMENT,n)}function Vh(){return new Ur(Cr.APP_DELETED,"The Firebase app was deleted.")}function hy(n){return new Ur(Cr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function r_(n,t){return new Ur(Cr.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function Bf(n){throw new Ur(Cr.INTERNAL_ERROR,"Internal error: "+n)}class Ca{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ca.makeFromUrl(t,e)}catch{return new Ca(t,"")}if(""===i.path)return i;throw function Q1(n){return new Ur(Cr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+r+"(/(.*))?$","i");function p(de){de.path_=decodeURIComponent(de.path)}const b=e.replace(/[.]/g,"\\."),re=[{regex:c,indices:{bucket:1,path:3},postModify:function s(de){"/"===de.path.charAt(de.path.length-1)&&(de.path_=de.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${b}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:p},{regex:new RegExp(`^https?://${e===Ub?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:p}];for(let de=0;de<re.length;de++){const _e=re[de],ue=_e.regex.exec(t);if(ue){let Le=ue[_e.indices.path];Le||(Le=""),i=new Ca(ue[_e.indices.bucket],Le),_e.postModify(i);break}}if(null==i)throw function K1(n){return new Ur(Cr.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class gB{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function o_(n){return"string"==typeof n||n instanceof String}function ex(n){return Hb()&&n instanceof Blob}function Hb(){return typeof Blob<"u"&&!(0,K.UG)()}function fy(n,t,e,i){if(i<t)throw Bh(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Bh(`Invalid value for '${n}'. Expected ${e} or less.`)}function Md(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function qb(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Pd=(()=>{return(n=Pd||(Pd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Pd;var n})();function Vf(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class Lk{constructor(t,e,i,r,s,a,c,h,p,v,b,D=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=b,this.retry=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,R)=>{this.resolve_=P,this.reject_=R,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,a=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());!function X1(n){return void 0!==n}(h)?s():s(h)}catch(h){a(h)}else if(null!==c){const h=dy();h.serverResponse=c.getErrorText(),a(this.errorCallback_?this.errorCallback_(c,h):h)}else a(r.canceled?this.appDelete_?Vh():zb():Zb())};this.canceled_?e(0,new py(!1,null,!0)):this.backoffId_=function Ok(n,t,e){let i=1,r=null,s=null,a=!1,c=0;function h(){return 2===c}let p=!1;function v(...V){p||(p=!0,t.apply(null,V))}function b(V){r=setTimeout(()=>{r=null,n(P,h())},V)}function D(){s&&clearTimeout(s)}function P(V,...Q){if(p)return void D();if(V)return D(),void v.call(null,V,...Q);if(h()||a)return D(),void v.call(null,V,...Q);let re;i<64&&(i*=2),1===c?(c=2,re=0):re=1e3*(i+Math.random()),b(re)}let R=!1;function F(V){R||(R=!0,D(),!p&&(null!==r?(V||(c=2),clearTimeout(r),b(0)):V||(c=1)))}return b(0),s=setTimeout(()=>{a=!0,F(!0)},e),F}((i,r)=>{if(r)return void i(!1,new py(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===Pd.NO_ERROR,h=s.getStatus();if(!c||Vf(h,this.additionalRetryCodes_)&&this.retry){const v=s.getErrorCode()===Pd.ABORT;return void i(!1,new py(!1,null,v))}const p=-1!==this.successCodes_.indexOf(h);i(!0,new py(p,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function Rk(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class py{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function Fu(...n){const t=function jb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(Hb())return new Blob(n);throw new Ur(Cr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const mo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Al{constructor(t,e){this.data=t,this.contentType=e||null}}function Il(n,t){switch(n){case mo.RAW:return new Al(Wb(t));case mo.BASE64:case mo.BASE64URL:return new Al(ox(n,t));case mo.DATA_URL:return new Al(function Vk(n){const t=new sx(n);return t.base64?ox(mo.BASE64,t.rest):function rx(n){let t;try{t=decodeURIComponent(n)}catch{throw r_(mo.DATA_URL,"Malformed data URL.")}return Wb(t)}(t.rest)}(t),function Zk(n){return new sx(n).contentType}(t))}throw dy()}function Wb(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function ox(n,t){switch(n){case mo.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw r_(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case mo.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw r_(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function Bk(n){if(typeof atob>"u")throw function kk(n){return new Ur(Cr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:r_(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class sx{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw r_(mo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function $b(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class ja{constructor(t,e){let i=0,r="";ex(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(ex(this.data_)){const r=function Uk(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new ja(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new ja(i,!0)}}static getBlob(...t){if(Hb()){const e=t.map(i=>i instanceof ja?i.data_:i);return new ja(Fu.apply(null,e))}{const e=t.map(a=>o_(a)?Il(mo.RAW,a).data:a.data_);let i=0;e.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(a=>{for(let c=0;c<a.length;c++)r[s++]=a[c]}),new ja(r,!0)}}uploadData(){return this.data_}}function Gb(n){let t;try{t=JSON.parse(n)}catch{return null}return function os(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function lx(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function cx(n,t){return t}class ea{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||cx}}let Zf=null;function pg(){if(Zf)return Zf;const n=[];n.push(new ea("bucket")),n.push(new ea("generation")),n.push(new ea("metageneration")),n.push(new ea("name","fullPath",!0));const e=new ea("name");e.xform=function t(s,a){return function Hk(n){return!o_(n)||n.length<2?n:lx(n)}(a)},n.push(e);const r=new ea("size");return r.xform=function i(s,a){return void 0!==a?Number(a):a},n.push(r),n.push(new ea("timeCreated")),n.push(new ea("updated")),n.push(new ea("md5Hash",null,!0)),n.push(new ea("cacheControl",null,!0)),n.push(new ea("contentDisposition",null,!0)),n.push(new ea("contentEncoding",null,!0)),n.push(new ea("contentLanguage",null,!0)),n.push(new ea("contentType",null,!0)),n.push(new ea("metadata","customMetadata",!0)),Zf=n,Zf}function s_(n,t,e){const i=Gb(t);return null===i?null:function Yb(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const a=e[s];i[a.local]=a.xform(i,t[a.server])}return function ux(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Ca(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function gy(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const my="prefixes",Qb="items";class jc{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wc(n){if(!n)throw dy()}function _y(n,t){return function e(i,r){const s=s_(n,r,t);return Wc(null!==s),s}}function gg(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function G1(){return new Ur(Cr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function $1(){return new Ur(Cr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Vb(n){return new Ur(Cr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Y1(n){return new Ur(Cr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function a_(n){const t=gg(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Bb(n){return new Ur(Cr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function fx(n,t,e){const r=Md(t.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,c=new jc(r,"GET",_y(n,e),a);return c.errorHandler=a_(t),c}function Wk(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const c=Md(t.bucketOnlyServerUrl(),n.host,n._protocol),p=n.maxOperationRetryTime,v=new jc(c,"GET",function qk(n,t){return function e(i,r){const s=function hx(n,t,e){const i=Gb(e);return null===i?null:function dx(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[my])for(const r of e[my]){const s=r.replace(/\/$/,""),a=n._makeStorageReference(new Ca(t,s));i.prefixes.push(a)}if(e[Qb])for(const r of e[Qb]){const s=n._makeStorageReference(new Ca(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Wc(null!==s),s}}(n,t.bucket),p);return v.urlParams=s,v.errorHandler=gg(t),v}function gx(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function Kk(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function mx(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},h=function c(){let re="";for(let de=0;de<2;de++)re+=Math.random().toString().slice(2);return re}();a["Content-Type"]="multipart/related; boundary="+h;const p=gx(t,i,r),v=gy(p,e),P=ja.getBlob("--"+h+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+v+"\r\n--"+h+"\r\nContent-Type: "+p.contentType+"\r\n\r\n",i,"\r\n--"+h+"--");if(null===P)throw i_();const R={name:p.fullPath},F=Md(s,n.host,n._protocol),Q=n.maxUploadRetryTime,te=new jc(F,"POST",_y(n,e),Q);return te.urlParams=R,te.headers=a,te.body=P.uploadData(),te.errorHandler=gg(t),te}class vy{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function Jb(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Wc(!1)}return Wc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const vx={STATE_CHANGED:"state_changed"},ta={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yy(n){switch(n){case"running":case"pausing":case"canceling":return ta.RUNNING;case"paused":return ta.PAUSED;case"success":return ta.SUCCESS;case"canceled":return ta.CANCELED;default:return ta.ERROR}}class yx{constructor(t,e,i){if(function Nk(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function zf(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let eC=null;class wx{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Bf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class bx extends wx{initXhr(){this.xhr_.responseType="text"}}function uc(){return eC?eC():new bx}class tO{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=pg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Cr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Vf(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=Zb()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Cr.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function Qk(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),a=gx(t,i,r),c={name:a.fullPath},h=Md(s,n.host,n._protocol),v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},b=gy(a,e),R=new jc(h,"POST",function P(F){let V;Jb(F);try{V=F.getResponseHeader("X-Goog-Upload-URL")}catch{Wc(!1)}return Wc(o_(V)),V},n.maxUploadRetryTime);return R.urlParams=c,R.headers=v,R.body=b,R.errorHandler=gg(t),R}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,uc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function Jk(n,t,e,i){const h=new jc(e,"POST",function s(p){const v=Jb(p,["active","final"]);let b=null;try{b=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wc(!1)}b||Wc(!1);const D=Number(b);return Wc(!isNaN(D)),new vy(D,i.size(),"final"===v)},n.maxUploadRetryTime);return h.headers={"X-Goog-Upload-Command":"query"},h.errorHandler=gg(t),h}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,uc,e,i);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new vy(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=function _x(n,t,e,i,r,s,a,c){const h=new vy(0,0);if(a?(h.current=a.current,h.total=a.total):(h.current=0,h.total=i.size()),i.size()!==h.total)throw function Uh(){return new Ur(Cr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const p=h.total-h.current;let v=p;r>0&&(v=Math.min(v,r));const b=h.current;let P="";P=0===v?"finalize":p===v?"upload, finalize":"upload";const R={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${h.current}`},F=i.slice(b,b+v);if(null===F)throw i_();const re=new jc(e,"POST",function V(de,_e){const ue=Jb(de,["active","final"]),pe=h.current+v,Le=i.size();let et;return et="final"===ue?_y(t,s)(de,_e):null,new vy(pe,Le,"final"===ue,et)},t.maxUploadRetryTime);return re.headers=R,re.body=F.uploadData(),re.progressCallback=c||null,re.errorHandler=gg(n),re}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(h){return this._error=h,void this._transition("error")}const c=this._ref.storage._makeRequest(a,uc,r,s,!1);this._request=c,c.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=fx(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,uc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=mx(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,uc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=zb(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=yy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new yx(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(yy(this._state)){case ta.SUCCESS:zf(this._resolve.bind(null,this.snapshot))();break;case ta.CANCELED:case ta.ERROR:zf(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(yy(this._state)){case ta.RUNNING:case ta.PAUSED:t.next&&zf(t.next.bind(t,this.snapshot))();break;case ta.SUCCESS:t.complete&&zf(t.complete.bind(t))();break;default:t.error&&zf(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class kd{constructor(t,e){this._service=t,this._location=e instanceof Ca?e:Ca.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new kd(t,e)}get root(){const t=new Ca(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lx(this._location.path)}get storage(){return this._service}get parent(){const t=function ax(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ca(this._location.bucket,t);return new kd(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw hy(t)}}function Tx(n,t,e){return nC.apply(this,arguments)}function nC(){return(nC=(0,be.Z)(function*(n,t,e){const r=yield qf(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield Tx(n,t,r.nextPageToken))})).apply(this,arguments)}function qf(n,t){null!=t&&"number"==typeof t.maxResults&&fy("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=Wk(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,uc)}function by(n){n._throwIfRoot("getDownloadURL");const t=function $k(n,t,e){const r=Md(t.fullServerUrl(),n.host,n._protocol),a=n.maxOperationRetryTime,c=new jc(r,"GET",function jk(n,t){return function e(i,r){const s=s_(n,r,t);return Wc(null!==s),function Kb(n,t,e,i){const r=Gb(t);if(null===r||!o_(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(p=>{const b=n.fullPath;return Md("/b/"+a(n.bucket)+"/o/"+a(b),e,i)+qb({alt:"media",token:p})})[0]}(s,r,n.host,n._protocol)}}(n,e),a);return c.errorHandler=a_(t),c}(n.storage,n._location,pg());return n.storage.makeRequestWithTokens(t,uc).then(e=>{if(null===e)throw function Pk(){return new Ur(Cr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function rO(n,t){const e=function zk(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Ca(n._location.bucket,e);return new kd(n.storage,i)}function xx(n,t){if(n instanceof Cy){const e=n;if(null==e._bucket)throw function J1(){return new Ur(Cr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+H1+"' property when initializing the app?")}();const i=new kd(e,e._bucket);return null!=t?xx(i,t):i}return void 0!==t?rO(n,t):n}function Ax(n,t){if(t&&function Ex(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof Cy)return function Dx(n,t){return new kd(n,t)}(n,t);throw Bh("To use ref(service, url), the first argument must be a Storage instance.")}return xx(n,t)}function iC(n,t){const e=t?.[H1];return null==e?null:Ca.makeFromBucketSpec(e,n)}class Cy{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Ub,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ca.makeFromBucketSpec(r,this._host):iC(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ca.makeFromBucketSpec(this._url,t):iC(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){fy("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){fy("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,be.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,be.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new kd(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new gB(Vh());{const a=function ix(n,t,e,i,r,s,a=!0){const c=qb(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return function nx(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function tx(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function Fk(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(p,s),function mB(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new Lk(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,a)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(t,e){var i=this;return(0,be.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const Sx="@firebase/storage",Px="storage";function Nx(n){return by(n=(0,K.m9)(n))}function _g(n){return function _o(n){n._throwIfRoot("deleteObject");const t=function Yk(n,t){const i=Md(t.fullServerUrl(),n.host,n._protocol),c=new jc(i,"DELETE",function a(h,p){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=a_(t),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,uc)}(n=(0,K.m9)(n))}function Od(n,t){return Ax(n=(0,K.m9)(n),t)}function rC(n=(0,zo.getApp)(),t){n=(0,K.m9)(n);const i=(0,zo._getProvider)(n,Px).getImmediate({identifier:t}),r=(0,K.P0)("storage");return r&&Lx(i,...r),i}function Lx(n,t,e,i={}){!function Ix(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,K.Sg)(r,n.app.options.projectId))}(n,t,e,i)}function Fx(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Cy(e,i,r,t,zo.SDK_VERSION)}!function uO(){(0,zo._registerComponent)(new xl.wA(Px,Fx,"PUBLIC").setMultipleInstances(!0)),(0,zo.registerVersion)(Sx,"0.11.2",""),(0,zo.registerVersion)(Sx,"0.11.2","esm2017")}();class l_{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ux{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new l_(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new l_(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?a=>e(new l_(a,this,this._ref)):{next:e.next?a=>e.next(new l_(a,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class Bx{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Zh(t,this._service))}get items(){return this._delegate.items.map(t=>new Zh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Zh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function aO(n,t){return rO(n,t)}(this._delegate,t);return new Zh(e,this.storage)}get root(){return new Zh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Zh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Ux(function sO(n,t,e){return function vB(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new tO(n,new ja(t),e)}(n=(0,K.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=mo.RAW,i){this._throwIfRoot("putString");const r=Il(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new Ux(new tO(this._delegate,new ja(r.data,!0),s),this)}listAll(){return function Rx(n){return function nO(n){const t={prefixes:[],items:[]};return Tx(n,t).then(()=>t)}(n=(0,K.m9)(n))}(this._delegate).then(t=>new Bx(t,this.storage))}list(t){return function Ox(n,t){return qf(n=(0,K.m9)(n),t)}(this._delegate,t||void 0).then(e=>new Bx(e,this.storage))}getMetadata(){return function Ey(n){return function iO(n){n._throwIfRoot("getMetadata");const t=fx(n.storage,n._location,pg());return n.storage.makeRequestWithTokens(t,uc)}(n=(0,K.m9)(n))}(this._delegate)}updateMetadata(t){return function kx(n,t){return function wy(n,t){n._throwIfRoot("updateMetadata");const e=function Gk(n,t,e,i){const s=Md(t.fullServerUrl(),n.host,n._protocol),c=gy(e,i),p=n.maxOperationRetryTime,v=new jc(s,"PATCH",_y(n,i),p);return v.headers={"Content-Type":"application/json; charset=utf-8"},v.body=c,v.errorHandler=a_(t),v}(n.storage,n._location,t,pg());return n.storage.makeRequestWithTokens(e,uc)}(n=(0,K.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return Nx(this._delegate)}delete(){return this._throwIfRoot("delete"),_g(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw hy(t)}}class dO{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(hO(t))throw Bh("ref() expected a child path but got a URL, use refFromURL instead.");return new Zh(Od(this._delegate,t),this)}refFromURL(t){if(!hO(t))throw Bh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ca.makeFromUrl(t,this._delegate.host)}catch{throw Bh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zh(Od(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){Lx(this._delegate,t,e,i)}}function hO(n){return/^[A-Za-z]+:\/\//.test(n)}function fO(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new dO(e,i)}!function pO(n){const t={TaskState:ta,TaskEvent:vx,StringFormat:mo,Storage:dO,Reference:Zh};n.INTERNAL.registerComponent(new xl.wA("storage-compat",fO,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(cy.Z);var dc=z(1877);const jf=new Map,Zx={activated:!1,tokenObservers:[]},gO={initialized:!1,enabled:!1};function vo(n){return jf.get(n)||Object.assign({},Zx)}function oC(){return gO}const sC="https://content-firebaseappcheck.googleapis.com/v1",vO="exchangeDebugToken",vg={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Hx{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,be.Z)(function*(){e.stop();try{e.pending=new K.BH,yield function wO(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new K.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Rs=new K.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aC(n){if(!vo(n).activated)throw Rs.create("use-before-activation",{appName:n.name})}function d_(n,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,be.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const b=yield r.getHeartbeatsHeader();b&&(i["X-Firebase-Client"]=b)}const s={method:"POST",body:JSON.stringify(t),headers:i};let a,c;try{a=yield fetch(n,s)}catch(b){throw Rs.create("fetch-network-error",{originalErrorMessage:b?.message})}if(200!==a.status)throw Rs.create("fetch-status-error",{httpStatus:a.status});try{c=yield a.json()}catch(b){throw Rs.create("fetch-parse-error",{originalErrorMessage:b?.message})}const h=c.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const p=1e3*Number(h[1]),v=Date.now();return{token:c.token,expireTimeMillis:v+p,issuedAtTimeMillis:v}})).apply(this,arguments)}function jx(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${sC}/projects/${e}/apps/${i}:${vO}?key=${r}`,body:{debug_token:t}}}const lC="firebase-app-check-database",TO=1,yg="firebase-app-check-store";let Iy=null;function Gx(n,t){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,be.Z)(function*(n,t){const i=(yield function $x(){return Iy||(Iy=new Promise((n,t)=>{try{const e=indexedDB.open(lC,TO);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Rs.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(yg,{keyPath:"compositeKey"})}}catch(e){t(Rs.create("storage-open",{originalErrorMessage:e?.message}))}}),Iy)}()).transaction(yg,"readwrite"),s=i.objectStore(yg).put({compositeKey:n,value:t});return new Promise((a,c)=>{s.onsuccess=h=>{a()},i.onerror=h=>{var p;c(Rs.create("storage-set",{originalErrorMessage:null===(p=h.target.error)||void 0===p?void 0:p.message}))}})})).apply(this,arguments)}const wg=new dc.Yd("@firebase/app-check");function hC(n,t){return(0,K.hl)()?function DO(n,t){return Gx(function Yx(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{wg.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function My(){return oC().enabled}function f_(){return pC.apply(this,arguments)}function pC(){return(pC=(0,be.Z)(function*(){const n=oC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gC={error:"UNKNOWN_ERROR"};function MO(n){return K.US.encodeString(JSON.stringify(n),!1)}function p_(n){return zh.apply(this,arguments)}function zh(){return(zh=(0,be.Z)(function*(n,t=!1){const e=n.app;aC(e);const i=vo(e);let s,r=i.token;if(r&&!bg(r)&&(i.token=void 0,r=void 0),!r){const h=yield i.cachedTokenPromise;h&&(bg(h)?r=h:yield hC(e,void 0))}if(!t&&r&&bg(r))return{token:r.token};let c,a=!1;if(My()){i.exchangeTokenPromise||(i.exchangeTokenPromise=d_(jx(e,yield f_()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const h=yield i.exchangeTokenPromise;return yield hC(e,h),i.token=h,{token:h.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield vo(e).exchangeTokenPromise}catch(h){"appCheck/throttled"===h.code?wg.warn(h.message):wg.error(h),s=h}return r?s?c=bg(r)?{token:r.token,internalError:s}:vC(s):(c={token:r.token},i.token=r,yield hC(e,r)):c=vC(s),a&&function Oy(n,t){const e=vo(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,c),c})).apply(this,arguments)}function mC(n){return _C.apply(this,arguments)}function _C(){return(_C=(0,be.Z)(function*(n){const t=n.app;aC(t);const{provider:e}=vo(t);if(My()){const i=yield f_(),{token:r}=yield d_(jx(t,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function Py(n,t){const e=vo(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function ky(n){const{app:t}=n,e=vo(t);let i=e.tokenRefresher;i||(i=function PO(n){const{app:t}=n;return new Hx((0,be.Z)(function*(){let i;if(i=vo(t).token?yield p_(n,!0):yield p_(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=vo(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},vg.RETRIAL_MIN_WAIT,vg.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function bg(n){return n.expireTimeMillis-Date.now()>0}function vC(n){return{token:MO(gC),error:n}}class yC{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=vo(this.app);for(const e of t)Py(this.app,e.next);return Promise.resolve()}}const DC="app-check-internal";!function oA(){(0,zo._registerComponent)(new xl.wA("app-check",n=>function Qx(n,t){return new yC(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(DC).initialize()})),(0,zo._registerComponent)(new xl.wA(DC,n=>function Jx(n){return{getToken:t=>p_(n,t),getLimitedUseToken:()=>mC(n),addTokenListener:t=>function Kx(n,t,e,i){const{app:r}=n,s=vo(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&bg(s.token)){const c=s.token;Promise.resolve().then(()=>{e({token:c.token}),ky(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ky(n))}(n,"INTERNAL",t),removeTokenListener:t=>Py(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zo.registerVersion)("@firebase/app-check","0.8.0")}();class Wf{constructor(){return(0,Wn.vb)("app-check")}}typeof window<"u"&&window;var SC=z(9260);function m_(n){const t=function zO(n){return new Ti.y(t=>{const e=a=>t.next(a);e(n.snapshot);const s=n.on("state_changed",e);return n.then(a=>{e(a),t.complete()},a=>{e(n.snapshot),(a=>{t.error(a)})(a)}),function(){s()}}).pipe(function z1(n,t=Xv.z){return(0,Sr.e)((e,i)=>{let r=null,s=null,a=null;const c=()=>{if(r){r.unsubscribe(),r=null;const p=s;s=null,i.next(p)}};function h(){const p=a+n,v=t.now();if(v<p)return r=this.schedule(void 0,p-v),void i.add(r);c()}e.subscribe((0,fr.x)(i,p=>{s=p,a=t.now(),r||(r=t.schedule(h,n),i.add(r))},()=>{c(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,qt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function $f(n){return{getDownloadURL:()=>Ht(void 0).pipe(Wn.fc,Mi(()=>n.getDownloadURL()),Wn.iC),getMetadata:()=>Ht(void 0).pipe(Wn.fc,Mi(()=>n.getMetadata()),Wn.iC),delete:()=>(0,ai.D)(n.delete()),child:t=>$f(n.child(t)),updateMetadata:t=>(0,ai.D)(n.updateMetadata(t)),put:(t,e)=>m_(n.put(t,e)),putString:(t,e,i)=>m_(n.putString(t,e,i)),list:t=>(0,ai.D)(n.list(t)),listAll:()=>(0,ai.D)(n.listAll())}}const HO=new o.OlP("angularfire2.storageBucket"),qO=new o.OlP("angularfire2.storage.maxUploadRetryTime"),uA=new o.OlP("angularfire2.storage.maxOperationRetryTime"),dA=new o.OlP("angularfire2.storage.use-emulator");let MC=(()=>{class n{constructor(e,i,r,s,a,c,h,p,v,b){const D=(0,Po.on)(e,a,i);this.storage=(0,Po.cc)(`${D.name}.storage.${r}`,"AngularFireStorage",D.name,()=>{const P=a.runOutsideAngular(()=>D.storage(r||void 0)),R=v;return R&&P.useEmulator(...R),h&&P.setMaxUploadRetryTime(h),p&&P.setMaxOperationRetryTime(p),P},[h,p])}ref(e){return $f(this.storage.ref(e))}refFromURL(e){return $f(this.storage.refFromURL(e))}upload(e,i,r){return $f(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Po.Dh),o.LFG(Po.xv,8),o.LFG(HO,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wn.HU),o.LFG(qO,8),o.LFG(uA,8),o.LFG(dA,8),o.LFG(Wf,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),kC=(()=>{class n{constructor(){SC.Z.registerVersion("angularfire",Wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[MC],imports:[PC]}),n})();var hA=z(1389);class fA{constructor(){return(0,Wn.vb)("auth")}}var Ut,CA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$c={},TA=TA||{},qn=CA||self;function NC(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Vy(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var LC="closure_uid_"+(1e9*Math.random()>>>0),pR=0;function JB(n,t,e){return n.call.apply(n.bind,arguments)}function XB(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Ta(n,t,e){return(Ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JB:XB).apply(null,arguments)}function Gf(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ns(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[r].apply(i,a)}}function Nd(){this.s=this.s,this.o=this.o}Nd.prototype.s=!1,Nd.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function QB(n){Object.prototype.hasOwnProperty.call(n,LC)&&n[LC]||(n[LC]=++pR)}(this)},Nd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const FC=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function zy(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function gR(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(NC(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let a=0;a<s;a++)n[r+a]=i[a]}else n.push(i)}}function ys(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}ys.prototype.h=function(){this.defaultPrevented=!0};var EA=function(){if(!qn.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qn.addEventListener("test",()=>{},t),qn.removeEventListener("test",()=>{},t)}catch{}return n}();function w_(n){return/^[\s\xa0]*$/.test(n)}function UC(){var n=qn.navigator;return n&&(n=n.userAgent)?n:""}function Uu(n){return-1!=UC().indexOf(n)}function BC(n){return BC[" "](n),n}BC[" "]=function(){};var VC,n,Hy=Uu("Opera"),Cg=Uu("Trident")||Uu("MSIE"),_R=Uu("Edge"),DA=_R||Cg,vR=Uu("Gecko")&&!(-1!=UC().toLowerCase().indexOf("webkit")&&!Uu("Edge"))&&!(Uu("Trident")||Uu("MSIE"))&&!Uu("Edge"),yR=-1!=UC().toLowerCase().indexOf("webkit")&&!Uu("Edge");function xA(){var n=qn.document;return n?n.documentMode:void 0}e:{var AA="",ZC=(n=UC(),vR?/rv:([^\);]+)(\)|;)/.exec(n):_R?/Edge\/([\d\.]+)/.exec(n):Cg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yR?/WebKit\/(\S+)/.exec(n):Hy?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ZC&&(AA=ZC?ZC[1]:""),Cg){var qy=xA();if(null!=qy&&qy>parseFloat(AA)){VC=String(qy);break e}}VC=AA}var Gc=qn.document&&Cg&&(xA()||parseInt(VC,10))||void 0;function b_(n,t){if(ys.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(vR){e:{try{BC(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&b_.$.h.call(this)}}Ns(b_,ys);var zC={2:"touch",3:"pen",4:"mouse"};b_.prototype.h=function(){b_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var C_="closure_listenable_"+(1e6*Math.random()|0),eV=0;function hc(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++eV,this.fa=this.ia=!1}function Wy(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function T_(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function IA(n){const t={};for(const e in n)t[e]=n[e];return t}const $y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function HC(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<$y.length;s++)e=$y[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function E_(n){this.src=n,this.g={},this.h=0}function qC(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=FC(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Wy(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function Gy(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==t&&s.capture==!!e&&s.la==i)return r}return-1}E_.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var a=Gy(n,t,i,r);return-1<a?(t=n[a],e||(t.ia=!1)):((t=new hc(t,this.src,s,!!i,r)).ia=e,n.push(t)),t};var Yy="closure_lm_"+(1e6*Math.random()|0),jC={};function WC(n,t,e,i,r){if(i&&i.once)return Bu(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)WC(n,t[s],e,i,r);return null}return e=YC(e),n&&n[C_]?n.O(t,e,Vy(i)?!!i.capture:!!i,r):SA(n,t,e,!1,i,r)}function SA(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var a=Vy(r)?!!r.capture:!!r,c=GC(n);if(c||(n[Yy]=c=new E_(n)),(e=c.add(t,e,i,a,s)).proxy)return e;if(i=function $C(){const t=MA;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)EA||(r=a),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(Qy(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function Bu(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Bu(n,t[s],e,i,r);return null}return e=YC(e),n&&n[C_]?n.P(t,e,Vy(i)?!!i.capture:!!i,r):SA(n,t,e,!0,i,r)}function Ld(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ld(n,t[s],e,i,r);else i=Vy(i)?!!i.capture:!!i,e=YC(e),n&&n[C_]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=Gy(s=n.g[t],e,i,r))&&(Wy(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=GC(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Gy(t,e,i,r)),(e=-1<n?t[n]:null)&&Ky(e))}function Ky(n){if("number"!=typeof n&&n&&!n.fa){var t=n.src;if(t&&t[C_])qC(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(Qy(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=GC(t))?(qC(e,n),0==e.h&&(e.src=null,t[Yy]=null)):Wy(n)}}}function Qy(n){return n in jC?jC[n]:jC[n]="on"+n}function MA(n,t){if(n.fa)n=!0;else{t=new b_(t,this);var e=n.listener,i=n.la||n.src;n.ia&&Ky(n),n=e.call(i,t)}return n}function GC(n){return(n=n[Yy])instanceof E_?n:null}var PA="__closure_events_fn_"+(1e9*Math.random()>>>0);function YC(n){return"function"==typeof n?n:(n[PA]||(n[PA]=function(t){return n.handleEvent(t)}),n[PA])}function ws(){Nd.call(this),this.i=new E_(this),this.S=this,this.J=null}function Ls(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,"string"==typeof t)t=new ys(t,n);else if(t instanceof ys)t.target=t.target||n;else{var r=t;HC(t=new ys(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var a=t.g=e[s];r=Jy(a,i,!0,t)&&r}if(r=Jy(a=t.g=n,i,!0,t)&&r,r=Jy(a,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Jy(a=t.g=e[s],i,!1,t)&&r}function Jy(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==e){var c=a.listener,h=a.la||a.src;a.ia&&qC(n.i,a),r=!1!==c.call(h,i)&&r}}return r&&!i.defaultPrevented}Ns(ws,Nd),ws.prototype[C_]=!0,ws.prototype.removeEventListener=function(n,t,e,i){Ld(this,n,t,e,i)},ws.prototype.N=function(){if(ws.$.N.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Wy(e[i]);delete n.g[t],n.h--}}this.J=null},ws.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},ws.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Xy=qn.JSON.stringify;function kA(){var n=e0;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var KC=new class tV{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new nV,n=>n.reset());class nV{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function QC(n){var t=1;n=n.split(":");const e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function OA(n){qn.setTimeout(()=>{throw n},0)}let Tg,Eg=!1,e0=new class CR{constructor(){this.h=this.g=null}add(t,e){const i=KC.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},JC=()=>{const n=qn.Promise.resolve(void 0);Tg=()=>{n.then(t0)}};var t0=()=>{for(var n;n=kA();){try{n.h.call(n.g)}catch(e){OA(e)}var t=KC;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Eg=!1};function Yf(n,t){ws.call(this),this.h=n||1,this.g=t||qn,this.j=Ta(this.qb,this),this.l=Date.now()}function n0(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function XC(n,t,e){if("function"==typeof n)e&&(n=Ta(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ta(n.handleEvent,n)}return 2147483647<Number(t)?-1:qn.setTimeout(n,t||0)}function RA(n){n.g=XC(()=>{n.g=null,n.i&&(n.i=!1,RA(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ns(Yf,ws),(Ut=Yf.prototype).ga=!1,Ut.T=null,Ut.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ls(this,"tick"),this.ga&&(n0(this),this.start()))}},Ut.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ut.N=function(){Yf.$.N.call(this),n0(this),delete this.g};class iV extends Nd{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:RA(this)}N(){super.N(),this.g&&(qn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function r0(n){Nd.call(this),this.h=n,this.g={}}Ns(r0,Nd);var TR=[];function eT(n,t,e,i){Array.isArray(e)||(e&&(TR[0]=e.toString()),e=TR);for(var r=0;r<e.length;r++){var s=WC(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function NA(n){T_(n.g,function(t,e){this.g.hasOwnProperty(e)&&Ky(t)},n),n.g={}}function o0(){this.g=!0}function D_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function sV(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return Xy(e)}catch{return t}}(n,e)+(i?" "+i:"")})}r0.prototype.N=function(){r0.$.N.call(this),NA(this)},r0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},o0.prototype.Ea=function(){this.g=!1},o0.prototype.info=function(){};var Dg={},LA=null;function Kf(){return LA=LA||new ws}function FA(n){ys.call(this,Dg.Ta,n)}function x_(n){const t=Kf();Ls(t,new FA(t))}function tT(n,t){ys.call(this,Dg.STAT_EVENT,n),this.stat=t}function ko(n){const t=Kf();Ls(t,new tT(t,n))}function nT(n,t){ys.call(this,Dg.Ua,n),this.size=t}function Qf(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qn.setTimeout(function(){n()},t)}Dg.Ta="serverreachability",Ns(FA,ys),Dg.STAT_EVENT="statevent",Ns(tT,ys),Dg.Ua="timingevent",Ns(nT,ys);var xg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},UA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function A_(){}function I_(){}A_.prototype.h=null;var ZA,a0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function BA(){ys.call(this,"d")}function VA(){ys.call(this,"c")}function S_(){}function M_(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new r0(this),this.P=DR,this.V=new Yf(n=DA?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zA}function zA(){this.i=null,this.g="",this.h=!1}Ns(BA,ys),Ns(VA,ys),Ns(S_,A_),S_.prototype.g=function(){return new XMLHttpRequest},S_.prototype.i=function(){return{}},ZA=new S_;var DR=45e3,iT={},P_={};function l0(n,t,e){n.L=1,n.v=lT(Hh(t)),n.s=e,n.S=!0,rT(n,null)}function rT(n,t){n.G=Date.now(),Jf(n),n.A=Hh(n.v);var e=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),O(e.i,"t",i),n.C=0,e=n.l.J,n.h=new zA,n.g=SV(n.l,e?t:null,!n.s),0<n.O&&(n.M=new iV(Ta(n.Pa,n,n.g),n.O)),eT(n.U,n.g,"readystatechange",n.nb),t=n.I?IA(n.I):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,t)):(n.u="GET",n.g.ha(n.A,n.u,null,t)),x_(),function ER(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var a="",c=s.split("&"),h=0;h<c.length;h++){var p=c[h].split("=");if(1<p.length){var v=p[0];p=p[1];var b=v.split("_");a=2<=b.length&&"type"==b[1]?a+(v+"=")+p+"&":a+(v+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+a})}(n.j,n.u,n.A,n.m,n.W,n.s)}function HA(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function qA(n,t,e){let r,i=!0;for(;!n.J&&n.C<e.length;){if(r=jA(n,e),r==P_){4==t&&(n.o=4,ko(14),i=!1),D_(n.j,n.m,null,"[Incomplete Response]");break}if(r==iT){n.o=4,ko(15),D_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}D_(n.j,n.m,r,null),oT(n,r)}HA(n)&&r!=P_&&r!=iT&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ko(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,(t=n.l).g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),OR(t),t.M=!0,ko(11))):(D_(n.j,n.m,e,"[Invalid Chunked Response]"),ep(n),Xf(n))}function jA(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?P_:(e=Number(t.substring(e,i)),isNaN(e)?iT:(i+=1)+e>t.length?P_:(t=t.slice(i,i+e),n.C=i+e,t))}function Jf(n){n.Y=Date.now()+n.P,xR(n,n.P)}function xR(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qf(Ta(n.lb,n),t)}function k_(n){n.B&&(qn.clearTimeout(n.B),n.B=null)}function Xf(n){0==n.l.H||n.J||DV(n.l,n)}function ep(n){k_(n);var t=n.M;t&&"function"==typeof t.sa&&t.sa(),n.M=null,n0(n.V),NA(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function oT(n,t){try{var e=n.l;if(0!=e.H&&(e.g==n||Mt(e.i,n)))if(!n.K&&Mt(e.i,n)&&3==e.H){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.G+3e3<n.G))break e;eI(e),JA(e)}kR(e),ko(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&0==e.A&&!e.v&&(e.v=Qf(Ta(e.ib,e),6e3));if(1>=wt(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else O_(e,11)}else if((n.K||e.g==n)&&eI(e),!w_(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let p=r[t];if(e.V=p[0],p=p[1],2==e.H)if("c"==p[0]){e.K=p[1],e.pa=p[2];const v=p[3];null!=v&&(e.ra=v,e.l.info("VER="+e.ra));const b=p[4];null!=b&&(e.Ga=b,e.l.info("SVER="+e.Ga));const D=p[5];null!=D&&"number"==typeof D&&0<D&&(e.L=i=1.5*D,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const R=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(R){var s=i.i;s.g||-1==R.indexOf("spdy")&&-1==R.indexOf("quic")&&-1==R.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Xt(s,s.h),s.h=null))}if(i.F){const F=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;F&&(i.Da=F,Br(i.I,i.F,F))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms"));var a=n;if((i=e).wa=IV(i,i.J?i.pa:null,i.Y),a.K){Pn(i.i,a);var c=a,h=i.L;h&&c.setTimeout(h),c.B&&(k_(c),Jf(c)),i.g=a}else TV(i);0<e.j.length&&XA(e)}else"stop"!=p[0]&&"close"!=p[0]||O_(e,7);else 3==e.H&&("stop"==p[0]||"close"==p[0]?"stop"==p[0]?O_(e,7):PR(e):"noop"!=p[0]&&e.h&&e.h.Aa(p),e.A=0)}x_()}catch{}}function WA(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(NC(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function lV(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(NC(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function aV(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(NC(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(Ut=M_.prototype).setTimeout=function(n){this.P=n},Ut.nb=function(n){n=n.target;const t=this.M;t&&3==qh(n)?t.l():this.Pa(n)},Ut.Pa=function(n){try{if(n==this.g)e:{const v=qh(this.g);var t=this.g.Ia();if(this.g.da(),!(3>v)&&(3!=v||DA||this.g&&(this.h.h||this.g.ja()||_V(this.g)))){this.J||4!=v||7==t||x_(),k_(this);var e=this.g.da();this.ca=e;t:if(HA(this)){var i=_V(this.g);n="";var r=i.length,s=4==qh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ep(this),Xf(this);var a="";break t}this.h.i=new qn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==e,function rV(n,t,e,i,r,s,a){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.W,v,e),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w_(c)){var p=c;break t}}p=null}if(!(e=p)){this.i=!1,this.o=3,ko(12),ep(this),Xf(this);break e}D_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oT(this,e)}this.S?(qA(this,v,a),DA&&this.i&&3==v&&(eT(this.U,this.V,"tick",this.mb),this.V.start())):(D_(this.j,this.m,a,null),oT(this,a)),4==v&&ep(this),this.i&&!this.J&&(4==v?DV(this.l,this):(this.i=!1,Jf(this)))}else(function wG(n){const t={};n=(n.g&&2<=qh(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(w_(n[i]))continue;var e=QC(n[i]);const r=e[0];if("string"!=typeof(e=e[1]))continue;e=e.trim();const s=t[r]||[];t[r]=s,s.push(e)}!function bR(n,t){for(const e in n)t.call(void 0,n[e],e,n)}(t,function(i){return i.join(", ")})})(this.g),400==e&&0<a.indexOf("Unknown SID")?(this.o=3,ko(12)):(this.o=0,ko(13)),ep(this),Xf(this)}}}catch{}},Ut.mb=function(){if(this.g){var n=qh(this.g),t=this.g.ja();this.C<t.length&&(k_(this),qA(this,n,t),this.i&&4!=n&&Jf(this))}},Ut.cancel=function(){this.J=!0,ep(this)},Ut.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function oV(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(x_(),ko(17)),ep(this),this.o=2,Xf(this)):xR(this,this.Y-n)};var $A=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ag(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ag){this.h=n.h,sT(this,n.j),this.s=n.s,this.g=n.g,aT(this,n.m),this.l=n.l;var t=n.i,e=new _;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),GA(this,e),this.o=n.o}else n&&(t=String(n).match($A))?(this.h=!1,sT(this,t[1]||"",!0),this.s=c0(t[2]||""),this.g=c0(t[3]||"",!0),aT(this,t[4]),this.l=c0(t[5]||"",!0),GA(this,t[6]||"",!0),this.o=c0(t[7]||"")):(this.h=!1,this.i=new _(null,this.h))}function Hh(n){return new Ag(n)}function sT(n,t,e){n.j=e?c0(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function aT(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function GA(n,t,e){t instanceof _?(n.i=t,function j(n,t){t&&!n.j&&(w(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(E(this,i),O(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=u0(t,d)),n.i=new _(t,n.h))}function Br(n,t,e){n.i.set(t,e)}function lT(n){return Br(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function c0(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function u0(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,cV),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cV(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ag.prototype.toString=function(){var n=[],t=this.j;t&&n.push(u0(t,IR,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(u0(t,IR,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(u0(e,"/"==e.charAt(0)?u:l,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",u0(e,g)),n.join("")};var IR=/[#\/\?@]/g,l=/[#\?:]/g,u=/[#\?]/g,d=/[#\?@]/g,g=/#/g;function _(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function w(n){n.g||(n.g=new Map,n.h=0,n.i&&function AR(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function E(n,t){w(n),t=U(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function S(n,t){return w(n),t=U(n,t),n.g.has(t)}function O(n,t,e){E(n,t),0<e.length&&(n.i=null,n.g.set(U(n,t),zy(e)),n.h+=e.length)}function U(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function ve(n){this.l=n||Pe,n=qn.PerformanceNavigationTiming?0<(n=qn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qn.g&&qn.g.Ka&&qn.g.Ka()&&qn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ut=_.prototype).add=function(n,t){w(this),this.i=null,n=U(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Ut.forEach=function(n,t){w(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},Ut.ta=function(){w(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},Ut.Z=function(n){w(this);let t=[];if("string"==typeof n)S(this,n)&&(t=t.concat(this.g.get(U(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},Ut.set=function(n,t){return w(this),this.i=null,S(this,n=U(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Ut.get=function(n,t){return n&&0<(n=this.Z(n)).length?String(n[0]):t},Ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),n.push(r)}}return this.i=n.join("&")};var Pe=10;function Ye(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wt(n){return n.h?1:n.g?n.g.size:0}function Mt(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function Xt(n,t){n.g?n.g.add(t):n.h=t}function Pn(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function ft(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.F);return t}return zy(n.i)}ve.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var $n=class{stringify(n){return qn.JSON.stringify(n,void 0)}parse(n){return qn.JSON.parse(n,void 0)}};function Vr(){this.g=new $n}function Oo(n,t,e){const i=e||"";try{WA(n,function(r,s){let a=r;Vy(r)&&(a=Xy(r)),t.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function YA(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function cT(n){this.l=n.fc||null,this.j=n.ob||!1}function KA(n,t){ws.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=SR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ns(cT,A_),cT.prototype.g=function(){return new KA(this.l,this.j)},cT.prototype.i=function(n){return function(){return n}}({}),Ns(KA,ws);var SR=0;function dV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function uT(n){n.readyState=4,n.l=null,n.j=null,n.A=null,dT(n)}function dT(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ut=KA.prototype).open=function(n,t){if(this.readyState!=SR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,dT(this)},Ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||qn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uT(this)),this.readyState=SR},Ut.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dT(this)),this.g&&(this.readyState=3,dT(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof qn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ut.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?uT(this):dT(this),3==this.readyState&&dV(this)}},Ut.Za=function(n){this.g&&(this.response=this.responseText=n,uT(this))},Ut.Ya=function(n){this.g&&(this.response=n,uT(this))},Ut.ka=function(){this.g&&uT(this)},Ut.setRequestHeader=function(n,t){this.v.append(n,t)},Ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(KA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var mG=qn.JSON.parse;function Ho(n){ws.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hV,this.L=this.M=!1}Ns(Ho,ws);var hV="",_G=/^https?$/i,vG=["POST","PUT"];function fV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,pV(n),QA(n)}function pV(n){n.F||(n.F=!0,Ls(n,"complete"),Ls(n,"error"))}function gV(n){if(n.h&&typeof TA<"u"&&(!n.C[1]||4!=qh(n)||2!=n.da()))if(n.v&&4==qh(n))XC(n.La,0,n);else if(Ls(n,"readystatechange"),4==qh(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===a){var r=String(n.I).match($A)[1]||null;!r&&qn.self&&qn.self.location&&(r=qn.self.location.protocol.slice(0,-1)),i=!_G.test(r?r.toLowerCase():"")}e=i}if(e)Ls(n,"complete"),Ls(n,"success");else{n.m=6;try{var s=2<qh(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",pV(n)}}finally{QA(n)}}}function QA(n,t){if(n.g){mV(n);const e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||Ls(n,"ready");try{e.onreadystatechange=i}catch{}}}function mV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(qn.clearTimeout(n.A),n.A=null)}function qh(n){return n.g?n.g.readyState:0}function _V(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case hV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vV(n){let t="";return T_(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function MR(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=vV(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Br(n,t,e))}function hT(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function yV(n){this.Ga=0,this.j=[],this.l=new o0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hT("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hT("baseRetryDelayMs",5e3,n),this.hb=hT("retryDelaySeedMs",1e4,n),this.eb=hT("forwardChannelMaxRetries",2,n),this.xa=hT("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ve(n&&n.concurrentRequestLimit),this.Ja=new Vr,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function PR(n){if(wV(n),3==n.H){var t=n.W++,e=Hh(n.I);if(Br(e,"SID",n.K),Br(e,"RID",t),Br(e,"TYPE","terminate"),fT(n,e),(t=new M_(n,n.l,t)).L=2,t.v=lT(Hh(e)),e=!1,qn.navigator&&qn.navigator.sendBeacon)try{e=qn.navigator.sendBeacon(t.v.toString(),"")}catch{}!e&&qn.Image&&((new Image).src=t.v,e=!0),e||(t.g=SV(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Jf(t)}AV(n)}function JA(n){n.g&&(OR(n),n.g.cancel(),n.g=null)}function wV(n){JA(n),n.u&&(qn.clearTimeout(n.u),n.u=null),eI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qn.clearTimeout(n.m),n.m=null)}function XA(n){if(!Ye(n.i)&&!n.m){n.m=!0;var t=n.Na;Tg||JC(),Eg||(Tg(),Eg=!0),e0.add(t,n),n.C=0}}function bV(n,t){var e;e=t?t.m:n.W++;const i=Hh(n.I);Br(i,"SID",n.K),Br(i,"RID",e),Br(i,"AID",n.V),fT(n,i),n.o&&n.s&&MR(i,n.o,n.s),e=new M_(n,n.l,e,n.C+1),null===n.o&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=CV(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Xt(n.i,e),l0(e,i,t)}function fT(n,t){n.na&&T_(n.na,function(e,i){Br(t,i,e)}),n.h&&WA({},function(e,i){Br(t,i,e)})}function CV(n,t,e){e=Math.min(n.j.length,e);var i=n.h?Ta(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const a=["count="+e];-1==s?0<e?(s=r[0].g,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let h=0;h<e;h++){let p=r[h].g;const v=r[h].map;if(p-=s,0>p)s=Math.max(0,r[h].g-100),c=!1;else try{Oo(v,a,"req"+p+"_")}catch{i&&i(v)}}if(c){i=a.join("&");break e}}}return n=n.j.splice(0,e),t.F=n,i}function TV(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;Tg||JC(),Eg||(Tg(),Eg=!0),e0.add(t,n),n.A=0}}function kR(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Qf(Ta(n.Ma,n),xV(n,n.A)),n.A++,0))}function OR(n){null!=n.B&&(qn.clearTimeout(n.B),n.B=null)}function EV(n){n.g=new M_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var t=Hh(n.wa);Br(t,"RID","rpc"),Br(t,"SID",n.K),Br(t,"AID",n.V),Br(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&Br(t,"TO",n.qa),Br(t,"TYPE","xmlhttp"),fT(n,t),n.o&&n.s&&MR(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.v=lT(Hh(t)),e.s=null,e.S=!0,rT(e,n)}function eI(n){null!=n.v&&(qn.clearTimeout(n.v),n.v=null)}function DV(n,t){var e=null;if(n.g==t){eI(n),OR(n),n.g=null;var i=2}else{if(!Mt(n.i,t))return;e=t.F,Pn(n.i,t),i=1}if(0!=n.H)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.G;var r=n.C;Ls(i=Kf(),new nT(i,e)),XA(n)}else TV(n);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function bG(n,t){return!(wt(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=t.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Qf(Ta(n.Na,n,t),xV(n,n.C)),n.C++,0)))}(n,t)||2==i&&kR(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:O_(n,5);break;case 4:O_(n,10);break;case 3:O_(n,6);break;default:O_(n,2)}}function xV(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function O_(n,t){if(n.l.info("Error code "+t),2==t){var e=null;n.h&&(e=null);var i=Ta(n.pb,n);e||(e=new Ag("//www.google.com/images/cleardot.gif"),qn.location&&"http"==qn.location.protocol||sT(e,"https"),lT(e)),function uV(n,t){const e=new o0;if(qn.Image){const i=new Image;i.onload=Gf(YA,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Gf(YA,e,i,"TestLoadImage: error",!1,t),i.onabort=Gf(YA,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Gf(YA,e,i,"TestLoadImage: timeout",!1,t),qn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else ko(2);n.H=0,n.h&&n.h.za(t),AV(n),wV(n)}function AV(n){if(n.H=0,n.ma=[],n.h){const t=ft(n.i);(0!=t.length||0!=n.j.length)&&(gR(n.ma,t),gR(n.ma,n.j),n.i.i.length=0,zy(n.j),n.j.length=0),n.h.ya()}}function IV(n,t,e){var i=e instanceof Ag?Hh(e):new Ag(e);if(""!=i.g)t&&(i.g=t+"."+i.g),aT(i,i.m);else{var r=qn.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Ag(null);i&&sT(s,i),t&&(s.g=t),r&&aT(s,r),e&&(s.l=e),i=s}return t=n.Da,(e=n.F)&&t&&Br(i,e,t),Br(i,"VER",n.ra),fT(n,i),i}function SV(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ho(e&&n.Ha&&!n.va?new cT({ob:!0}):n.va)).Oa(n.J),t}function MV(){}function tI(){if(Cg&&!(10<=Number(Gc)))throw Error("Environmental error: no available transport.")}function Yc(n,t){ws.call(this),this.g=new yV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!w_(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!w_(t)&&(this.g.F=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new d0(this)}function PV(n){BA.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function kV(){VA.call(this),this.status=1}function d0(n){this.g=n}function Fd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function RR(n,t,e){e||(e=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var s=n.g[3],a=(t=n.g[0])+(s^(e=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;a=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=(e=(r=(s=(t=e+(a<<7&4294967295|a>>>25))+((a=s+(r^t&(e^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(e^s&(t^e))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=e+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^e&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(e^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(e^s&(t^e))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=e+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^e&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(e^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(e^s&(t^e))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=e+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^e&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(e^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(e^s&(t^e))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=e+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^s&(e^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(e^r&(t^e))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^e&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=e+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(e^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(e^r&(t^e))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^e&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=e+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(e^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(e^r&(t^e))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^e&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=e+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(e^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(e^r&(t^e))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^e&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=e+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(e^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^e^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^e)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=e+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(e^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^e^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^e)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=e+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(e^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^e^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^e)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=e+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(e^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^e^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^e)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=e+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(e|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(e^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~e))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=e+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(e|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(e^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~e))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=e+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(e|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(e^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~e))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=e+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=e+((a=t+(r^(e|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(e^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(t^(s|~e))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function pr(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==t||(e[r]=s,i=!1)}this.g=e}(Ut=Ho.prototype).Oa=function(n){this.M=n},Ut.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ZA.g(),this.C=function s0(n){return n.h||(n.h=n.i())}(this.u?this.u:ZA),this.g.onreadystatechange=Ta(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(s){return void fV(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=qn.FormData&&n instanceof qn.FormData,!(0<=FC(vG,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of e)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mV(this),0<this.B&&((this.L=function yG(n){return Cg&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ta(this.ua,this)):this.A=XC(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){fV(this,s)}},Ut.ua=function(){typeof TA<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ls(this,"timeout"),this.abort(8))},Ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ls(this,"complete"),Ls(this,"abort"),QA(this))},Ut.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),QA(this,!0)),Ho.$.N.call(this)},Ut.La=function(){this.s||(this.G||this.v||this.l?gV(this):this.kb())},Ut.kb=function(){gV(this)},Ut.isActive=function(){return!!this.g},Ut.da=function(){try{return 2<qh(this)?this.g.status:-1}catch{return-1}},Ut.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ut.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),mG(t)}},Ut.Ia=function(){return this.m},Ut.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ut=yV.prototype).ra=8,Ut.H=1,Ut.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new M_(this,this.l,n);let s=this.s;if(this.U&&(s?(s=IA(s),HC(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,e=0;e<this.j.length;e++){var i=this.j[e];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.j.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=CV(this,r,t),Br(e=Hh(this.I),"RID",n),Br(e,"CVER",22),this.F&&Br(e,"X-HTTP-Session-Id",this.F),fT(this,e),s&&(this.O?t="headers="+encodeURIComponent(String(vV(s)))+"&"+t:this.o&&MR(e,this.o,s)),Xt(this.i,r),this.bb&&Br(e,"TYPE","init"),this.P?(Br(e,"$req",t),Br(e,"SID","null"),r.aa=!0,l0(r,e,null)):l0(r,e,t),this.H=2}}else 3==this.H&&(n?bV(this,n):0==this.j.length||Ye(this.i)||bV(this))},Ut.Ma=function(){if(this.u=null,EV(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Qf(Ta(this.jb,this),n)}},Ut.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ko(10),JA(this),EV(this))},Ut.ib=function(){null!=this.v&&(this.v=null,JA(this),kR(this),ko(19))},Ut.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ko(2)):(this.l.info("Failed to ping google.com"),ko(1))},Ut.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ut=MV.prototype).Ba=function(){},Ut.Aa=function(){},Ut.za=function(){},Ut.ya=function(){},Ut.isActive=function(){return!0},Ut.Va=function(){},tI.prototype.g=function(n,t){return new Yc(n,t)},Ns(Yc,ws),Yc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;ko(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=IV(n,null,n.Y),XA(n)},Yc.prototype.close=function(){PR(this.g)},Yc.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=Xy(n),n=e);t.j.push(new class{constructor(n,t){this.g=n,this.map=t}}(t.fb++,n)),3==t.H&&XA(t)},Yc.prototype.N=function(){this.g.h=null,delete this.j,PR(this.g),delete this.g,Yc.$.N.call(this)},Ns(PV,BA),Ns(kV,VA),Ns(d0,MV),d0.prototype.Ba=function(){Ls(this.g,"a")},d0.prototype.Aa=function(n){Ls(this.g,new PV(n))},d0.prototype.za=function(n){Ls(this.g,new kV)},d0.prototype.ya=function(){Ls(this.g,"b")},Ns(Fd,function CG(){this.blockSize=-1}),Fd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Fd.prototype.j=function(n,t){void 0===t&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=e;)RR(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<t;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){RR(this,i),r=0;break}}else for(;s<t;)if(i[r++]=n[s++],r==this.blockSize){RR(this,i),r=0;break}}this.h=r,this.i+=t},Fd.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=255&e,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};var TG={};function NR(n){return-128<=n&&128>n?function mR(n,t){var e=TG;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}(n,function(t){return new pr([0|t],0>t?-1:0)}):new pr([0|n],0>n?-1:0)}function jh(n){if(isNaN(n)||!isFinite(n))return h0;if(0>n)return Ea(jh(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=LR;return new pr(t,0)}var LR=4294967296,h0=NR(0),FR=NR(1),RV=NR(16777216);function tp(n){if(0!=n.h)return!1;for(var t=0;t<n.g.length;t++)if(0!=n.g[t])return!1;return!0}function Vu(n){return-1==n.h}function Ea(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new pr(e,~n.h).add(FR)}function nI(n,t){return n.add(Ea(t))}function iI(n,t){for(;(65535&n[t])!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function pT(n,t){this.g=n,this.h=t}function rI(n,t){if(tp(t))throw Error("division by zero");if(tp(n))return new pT(h0,h0);if(Vu(n))return t=rI(Ea(n),t),new pT(Ea(t.g),Ea(t.h));if(Vu(t))return t=rI(n,Ea(t)),new pT(Ea(t.g),t.h);if(30<n.g.length){if(Vu(n)||Vu(t))throw Error("slowDivide_ only works with positive integers.");for(var e=FR,i=t;0>=i.X(n);)e=NV(e),i=NV(i);var r=f0(e,1),s=f0(i,1);for(i=f0(i,2),e=f0(e,2);!tp(i);){var a=s.add(i);0>=a.X(n)&&(r=r.add(e),s=a),i=f0(i,1),e=f0(e,1)}return t=nI(n,r.R(t)),new pT(r,t)}for(r=h0;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),a=(s=jh(e)).R(t);Vu(a)||0<a.X(n);)a=(s=jh(e-=i)).R(t);tp(s)&&(s=FR),r=r.add(s),n=nI(n,a)}return new pT(r,n)}function NV(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new pr(e,n.h)}function f0(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],s=0;s<i;s++)r[s]=0<t?n.D(s+e)>>>t|n.D(s+e+1)<<32-t:n.D(s+e);return new pr(r,n.h)}(Ut=pr.prototype).ea=function(){if(Vu(this))return-Ea(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:LR+i)*t,t*=LR}return n},Ut.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(tp(this))return"0";if(Vu(this))return"-"+Ea(this).toString(n);for(var t=jh(Math.pow(n,6)),e=this,i="";;){var r=rI(e,t).g,s=((0<(e=nI(e,r.R(t))).g.length?e.g[0]:e.h)>>>0).toString(n);if(tp(e=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ut.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ut.X=function(n){return Vu(n=nI(this,n))?-1:tp(n)?0:1},Ut.abs=function(){return Vu(this)?Ea(this):this},Ut.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),a=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=a>>>16,e[r]=(a&=65535)<<16|(s&=65535)}return new pr(e,-2147483648&e[e.length-1]?-1:0)},Ut.R=function(n){if(tp(this)||tp(n))return h0;if(Vu(this))return Vu(n)?Ea(this).R(Ea(n)):Ea(Ea(this).R(n));if(Vu(n))return Ea(this.R(Ea(n)));if(0>this.X(RV)&&0>n.X(RV))return jh(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,a=65535&this.D(i),c=n.D(r)>>>16,h=65535&n.D(r);e[2*i+2*r]+=a*h,iI(e,2*i+2*r),e[2*i+2*r+1]+=s*h,iI(e,2*i+2*r+1),e[2*i+2*r+1]+=a*c,iI(e,2*i+2*r+1),e[2*i+2*r+2]+=s*c,iI(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new pr(e,0)},Ut.gb=function(n){return rI(this,n).h},Ut.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new pr(e,this.h&n.h)},Ut.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new pr(e,this.h|n.h)},Ut.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new pr(e,this.h^n.h)},tI.prototype.createWebChannel=tI.prototype.g,Yc.prototype.send=Yc.prototype.u,Yc.prototype.open=Yc.prototype.m,Yc.prototype.close=Yc.prototype.close,xg.NO_ERROR=0,xg.TIMEOUT=8,xg.HTTP_ERROR=6,UA.COMPLETE="complete",I_.EventType=a0,a0.OPEN="a",a0.CLOSE="b",a0.ERROR="c",a0.MESSAGE="d",ws.prototype.listen=ws.prototype.O,Ho.prototype.listenOnce=Ho.prototype.P,Ho.prototype.getLastError=Ho.prototype.Sa,Ho.prototype.getLastErrorCode=Ho.prototype.Ia,Ho.prototype.getStatus=Ho.prototype.da,Ho.prototype.getResponseJson=Ho.prototype.Wa,Ho.prototype.getResponseText=Ho.prototype.ja,Ho.prototype.send=Ho.prototype.ha,Ho.prototype.setWithCredentials=Ho.prototype.Oa,Fd.prototype.digest=Fd.prototype.l,Fd.prototype.reset=Fd.prototype.reset,Fd.prototype.update=Fd.prototype.j,pr.prototype.add=pr.prototype.add,pr.prototype.multiply=pr.prototype.R,pr.prototype.modulo=pr.prototype.gb,pr.prototype.compare=pr.prototype.X,pr.prototype.toNumber=pr.prototype.ea,pr.prototype.toString=pr.prototype.toString,pr.prototype.getBits=pr.prototype.D,pr.fromNumber=jh,pr.fromString=function OV(n,t){if(0==n.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==n.charAt(0))return Ea(OV(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=jh(Math.pow(t,8)),i=h0,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),a=parseInt(n.substring(r,r+s),t);8>s?(s=jh(Math.pow(t,s)),i=i.R(s).add(jh(a))):i=(i=i.R(e)).add(jh(a))}return i};var EG=$c.createWebChannelTransport=function(){return new tI},DG=$c.getStatEventTarget=function(){return Kf()},UR=$c.ErrorCode=xg,xG=$c.EventType=UA,AG=$c.Event=Dg,LV=$c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},IG=$c.FetchXmlHttpFactory=cT,oI=$c.WebChannel=I_,SG=$c.XhrIo=Ho,MG=$c.Md5=Fd,p0=$c.Integer=pr;const FV="@firebase/firestore";class na{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}na.UNAUTHENTICATED=new na(null),na.GOOGLE_CREDENTIALS=new na("google-credentials-uid"),na.FIRST_PARTY=new na("first-party-uid"),na.MOCK_USER=new na("mock-user");let g0="9.23.0";const Ig=new dc.Yd("@firebase/firestore");function BR(){return Ig.logLevel}function _t(n,...t){if(Ig.logLevel<=dc.in.DEBUG){const e=t.map(VR);Ig.debug(`Firestore (${g0}): ${n}`,...e)}}function ss(n,...t){if(Ig.logLevel<=dc.in.ERROR){const e=t.map(VR);Ig.error(`Firestore (${g0}): ${n}`,...e)}}function Zu(n,...t){if(Ig.logLevel<=dc.in.WARN){const e=t.map(VR);Ig.warn(`Firestore (${g0}): ${n}`,...e)}}function VR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function en(n="Unexpected state"){const t=`FIRESTORE (${g0}) INTERNAL ASSERTION FAILED: `+n;throw ss(t),new Error(t)}function gn(n,t){n||en()}function Bt(n,t){return n}const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends K.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class UV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class OG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(na.UNAUTHENTICATED))}shutdown(){}}class RG{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class NG{constructor(t){this.t=t,this.currentUser=na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=p=>this.i!==r?(r=this.i,e(p)):Promise.resolve();let a=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fs,t.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const p=a;t.enqueueRetryable((0,be.Z)(function*(){yield p.promise,yield s(i.currentUser)}))},h=p=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gn("string"==typeof i.accessToken),new UV(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return gn(null===t||"string"==typeof t),new na(t)}}class LG{constructor(t,e,i){this.h=t,this.l=e,this.m=i,this.type="FirstParty",this.user=na.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class FG{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new LG(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(na.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UG{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const i=s=>{null!=s.error&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,_t("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(gn("string"==typeof e.token),this.T=e.token,new BV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function BG(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class VV{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=BG(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Qn(n,t){return n<t?-1:n>t?1:0}function m0(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function ZV(n){return n+"\0"}class yo{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return yo.fromMillis(Date.now())}static fromDate(t){return yo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new yo(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Qn(this.nanoseconds,t.nanoseconds):Qn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yn(t)}static min(){return new yn(new yo(0,0))}static max(){return new yn(new yo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gT{constructor(t,e,i){void 0===e?e=0:e>t.length&&en(),void 0===i?i=t.length-e:i>t.length-e&&en(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===gT.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof gT?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),a=e.get(r);if(s<a)return-1;if(s>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Oi extends gT{construct(t,e,i){return new Oi(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new dt(Ze.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Oi(e)}static emptyPath(){return new Oi([])}}const VG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qo extends gT{construct(t,e,i){return new qo(t,e,i)}static isValidIdentifier(t){return VG.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qo(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new dt(Ze.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let a=!1;for(;r<t.length;){const c=t[r];if("\\"===c){if(r+1===t.length)throw new dt(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const h=t[r+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new dt(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,r+=2}else"`"===c?(a=!a,r++):"."!==c||a?(i+=c,r++):(s(),r++)}if(s(),a)throw new dt(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qo(e)}static emptyPath(){return new qo([])}}class Ft{constructor(t){this.path=t}static fromPath(t){return new Ft(Oi.fromString(t))}static fromName(t){return new Ft(Oi.fromString(t).popFirst(5))}static empty(){return new Ft(Oi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Oi.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Oi.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ft(new Oi(t.slice()))}}class sI{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function ZR(n){return n.fields.find(t=>2===t.kind)}function R_(n){return n.fields.filter(t=>2!==t.kind)}sI.UNKNOWN_ID=-1;class aI{constructor(t,e){this.fieldPath=t,this.kind=e}}class mT{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new mT(0,Kc.min())}}function zV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=yn.fromTimestamp(1e9===i?new yo(e+1,0):new yo(e,i));return new Kc(r,Ft.empty(),t)}function HV(n){return new Kc(n.readTime,n.key,-1)}class Kc{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Kc(yn.min(),Ft.empty(),-1)}static max(){return new Kc(yn.max(),Ft.empty(),-1)}}function zR(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ft.comparator(n.documentKey,t.documentKey),0!==e?e:Qn(n.largestBatchId,t.largestBatchId))}const qV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Sg(n){return HR.apply(this,arguments)}function HR(){return HR=(0,be.Z)(function*(n){if(n.code!==Ze.FAILED_PRECONDITION||n.message!==qV)throw n;_t("LocalStore","Unexpectedly lost primary lease")}),HR.apply(this,arguments)}class Re{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Re((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Re?e:Re.resolve(e)}catch(e){return Re.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Re.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Re.reject(e)}static resolve(t){return new Re((e,i)=>{e(t)})}static reject(t){return new Re((e,i)=>{i(t)})}static waitFor(t){return new Re((e,i)=>{let r=0,s=0,a=!1;t.forEach(c=>{++r,c.next(()=>{++s,a&&s===r&&e()},h=>i(h))}),a=!0,s===r&&e()})}static or(t){let e=Re.resolve(!1);for(const i of t)e=e.next(r=>r?Re.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new Re((i,r)=>{const s=t.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const p=h;e(t[p]).next(v=>{a[p]=v,++c,c===s&&i(a)},v=>r(v))}})}static doWhile(t,e){return new Re((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class lI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new Fs,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new _T(t,e.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=qR(i.target.error);this.v.reject(new _T(t,r))}}static open(t,e,i,r){try{return new lI(e,t.transaction(r,i))}catch(s){throw new _T(e,s)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(_t("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new qG(e)}}class Ud{constructor(t,e,i){this.name=t,this.version=e,this.V=i,12.2===Ud.S((0,K.z$)())&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return _t("SimpleDb","Removing database:",t),N_(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,K.hl)())return!1;if(Ud.C())return!0;const t=(0,K.z$)(),e=Ud.S(t),i=0<e&&e<10,r=Ud.N(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static C(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(t){var e=this;return(0,be.Z)(function*(){return e.db||(_t("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=a=>{i(a.target.result)},s.onblocked=()=>{r(new _T(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const c=a.target.error;r("VersionError"===c.name?new dt(Ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new dt(Ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new _T(t,c))},s.onupgradeneeded=a=>{_t("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',a.oldVersion),e.V.O(a.target.result,s.transaction,a.oldVersion,e.version).next(()=>{_t("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.F&&(e.db.onversionchange=i=>e.F(i)),e.db})()}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,be.Z)(function*(){const a="readonly"===e;let c=0;for(;;){++c;try{s.db=yield s.$(t);const h=lI.open(s.db,t,a?"readonly":"readwrite",i),p=r(h).next(v=>(h.P(),v)).catch(v=>(h.abort(v),Re.reject(v))).toPromise();return p.catch(()=>{}),yield h.R,p}catch(h){const p=h,v="FirebaseError"!==p.name&&c<3;if(_t("SimpleDb","Transaction failed with error:",p.message,"Retrying:",v),s.close(),!v)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class HG{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return N_(this.L.delete())}}class _T extends dt{constructor(t,e){super(Ze.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mg(n){return"IndexedDbTransactionError"===n.name}class qG{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(_t("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(_t("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),N_(i)}add(t){return _t("SimpleDb","ADD",this.store.name,t,t),N_(this.store.add(t))}get(t){return N_(this.store.get(t)).next(e=>(void 0===e&&(e=null),_t("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return _t("SimpleDb","DELETE",this.store.name,t),N_(this.store.delete(t))}count(){return _t("SimpleDb","COUNT",this.store.name),N_(this.store.count())}j(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(a,c)=>{s.push(c)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Re((s,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}}H(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new Re((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}J(t,e){_t("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,a,c)=>c.delete())}X(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.W(r,e)}Z(t){const e=this.cursor({});return new Re((i,r)=>{e.onerror=s=>{const a=qR(s.target.error);r(a)},e.onsuccess=s=>{const a=s.target.result;a?t(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(t,e){const i=[];return new Re((r,s)=>{t.onerror=a=>{s(a.target.error)},t.onsuccess=a=>{const c=a.target.result;if(!c)return void r();const h=new HG(c),p=e(c.primaryKey,c.value,h);if(p instanceof Re){const v=p.catch(b=>(h.done(),Re.reject(b)));i.push(v)}h.isDone?r():null===h.K?c.continue():c.continue(h.K)}}).next(()=>Re.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.Y?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function N_(n){return new Re((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=qR(i.target.error);e(r)}})}let WV=!1;function qR(n){const t=Ud.S((0,K.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WV||(WV=!0,setTimeout(()=>{throw i},0)),i}}return n}class jG{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){var e=this;_t("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,be.Z)(function*(){e.task=null;try{_t("IndexBackiller",`Documents written: ${yield e.tt.nt()}`)}catch(i){Mg(i)?_t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Sg(i)}yield e.et(6e4)}))}}class WG{constructor(t,e){this.localStore=t,this.persistence=e}nt(t=50){var e=this;return(0,be.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.st(i,t))})()}st(t,e){const i=new Set;let r=e,s=!0;return Re.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(a=>{if(null!==a&&!i.has(a))return _t("IndexBackiller",`Processing collection: ${a}`),this.it(t,a,r).next(c=>{r-=c,i.add(a)});s=!1})).next(()=>e-r)}it(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(t,a).next(()=>this.rt(r,s)).next(c=>(_t("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(t,e,c))).next(()=>a.size)}))}rt(t,e){let i=t;return e.changes.forEach((r,s)=>{const a=HV(s);zR(a,i)>0&&(i=a)}),new Kc(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Qc=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}return n.ct=-1,n})();function vT(n){return null==n}function yT(n){return 0===n&&1/n==-1/0}function $V(n){return"number"==typeof n&&Number.isInteger(n)&&!yT(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function $a(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=GV(t)),t=$G(n.get(e),t);return GV(t)}function $G(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function GV(n){return n+"\x01\x01"}function Wh(n){const t=n.length;if(gn(t>=2),2===t)return gn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Oi.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const a=n.indexOf("\x01",s);switch((a<0||a>e)&&en(),n.charAt(a+1)){case"\x01":const c=n.substring(s,a);let h;0===r.length?h=c:(r+=c,h=r,r=""),i.push(h);break;case"\x10":r+=n.substring(s,a),r+="\0";break;case"\x11":r+=n.substring(s,a+1);break;default:en()}s=a+2}return new Oi(i)}const YV=["userId","batchId"];function cI(n,t){return[n,$a(t)]}function KV(n,t,e){return[n,$a(t),e]}const GG={},YG=["prefixPath","collectionGroup","readTime","documentId"],KG=["prefixPath","collectionGroup","documentId"],QG=["collectionGroup","readTime","prefixPath","documentId"],JG=["canonicalId","targetId"],XG=["targetId","path"],e9=["path","targetId"],t9=["collectionId","parent"],n9=["indexId","uid"],i9=["uid","sequenceNumber"],r9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],o9=["indexId","uid","orderedDocumentKey"],s9=["userId","collectionPath","documentId"],a9=["userId","collectionPath","largestBatchId"],l9=["userId","collectionGroup","largestBatchId"],QV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],c9=[...QV,"documentOverlays"],JV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XV=JV,u9=[...XV,"indexConfiguration","indexState","indexEntries"];class jR extends jV{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function ia(n,t){const e=Bt(n);return Ud.M(e.ht,t)}function eZ(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Pg(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function tZ(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Zr{constructor(t,e){this.comparator=t,this.root=e||Da.EMPTY}insert(t,e){return new Zr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Da.BLACK,null,null))}remove(t){return new Zr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Da.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new uI(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new uI(this.root,t,this.comparator,!1)}getReverseIterator(){return new uI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new uI(this.root,t,this.comparator,!0)}}class uI{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Da{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Da.RED,this.left=r??Da.EMPTY,this.right=s??Da.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Da(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Da.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Da.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Da.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const t=this.left.check();if(t!==this.right.check())throw en();return t+(this.isRed()?0:1)}}Da.EMPTY=null,Da.RED=!0,Da.BLACK=!1,Da.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Da(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class to{constructor(t){this.comparator=t,this.data=new Zr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nZ(this.data.getIterator())}getIteratorFrom(t){return new nZ(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof to)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new to(this.comparator);return e.data=t,e}}class nZ{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _0(n){return n.hasNext()?n.getNext():void 0}class fc{constructor(t){this.fields=t,t.sort(qo.comparator)}static empty(){return new fc([])}unionWith(t){let e=new to(qo.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new fc(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return m0(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class iZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Us{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new iZ("Invalid base64 string: "+r):r}}(t);return new Us(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Us(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Qn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const h9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kg(n){if(gn(!!n),"string"==typeof n){let t=0;const e=h9.exec(n);if(gn(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jo(n.seconds),nanos:jo(n.nanos)}}function jo(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function np(n){return"string"==typeof n?Us.fromBase64String(n):Us.fromUint8Array(n)}function dI(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function hI(n){const t=n.mapValue.fields.__previous_value__;return dI(t)?hI(t):t}function wT(n){const t=kg(n.mapValue.fields.__local_write_time__.timestampValue);return new yo(t.seconds,t.nanos)}class f9{constructor(t,e,i,r,s,a,c,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}class Og{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Og("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Og&&t.projectId===this.projectId&&t.database===this.database}}const Rg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fI={nullValue:"NULL_VALUE"};function Ng(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dI(n)?4:aZ(n)?9007199254740991:10:en()}function $h(n,t){if(n===t)return!0;const e=Ng(n);if(e!==Ng(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return wT(n).isEqual(wT(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=kg(i.timestampValue),a=kg(r.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,np(n.bytesValue).isEqual(np(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return jo(i.geoPointValue.latitude)===jo(r.geoPointValue.latitude)&&jo(i.geoPointValue.longitude)===jo(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return jo(i.integerValue)===jo(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=jo(i.doubleValue),a=jo(r.doubleValue);return s===a?yT(s)===yT(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return m0(n.arrayValue.values||[],t.arrayValue.values||[],$h);case 10:return function(i,r){const s=i.mapValue.fields||{},a=r.mapValue.fields||{};if(eZ(s)!==eZ(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!$h(s[c],a[c])))return!1;return!0}(n,t);default:return en()}var r}function bT(n,t){return void 0!==(n.values||[]).find(e=>$h(e,t))}function Lg(n,t){if(n===t)return 0;const e=Ng(n),i=Ng(t);if(e!==i)return Qn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Qn(n.booleanValue,t.booleanValue);case 2:return function(r,s){const a=jo(r.integerValue||r.doubleValue),c=jo(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,t);case 3:return rZ(n.timestampValue,t.timestampValue);case 4:return rZ(wT(n),wT(t));case 5:return Qn(n.stringValue,t.stringValue);case 6:return function(r,s){const a=np(r),c=np(s);return a.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const a=r.split("/"),c=s.split("/");for(let h=0;h<a.length&&h<c.length;h++){const p=Qn(a[h],c[h]);if(0!==p)return p}return Qn(a.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const a=Qn(jo(r.latitude),jo(s.latitude));return 0!==a?a:Qn(jo(r.longitude),jo(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const a=r.values||[],c=s.values||[];for(let h=0;h<a.length&&h<c.length;++h){const p=Lg(a[h],c[h]);if(p)return p}return Qn(a.length,c.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Rg.mapValue&&s===Rg.mapValue)return 0;if(r===Rg.mapValue)return 1;if(s===Rg.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=s.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let v=0;v<c.length&&v<p.length;++v){const b=Qn(c[v],p[v]);if(0!==b)return b;const D=Lg(a[c[v]],h[p[v]]);if(0!==D)return D}return Qn(c.length,p.length)}(n.mapValue,t.mapValue);default:throw en()}}function rZ(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Qn(n,t);const e=kg(n),i=kg(t),r=Qn(e.seconds,i.seconds);return 0!==r?r:Qn(e.nanos,i.nanos)}function v0(n){return WR(n)}function WR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=kg(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?np(n.bytesValue).toBase64():"referenceValue"in n?Ft.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const a of i.values||[])s?s=!1:r+=",",r+=WR(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${WR(i.fields[c])}`;return s+"}"}(n.mapValue):en();var t}function L_(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function $R(n){return!!n&&"integerValue"in n}function CT(n){return!!n&&"arrayValue"in n}function oZ(n){return!!n&&"nullValue"in n}function sZ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gI(n){return!!n&&"mapValue"in n}function TT(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Pg(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=TT(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=TT(n.arrayValue.values[e]);return t}return Object.assign({},n)}function aZ(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function p9(n){return"nullValue"in n?fI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?L_(Og.empty(),Ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:en()}function g9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?L_(Og.empty(),Ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Rg:en()}function lZ(n,t){const e=Lg(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function cZ(n,t){const e=Lg(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class xa{constructor(t){this.value=t}static empty(){return new xa({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!gI(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=TT(e)}setAll(t){let e=qo.emptyPath(),i={},r=[];t.forEach((a,c)=>{if(!e.isImmediateParentOf(c)){const h=this.getFieldsMap(e);this.applyChanges(h,i,r),i={},r=[],e=c.popLast()}a?i[c.lastSegment()]=TT(a):r.push(c.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());gI(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return $h(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];gI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Pg(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new xa(TT(this.value))}}function uZ(n){const t=[];return Pg(n.fields,(e,i)=>{const r=new qo([e]);if(gI(i)){const s=uZ(i.mapValue).fields;if(0===s.length)t.push(r);else for(const a of s)t.push(r.child(a))}else t.push(r)}),new fc(t)}class no{constructor(t,e,i,r,s,a,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(t){return new no(t,0,yn.min(),yn.min(),yn.min(),xa.empty(),0)}static newFoundDocument(t,e,i,r){return new no(t,1,e,yn.min(),i,r,0)}static newNoDocument(t,e){return new no(t,2,e,yn.min(),yn.min(),xa.empty(),0)}static newUnknownDocument(t,e){return new no(t,3,e,yn.min(),yn.min(),xa.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(yn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xa.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof no&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new no(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fg{constructor(t,e){this.position=t,this.inclusive=e}}function dZ(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],a=n.position[r];if(i=s.field.isKeyField()?Ft.comparator(Ft.fromName(a.referenceValue),e.key):Lg(a,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function hZ(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!$h(n.position[e],t.position[e]))return!1;return!0}class y0{constructor(t,e="asc"){this.field=t,this.dir=e}}function m9(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class fZ{}class Ei extends fZ{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new _9(t,e,i):"array-contains"===e?new w9(t,i):"in"===e?new yZ(t,i):"not-in"===e?new b9(t,i):"array-contains-any"===e?new C9(t,i):new Ei(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new v9(t,i):new y9(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Lg(e,this.value)):null!==e&&Ng(this.value)===Ng(e)&&this.matchesComparison(Lg(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return en()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gr extends fZ{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new gr(t,e)}matches(t){return w0(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(e=>e.isInequality());return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function w0(n){return"and"===n.op}function GR(n){return"or"===n.op}function YR(n){return pZ(n)&&w0(n)}function pZ(n){for(const t of n.filters)if(t instanceof gr)return!1;return!0}function KR(n){if(n instanceof Ei)return n.field.canonicalString()+n.op.toString()+v0(n.value);if(YR(n))return n.filters.map(t=>KR(t)).join(",");{const t=n.filters.map(e=>KR(e)).join(",");return`${n.op}(${t})`}}function gZ(n,t){return n instanceof Ei?(e=n,(i=t)instanceof Ei&&e.op===i.op&&e.field.isEqual(i.field)&&$h(e.value,i.value)):n instanceof gr?function(e,i){return i instanceof gr&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,a)=>r&&gZ(s,i.filters[a]),!0)}(n,t):void en();var e,i}function mZ(n,t){const e=n.filters.concat(t);return gr.create(e,n.op)}function _Z(n){return n instanceof Ei?`${(t=n).field.canonicalString()} ${t.op} ${v0(t.value)}`:n instanceof gr?function(t){return t.op.toString()+" {"+t.getFilters().map(_Z).join(" ,")+"}"}(n):"Filter";var t}class _9 extends Ei{constructor(t,e,i){super(t,e,i),this.key=Ft.fromName(i.referenceValue)}matches(t){const e=Ft.comparator(t.key,this.key);return this.matchesComparison(e)}}class v9 extends Ei{constructor(t,e){super(t,"in",e),this.keys=vZ(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class y9 extends Ei{constructor(t,e){super(t,"not-in",e),this.keys=vZ(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function vZ(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Ft.fromName(i.referenceValue))}class w9 extends Ei{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return CT(e)&&bT(e.arrayValue,this.value)}}class yZ extends Ei{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&bT(this.value.arrayValue,e)}}class b9 extends Ei{constructor(t,e){super(t,"not-in",e)}matches(t){if(bT(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!bT(this.value.arrayValue,e)}}class C9 extends Ei{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!CT(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>bT(this.value.arrayValue,i))}}class T9{constructor(t,e=null,i=[],r=[],s=null,a=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=c,this.dt=null}}function QR(n,t=null,e=[],i=[],r=null,s=null,a=null){return new T9(n,t,e,i,r,s,a)}function F_(n){const t=Bt(n);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>KR(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),vT(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>v0(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>v0(i)).join(",")),t.dt=e}return t.dt}function ET(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!m9(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!gZ(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!hZ(n.startAt,t.startAt)&&hZ(n.endAt,t.endAt)}function mI(n){return Ft.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _I(n,t){return n.filters.filter(e=>e instanceof Ei&&e.field.isEqual(t))}function wZ(n,t,e){let i=fI,r=!0;for(const s of _I(n,t)){let a=fI,c=!0;switch(s.op){case"<":case"<=":a=p9(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=fI}lZ({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];lZ({value:i,inclusive:r},{value:a,inclusive:e.inclusive})<0&&(i=a,r=e.inclusive);break}return{value:i,inclusive:r}}function bZ(n,t,e){let i=Rg,r=!0;for(const s of _I(n,t)){let a=Rg,c=!0;switch(s.op){case">=":case">":a=g9(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Rg}cZ({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const a=e.position[s];cZ({value:i,inclusive:r},{value:a,inclusive:e.inclusive})>0&&(i=a,r=e.inclusive);break}return{value:i,inclusive:r}}class ip{constructor(t,e=null,i=[],r=[],s=null,a="F",c=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.wt=null,this._t=null}}function CZ(n,t,e,i,r,s,a,c){return new ip(n,t,e,i,r,s,a,c)}function b0(n){return new ip(n)}function TZ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vI(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function XR(n){return null!==n.collectionGroup}function U_(n){const t=Bt(n);if(null===t.wt){t.wt=[];const e=vI(t),i=JR(t);if(null!==e&&null===i)e.isKeyField()||t.wt.push(new y0(e)),t.wt.push(new y0(qo.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new y0(qo.keyField(),s))}}}return t.wt}function Sl(n){const t=Bt(n);if(!t._t)if("F"===t.limitType)t._t=QR(t.path,t.collectionGroup,U_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of U_(t))e.push(new y0(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Fg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fg(t.startAt.position,t.startAt.inclusive):null;t._t=QR(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function eN(n,t){t.getFirstInequalityField(),vI(n);const e=n.filters.concat([t]);return new ip(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function yI(n,t,e){return new ip(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function DT(n,t){return ET(Sl(n),Sl(t))&&n.limitType===t.limitType}function EZ(n){return`${F_(Sl(n))}|lt:${n.limitType}`}function tN(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>_Z(i)).join(", ")}]`),vT(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>v0(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>v0(i)).join(",")),`Target(${e})`}(Sl(n))}; limitType=${n.limitType})`}function xT(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Ft.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of U_(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,a){const c=dZ(r,s,a);return r.inclusive?c<=0:c<0}(e.startAt,U_(e),i)||e.endAt&&!function(r,s,a){const c=dZ(r,s,a);return r.inclusive?c>=0:c>0}(e.endAt,U_(e),i)));var e,i}function DZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xZ(n){return(t,e)=>{let i=!1;for(const r of U_(n)){const s=E9(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function E9(n,t,e){const i=n.field.isKeyField()?Ft.comparator(t.key,e.key):function(r,s,a){const c=s.data.field(r),h=a.data.field(r);return null!==c&&null!==h?Lg(c,h):en()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return en()}}class rp{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Pg(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return tZ(this.inner)}size(){return this.innerSize}}const D9=new Zr(Ft.comparator);function pc(){return D9}const AZ=new Zr(Ft.comparator);function AT(...n){let t=AZ;for(const e of n)t=t.insert(e.key,e);return t}function IZ(n){let t=AZ;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Gh(){return IT()}function SZ(){return IT()}function IT(){return new rp(n=>n.toString(),(n,t)=>n.isEqual(t))}const x9=new Zr(Ft.comparator),A9=new to(Ft.comparator);function li(...n){let t=A9;for(const e of n)t=t.add(e);return t}const I9=new to(Qn);function nN(){return I9}function MZ(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yT(t)?"-0":t}}function PZ(n){return{integerValue:""+n}}function kZ(n,t){return $V(t)?PZ(t):MZ(n,t)}class wI{constructor(){this._=void 0}}function S9(n,t,e){return n instanceof C0?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&dI(r)&&(r=hI(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof B_?RZ(n,t):n instanceof V_?NZ(n,t):function(i,r){const s=OZ(i,r),a=LZ(s)+LZ(i.gt);return $R(s)&&$R(i.gt)?PZ(a):MZ(i.serializer,a)}(n,t)}function M9(n,t,e){return n instanceof B_?RZ(n,t):n instanceof V_?NZ(n,t):e}function OZ(n,t){return n instanceof T0?$R(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class C0 extends wI{}class B_ extends wI{constructor(t){super(),this.elements=t}}function RZ(n,t){const e=FZ(t);for(const i of n.elements)e.some(r=>$h(r,i))||e.push(i);return{arrayValue:{values:e}}}class V_ extends wI{constructor(t){super(),this.elements=t}}function NZ(n,t){let e=FZ(t);for(const i of n.elements)e=e.filter(r=>!$h(r,i));return{arrayValue:{values:e}}}class T0 extends wI{constructor(t,e){super(),this.serializer=t,this.gt=e}}function LZ(n){return jo(n.integerValue||n.doubleValue)}function FZ(n){return CT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ST{constructor(t,e){this.field=t,this.transform=e}}class k9{constructor(t,e){this.version=t,this.transformResults=e}}class wo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new wo}static exists(t){return new wo(void 0,t)}static updateTime(t){return new wo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function bI(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class CI{}function UZ(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new D0(n.key,wo.none()):new E0(n.key,n.data,wo.none());{const e=n.data,i=xa.empty();let r=new to(qo.comparator);for(let s of t.fields)if(!r.has(s)){let a=e.field(s);null===a&&s.length>1&&(s=s.popLast(),a=e.field(s)),null===a?i.delete(s):i.set(s,a),r=r.add(s)}return new op(n.key,i,new fc(r.toArray()),wo.none())}}function O9(n,t,e){n instanceof E0?function(i,r,s){const a=i.value.clone(),c=ZZ(i.fieldTransforms,r,s.transformResults);a.setAll(c),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof op?function(i,r,s){if(!bI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const a=ZZ(i.fieldTransforms,r,s.transformResults),c=r.data;c.setAll(VZ(i)),c.setAll(a),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function MT(n,t,e,i){return n instanceof E0?function(r,s,a,c){if(!bI(r.precondition,s))return a;const h=r.value.clone(),p=zZ(r.fieldTransforms,c,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,t,e,i):n instanceof op?function(r,s,a,c){if(!bI(r.precondition,s))return a;const h=zZ(r.fieldTransforms,c,s),p=s.data;return p.setAll(VZ(r)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null===a?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(v=>v.field))}(n,t,e,i):(a=e,bI(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function R9(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=OZ(i.transform,r||null);null!=s&&(null===e&&(e=xa.empty()),e.set(i.field,s))}return e||null}function BZ(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&m0(e,i,(r,s)=>function P9(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof B_&&i instanceof B_||e instanceof V_&&i instanceof V_?m0(e.elements,i.elements,$h):e instanceof T0&&i instanceof T0?$h(e.gt,i.gt):e instanceof C0&&i instanceof C0);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class E0 extends CI{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class op extends CI{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VZ(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function ZZ(n,t,e){const i=new Map;gn(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],a=s.transform,c=t.data.field(s.field);i.set(s.field,M9(a,c,e[r]))}return i}function zZ(n,t,e){const i=new Map;for(const r of n){const s=r.transform,a=e.data.field(r.field);i.set(r.field,S9(s,a,t))}return i}class D0 extends CI{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iN extends CI{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rN{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&O9(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=MT(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=MT(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=SZ();return this.mutations.forEach(r=>{const s=t.get(r.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=e.has(r.key)?null:c;const h=UZ(a,c);null!==h&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(yn.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),li())}isEqual(t){return this.batchId===t.batchId&&m0(this.mutations,t.mutations,(e,i)=>BZ(e,i))&&m0(this.baseMutations,t.baseMutations,(e,i)=>BZ(e,i))}}class oN{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){gn(t.mutations.length===i.length);let r=x9;const s=t.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new oN(t,e,i,r)}}class sN{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class N9{constructor(t,e,i){this.alias=t,this.yt=e,this.fieldPath=i}}class L9{constructor(t,e){this.count=t,this.unchangedNames=e}}var bs,Ri;function HZ(n){switch(n){default:return en();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function qZ(n){if(void 0===n)return ss("GRPC error has no .code"),Ze.UNKNOWN;switch(n){case bs.OK:return Ze.OK;case bs.CANCELLED:return Ze.CANCELLED;case bs.UNKNOWN:return Ze.UNKNOWN;case bs.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case bs.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case bs.INTERNAL:return Ze.INTERNAL;case bs.UNAVAILABLE:return Ze.UNAVAILABLE;case bs.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case bs.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case bs.NOT_FOUND:return Ze.NOT_FOUND;case bs.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case bs.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case bs.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case bs.ABORTED:return Ze.ABORTED;case bs.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case bs.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case bs.DATA_LOSS:return Ze.DATA_LOSS;default:return en()}}(Ri=bs||(bs={}))[Ri.OK=0]="OK",Ri[Ri.CANCELLED=1]="CANCELLED",Ri[Ri.UNKNOWN=2]="UNKNOWN",Ri[Ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ri[Ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ri[Ri.NOT_FOUND=5]="NOT_FOUND",Ri[Ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ri[Ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ri[Ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ri[Ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ri[Ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ri[Ri.ABORTED=10]="ABORTED",Ri[Ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ri[Ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ri[Ri.INTERNAL=13]="INTERNAL",Ri[Ri.UNAVAILABLE=14]="UNAVAILABLE",Ri[Ri.DATA_LOSS=15]="DATA_LOSS";class aN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return TI}static getOrCreateInstance(){return null===TI&&(TI=new aN),TI}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(e=>e(t))}}let TI=null;function jZ(){return new TextEncoder}const F9=new p0([4294967295,4294967295],0);function WZ(n){const t=jZ().encode(n),e=new MG;return e.update(t),new Uint8Array(e.digest())}function $Z(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new p0([e,i],0),new p0([r,s],0)]}class lN{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new PT(`Invalid padding: ${e}`);if(i<0)throw new PT(`Invalid hash count: ${i}`);if(t.length>0&&0===this.hashCount)throw new PT(`Invalid hash count: ${i}`);if(0===t.length&&0!==e)throw new PT(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=p0.fromNumber(this.It)}Et(t,e,i){let r=t.add(e.multiply(p0.fromNumber(i)));return 1===r.compare(F9)&&(r=new p0([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=WZ(t),[i,r]=$Z(e);for(let s=0;s<this.hashCount;s++){const a=this.Et(i,r,s);if(!this.At(a))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),a=new lN(s,r,e);return i.forEach(c=>a.insert(c)),a}insert(t){if(0===this.It)return;const e=WZ(t),[i,r]=$Z(e);for(let s=0;s<this.hashCount;s++){const a=this.Et(i,r,s);this.Rt(a)}}Rt(t){const e=Math.floor(t/8);this.bitmap[e]|=1<<t%8}}class PT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kT{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,OT.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new kT(yn.min(),r,new Zr(Qn),pc(),li())}}class OT{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new OT(i,e,li(),li(),li())}}class EI{constructor(t,e,i,r){this.Pt=t,this.removedTargetIds=e,this.key=i,this.bt=r}}class GZ{constructor(t,e){this.targetId=t,this.Vt=e}}class YZ{constructor(t,e,i=Us.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class KZ{constructor(){this.St=0,this.Dt=JZ(),this.Ct=Us.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=li(),e=li(),i=li();return this.Dt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:en()}}),new OT(this.Ct,this.xt,t,e,i)}Ft(){this.Nt=!1,this.Dt=JZ()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class U9{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=pc(),this.zt=QZ(),this.Wt=new Zr(Qn)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,e=>{const i=this.Zt(e);switch(t.state){case 0:this.te(e)&&i.$t(t.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(t.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(e);break;case 3:this.te(e)&&(i.Kt(),i.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),i.$t(t.resumeToken));break;default:en()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach((i,r)=>{this.te(r)&&e(r)})}ne(t){var e;const i=t.targetId,r=t.Vt.count,s=this.se(i);if(s){const a=s.target;if(mI(a))if(0===r){const c=new Ft(a.path);this.Yt(i,c,no.newNoDocument(c,yn.min()))}else gn(1===r);else{const c=this.ie(i);if(c!==r){const h=this.re(t,c);0!==h&&(this.ee(i),this.Wt=this.Wt.insert(i,2===h?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(e=aN.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(p,v,b){var D,P,R,F,V,Q;const te={localCacheCount:v,existenceFilterCount:b.count},re=b.unchangedNames;return re&&(te.bloomFilter={applied:0===p,hashCount:null!==(D=re?.hashCount)&&void 0!==D?D:0,bitmapLength:null!==(F=null===(R=null===(P=re?.bits)||void 0===P?void 0:P.bitmap)||void 0===R?void 0:R.length)&&void 0!==F?F:0,padding:null!==(Q=null===(V=re?.bits)||void 0===V?void 0:V.padding)&&void 0!==Q?Q:0}),te}(h,c,t.Vt))}}}}re(t,e){const{unchangedNames:i,count:r}=t.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=i;let h,p;try{h=np(s).toUint8Array()}catch(v){if(v instanceof iZ)return Zu("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw v}try{p=new lN(h,a,c)}catch(v){return Zu(v instanceof PT?"BloomFilter error: ":"Applying bloom filter failed: ",v),1}return 0===p.It?1:r!==e-this.oe(t.targetId,p)?2:0}oe(t,e){const i=this.Gt.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const a=this.Gt.ue(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.vt(c)||(this.Yt(t,s,null),r++)}),r}ce(t){const e=new Map;this.Qt.forEach((s,a)=>{const c=this.se(a);if(c){if(s.current&&mI(c.target)){const h=new Ft(c.target.path);null!==this.jt.get(h)||this.ae(a,h)||this.Yt(a,h,no.newNoDocument(h,t))}s.Mt&&(e.set(a,s.Ot()),s.Ft())}});let i=li();this.zt.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const p=this.se(h);return!p||"TargetPurposeLimboResolution"===p.purpose||(c=!1,!1)}),c&&(i=i.add(s))}),this.jt.forEach((s,a)=>a.setReadTime(t));const r=new kT(t,e,this.Wt,this.jt,i);return this.jt=pc(),this.zt=QZ(),this.Wt=new Zr(Qn),r}Jt(t,e){if(!this.te(t))return;const i=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,i),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,i){if(!this.te(t))return;const r=this.Zt(t);this.ae(t,e)?r.Bt(e,1):r.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),i&&(this.jt=this.jt.insert(e,i))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new KZ,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new to(Qn),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||_t("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new KZ),this.Gt.getRemoteKeysForTarget(t).forEach(e=>{this.Yt(t,e,null)})}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function QZ(){return new Zr(Ft.comparator)}function JZ(){return new Zr(Ft.comparator)}const B9={asc:"ASCENDING",desc:"DESCENDING"},V9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z9={and:"AND",or:"OR"};class z9{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function cN(n,t){return n.useProto3Json||vT(t)?t:{value:t}}function x0(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function XZ(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function H9(n,t){return x0(n,t.toTimestamp())}function as(n){return gn(!!n),yn.fromTimestamp(function(t){const e=kg(t);return new yo(e.seconds,e.nanos)}(n))}function uN(n,t){return(e=n,new Oi(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function ez(n){const t=Oi.fromString(n);return gn(cz(t)),t}function RT(n,t){return uN(n.databaseId,t.path)}function Yh(n,t){const e=ez(t);if(e.get(1)!==n.databaseId.projectId)throw new dt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new dt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ft(nz(e))}function dN(n,t){return uN(n.databaseId,t)}function tz(n){const t=ez(n);return 4===t.length?Oi.emptyPath():nz(t)}function NT(n){return new Oi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nz(n){return gn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iz(n,t,e){return{name:RT(n,t),fields:e.value.mapValue.fields}}function rz(n,t,e){const i=Yh(n,t.name),r=as(t.updateTime),s=t.createTime?as(t.createTime):yn.min(),a=new xa({mapValue:{fields:t.fields}}),c=no.newFoundDocument(i,r,s,a);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function LT(n,t){let e;if(t instanceof E0)e={update:iz(n,t.key,t.value)};else if(t instanceof D0)e={delete:RT(n,t.key)};else if(t instanceof op)e={update:iz(n,t.key,t.data),updateMask:Q9(t.fieldMask)};else{if(!(t instanceof iN))return en();e={verify:RT(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const a=s.transform;if(a instanceof C0)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof B_)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof V_)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof T0)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw en()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:H9(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:en()),e;var r}function hN(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?wo.updateTime(as(r.updateTime)):void 0!==r.exists?wo.exists(r.exists):wo.none():wo.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let c=null;"setToServerValue"in a?(gn("REQUEST_TIME"===a.setToServerValue),c=new C0):"appendMissingElements"in a?c=new B_(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new V_(a.removeAllFromArray.values||[]):"increment"in a?c=new T0(s,a.increment):en();const h=qo.fromServerFormat(a.fieldPath);return new ST(h,c)}(n,r)):[];var r;if(t.update){const r=Yh(n,t.update.name),s=new xa({mapValue:{fields:t.update.fields}});if(t.updateMask){const a=new fc((t.updateMask.fieldPaths||[]).map(p=>qo.fromServerFormat(p)));return new op(r,s,a,e,i)}return new E0(r,s,e,i)}if(t.delete){const r=Yh(n,t.delete);return new D0(r,e)}if(t.verify){const r=Yh(n,t.verify);return new iN(r,e)}return en()}function oz(n,t){return{documents:[dN(n,t.path)]}}function fN(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=dN(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=dN(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(0!==h.length)return lz(gr.create(h,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(h){if(0!==h.length)return h.map(p=>{return{field:Ug((v=p).field),direction:G9(v.dir)};var v})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const a=cN(n,t.limit);var c,h;return null!==a&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(e.structuredQuery.endAt={before:!(h=t.endAt).inclusive,values:h.position}),e}function sz(n){let t=tz(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){gn(1===i);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let s=[];e.where&&(s=function(v){const b=az(v);return b instanceof gr&&YR(b)?b.getFilters():[b]}(e.where));let a=[];e.orderBy&&(a=e.orderBy.map(v=>{return new y0(A0((b=v).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let c=null;e.limit&&(c=function(v){let b;return b="object"==typeof v?v.value:v,vT(b)?null:b}(e.limit));let h=null;var v;e.startAt&&(h=new Fg((v=e.startAt).values||[],!!v.before));let p=null;return e.endAt&&(p=function(v){return new Fg(v.values||[],!v.before)}(e.endAt)),CZ(t,r,a,s,c,"F",h,p)}function az(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=A0(t.unaryFilter.field);return Ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=A0(t.unaryFilter.field);return Ei.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=A0(t.unaryFilter.field);return Ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=A0(t.unaryFilter.field);return Ei.create(s,"!=",{nullValue:"NULL_VALUE"});default:return en()}}(n):void 0!==n.fieldFilter?Ei.create(A0((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return gr.create(t.compositeFilter.filters.map(e=>az(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return en()}}(t.compositeFilter.op))}(n):en();var t}function G9(n){return B9[n]}function Y9(n){return V9[n]}function K9(n){return Z9[n]}function Ug(n){return{fieldPath:n.canonicalString()}}function A0(n){return qo.fromServerFormat(n.fieldPath)}function lz(n){return n instanceof Ei?function(t){if("=="===t.op){if(sZ(t.value))return{unaryFilter:{field:Ug(t.field),op:"IS_NAN"}};if(oZ(t.value))return{unaryFilter:{field:Ug(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sZ(t.value))return{unaryFilter:{field:Ug(t.field),op:"IS_NOT_NAN"}};if(oZ(t.value))return{unaryFilter:{field:Ug(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ug(t.field),op:Y9(t.op),value:t.value}}}(n):n instanceof gr?function(t){const e=t.getFilters().map(i=>lz(i));return 1===e.length?e[0]:{compositeFilter:{op:K9(t.op),filters:e}}}(n):en()}function Q9(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function cz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sp{constructor(t,e,i,r,s=yn.min(),a=yn.min(),c=Us.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(t){return new sp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new sp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new sp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new sp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class uz{constructor(t){this.fe=t}}function dz(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:DI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:RT(r=n.fe,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:x0(r,s.version.toTimestamp()),createTime:x0(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Z_(t.version)};else{if(!t.isUnknownDocument())return en();i.unknownDocument={path:e.path.toArray(),version:Z_(t.version)}}var r,s;return i}function DI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Z_(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function z_(n){const t=new yo(n.seconds,n.nanoseconds);return yn.fromTimestamp(t)}function H_(n,t){const e=(t.baseMutations||[]).map(s=>hN(n.fe,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>hN(n.fe,s)),r=yo.fromMillis(t.localWriteTimeMs);return new rN(t.batchId,r,e,i)}function FT(n){const t=z_(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?z_(n.lastLimboFreeSnapshotVersion):yn.min();let i;var r;return void 0!==n.query.documents?(gn(1===(r=n.query).documents.length),i=Sl(b0(tz(r.documents[0])))):i=Sl(sz(n.query)),new sp(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Us.fromBase64String(n.resumeToken))}function hz(n,t){const e=Z_(t.snapshotVersion),i=Z_(t.lastLimboFreeSnapshotVersion);let r;r=mI(t.target)?oz(n.fe,t.target):fN(n.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:F_(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function pN(n){const t=sz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yI(t,t.limit,"L"):t}function gN(n,t){return new sN(t.largestBatchId,hN(n.fe,t.overlayMutation))}function fz(n,t){const e=t.path.lastSegment();return[n,$a(t.path.popLast()),e]}function pz(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Z_(i.readTime),documentKey:$a(i.documentKey.path),largestBatchId:i.largestBatchId}}class X9{getBundleMetadata(t,e){return gz(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:z_(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return gz(t).put({bundleId:(i=e).id,createTime:Z_(as(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return mz(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:pN(r.bundledQuery),readTime:z_(r.readTime)};var r})}saveNamedQuery(t,e){return mz(t).put({name:(i=e).name,readTime:Z_(as(i.readTime)),bundledQuery:i.bundledQuery});var i}}function gz(n){return ia(n,"bundles")}function mz(n){return ia(n,"namedQueries")}class xI{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){return new xI(t,e.uid||"")}getOverlay(t,e){return UT(t).get(fz(this.userId,e)).next(i=>i?gN(this.serializer,i):null)}getOverlays(t,e){const i=Gh();return Re.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,a)=>{const c=new sN(e,a);r.push(this.we(t,c))}),Re.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(a=>r.add($a(a.getCollectionPath())));const s=[];return r.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(UT(t).J("collectionPathOverlayIndex",c))}),Re.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Gh(),s=$a(e),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return UT(t).j("collectionPathOverlayIndex",a).next(c=>{for(const h of c){const p=gN(this.serializer,h);r.set(p.getKey(),p)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Gh();let a;const c=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return UT(t).X({index:"collectionGroupOverlayIndex",range:c},(h,p,v)=>{const b=gN(this.serializer,p);s.size()<r||b.largestBatchId===a?(s.set(b.getKey(),b),a=b.largestBatchId):v.done()}).next(()=>s)}we(t,e){return UT(t).put(function(i,r,s){const[a,c,h]=fz(r,s.mutation.key);return{userId:r,collectionPath:c,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:LT(i.fe,s.mutation)}}(this.serializer,this.userId,e))}}function UT(n){return ia(n,"documentOverlays")}class q_{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(jo(t.integerValue));else if("doubleValue"in t){const i=jo(t.doubleValue);isNaN(i)?this.ye(e,13):(this.ye(e,15),yT(i)?e.pe(0):e.pe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ye(e,20),"string"==typeof i?e.Ie(i):(e.Ie(`${i.seconds||""}`),e.pe(i.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(np(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ye(e,45),e.pe(i.latitude||0),e.pe(i.longitude||0)}else"mapValue"in t?aZ(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):en()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const i=t.fields||{};this.ye(e,55);for(const r of Object.keys(i))this.Te(r,e),this.me(i[r],e)}Pe(t,e){const i=t.values||[];this.ye(e,50);for(const r of i)this.me(r,e)}ve(t,e){this.ye(e,37),Ft.fromName(t).path.forEach(i=>{this.ye(e,60),this.be(i,e)})}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function e8(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function _z(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=e8(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}q_.Ve=new q_;class t8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.De(i.value),i=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ne(i.value),i=e.next();this.ke()}Me(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=e.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=e.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(t){const e=this.Fe(t),i=_z(e);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Le(t){const e=this.Fe(t),i=_z(e);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class n8{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class i8{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class BT{constructor(){this.je=new t8,this.ze=new n8(this.je),this.We=new i8(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class j_{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new j_(this.indexId,this.documentKey,this.arrayValue,i)}}function Bg(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=vz(n.arrayValue,t.arrayValue),0!==e?e:(e=vz(n.directionalValue,t.directionalValue),0!==e?e:Ft.comparator(n.documentKey,t.documentKey)))}function vz(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class r8{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const i=e;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(t){gn(t.collectionGroup===this.collectionId);const e=ZR(t);if(void 0!==e&&!this.en(e))return!1;const i=R_(t);let r=new Set,s=0,a=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const c=i[s];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[a++],c))return!1}++s}for(;s<i.length;++s)if(a>=this.Ye.length||!this.sn(this.Ye[a++],i[s]))return!1;return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function yz(n){var t,e;if(gn(n instanceof Ei||n instanceof gr),n instanceof Ei){if(n instanceof yZ){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Ei.create(n.field,"==",s)))||[];return gr.create(r,"or")}return n}const i=n.filters.map(r=>yz(r));return gr.create(i,n.op)}function o8(n){if(0===n.getFilters().length)return[];const t=vN(yz(n));return gn(wz(t)),mN(t)||_N(t)?[t]:t.getFilters()}function mN(n){return n instanceof Ei}function _N(n){return n instanceof gr&&YR(n)}function wz(n){return mN(n)||_N(n)||function(t){if(t instanceof gr&&GR(t)){for(const e of t.getFilters())if(!mN(e)&&!_N(e))return!1;return!0}return!1}(n)}function vN(n){if(gn(n instanceof Ei||n instanceof gr),n instanceof Ei)return n;if(1===n.filters.length)return vN(n.filters[0]);const t=n.filters.map(i=>vN(i));let e=gr.create(t,n.op);return e=AI(e),wz(e)?e:(gn(e instanceof gr),gn(w0(e)),gn(e.filters.length>1),e.filters.reduce((i,r)=>yN(i,r)))}function yN(n,t){let e;return gn(n instanceof Ei||n instanceof gr),gn(t instanceof Ei||t instanceof gr),e=n instanceof Ei?t instanceof Ei?gr.create([n,t],"and"):bz(n,t):t instanceof Ei?bz(t,n):function(i,r){if(gn(i.filters.length>0&&r.filters.length>0),w0(i)&&w0(r))return mZ(i,r.getFilters());const s=GR(i)?i:r,a=GR(i)?r:i,c=s.filters.map(h=>yN(h,a));return gr.create(c,"or")}(n,t),AI(e)}function bz(n,t){if(w0(t))return mZ(t,n.getFilters());{const e=t.filters.map(i=>yN(n,i));return gr.create(e,"or")}}function AI(n){if(gn(n instanceof Ei||n instanceof gr),n instanceof Ei)return n;const t=n.getFilters();if(1===t.length)return AI(t[0]);if(pZ(n))return n;const e=t.map(r=>AI(r)),i=[];return e.forEach(r=>{r instanceof Ei?i.push(r):r instanceof gr&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:gr.create(i,n.op)}class s8{constructor(){this.rn=new wN}addToCollectionParentIndex(t,e){return this.rn.add(e),Re.resolve()}getCollectionParents(t,e){return Re.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return Re.resolve()}deleteFieldIndex(t,e){return Re.resolve()}getDocumentsMatchingTarget(t,e){return Re.resolve(null)}getIndexType(t,e){return Re.resolve(0)}getFieldIndexes(t,e){return Re.resolve([])}getNextCollectionGroupToUpdate(t){return Re.resolve(null)}getMinOffset(t,e){return Re.resolve(Kc.min())}getMinOffsetFromCollectionGroup(t,e){return Re.resolve(Kc.min())}updateCollectionGroup(t,e,i){return Re.resolve()}updateIndexEntries(t,e){return Re.resolve()}}class wN{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new to(Oi.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new to(Oi.comparator)).toArray()}}const II=new Uint8Array(0);class a8{constructor(t,e){this.user=t,this.databaseId=e,this.on=new wN,this.un=new rp(i=>F_(i),(i,r)=>ET(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.on.add(e)});const s={collectionId:i,parent:$a(r)};return Cz(t).put(s)}return Re.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[ZV(e),""],!1,!0);return Cz(t).j(r).next(s=>{for(const a of s){if(a.collectionId!==e)break;i.push(Wh(a.parent))}return i})}addFieldIndex(t,e){const i=SI(t),r={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete r.indexId;const s=i.add(r);if(e.indexState){const a=ZT(t);return s.next(c=>{a.put(pz(c,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=SI(t),r=ZT(t),s=VT(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=VT(t);let r=!0;const s=new Map;return Re.forEach(this.cn(e),a=>this.an(t,a).next(c=>{r&&(r=!!c),s.set(a,c)})).next(()=>{if(r){let a=li();const c=[];return Re.forEach(s,(h,p)=>{var v;_t("IndexedDbIndexManager",`Using index ${v=h,`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`} to execute ${F_(e)}`);const b=function(re,de){const _e=ZR(de);if(void 0===_e)return null;for(const ue of _I(re,_e.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(p,h),D=function(re,de){const _e=new Map;for(const ue of R_(de))for(const pe of _I(re,ue.fieldPath))switch(pe.op){case"==":case"in":_e.set(ue.fieldPath.canonicalString(),pe.value);break;case"not-in":case"!=":return _e.set(ue.fieldPath.canonicalString(),pe.value),Array.from(_e.values())}return null}(p,h),P=function(re,de){const _e=[];let ue=!0;for(const pe of R_(de)){const Le=0===pe.kind?wZ(re,pe.fieldPath,re.startAt):bZ(re,pe.fieldPath,re.startAt);_e.push(Le.value),ue&&(ue=Le.inclusive)}return new Fg(_e,ue)}(p,h),R=function(re,de){const _e=[];let ue=!0;for(const pe of R_(de)){const Le=0===pe.kind?bZ(re,pe.fieldPath,re.endAt):wZ(re,pe.fieldPath,re.endAt);_e.push(Le.value),ue&&(ue=Le.inclusive)}return new Fg(_e,ue)}(p,h),F=this.hn(h,p,P),V=this.hn(h,p,R),Q=this.ln(h,p,D),te=this.fn(h.indexId,b,F,P.inclusive,V,R.inclusive,Q);return Re.forEach(te,re=>i.H(re,e.limit).next(de=>{de.forEach(_e=>{const ue=Ft.fromSegments(_e.documentKey);a.has(ue)||(a=a.add(ue),c.push(ue))})}))}).next(()=>c)}return Re.resolve(null)})}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:o8(gr.create(t.filters,"and")).map(i=>QR(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}fn(t,e,i,r,s,a,c){const h=(null!=e?e.length:1)*Math.max(i.length,s.length),p=h/(null!=e?e.length:1),v=[];for(let b=0;b<h;++b){const D=e?this.dn(e[b/p]):II,P=this.wn(t,D,i[b%p],r),R=this._n(t,D,s[b%p],a),F=c.map(V=>this.wn(t,D,V,!0));v.push(...this.createRange(P,R,F))}return v}wn(t,e,i,r){const s=new j_(t,Ft.empty(),e,i);return r?s:s.Je()}_n(t,e,i,r){const s=new j_(t,Ft.empty(),e,i);return r?s.Je():s}an(t,e){const i=new r8(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let a=null;for(const c of s)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(t,e){let i=2;const r=this.cn(e);return Re.forEach(r,s=>this.an(t,s).next(a=>{a?0!==i&&a.fields.length<function(c){let h=new to(qo.comparator),p=!1;for(const v of c.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:h=h.add(b.field));for(const v of c.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(p?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}mn(t,e){const i=new BT;for(const r of R_(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const a=i.He(r.kind);q_.Ve._e(s,a)}return i.Qe()}dn(t){const e=new BT;return q_.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const i=new BT;return q_.Ve._e(L_(this.databaseId,e),i.He(function(r){const s=R_(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Qe()}ln(t,e,i){if(null===i)return[];let r=[];r.push(new BT);let s=0;for(const a of R_(t)){const c=i[s++];for(const h of r)if(this.yn(e,a.fieldPath)&&CT(c))r=this.pn(r,a,c);else{const p=h.He(a.kind);q_.Ve._e(c,p)}}return this.In(r)}hn(t,e,i){return this.ln(t,e,i.position)}In(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Qe();return e}pn(t,e,i){const r=[...t],s=[];for(const a of i.arrayValue.values||[])for(const c of r){const h=new BT;h.seed(c.Qe()),q_.Ve._e(a,h.He(e.kind)),s.push(h)}return s}yn(t,e){return!!t.filters.find(i=>i instanceof Ei&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=SI(t),r=ZT(t);return(e?i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.j()).next(s=>{const a=[];return Re.forEach(s,c=>r.get([c.indexId,this.uid]).next(h=>{a.push(function(p,v){const b=v?new mT(v.sequenceNumber,new Kc(z_(v.readTime),new Ft(Wh(v.documentKey)),v.largestBatchId)):mT.empty(),D=p.fields.map(([P,R])=>new aI(qo.fromServerFormat(P),R));return new sI(p.indexId,p.collectionGroup,D,b)}(c,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Qn(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=SI(t),s=ZT(t);return this.Tn(t).next(a=>r.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(c=>Re.forEach(c,h=>s.put(pz(h.indexId,this.user,a,i)))))}updateIndexEntries(t,e){const i=new Map;return Re.forEach(e,(r,s)=>{const a=i.get(r.collectionGroup);return(a?Re.resolve(a):this.getFieldIndexes(t,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),Re.forEach(c,h=>this.En(t,r,h).next(p=>{const v=this.An(s,h);return p.isEqual(v)?Re.resolve():this.vn(t,s,h,p,v)}))))})}Rn(t,e,i,r){return VT(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,i,r){return VT(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,e.key),e.key.path.toArray()])}En(t,e,i){const r=VT(t);let s=new to(Bg);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,e)])},(a,c)=>{s=s.add(new j_(i.indexId,e,c.arrayValue,c.directionalValue))}).next(()=>s)}An(t,e){let i=new to(Bg);const r=this.mn(e,t);if(null==r)return i;const s=ZR(e);if(null!=s){const a=t.data.field(s.fieldPath);if(CT(a))for(const c of a.arrayValue.values||[])i=i.add(new j_(e.indexId,t.key,this.dn(c),r))}else i=i.add(new j_(e.indexId,t.key,II,r));return i}vn(t,e,i,r,s){_t("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const a=[];return function(c,h,p,v,b){const D=c.getIterator(),P=h.getIterator();let R=_0(D),F=_0(P);for(;R||F;){let V=!1,Q=!1;if(R&&F){const te=p(R,F);te<0?Q=!0:te>0&&(V=!0)}else null!=R?Q=!0:V=!0;V?(v(F),F=_0(P)):Q?(b(R),R=_0(D)):(R=_0(D),F=_0(P))}}(r,s,Bg,c=>{a.push(this.Rn(t,e,i,c))},c=>{a.push(this.Pn(t,e,i,c))}),Re.waitFor(a)}Tn(t){let e=1;return ZT(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((a,c)=>Bg(a,c)).filter((a,c,h)=>!c||0!==Bg(a,h[c-1]));const r=[];r.push(t);for(const a of i){const c=Bg(a,t),h=Bg(a,e);if(0===c)r[0]=t.Je();else if(c>0&&h<0)r.push(a),r.push(a.Je());else if(h>0)break}r.push(e);const s=[];for(let a=0;a<r.length;a+=2){if(this.bn(r[a],r[a+1]))return[];s.push(IDBKeyRange.bound([r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,II,[]],[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,II,[]]))}return s}bn(t,e){return Bg(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Tz)}getMinOffset(t,e){return Re.mapArray(this.cn(e),i=>this.an(t,i).next(r=>r||en())).next(Tz)}}function Cz(n){return ia(n,"collectionParents")}function VT(n){return ia(n,"indexEntries")}function SI(n){return ia(n,"indexConfiguration")}function ZT(n){return ia(n,"indexState")}function Tz(n){gn(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;zR(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Kc(t.readTime,t.documentKey,e)}const Ez={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ga{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Ga(t,Ga.DEFAULT_COLLECTION_PERCENTILE,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dz(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],a=IDBKeyRange.only(e.batchId);let c=0;const h=i.X({range:a},(v,b,D)=>(c++,D.delete()));s.push(h.next(()=>{gn(1===c)}));const p=[];for(const v of e.mutations){const b=KV(t,v.key.path,e.batchId);s.push(r.delete(b)),p.push(v.key)}return Re.waitFor(s).next(()=>p)}function MI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw en();t=n.noDocument}return JSON.stringify(t).length}Ga.DEFAULT_COLLECTION_PERCENTILE=10,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ga.DEFAULT=new Ga(41943040,Ga.DEFAULT_COLLECTION_PERCENTILE,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ga.DISABLED=new Ga(-1,0,0);class PI{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(t,e,i,r){gn(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new PI(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vg(t).X({index:"userMutationsIndex",range:i},(r,s,a)=>{e=!1,a.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=I0(t),a=Vg(t);return a.add({}).next(c=>{gn("number"==typeof c);const h=new rN(c,e,i,r),p=function(D,P,R){const F=R.baseMutations.map(Q=>LT(D.fe,Q)),V=R.mutations.map(Q=>LT(D.fe,Q));return{userId:P,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:F,mutations:V}}(this.serializer,this.userId,h),v=[];let b=new to((D,P)=>Qn(D.canonicalString(),P.canonicalString()));for(const D of r){const P=KV(this.userId,D.key.path,c);b=b.add(D.key.path.popLast()),v.push(a.put(p)),v.push(s.put(P,GG))}return b.forEach(D=>{v.push(this.indexManager.addToCollectionParentIndex(t,D))}),t.addOnCommittedListener(()=>{this.Vn[c]=h.keys()}),Re.waitFor(v).next(()=>h)})}lookupMutationBatch(t,e){return Vg(t).get(e).next(i=>i?(gn(i.userId===this.userId),H_(this.serializer,i)):null)}Sn(t,e){return this.Vn[e]?Re.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.Vn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Vg(t).X({index:"userMutationsIndex",range:r},(a,c,h)=>{c.userId===this.userId&&(gn(c.batchId>=i),s=H_(this.serializer,c)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Vg(t).X({index:"userMutationsIndex",range:e,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vg(t).j("userMutationsIndex",e).next(i=>i.map(r=>H_(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=cI(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return I0(t).X({range:r},(a,c,h)=>{const[p,v,b]=a,D=Wh(v);if(p===this.userId&&e.path.isEqual(D))return Vg(t).get(b).next(P=>{if(!P)throw en();gn(P.userId===this.userId),s.push(H_(this.serializer,P))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new to(Qn);const r=[];return e.forEach(s=>{const a=cI(this.userId,s.path),c=IDBKeyRange.lowerBound(a),h=I0(t).X({range:c},(p,v,b)=>{const[D,P,R]=p,F=Wh(P);D===this.userId&&s.path.isEqual(F)?i=i.add(R):b.done()});r.push(h)}),Re.waitFor(r).next(()=>this.Dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=cI(this.userId,i),a=IDBKeyRange.lowerBound(s);let c=new to(Qn);return I0(t).X({range:a},(h,p,v)=>{const[b,D,P]=h,R=Wh(D);b===this.userId&&i.isPrefixOf(R)?R.length===r&&(c=c.add(P)):v.done()}).next(()=>this.Dn(t,c))}Dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Vg(t).get(s).next(a=>{if(null===a)throw en();gn(a.userId===this.userId),i.push(H_(this.serializer,a))}))}),Re.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return Dz(t.ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Cn(e.batchId)}),Re.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Re.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return I0(t).X({range:i},(s,a,c)=>{if(s[0]===this.userId){const h=Wh(s[1]);r.push(h)}else c.done()}).next(()=>{gn(0===r.length)})})}containsKey(t,e){return xz(t,this.userId,e)}xn(t){return Az(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xz(n,t,e){const i=cI(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return I0(n).X({range:s,Y:!0},(c,h,p)=>{const[v,b,D]=c;v===t&&b===r&&(a=!0),p.done()}).next(()=>a)}function Vg(n){return ia(n,"mutations")}function I0(n){return ia(n,"documentMutations")}function Az(n){return ia(n,"mutationQueues")}class W_{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new W_(0)}static Mn(){return new W_(-1)}}class l8{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next(e=>{const i=new W_(e.highestTargetId);return e.highestTargetId=i.next(),this.On(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.$n(t).next(e=>yn.fromTimestamp(new yo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.$n(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.$n(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.On(t,r)))}addTargetData(t,e){return this.Fn(t,e).next(()=>this.$n(t).next(i=>(i.targetCount+=1,this.Bn(e,i),this.On(t,i))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>S0(t).delete(e.targetId)).next(()=>this.$n(t)).next(i=>(gn(i.targetCount>0),i.targetCount-=1,this.On(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return S0(t).X((a,c)=>{const h=FT(c);h.sequenceNumber<=e&&null===i.get(h.targetId)&&(r++,s.push(this.removeTargetData(t,h)))}).next(()=>Re.waitFor(s)).next(()=>r)}forEachTarget(t,e){return S0(t).X((i,r)=>{const s=FT(r);e(s)})}$n(t){return Iz(t).get("targetGlobalKey").next(e=>(gn(null!==e),e))}On(t,e){return Iz(t).put("targetGlobalKey",e)}Fn(t,e){return S0(t).put(hz(this.serializer,e))}Bn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.$n(t).next(e=>e.targetCount)}getTargetData(t,e){const i=F_(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return S0(t).X({range:r,index:"queryTargetsIndex"},(a,c,h)=>{const p=FT(c);ET(e,p.target)&&(s=p,h.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Zg(t);return e.forEach(a=>{const c=$a(a.path);r.push(s.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(t,i,a))}),Re.waitFor(r)}removeMatchingKeys(t,e,i){const r=Zg(t);return Re.forEach(e,s=>{const a=$a(s.path);return Re.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Zg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Zg(t);let s=li();return r.X({range:i,Y:!0},(a,c,h)=>{const p=Wh(a[1]),v=new Ft(p);s=s.add(v)}).next(()=>s)}containsKey(t,e){const i=$a(e.path),r=IDBKeyRange.bound([i],[ZV(i)],!1,!0);let s=0;return Zg(t).X({index:"documentTargetsIndex",Y:!0,range:r},([a,c],h,p)=>{0!==a&&(s++,p.done())}).next(()=>s>0)}le(t,e){return S0(t).get(e).next(i=>i?FT(i):null)}}function S0(n){return ia(n,"targets")}function Iz(n){return ia(n,"targetGlobal")}function Zg(n){return ia(n,"targetDocuments")}function Sz([n,t],[e,i]){const r=Qn(n,e);return 0===r?Qn(t,i):r}class c8{constructor(t){this.Ln=t,this.buffer=new to(Sz),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Sz(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Mz{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){var e=this;_t("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,be.Z)(function*(){e.Gn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Mg(i)?_t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Sg(i)}yield e.Qn(3e5)}))}}class u8{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return Re.resolve(Qc.ct);const i=new c8(e);return this.jn.forEachTarget(t,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(t,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Ez)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ez):this.Hn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let i,r,s,a,c,h,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),r=this.params.maximumSequenceNumbersToCollect):r=b,a=Date.now(),this.nthSequenceNumber(t,r))).next(b=>(i=b,c=Date.now(),this.removeTargets(t,i,e))).next(b=>(s=b,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(b=>(p=Date.now(),BR()<=dc.in.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-v}ms\n\tDetermined least recently used ${r} in `+(c-a)+`ms\n\tRemoved ${s} targets in `+(h-c)+`ms\n\tRemoved ${b} documents in `+(p-h)+`ms\nTotal Duration: ${p-v}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:b})))}}class d8{constructor(t,e){this.db=t,this.garbageCollector=function Pz(n,t){return new u8(n,t)}(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Jn(t){let e=0;return this.Wn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,(i,r)=>e(r))}addReference(t,e,i){return kI(t,i)}removeReference(t,e,i){return kI(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return kI(t,e)}Xn(t,e){return function(i,r){let s=!1;return Az(i).Z(a=>xz(i,a,r).next(c=>(c&&(s=!0),Re.resolve(!c)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(t,(a,c)=>{if(c<=e){const h=this.Xn(t,a).next(p=>{if(!p)return s++,i.getEntry(t,a).next(()=>(i.removeEntry(a,yn.min()),Zg(t).delete([0,$a(a.path)])))});r.push(h)}}).next(()=>Re.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return kI(t,e)}Yn(t,e){const i=Zg(t);let r,s=Qc.ct;return i.X({index:"documentTargetsIndex"},([a,c],{path:h,sequenceNumber:p})=>{0===a?(s!==Qc.ct&&e(new Ft(Wh(r)),s),s=p,r=h):s=Qc.ct}).next(()=>{s!==Qc.ct&&e(new Ft(Wh(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function kI(n,t){return Zg(n).put((i=n.currentSequenceNumber,{targetId:0,path:$a(t.path),sequenceNumber:i}));var i}class kz{constructor(){this.changes=new rp(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,no.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?Re.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class h8{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return $_(t).put(i)}removeEntry(t,e,i){return $_(t).delete(function(r,s){const a=r.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],DI(s),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Zn(t,i)))}getEntry(t,e){let i=no.newInvalidDocument(e);return $_(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(zT(e))},(r,s)=>{i=this.ts(e,s)}).next(()=>i)}es(t,e){let i={size:0,document:no.newInvalidDocument(e)};return $_(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(zT(e))},(r,s)=>{i={document:this.ts(e,s),size:MI(s)}}).next(()=>i)}getEntries(t,e){let i=pc();return this.ns(t,e,(r,s)=>{const a=this.ts(r,s);i=i.insert(r,a)}).next(()=>i)}ss(t,e){let i=pc(),r=new Zr(Ft.comparator);return this.ns(t,e,(s,a)=>{const c=this.ts(s,a);i=i.insert(s,c),r=r.insert(s,MI(a))}).next(()=>({documents:i,rs:r}))}ns(t,e,i){if(e.isEmpty())return Re.resolve();let r=new to(Lz);e.forEach(h=>r=r.add(h));const s=IDBKeyRange.bound(zT(r.first()),zT(r.last())),a=r.getIterator();let c=a.getNext();return $_(t).X({index:"documentKeyIndex",range:s},(h,p,v)=>{const b=Ft.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&Lz(c,b)<0;)i(c,null),c=a.getNext();c&&c.isEqual(b)&&(i(c,p),c=a.hasNext()?a.getNext():null),c?v.G(zT(c)):v.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,a=[s.popLast().toArray(),s.lastSegment(),DI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $_(t).j(IDBKeyRange.bound(a,c,!0)).next(h=>{let p=pc();for(const v of h){const b=this.ts(Ft.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(xT(e,b)||r.has(b.key))&&(p=p.insert(b.key,b))}return p})}getAllFromCollectionGroup(t,e,i,r){let s=pc();const a=Nz(e,i),c=Nz(e,Kc.max());return $_(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(h,p,v)=>{const b=this.ts(Ft.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);s=s.insert(b.key,b),s.size===r&&v.done()}).next(()=>s)}newChangeBuffer(t){return new f8(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Rz(t).get("remoteDocumentGlobalKey").next(e=>(gn(!!e),e))}Zn(t,e){return Rz(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const i=function J9(n,t){let e;if(t.document)e=rz(n.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Ft.fromSegments(t.noDocument.path),r=z_(t.noDocument.readTime);e=no.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return en();{const i=Ft.fromSegments(t.unknownDocument.path),r=z_(t.unknownDocument.version);e=no.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new yo(i[0],i[1]);return yn.fromTimestamp(r)}(t.readTime)),e}(this.serializer,e);if(!i.isNoDocument()||!i.version.isEqual(yn.min()))return i}return no.newInvalidDocument(t)}}function Oz(n){return new h8(n)}class f8 extends kz{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new rp(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new to((s,a)=>Qn(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.us.get(s);if(e.push(this.os.removeEntry(t,s,c.readTime)),a.isValidDocument()){const h=dz(this.os.serializer,a);r=r.add(s.path.popLast());const p=MI(h);i+=p-c.size,e.push(this.os.addEntry(t,s,h))}else if(i-=c.size,this.trackRemovals){const h=dz(this.os.serializer,a.convertToNoDocument(yn.min()));e.push(this.os.addEntry(t,s,h))}}),r.forEach(s=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.os.updateMetadata(t,i)),Re.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next(i=>(this.us.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.os.ss(t,e).next(({documents:i,rs:r})=>(r.forEach((s,a)=>{this.us.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function Rz(n){return ia(n,"remoteDocumentGlobal")}function $_(n){return ia(n,"remoteDocumentsV14")}function zT(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Nz(n,t){const e=t.documentKey.path.toArray();return[n,DI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Lz(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Qn(e[s],i[s]),r)return r;return r=Qn(e.length,i.length),r||(r=Qn(e[e.length-2],i[i.length-2]),r||Qn(e[e.length-1],i[i.length-1]))}class p8{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Fz{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&MT(i.mutation,r,fc.empty(),yo.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,li()).next(()=>i))}getLocalViewOfDocuments(t,e,i=li()){const r=Gh();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let a=AT();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const i=Gh();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,li()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((a,c)=>{e.set(a,c)})})}computeViews(t,e,i,r){let s=pc();const a=IT(),c=IT();return e.forEach((h,p)=>{const v=i.get(p.key);r.has(p.key)&&(void 0===v||v.mutation instanceof op)?s=s.insert(p.key,p):void 0!==v?(a.set(p.key,v.mutation.getFieldMask()),MT(v.mutation,p,v.mutation.getFieldMask(),yo.now())):a.set(p.key,fc.empty())}),this.recalculateAndSaveOverlays(t,s).next(h=>(h.forEach((p,v)=>a.set(p,v)),e.forEach((p,v)=>{var b;return c.set(p,new p8(v,null!==(b=a.get(p))&&void 0!==b?b:null))}),c))}recalculateAndSaveOverlays(t,e){const i=IT();let r=new Zr((a,c)=>a-c),s=li();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const c of a)c.keys().forEach(h=>{const p=e.get(h);if(null===p)return;let v=i.get(h)||fc.empty();v=c.applyToLocalView(p,v),i.set(h,v);const b=(r.get(c.batchId)||li()).add(h);r=r.insert(c.batchId,b)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,v=h.value,b=SZ();v.forEach(D=>{if(!s.has(D)){const P=UZ(e.get(D),i.get(D));null!==P&&b.set(D,P),s=s.add(D)}}),a.push(this.documentOverlayCache.saveOverlays(t,p,b))}return Re.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return Ft.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):XR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):Re.resolve(Gh());let c=-1,h=s;return a.next(p=>Re.forEach(p,(v,b)=>(c<b.largestBatchId&&(c=b.largestBatchId),s.get(v)?Re.resolve():this.remoteDocumentCache.getEntry(t,v).next(D=>{h=h.insert(v,D)}))).next(()=>this.populateOverlays(t,p,s)).next(()=>this.computeViews(t,h,p,li())).next(v=>({batchId:c,changes:IZ(v)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ft(e)).next(i=>{let r=AT();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=AT();return this.indexManager.getCollectionParents(t,r).next(a=>Re.forEach(a,c=>{const h=(p=e,v=c.child(r),new ip(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,v;return this.getDocumentsMatchingCollectionQuery(t,h,i).next(p=>{p.forEach((v,b)=>{s=s.insert(v,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((c,h)=>{const p=h.getKey();null===s.get(p)&&(s=s.insert(p,no.newInvalidDocument(p)))});let a=AT();return s.forEach((c,h)=>{const p=r.get(c);void 0!==p&&MT(p.mutation,h,fc.empty(),yo.now()),xT(e,h)&&(a=a.insert(c,h))}),a})}}class g8{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return Re.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var i;return this.cs.set(e.id,{id:(i=e).id,version:i.version,createTime:as(i.createTime)}),Re.resolve()}getNamedQuery(t,e){return Re.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,{name:(i=e).name,query:pN(i.bundledQuery),readTime:as(i.readTime)}),Re.resolve();var i}}class m8{constructor(){this.overlays=new Zr(Ft.comparator),this.ls=new Map}getOverlay(t,e){return Re.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Gh();return Re.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.we(t,e,s)}),Re.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),Re.resolve()}getOverlaysForCollection(t,e,i){const r=Gh(),s=e.length+1,a=new Ft(e.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===s&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Re.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Zr((p,v)=>p-v);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let v=s.get(p.largestBatchId);null===v&&(v=Gh(),s=s.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const c=Gh(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,v)=>c.set(p,v)),!(c.size()>=r)););return Re.resolve(c)}we(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const a=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new sN(e,i));let s=this.ls.get(e);void 0===s&&(s=li(),this.ls.set(e,s)),this.ls.set(e,s.add(i.key))}}class bN{constructor(){this.fs=new to(ra.ds),this.ws=new to(ra._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const i=new ra(t,e);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.ys(new ra(t,e))}ps(t,e){t.forEach(i=>this.removeReference(i,e))}Is(t){const e=new Ft(new Oi([])),i=new ra(e,t),r=new ra(e,t+1),s=[];return this.ws.forEachInRange([i,r],a=>{this.ys(a),s.push(a.key)}),s}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Ft(new Oi([])),i=new ra(e,t),r=new ra(e,t+1);let s=li();return this.ws.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(t){const e=new ra(t,0),i=this.fs.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class ra{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Ft.comparator(t.key,e.key)||Qn(t.As,e.As)}static _s(t,e){return Qn(t.As,e.As)||Ft.comparator(t.key,e.key)}}class _8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new to(ra.ds)}checkEmpty(t){return Re.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.vs;this.vs++;const a=new rN(s,e,i,r);this.mutationQueue.push(a);for(const c of r)this.Rs=this.Rs.add(new ra(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return Re.resolve(a)}lookupMutationBatch(t,e){return Re.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.bs(e+1),s=r<0?0:r;return Re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ra(e,0),r=new ra(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],a=>{const c=this.Ps(a.As);s.push(c)}),Re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new to(Qn);return e.forEach(r=>{const s=new ra(r,0),a=new ra(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],c=>{i=i.add(c.As)})}),Re.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Ft.isDocumentKey(s)||(s=s.child(""));const a=new ra(new Ft(s),0);let c=new to(Qn);return this.Rs.forEachWhile(h=>{const p=h.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(c=c.add(h.As)),!0)},a),Re.resolve(this.Vs(c))}Vs(t){const e=[];return t.forEach(i=>{const r=this.Ps(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){gn(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return Re.forEach(e.mutations,r=>{const s=new ra(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Rs=i})}Cn(t){}containsKey(t,e){const i=new ra(e,0),r=this.Rs.firstAfterOrEqual(i);return Re.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Re.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class v8{constructor(t){this.Ds=t,this.docs=new Zr(Ft.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,a=this.Ds(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Re.resolve(i?i.document.mutableCopy():no.newInvalidDocument(e))}getEntries(t,e){let i=pc();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():no.newInvalidDocument(r))}),Re.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=pc();const a=e.path,c=new Ft(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:v}}=h.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||zR(HV(v),i)<=0||(r.has(v.key)||xT(e,v))&&(s=s.insert(v.key,v.mutableCopy()))}return Re.resolve(s)}getAllFromCollectionGroup(t,e,i,r){en()}Cs(t,e){return Re.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new y8(this)}getSize(t){return Re.resolve(this.size)}}class y8 extends kz{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.os.addEntry(t,r)):this.os.removeEntry(i)}),Re.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class w8{constructor(t){this.persistence=t,this.xs=new rp(e=>F_(e),ET),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new bN,this.targetCount=0,this.Ms=W_.kn()}forEachTarget(t,e){return this.xs.forEach((i,r)=>e(r)),Re.resolve()}getLastRemoteSnapshotVersion(t){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Re.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ns&&(this.Ns=e),Re.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new W_(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,Re.resolve()}updateTargetData(t,e){return this.Fn(e),Re.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,Re.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.xs.forEach((a,c)=>{c.sequenceNumber<=e&&null===i.get(c.targetId)&&(this.xs.delete(a),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),Re.waitFor(s).next(()=>r)}getTargetCount(t){return Re.resolve(this.targetCount)}getTargetData(t,e){const i=this.xs.get(e)||null;return Re.resolve(i)}addMatchingKeys(t,e,i){return this.ks.gs(e,i),Re.resolve()}removeMatchingKeys(t,e,i){this.ks.ps(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(a=>{s.push(r.markPotentiallyOrphaned(t,a))}),Re.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),Re.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ks.Es(e);return Re.resolve(i)}containsKey(t,e){return Re.resolve(this.ks.containsKey(e))}}class CN{constructor(t,e){this.$s={},this.overlays={},this.Os=new Qc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new w8(this),this.indexManager=new s8,this.remoteDocumentCache=new v8(i=>this.referenceDelegate.Ls(i)),this.serializer=new uz(e),this.qs=new g8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new m8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.$s[t.toKey()];return i||(i=new _8(e,this.referenceDelegate),this.$s[t.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,i){_t("MemoryPersistence","Starting transaction:",t);const r=new b8(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(t,e){return Re.or(Object.values(this.$s).map(i=>()=>i.containsKey(t,e)))}}class b8 extends jV{constructor(t){super(),this.currentSequenceNumber=t}}class OI{constructor(t){this.persistence=t,this.Qs=new bN,this.js=null}static zs(t){return new OI(t)}get Ws(){if(this.js)return this.js;throw en()}addReference(t,e,i){return this.Qs.addReference(i,e),this.Ws.delete(i.toString()),Re.resolve()}removeReference(t,e,i){return this.Qs.removeReference(i,e),this.Ws.add(i.toString()),Re.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),Re.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.Ws,i=>{const r=Ft.fromPath(i);return this.Hs(t,r).next(s=>{s||e.removeEntry(r,yn.min())})}).next(()=>(this.js=null,e.apply(t)))}updateLimboDocument(t,e){return this.Hs(t,e).next(i=>{i?this.Ws.delete(e.toString()):this.Ws.add(e.toString())})}Ls(t){return 0}Hs(t,e){return Re.or([()=>Re.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class C8{constructor(t){this.serializer=t}O(t,e,i,r){const s=new lI("createOrUpgrade",e);var c;i<1&&r>=1&&(t.createObjectStore("owner"),(c=t).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YV,{unique:!0}),c.createObjectStore("documentMutations"),Uz(t),function(c){c.createObjectStore("remoteDocuments")}(t));let a=Re.resolve();return i<3&&r>=3&&(0!==i&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),Uz(t)),a=a.next(()=>function(c){const h=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yn.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(s))),i<4&&r>=4&&(0!==i&&(a=a.next(()=>function(c,h){return h.store("mutations").j().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YV,{unique:!0});const v=h.store("mutations"),b=p.map(D=>v.put(D));return Re.waitFor(b)})}(t,s))),a=a.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(a=a.next(()=>this.Ys(s))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s)))),i<7&&r>=7&&(a=a.next(()=>this.Zs(s))),i<8&&r>=8&&(a=a.next(()=>this.ti(t,s))),i<9&&r>=9&&(a=a.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(a=a.next(()=>this.ei(s))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(a=a.next(()=>{!function(c){const h=c.createObjectStore("documentOverlays",{keyPath:s9});h.createIndex("collectionPathOverlayIndex",a9,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",l9,{unique:!1})}(t)})),i<13&&r>=13&&(a=a.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:YG});h.createIndex("documentKeyIndex",KG),h.createIndex("collectionGroupIndex",QG)}(t)).next(()=>this.ni(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(t,s))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:n9}).createIndex("sequenceNumberIndex",i9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:r9}).createIndex("documentKeyIndex",o9,{unique:!1})}(t))),a}Xs(t){let e=0;return t.store("remoteDocuments").X((i,r)=>{e+=MI(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.j().next(r=>Re.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",a).next(c=>Re.forEach(c,h=>{gn(h.userId===s.userId);const p=H_(this.serializer,h);return Dz(t,s.userId,p).next(()=>{})}))}))}Zs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((a,c)=>{const h=new Oi(a),p=[0,$a(h)];s.push(e.get(p).next(v=>v?Re.resolve():e.put({targetId:0,path:$a(h),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Re.waitFor(s))})}ti(t,e){t.createObjectStore("collectionParents",{keyPath:t9});const i=e.store("collectionParents"),r=new wN,s=a=>{if(r.add(a)){const c=a.lastSegment(),h=a.popLast();return i.put({collectionId:c,parent:$a(h)})}};return e.store("remoteDocuments").X({Y:!0},(a,c)=>{const h=new Oi(a);return s(h.popLast())}).next(()=>e.store("documentMutations").X({Y:!0},([a,c,h],p)=>{const v=Wh(c);return s(v.popLast())}))}ei(t){const e=t.store("targets");return e.X((i,r)=>{const s=FT(r),a=hz(this.serializer,s);return e.put(a)})}ni(t,e){const i=e.store("remoteDocuments"),r=[];return i.X((s,a)=>{const c=e.store("remoteDocumentsV14"),h=(p=a,p.document?new Ft(Oi.fromString(p.document.name).popFirst(5)):p.noDocument?Ft.fromSegments(p.noDocument.path):p.unknownDocument?Ft.fromSegments(p.unknownDocument.path):en()).path.toArray();var p;const v={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(v))}).next(()=>Re.waitFor(r))}si(t,e){const i=e.store("mutations"),r=Oz(this.serializer),s=new CN(OI.zs,this.serializer.fe);return i.j().next(a=>{const c=new Map;return a.forEach(h=>{var p;let v=null!==(p=c.get(h.userId))&&void 0!==p?p:li();H_(this.serializer,h).keys().forEach(b=>v=v.add(b)),c.set(h.userId,v)}),Re.forEach(c,(h,p)=>{const v=new na(p),b=xI.de(this.serializer,v),D=s.getIndexManager(v),P=PI.de(v,this.serializer,D,s.referenceDelegate);return new Fz(r,P,b,D).recalculateAndSaveOverlaysForDocumentKeys(new jR(e,Qc.ct),h).next()})})}}function Uz(n){n.createObjectStore("targetDocuments",{keyPath:XG}).createIndex("documentTargetsIndex",e9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JG,{unique:!0}),n.createObjectStore("targetGlobal")}const TN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class EN{constructor(t,e,i,r,s,a,c,h,p,v,b=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.ii=s,this.window=a,this.document=c,this.ri=p,this.oi=v,this.ui=b,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=D=>Promise.resolve(),!EN.D())throw new dt(Ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d8(this,r),this.di=e+"main",this.serializer=new uz(h),this.wi=new Ud(this.di,this.ui,new C8(this.serializer)),this.Bs=new l8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Oz(this.serializer),this.qs=new X9,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===v&&ss("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dt(Ze.FAILED_PRECONDITION,TN);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Bs.getHighestSequenceNumber(t))}).then(t=>{this.Os=new Qc(t,this.ri)}).then(()=>{this.Fs=!0}).catch(t=>(this.wi&&this.wi.close(),Promise.reject(t)))}Ii(t){var e=this;return this.fi=function(){var i=(0,be.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B(function(){var e=(0,be.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((0,be.Z)(function*(){e.started&&(yield e.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>NI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(t).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(t)).next(e=>this.isPrimary&&!e?this.Ai(t).next(()=>!1):!!e&&this.vi(t).next(()=>!0))).catch(t=>{if(Mg(t))return _t("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return _t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ii.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Ti(t){return HT(t).get("owner").next(e=>Re.resolve(this.Ri(e)))}Pi(t){return NI(t).delete(this.clientId)}bi(){var t=this;return(0,be.Z)(function*(){if(t.isPrimary&&!t.Vi(t.li,18e5)){t.li=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ia(i,"clientMetadata");return r.j().next(s=>{const a=t.Si(s,18e5),c=s.filter(h=>-1===a.indexOf(h));return Re.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(t._i)for(const i of e)t._i.removeItem(t.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?Re.resolve(!0):HT(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new dt(Ze.FAILED_PRECONDITION,TN);return!1}}return!(!this.networkEnabled||!this.inForeground)||NI(t).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&_t("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,be.Z)(function*(){t.Fs=!1,t.xi(),t.hi&&(t.hi.cancel(),t.hi=null),t.Ni(),t.ki(),yield t.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new jR(e,Qc.ct);return t.Ai(i).next(()=>t.Pi(i))}),t.wi.close(),t.Mi()})()}Si(t,e){return t.filter(i=>this.Vi(i.updateTimeMs,e)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",t=>NI(t).j().next(e=>this.Si(e,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(t,e){return PI.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new a8(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return xI.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,i){_t("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(a=this.ui)?u9:14===a?XV:13===a?JV:12===a?c9:11===a?QV:void en();var a;let c;return this.wi.runTransaction(t,r,s,h=>(c=new jR(h,this.Os?this.Os.next():Qc.ct),"readwrite-primary"===e?this.Ti(c).next(p=>!!p||this.Ei(c)).next(p=>{if(!p)throw ss(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new dt(Ze.FAILED_PRECONDITION,qV);return i(c)}).next(p=>this.vi(c).next(()=>p)):this.Oi(c).next(()=>i(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Oi(t){return HT(t).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new dt(Ze.FAILED_PRECONDITION,TN)})}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return HT(t).put("owner",e)}static D(){return Ud.D()}Ai(t){const e=HT(t);return e.get("owner").next(i=>this.Ri(i)?(_t("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Re.resolve())}Vi(t,e){const i=Date.now();return!(t<i-e||t>i&&(ss(`Detected an update time that is in the future: ${t} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,K.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const i=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return _t("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ss("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){ss("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function HT(n){return ia(n,"owner")}function NI(n){return ia(n,"clientMetadata")}function DN(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class xN{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Fi=i,this.Bi=r}static Li(t,e){let i=li(),r=li();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xN(t,e.fromCache,i,r)}}class Bz{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ki(t,e).next(s=>s||this.Gi(t,e,r,i)).next(s=>s||this.Qi(t,e))}Ki(t,e){if(TZ(e))return Re.resolve(null);let i=Sl(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=yI(e,null,"F"),i=Sl(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const a=li(...s);return this.Ui.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(h=>{const p=this.ji(e,c);return this.zi(e,p,a,h.readTime)?this.Ki(t,yI(e,null,"F")):this.Wi(t,p,e,h)}))})))}Gi(t,e,i,r){return TZ(e)||r.isEqual(yn.min())?this.Qi(t,e):this.Ui.getDocuments(t,i).next(s=>{const a=this.ji(e,s);return this.zi(e,a,i,r)?this.Qi(t,e):(BR()<=dc.in.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tN(e)),this.Wi(t,a,e,zV(r,-1)))})}ji(t,e){let i=new to(xZ(t));return e.forEach((r,s)=>{xT(t,s)&&(i=i.add(s))}),i}zi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(t,e){return BR()<=dc.in.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",tN(e)),this.Ui.getDocumentsMatchingQuery(t,e,Kc.min())}Wi(t,e,i,r){return this.Ui.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(a=>{s=s.insert(a.key,a)}),s))}}class T8{constructor(t,e,i,r){this.persistence=t,this.Hi=e,this.serializer=r,this.Ji=new Zr(Qn),this.Yi=new rp(s=>F_(s),ET),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fz(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ji))}}function Vz(n,t,e,i){return new T8(n,t,e,i)}function Zz(n,t){return AN.apply(this,arguments)}function AN(){return AN=(0,be.Z)(function*(n,t){const e=Bt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.tr(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],c=[];let h=li();for(const p of r){a.push(p.batchId);for(const v of p.mutations)h=h.add(v.key)}for(const p of s){c.push(p.batchId);for(const v of p.mutations)h=h.add(v.key)}return e.localDocuments.getDocuments(i,h).next(p=>({er:p,removedBatchIds:a,addedBatchIds:c}))})})}),AN.apply(this,arguments)}function zz(n){const t=Bt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Hz(n,t,e){let i=li(),r=li();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let a=pc();return e.forEach((c,h)=>{const p=s.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(yn.min())?(t.removeEntry(c,h.readTime),a=a.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(h),a=a.insert(c,h)):_t("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{nr:a,sr:r}})}function x8(n,t){const e=Bt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function M0(n,t){const e=Bt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Bs.getTargetData(i,t).next(s=>s?(r=s,Re.resolve(r)):e.Bs.allocateTargetId(i).next(a=>(r=new sp(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ji=e.Ji.insert(i.targetId,i),e.Yi.set(t,i.targetId)),i})}function P0(n,t,e){return IN.apply(this,arguments)}function IN(){return IN=(0,be.Z)(function*(n,t,e){const i=Bt(n),r=i.Ji.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Mg(a))throw a;_t("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}),IN.apply(this,arguments)}function LI(n,t,e){const i=Bt(n);let r=yn.min(),s=li();return i.persistence.runTransaction("Execute query","readonly",a=>function(c,h,p){const v=Bt(c),b=v.Yi.get(p);return void 0!==b?Re.resolve(v.Ji.get(b)):v.Bs.getTargetData(h,p)}(i,a,Sl(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>i.Hi.getDocumentsMatchingQuery(a,t,e?r:yn.min(),e?s:li())).next(c=>(Wz(i,DZ(t),c),{documents:c,ir:s})))}function qz(n,t){const e=Bt(n),i=Bt(e.Bs),r=e.Ji.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.le(s,t).next(a=>a?a.target:null))}function jz(n,t){const e=Bt(n),i=e.Xi.get(t)||yn.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Zi.getAllFromCollectionGroup(r,t,zV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Wz(e,t,r),r))}function Wz(n,t,e){let i=n.Xi.get(t)||yn.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(t,i)}function SN(){return SN=(0,be.Z)(function*(n,t,e,i){const r=Bt(n);let s=li(),a=pc();for(const p of e){const v=t.rr(p.metadata.name);p.document&&(s=s.add(v));const b=t.ur(p);b.setReadTime(t.cr(p.metadata.readTime)),a=a.insert(v,b)}const c=r.Zi.newChangeBuffer({trackRemovals:!0}),h=yield M0(r,(p=i,Sl(b0(Oi.fromString(`__bundle__/docs/${p}`)))));var p;return r.persistence.runTransaction("Apply bundle documents","readwrite",p=>Hz(p,c,a).next(v=>(c.apply(p),v)).next(v=>r.Bs.removeMatchingKeysForTargetId(p,h.targetId).next(()=>r.Bs.addMatchingKeys(p,s,h.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(p,v.nr,v.sr)).next(()=>v.nr)))}),SN.apply(this,arguments)}function I8(n,t){return MN.apply(this,arguments)}function MN(){return MN=(0,be.Z)(function*(n,t,e=li()){const i=yield M0(n,Sl(pN(t.bundledQuery))),r=Bt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=as(t.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.qs.saveNamedQuery(s,t);const c=i.withResumeToken(Us.EMPTY_BYTE_STRING,a);return r.Ji=r.Ji.insert(c.targetId,c),r.Bs.updateTargetData(s,c).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,e,i.targetId)).next(()=>r.qs.saveNamedQuery(s,t))})}),MN.apply(this,arguments)}function $z(n,t){return`firestore_clients_${n}_${t}`}function Gz(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function PN(n,t){return`firestore_targets_${n}_${t}`}class FI{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static ar(t,e,i){const r=JSON.parse(i);let s,a="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(s=new dt(r.error.code,r.error.message))),a?new FI(t,e,r.state,s):(ss("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class qT{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static ar(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new dt(i.error.code,i.error.message))),s?new qT(t,i.state,r):(ss("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class UI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=nN();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=$V(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new UI(t,s):(ss("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class kN{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new kN(e.clientId,e.onlineState):(ss("SharedClientState",`Failed to parse online state: ${t}`),null)}}class ON{constructor(){this.activeTargetIds=nN()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RN{constructor(t,e,i,r,s){this.window=t,this.ii=e,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Zr(Qn),this.started=!1,this.yr=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=$z(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ON),this.Tr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,be.Z)(function*(){const e=yield t.syncEngine.$i();for(const r of e){if(r===t.wr)continue;const s=t.getItem($z(t.persistenceKey,r));if(s){const a=UI.ar(r,s);a&&(t.gr=t.gr.insert(a.clientId,a))}}t.Pr();const i=t.storage.getItem(t.vr);if(i){const r=t.br(i);r&&t.Vr(r)}for(const r of t.yr)t.mr(r);t.yr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,i){this.Dr(t,e,i),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(PN(this.persistenceKey,t));if(i){const r=qT.ar(t,i);r&&(e=r.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(PN(this.persistenceKey,t))}updateQueryState(t,e,i){this.kr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Cr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return _t("SharedClientState","READ",t,e),e}setItem(t,e){_t("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){_t("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(_t("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void ss("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,be.Z)(function*(){if(e.started){if(null!==i.key)if(e.Tr.test(i.key)){if(null==i.newValue){const r=e.Or(i.key);return e.Fr(r,null)}{const r=e.Br(i.key,i.newValue);if(r)return e.Fr(r.clientId,r)}}else if(e.Er.test(i.key)){if(null!==i.newValue){const r=e.Lr(i.key,i.newValue);if(r)return e.qr(r)}}else if(e.Ar.test(i.key)){if(null!==i.newValue){const r=e.Ur(i.key,i.newValue);if(r)return e.Kr(r)}}else if(i.key===e.vr){if(null!==i.newValue){const r=e.br(i.newValue);if(r)return e.Vr(r)}}else if(i.key===e.Ir){const r=function(s){let a=Qc.ct;if(null!=s)try{const c=JSON.parse(s);gn("number"==typeof c),a=c}catch(c){ss("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(i.newValue);r!==Qc.ct&&e.sequenceNumberHandler(r)}else if(i.key===e.Rr){const r=e.Gr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Qr(s)))}}else e.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,i){const r=new FI(this.currentUser,t,e,i),s=Gz(this.persistenceKey,this.currentUser,t);this.setItem(s,r.hr())}Cr(t){const e=Gz(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:t}))}kr(t,e,i){const r=PN(this.persistenceKey,t),s=new qT(t,e,i);this.setItem(r,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const i=this.Or(t);return UI.ar(i,e)}Lr(t,e){const i=this.Er.exec(t),r=Number(i[1]);return FI.ar(new na(void 0!==i[2]?i[2]:null),r,e)}Ur(t,e){const i=this.Ar.exec(t),r=Number(i[1]);return qT.ar(r,e)}br(t){return kN.ar(t)}Gr(t){return JSON.parse(t)}qr(t){var e=this;return(0,be.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.jr(t.batchId,t.state,t.error);_t("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const i=e?this.gr.insert(t,e):this.gr.remove(t),r=this.Sr(this.gr),s=this.Sr(i),a=[],c=[];return s.forEach(h=>{r.has(h)||a.push(h)}),r.forEach(h=>{s.has(h)||c.push(h)}),this.syncEngine.Wr(a,c).then(()=>{this.gr=i})}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=nN();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class Yz{constructor(){this.Hr=new ON,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,i){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new ON,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class S8{Yr(t){}shutdown(){}}class Kz{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let BI=null;function NN(){return null===BI?BI=268435456+Math.round(2147483648*Math.random()):BI++,"0x"+BI.toString(16)}const M8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P8{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const Ya="WebChannelConnection";class k8 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.mo=(t.ssl?"https":"http")+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,i,r,s){const a=NN(),c=this.To(t,e);_t("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const h={};return this.Eo(h,r,s),this.Ao(t,c,h,i).then(p=>(_t("RestConnection",`Received RPC '${t}' ${a}: `,p),p),p=>{throw Zu("RestConnection",`RPC '${t}' ${a} failed with error: `,p,"url: ",c,"request:",i),p})}vo(t,e,i,r,s,a){return this.Io(t,e,i,r,s)}Eo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+g0,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}To(t,e){return`${this.mo}/v1/${e}:${M8[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,i,r){const s=NN();return new Promise((a,c)=>{const h=new SG;h.setWithCredentials(!0),h.listenOnce(xG.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case UR.NO_ERROR:const v=h.getResponseJson();_t(Ya,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(v)),a(v);break;case UR.TIMEOUT:_t(Ya,`RPC '${t}' ${s} timed out`),c(new dt(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case UR.HTTP_ERROR:const b=h.getStatus();if(_t(Ya,`RPC '${t}' ${s} failed with status:`,b,"response text:",h.getResponseText()),b>0){let D=h.getResponseJson();Array.isArray(D)&&(D=D[0]);const P=D?.error;if(P&&P.status&&P.message){const R=function(F){const V=F.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(V)>=0?V:Ze.UNKNOWN}(P.status);c(new dt(R,P.message))}else c(new dt(Ze.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new dt(Ze.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{_t(Ya,`RPC '${t}' ${s} completed.`)}});const p=JSON.stringify(r);_t(Ya,`RPC '${t}' ${s} sending request:`,r),h.send(e,"POST",p,i,15)})}Ro(t,e,i){const r=NN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=EG(),c=DG(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;void 0!==p&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.xmlHttpFactory=new IG({})),this.Eo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const v=s.join("");_t(Ya,`Creating RPC '${t}' stream ${r}: ${v}`,h);const b=a.createWebChannel(v,h);let D=!1,P=!1;const R=new P8({ro:V=>{P?_t(Ya,`Not sending because RPC '${t}' stream ${r} is closed:`,V):(D||(_t(Ya,`Opening RPC '${t}' stream ${r} transport.`),b.open(),D=!0),_t(Ya,`RPC '${t}' stream ${r} sending:`,V),b.send(V))},oo:()=>b.close()}),F=(V,Q,te)=>{V.listen(Q,re=>{try{te(re)}catch(de){setTimeout(()=>{throw de},0)}})};return F(b,oI.EventType.OPEN,()=>{P||_t(Ya,`RPC '${t}' stream ${r} transport opened.`)}),F(b,oI.EventType.CLOSE,()=>{P||(P=!0,_t(Ya,`RPC '${t}' stream ${r} transport closed`),R.wo())}),F(b,oI.EventType.ERROR,V=>{P||(P=!0,Zu(Ya,`RPC '${t}' stream ${r} transport errored:`,V),R.wo(new dt(Ze.UNAVAILABLE,"The operation could not be completed")))}),F(b,oI.EventType.MESSAGE,V=>{var Q;if(!P){const te=V.data[0];gn(!!te);const de=te.error||(null===(Q=te[0])||void 0===Q?void 0:Q.error);if(de){_t(Ya,`RPC '${t}' stream ${r} received error:`,de);const _e=de.status;let ue=function(Le){const et=bs[Le];if(void 0!==et)return qZ(et)}(_e),pe=de.message;void 0===ue&&(ue=Ze.INTERNAL,pe="Unknown error status: "+_e+" with message "+de.message),P=!0,R.wo(new dt(ue,pe)),b.close()}else _t(Ya,`RPC '${t}' stream ${r} received:`,te),R._o(te)}}),F(c,AG.STAT_EVENT,V=>{V.stat===LV.PROXY?_t(Ya,`RPC '${t}' stream ${r} detected buffering proxy`):V.stat===LV.NOPROXY&&_t(Ya,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{R.fo()},0),R}}function Qz(){return typeof window<"u"?window:null}function VI(){return typeof document<"u"?document:null}function jT(n){return new z9(n,!0)}class LN{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,e-i);r>0&&_t("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Jz{constructor(t,e,i,r,s,a,c,h){this.ii=t,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new LN(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var t=this;return(0,be.Z)(function*(){t.Uo()&&(yield t.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}zo(){var t=this;return(0,be.Z)(function*(){if(t.Ko())return t.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(t,e){var i=this;return(0,be.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==t?i.qo.reset():e&&e.code===Ze.RESOURCE_EXHAUSTED?(ss(e.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):e&&e.code===Ze.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.ao(e)})()}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===e&&this.Zo(i,r)},i=>{t(()=>{const r=new dt(Ze.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(t,e){const i=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var t=this;this.state=5,this.qo.No((0,be.Z)(function*(){t.state=0,t.start()}))}tu(t){return _t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget(()=>this.Fo===t?e():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O8 extends Jz{constructor(t,e,i,r,s,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function j9(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(h=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:en(),r=t.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(gn(void 0===p||"string"==typeof p),Us.fromBase64String(p||"")):(gn(void 0===p||p instanceof Uint8Array),Us.fromUint8Array(p||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(h){const p=void 0===h.code?Ze.UNKNOWN:qZ(h.code);return new dt(p,h.message||"")}(a);e=new YZ(i,r,s,c||null)}else if("documentChange"in t){const i=t.documentChange,r=Yh(n,i.document.name),s=as(i.document.updateTime),a=i.document.createTime?as(i.document.createTime):yn.min(),c=new xa({mapValue:{fields:i.document.fields}}),h=no.newFoundDocument(r,s,a,c);e=new EI(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const i=t.documentDelete,r=Yh(n,i.document),s=i.readTime?as(i.readTime):yn.min(),a=no.newNoDocument(r,s);e=new EI([],i.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){const i=t.documentRemove,r=Yh(n,i.document);e=new EI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return en();{const i=t.filter,{count:r=0,unchangedNames:s}=i,a=new L9(r,s);e=new GZ(i.targetId,a)}}var h;return e}(this.serializer,t),i=function(r){if(!("targetChange"in r))return yn.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?yn.min():s.readTime?as(s.readTime):yn.min()}(t);return this.listener.nu(e,i)}su(t){const e={};e.database=NT(this.serializer),e.addTarget=function(r,s){let a;const c=s.target;if(a=mI(c)?{documents:oz(r,c)}:{query:fN(r,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=XZ(r,s.resumeToken);const h=cN(r,s.expectedCount);null!==h&&(a.expectedCount=h)}else if(s.snapshotVersion.compareTo(yn.min())>0){a.readTime=x0(r,s.snapshotVersion.toTimestamp());const h=cN(r,s.expectedCount);null!==h&&(a.expectedCount=h)}return a}(this.serializer,t);const i=function $9(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en()}}(t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Wo(e)}iu(t){const e={};e.database=NT(this.serializer),e.removeTarget=t,this.Wo(e)}}class R8 extends Jz{constructor(t,e,i,r,s,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(gn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function W9(n,t){return n&&n.length>0?(gn(void 0!==t),n.map(e=>function(i,r){let s=as(i.updateTime?i.updateTime:r);return s.isEqual(yn.min())&&(s=as(r)),new k9(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=as(t.commitTime);return this.listener.cu(i,e)}return gn(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=NT(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>LT(this.serializer,i))};this.Wo(e)}}class N8 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new dt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new dt(Ze.UNKNOWN,r.toString())})}vo(t,e,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(t,e,i,s,a,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new dt(Ze.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}function FN(){return FN=(0,be.Z)(function*(n,t,e){var i;const r=Bt(n),{request:s,du:a}=function(v,b,D){const P=fN(v,b),R={},F=[];let V=0;return D.forEach(Q=>{const te="aggregate_"+V++;R[te]=Q.alias,"count"===Q.yt?F.push({alias:te,count:{}}):"avg"===Q.yt?F.push({alias:te,avg:{field:Ug(Q.fieldPath)}}):"sum"===Q.yt&&F.push({alias:te,sum:{field:Ug(Q.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:F,structuredQuery:P.structuredQuery},parent:P.parent},du:R}}(r.serializer,Sl(t),e),c=s.parent;r.connection.po||delete s.parent;const h=(yield r.vo("RunAggregationQuery",c,s,1)).filter(v=>!!v.result);gn(1===h.length);const p=null===(i=h[0].result)||void 0===i?void 0:i.aggregateFields;return Object.keys(p).reduce((v,b)=>(v[a[b]]=p[b],v),{})}),FN.apply(this,arguments)}class F8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ss(e),this.mu=!1):_t("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class U8{constructor(t,e,i,r,s){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(c=>{i.enqueueAndForget((0,be.Z)(function*(){var h;zg(a)&&(_t("RemoteStore","Restarting streams for network reachability change."),yield(h=(0,be.Z)(function*(p){const v=Bt(p);v.vu.add(4),yield k0(v),v.bu.set("Unknown"),v.vu.delete(4),yield WT(v)}),function(p){return h.apply(this,arguments)})(a))}))}),this.bu=new F8(i,r)}}function WT(n){return UN.apply(this,arguments)}function UN(){return UN=(0,be.Z)(function*(n){if(zg(n))for(const t of n.Ru)yield t(!0)}),UN.apply(this,arguments)}function k0(n){return BN.apply(this,arguments)}function BN(){return BN=(0,be.Z)(function*(n){for(const t of n.Ru)yield t(!1)}),BN.apply(this,arguments)}function ZI(n,t){const e=Bt(n);e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),zN(e)?ZN(e):R0(e).Ko()&&VN(e,t))}function $T(n,t){const e=Bt(n),i=R0(e);e.Au.delete(t),i.Ko()&&Xz(e,t),0===e.Au.size&&(i.Ko()?i.jo():zg(e)&&e.bu.set("Unknown"))}function VN(n,t){if(n.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yn.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}R0(n).su(t)}function Xz(n,t){n.Vu.qt(t),R0(n).iu(t)}function ZN(n){n.Vu=new U9({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),le:t=>n.Au.get(t)||null,ue:()=>n.datastore.serializer.databaseId}),R0(n).start(),n.bu.gu()}function zN(n){return zg(n)&&!R0(n).Uo()&&n.Au.size>0}function zg(n){return 0===Bt(n).vu.size}function e6(n){n.Vu=void 0}function B8(n){return HN.apply(this,arguments)}function HN(){return HN=(0,be.Z)(function*(n){n.Au.forEach((t,e)=>{VN(n,t)})}),HN.apply(this,arguments)}function V8(n,t){return qN.apply(this,arguments)}function qN(){return qN=(0,be.Z)(function*(n,t){e6(n),zN(n)?(n.bu.Iu(t),ZN(n)):n.bu.set("Unknown")}),qN.apply(this,arguments)}function Z8(n,t,e){return jN.apply(this,arguments)}function jN(){return jN=(0,be.Z)(function*(n,t,e){if(n.bu.set("Online"),t instanceof YZ&&2===t.state&&t.cause)try{yield(i=(0,be.Z)(function*(r,s){const a=s.cause;for(const c of s.targetIds)r.Au.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.Au.delete(c),r.Vu.removeTarget(c))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){_t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield zI(n,i)}else if(t instanceof EI?n.Vu.Ht(t):t instanceof GZ?n.Vu.ne(t):n.Vu.Xt(t),!e.isEqual(yn.min()))try{const i=yield zz(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const a=r.Vu.ce(s);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=r.Au.get(h);p&&r.Au.set(h,p.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,h)=>{const p=r.Au.get(c);if(!p)return;r.Au.set(c,p.withResumeToken(Us.EMPTY_BYTE_STRING,p.snapshotVersion)),Xz(r,c);const v=new sp(p.target,c,h,p.sequenceNumber);VN(r,v)}),r.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){_t("RemoteStore","Failed to raise snapshot:",i),yield zI(n,i)}var i}),jN.apply(this,arguments)}function zI(n,t,e){return WN.apply(this,arguments)}function WN(){return WN=(0,be.Z)(function*(n,t,e){if(!Mg(t))throw t;n.vu.add(1),yield k0(n),n.bu.set("Offline"),e||(e=()=>zz(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){_t("RemoteStore","Retrying IndexedDB access"),yield e(),n.vu.delete(1),yield WT(n)}))}),WN.apply(this,arguments)}function t6(n,t){return t().catch(e=>zI(n,e,t))}function O0(n){return $N.apply(this,arguments)}function $N(){return $N=(0,be.Z)(function*(n){const t=Bt(n),e=Hg(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;z8(t);)try{const r=yield x8(t.localStore,i);if(null===r){0===t.Eu.length&&e.jo();break}i=r.batchId,H8(t,r)}catch(r){yield zI(t,r)}n6(t)&&i6(t)}),$N.apply(this,arguments)}function z8(n){return zg(n)&&n.Eu.length<10}function H8(n,t){n.Eu.push(t);const e=Hg(n);e.Ko()&&e.ou&&e.uu(t.mutations)}function n6(n){return zg(n)&&!Hg(n).Uo()&&n.Eu.length>0}function i6(n){Hg(n).start()}function q8(n){return GN.apply(this,arguments)}function GN(){return GN=(0,be.Z)(function*(n){Hg(n).hu()}),GN.apply(this,arguments)}function j8(n){return YN.apply(this,arguments)}function YN(){return YN=(0,be.Z)(function*(n){const t=Hg(n);for(const e of n.Eu)t.uu(e.mutations)}),YN.apply(this,arguments)}function W8(n,t,e){return KN.apply(this,arguments)}function KN(){return KN=(0,be.Z)(function*(n,t,e){const i=n.Eu.shift(),r=oN.from(i,t,e);yield t6(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield O0(n)}),KN.apply(this,arguments)}function $8(n,t){return QN.apply(this,arguments)}function QN(){return QN=(0,be.Z)(function*(n,t){var e;t&&Hg(n).ou&&(yield(e=(0,be.Z)(function*(i,r){if(HZ(s=r.code)&&s!==Ze.ABORTED){const a=i.Eu.shift();Hg(i).Qo(),yield t6(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),yield O0(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),n6(n)&&i6(n)}),QN.apply(this,arguments)}function r6(n,t){return JN.apply(this,arguments)}function JN(){return JN=(0,be.Z)(function*(n,t){const e=Bt(n);e.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");const i=zg(e);e.vu.add(3),yield k0(e),i&&e.bu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),yield WT(e)}),JN.apply(this,arguments)}function XN(n,t){return e2.apply(this,arguments)}function e2(){return e2=(0,be.Z)(function*(n,t){const e=Bt(n);t?(e.vu.delete(2),yield WT(e)):t||(e.vu.add(2),yield k0(e),e.bu.set("Unknown"))}),e2.apply(this,arguments)}function R0(n){return n.Su||(n.Su=function(t,e,i){const r=Bt(t);return r.fu(),new O8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:B8.bind(null,n),ao:V8.bind(null,n),nu:Z8.bind(null,n)}),n.Ru.push(function(){var t=(0,be.Z)(function*(e){e?(n.Su.Qo(),zN(n)?ZN(n):n.bu.set("Unknown")):(yield n.Su.stop(),e6(n))});return function(e){return t.apply(this,arguments)}}())),n.Su}function Hg(n){return n.Du||(n.Du=function(t,e,i){const r=Bt(t);return r.fu(),new R8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:q8.bind(null,n),ao:$8.bind(null,n),au:j8.bind(null,n),cu:W8.bind(null,n)}),n.Ru.push(function(){var t=(0,be.Z)(function*(e){e?(n.Du.Qo(),yield O0(n)):(yield n.Du.stop(),n.Eu.length>0&&(_t("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Du}class t2{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(t,e,i,r,s){const a=Date.now()+i,c=new t2(t,e,a,r,s);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dt(Ze.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(n,t){if(ss("AsyncQueue",`${t}: ${n}`),Mg(n))return new dt(Ze.UNAVAILABLE,`${t}: ${n}`);throw n}class L0{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Ft.comparator(e.key,i.key):(e,i)=>Ft.comparator(e.key,i.key),this.keyedMap=AT(),this.sortedSet=new Zr(this.comparator)}static emptySet(t){return new L0(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof L0)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new L0;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class o6{constructor(){this.Cu=new Zr(Ft.comparator)}track(t){const e=t.doc.key,i=this.Cu.get(e);i?0!==t.type&&3===i.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==i.type?this.Cu=this.Cu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Cu=this.Cu.remove(e):1===t.type&&2===i.type?this.Cu=this.Cu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):en():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal((e,i)=>{t.push(i)}),t}}class F0{constructor(t,e,i,r,s,a,c,h,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,r,s){const a=[];return e.forEach(c=>{a.push({type:0,doc:c})}),new F0(t,e,L0.emptySet(e),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&DT(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class G8{constructor(){this.Nu=void 0,this.listeners=[]}}class Y8{constructor(){this.queries=new rp(t=>EZ(t),DT),this.onlineState="Unknown",this.ku=new Set}}function n2(n,t){return r2.apply(this,arguments)}function r2(){return r2=(0,be.Z)(function*(n,t){const e=Bt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new G8),r)try{s.Nu=yield e.onListen(i)}catch(a){const c=N0(a,`Initialization of query '${tN(t.query)}' failed`);return void t.onError(c)}e.queries.set(i,s),s.listeners.push(t),t.Mu(e.onlineState),s.Nu&&t.$u(s.Nu)&&a2(e)}),r2.apply(this,arguments)}function o2(n,t){return s2.apply(this,arguments)}function s2(){return s2=(0,be.Z)(function*(n,t){const e=Bt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const a=s.listeners.indexOf(t);a>=0&&(s.listeners.splice(a,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),s2.apply(this,arguments)}function K8(n,t){const e=Bt(n);let i=!1;for(const r of t){const a=e.queries.get(r.query);if(a){for(const c of a.listeners)c.$u(r)&&(i=!0);a.Nu=r}}i&&a2(e)}function Q8(n,t,e){const i=Bt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function a2(n){n.ku.forEach(t=>{t.next()})}class l2{constructor(t,e,i){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new F0(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){return!t.fromCache||(!this.options.Ku||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(t){t=F0.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class J8{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}class s6{constructor(t){this.serializer=t}rr(t){return Yh(this.serializer,t)}ur(t){return t.metadata.exists?rz(this.serializer,t.document,!1):no.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return as(t)}}class X8{constructor(t,e,i){this.ju=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=a6(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const i=Oi.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,i=new s6(this.serializer);for(const r of t)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const a of r.metadata.queries){const c=(e.get(a)||li()).add(s);e.set(a,c)}}return e}complete(){var t=this;return(0,be.Z)(function*(){const e=yield function A8(n,t,e,i){return SN.apply(this,arguments)}(t.localStore,new s6(t.serializer),t.documents,t.ju.id),i=t.Wu(t.documents);for(const r of t.queries)yield I8(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Hu:t.collectionGroups,Ju:e}})()}}function a6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class l6{constructor(t){this.key=t}}class c6{constructor(t){this.key=t}}class u6{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=li(),this.mutatedKeys=li(),this.tc=xZ(t),this.ec=new L0(this.tc)}get nc(){return this.Yu}sc(t,e){const i=e?e.ic:new o6,r=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,a=r,c=!1;const h="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,p="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((v,b)=>{const D=r.get(v),P=xT(this.query,b)?b:null,R=!!D&&this.mutatedKeys.has(D.key),F=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;D&&P?D.data.isEqual(P.data)?R!==F&&(i.track({type:3,doc:P}),V=!0):this.rc(D,P)||(i.track({type:2,doc:P}),V=!0,(h&&this.tc(P,h)>0||p&&this.tc(P,p)<0)&&(c=!0)):!D&&P?(i.track({type:0,doc:P}),V=!0):D&&!P&&(i.track({type:1,doc:D}),V=!0,(h||p)&&(c=!0)),V&&(P?(a=a.add(P),s=F?s.add(v):s.delete(v)):(a=a.delete(v),s=s.delete(v)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const v="F"===this.query.limitType?a.last():a.first();a=a.delete(v.key),s=s.delete(v.key),i.track({type:1,doc:v})}return{ec:a,ic:i,zi:c,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort((p,v)=>function(b,D){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return P(b)-P(D)}(p.type,v.type)||this.tc(p.doc,v.doc)),this.oc(i);const a=e?this.uc():[],c=0===this.Zu.size&&this.current?1:0,h=c!==this.Xu;return this.Xu=c,0!==s.length||h?{snapshot:new F0(this.query,t.ec,r,s,t.mutatedKeys,0===c,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new o6,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=li(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const e=[];return t.forEach(i=>{this.Zu.has(i)||e.push(new c6(i))}),this.Zu.forEach(i=>{t.has(i)||e.push(new l6(i))}),e}hc(t){this.Yu=t.ir,this.Zu=li();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return F0.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class eY{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class tY{constructor(t){this.key=t,this.fc=!1}}class nY{constructor(t,e,i,r,s,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new rp(c=>EZ(c),DT),this._c=new Map,this.mc=new Set,this.gc=new Zr(Ft.comparator),this.yc=new Map,this.Ic=new bN,this.Tc={},this.Ec=new Map,this.Ac=W_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function iY(n,t){return c2.apply(this,arguments)}function c2(){return c2=(0,be.Z)(function*(n,t){const e=k2(n);let i,r;const s=e.wc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const a=yield M0(e.localStore,Sl(t)),c=e.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=yield u2(e,t,i,"current"===c,a.resumeToken),e.isPrimaryClient&&ZI(e.remoteStore,a)}return r}),c2.apply(this,arguments)}function u2(n,t,e,i,r){return d2.apply(this,arguments)}function d2(){return d2=(0,be.Z)(function*(n,t,e,i,r){n.Rc=(b,D,P)=>{return(R=(0,be.Z)(function*(F,V,Q,te){let re=V.view.sc(Q);re.zi&&(re=yield LI(F.localStore,V.query,!1).then(({documents:ue})=>V.view.sc(ue,re)));const de=te&&te.targetChanges.get(V.targetId),_e=V.view.applyChanges(re,F.isPrimaryClient,de);return b2(F,V.targetId,_e.cc),_e.snapshot}),function(F,V,Q,te){return R.apply(this,arguments)})(n,b,D,P);var R};const s=yield LI(n.localStore,t,!0),a=new u6(t,s.ir),c=a.sc(s.documents),h=OT.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),p=a.applyChanges(c,n.isPrimaryClient,h);b2(n,e,p.cc);const v=new eY(t,e,a);return n.wc.set(t,v),n._c.has(e)?n._c.get(e).push(t):n._c.set(e,[t]),p.snapshot}),d2.apply(this,arguments)}function rY(n,t){return h2.apply(this,arguments)}function h2(){return h2=(0,be.Z)(function*(n,t){const e=Bt(n),i=e.wc.get(t),r=e._c.get(i.targetId);if(r.length>1)return e._c.set(i.targetId,r.filter(s=>!DT(s,t))),void e.wc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield P0(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),$T(e.remoteStore,i.targetId),U0(e,i.targetId)}).catch(Sg))):(U0(e,i.targetId),yield P0(e.localStore,i.targetId,!0))}),h2.apply(this,arguments)}function f2(){return f2=(0,be.Z)(function*(n,t,e){const i=O2(n);try{const r=yield function(s,a){const c=Bt(s),h=yo.now(),p=a.reduce((D,P)=>D.add(P.key),li());let v,b;return c.persistence.runTransaction("Locally write mutations","readwrite",D=>{let P=pc(),R=li();return c.Zi.getEntries(D,p).next(F=>{P=F,P.forEach((V,Q)=>{Q.isValidDocument()||(R=R.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(D,P)).next(F=>{v=F;const V=[];for(const Q of a){const te=R9(Q,v.get(Q.key).overlayedDocument);null!=te&&V.push(new op(Q.key,te,uZ(te.value.mapValue),wo.exists(!0)))}return c.mutationQueue.addMutationBatch(D,h,V,a)}).next(F=>{b=F;const V=F.applyToLocalDocumentSet(v,R);return c.documentOverlayCache.saveOverlays(D,F.batchId,V)})}).then(()=>({batchId:b.batchId,changes:IZ(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let h=s.Tc[s.currentUser.toKey()];h||(h=new Zr(Qn)),h=h.insert(a,c),s.Tc[s.currentUser.toKey()]=h}(i,r.batchId,e),yield ap(i,r.changes),yield O0(i.remoteStore)}catch(r){const s=N0(r,"Failed to persist write");e.reject(s)}}),f2.apply(this,arguments)}function d6(n,t){return p2.apply(this,arguments)}function p2(){return p2=(0,be.Z)(function*(n,t){const e=Bt(n);try{const i=yield function D8(n,t){const e=Bt(n),i=t.snapshotVersion;let r=e.Ji;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=e.Zi.newChangeBuffer({trackRemovals:!0});r=e.Ji;const c=[];t.targetChanges.forEach((v,b)=>{const D=r.get(b);if(!D)return;c.push(e.Bs.removeMatchingKeys(s,v.removedDocuments,b).next(()=>e.Bs.addMatchingKeys(s,v.addedDocuments,b)));let P=D.withSequenceNumber(s.currentSequenceNumber);var R,F,V;null!==t.targetMismatches.get(b)?P=P.withResumeToken(Us.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,i)),r=r.insert(b,P),F=P,V=v,(0===(R=D).resumeToken.approximateByteSize()||F.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&c.push(e.Bs.updateTargetData(s,P))});let h=pc(),p=li();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,v))}),c.push(Hz(s,a,t.documentUpdates).next(v=>{h=v.nr,p=v.sr})),!i.isEqual(yn.min())){const v=e.Bs.getLastRemoteSnapshotVersion(s).next(b=>e.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(v)}return Re.waitFor(c).next(()=>a.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,h,p)).next(()=>h)}).then(s=>(e.Ji=r,s))}(e.localStore,t);t.targetChanges.forEach((r,s)=>{const a=e.yc.get(s);a&&(gn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.fc=!0:r.modifiedDocuments.size>0?gn(a.fc):r.removedDocuments.size>0&&(gn(a.fc),a.fc=!1))}),yield ap(e,i,t)}catch(i){yield Sg(i)}}),p2.apply(this,arguments)}function h6(n,t,e){const i=Bt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.wc.forEach((s,a)=>{const c=a.view.Mu(t);c.snapshot&&r.push(c.snapshot)}),function(s,a){const c=Bt(s);c.onlineState=a;let h=!1;c.queries.forEach((p,v)=>{for(const b of v.listeners)b.Mu(a)&&(h=!0)}),h&&a2(c)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function sY(n,t,e){return g2.apply(this,arguments)}function g2(){return g2=(0,be.Z)(function*(n,t,e){const i=Bt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.yc.get(t),s=r&&r.key;if(s){let a=new Zr(Ft.comparator);a=a.insert(s,no.newNoDocument(s,yn.min()));const c=li().add(s),h=new kT(yn.min(),new Map,new Zr(Qn),a,c);yield d6(i,h),i.gc=i.gc.remove(s),i.yc.delete(t),C2(i)}else yield P0(i.localStore,t,!1).then(()=>U0(i,t,e)).catch(Sg)}),g2.apply(this,arguments)}function aY(n,t){return m2.apply(this,arguments)}function m2(){return m2=(0,be.Z)(function*(n,t){const e=Bt(n),i=t.batch.batchId;try{const r=yield function E8(n,t){const e=Bt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Zi.newChangeBuffer({trackRemovals:!0});return function(a,c,h,p){const v=h.batch,b=v.keys();let D=Re.resolve();return b.forEach(P=>{D=D.next(()=>p.getEntry(c,P)).next(R=>{const F=h.docVersions.get(P);gn(null!==F),R.version.compareTo(F)<0&&(v.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),D.next(()=>a.mutationQueue.removeMutationBatch(c,v))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=li();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);w2(e,i,null),y2(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ap(e,r)}catch(r){yield Sg(r)}}),m2.apply(this,arguments)}function lY(n,t,e){return _2.apply(this,arguments)}function _2(){return _2=(0,be.Z)(function*(n,t,e){const i=Bt(n);try{const r=yield function(s,a){const c=Bt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,a).next(v=>(gn(null!==v),p=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(i.localStore,t);w2(i,t,e),y2(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ap(i,r)}catch(r){yield Sg(r)}}),_2.apply(this,arguments)}function v2(){return v2=(0,be.Z)(function*(n,t){const e=Bt(n);zg(e.remoteStore)||_t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const a=Bt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(e.localStore);if(-1===i)return void t.resolve();const r=e.Ec.get(i)||[];r.push(t),e.Ec.set(i,r)}catch(i){const r=N0(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),v2.apply(this,arguments)}function y2(n,t){(n.Ec.get(t)||[]).forEach(e=>{e.resolve()}),n.Ec.delete(t)}function w2(n,t,e){const i=Bt(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function U0(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n._c.get(t))n.wc.delete(i),e&&n.dc.Pc(i,e);n._c.delete(t),n.isPrimaryClient&&n.Ic.Is(t).forEach(i=>{n.Ic.containsKey(i)||f6(n,i)})}function f6(n,t){n.mc.delete(t.path.canonicalString());const e=n.gc.get(t);null!==e&&($T(n.remoteStore,e),n.gc=n.gc.remove(t),n.yc.delete(e),C2(n))}function b2(n,t,e){for(const i of e)i instanceof l6?(n.Ic.addReference(i.key,t),uY(n,i)):i instanceof c6?(_t("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,t),n.Ic.containsKey(i.key)||f6(n,i.key)):en()}function uY(n,t){const e=t.key,i=e.path.canonicalString();n.gc.get(e)||n.mc.has(i)||(_t("SyncEngine","New document in limbo: "+e),n.mc.add(i),C2(n))}function C2(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const t=n.mc.values().next().value;n.mc.delete(t);const e=new Ft(Oi.fromString(t)),i=n.Ac.next();n.yc.set(i,new tY(e)),n.gc=n.gc.insert(e,i),ZI(n.remoteStore,new sp(Sl(b0(e.path)),i,"TargetPurposeLimboResolution",Qc.ct))}}function ap(n,t,e){return T2.apply(this,arguments)}function T2(){return T2=(0,be.Z)(function*(n,t,e){const i=Bt(n),r=[],s=[],a=[];var c;i.wc.isEmpty()||(i.wc.forEach((c,h)=>{a.push(i.Rc(h,t,e).then(p=>{if((p||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,p?.fromCache?"not-current":"current"),p){r.push(p);const v=xN.Li(h.targetId,p);s.push(v)}}))}),yield Promise.all(a),i.dc.nu(r),yield(c=(0,be.Z)(function*(h,p){const v=Bt(h);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>Re.forEach(p,D=>Re.forEach(D.Fi,P=>v.persistence.referenceDelegate.addReference(b,D.targetId,P)).next(()=>Re.forEach(D.Bi,P=>v.persistence.referenceDelegate.removeReference(b,D.targetId,P)))))}catch(b){if(!Mg(b))throw b;_t("LocalStore","Failed to update sequence numbers: "+b)}for(const b of p){const D=b.targetId;if(!b.fromCache){const P=v.Ji.get(D),F=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);v.Ji=v.Ji.insert(D,F)}}}),function(h,p){return c.apply(this,arguments)})(i.localStore,s))}),T2.apply(this,arguments)}function dY(n,t){return E2.apply(this,arguments)}function E2(){return E2=(0,be.Z)(function*(n,t){const e=Bt(n);if(!e.currentUser.isEqual(t)){_t("SyncEngine","User change. New user:",t.toKey());const i=yield Zz(e.localStore,t);e.currentUser=t,(r=e).Ec.forEach(a=>{a.forEach(c=>{c.reject(new dt(Ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ap(e,i.er)}var r}),E2.apply(this,arguments)}function hY(n,t){const e=Bt(n),i=e.yc.get(t);if(i&&i.fc)return li().add(i.key);{let r=li();const s=e._c.get(t);if(!s)return r;for(const a of s){const c=e.wc.get(a);r=r.unionWith(c.view.nc)}return r}}function fY(n,t){return D2.apply(this,arguments)}function D2(){return D2=(0,be.Z)(function*(n,t){const e=Bt(n),i=yield LI(e.localStore,t.query,!0),r=t.view.hc(i);return e.isPrimaryClient&&b2(e,t.targetId,r.cc),r}),D2.apply(this,arguments)}function pY(n,t){return x2.apply(this,arguments)}function x2(){return x2=(0,be.Z)(function*(n,t){const e=Bt(n);return jz(e.localStore,t).then(i=>ap(e,i))}),x2.apply(this,arguments)}function gY(n,t,e,i){return A2.apply(this,arguments)}function A2(){return A2=(0,be.Z)(function*(n,t,e,i){const r=Bt(n),s=yield function(a,c){const h=Bt(a),p=Bt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",v=>p.Sn(v,c).next(b=>b?h.localDocuments.getDocuments(v,b):Re.resolve(null)))}(r.localStore,t);var c;null!==s?("pending"===e?yield O0(r.remoteStore):"acknowledged"===e||"rejected"===e?(w2(r,t,i||null),y2(r,t),c=t,Bt(Bt(r.localStore).mutationQueue).Cn(c)):en(),yield ap(r,s)):_t("SyncEngine","Cannot apply mutation batch with id: "+t)}),A2.apply(this,arguments)}function I2(){return I2=(0,be.Z)(function*(n,t){const e=Bt(n);if(k2(e),O2(e),!0===t&&!0!==e.vc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield p6(e,i.toArray());e.vc=!0,yield XN(e.remoteStore,!0);for(const s of r)ZI(e.remoteStore,s)}else if(!1===t&&!1!==e.vc){const i=[];let r=Promise.resolve();e._c.forEach((s,a)=>{e.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(U0(e,a),P0(e.localStore,a,!0))),$T(e.remoteStore,a)}),yield r,yield p6(e,i),function(s){const a=Bt(s);a.yc.forEach((c,h)=>{$T(a.remoteStore,h)}),a.Ic.Ts(),a.yc=new Map,a.gc=new Zr(Ft.comparator)}(e),e.vc=!1,yield XN(e.remoteStore,!1)}}),I2.apply(this,arguments)}function p6(n,t,e){return S2.apply(this,arguments)}function S2(){return S2=(0,be.Z)(function*(n,t,e){const i=Bt(n),r=[],s=[];for(const a of t){let c;const h=i._c.get(a);if(h&&0!==h.length){c=yield M0(i.localStore,Sl(h[0]));for(const p of h){const v=i.wc.get(p),b=yield fY(i,v);b.snapshot&&s.push(b.snapshot)}}else{const p=yield qz(i.localStore,a);c=yield M0(i.localStore,p),yield u2(i,g6(p),a,!1,c.resumeToken)}r.push(c)}return i.dc.nu(s),r}),S2.apply(this,arguments)}function g6(n){return CZ(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _Y(n){const t=Bt(n);return Bt(Bt(t.localStore).persistence).$i()}function vY(n,t,e,i){return M2.apply(this,arguments)}function M2(){return M2=(0,be.Z)(function*(n,t,e,i){const r=Bt(n);if(r.vc)return void _t("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const a=yield jz(r.localStore,DZ(s[0])),c=kT.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Us.EMPTY_BYTE_STRING);yield ap(r,a,c);break}case"rejected":yield P0(r.localStore,t,!0),U0(r,t,i);break;default:en()}}),M2.apply(this,arguments)}function yY(n,t,e){return P2.apply(this,arguments)}function P2(){return P2=(0,be.Z)(function*(n,t,e){const i=k2(n);if(i.vc){for(const r of t){if(i._c.has(r)){_t("SyncEngine","Adding an already active target "+r);continue}const s=yield qz(i.localStore,r),a=yield M0(i.localStore,s);yield u2(i,g6(s),a.targetId,!1,a.resumeToken),ZI(i.remoteStore,a)}for(const r of e)i._c.has(r)&&(yield P0(i.localStore,r,!1).then(()=>{$T(i.remoteStore,r),U0(i,r)}).catch(Sg))}}),P2.apply(this,arguments)}function k2(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=d6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sY.bind(null,t),t.dc.nu=K8.bind(null,t.eventManager),t.dc.Pc=Q8.bind(null,t.eventManager),t}function O2(n){const t=Bt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lY.bind(null,t),t}class GT{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,be.Z)(function*(){e.serializer=jT(t.databaseInfo.databaseId),e.sharedClientState=e.createSharedClientState(t),e.persistence=e.createPersistence(t),yield e.persistence.start(),e.localStore=e.createLocalStore(t),e.gcScheduler=e.createGarbageCollectionScheduler(t,e.localStore),e.indexBackfillerScheduler=e.createIndexBackfillerScheduler(t,e.localStore)})()}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Vz(this.persistence,new Bz,t.initialUser,this.serializer)}createPersistence(t){return new CN(OI.zs,this.serializer)}createSharedClientState(t){return new Yz}terminate(){var t=this;return(0,be.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class R2 extends GT{constructor(t,e,i){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,be.Z)(function*(){yield e().call(i,t),yield i.Vc.initialize(i,t),yield O2(i.Vc.syncEngine),yield O0(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return Vz(this.persistence,new Bz,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){return new Mz(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const i=new WG(e,this.persistence);return new jG(t.asyncQueue,i)}createPersistence(t){const e=DN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ga.withCacheSize(this.cacheSizeBytes):Ga.DEFAULT;return new EN(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Qz(),VI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Yz}}class m6 extends R2{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,be.Z)(function*(){yield e().call(i,t);const r=i.Vc.syncEngine;i.sharedClientState instanceof RN&&(i.sharedClientState.syncEngine={jr:gY.bind(null,r),zr:vY.bind(null,r),Wr:yY.bind(null,r),$i:_Y.bind(null,r),Qr:pY.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,be.Z)(function*(a){yield function mY(n,t){return I2.apply(this,arguments)}(i.Vc.syncEngine,a),i.gcScheduler&&(a&&!i.gcScheduler.started?i.gcScheduler.start():a||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(a&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():a||i.indexBackfillerScheduler.stop())});return function(a){return s.apply(this,arguments)}}())})()}createSharedClientState(t){const e=Qz();if(!RN.D(e))throw new dt(Ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=DN(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new RN(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class B0{initialize(t,e){var i=this;return(0,be.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>h6(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=dY.bind(null,i.syncEngine),yield XN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Y8}createDatastore(t){const e=jT(t.databaseInfo.databaseId),i=new k8(t.databaseInfo);return new N8(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=c=>h6(this.syncEngine,c,0),a=Kz.D()?new Kz:new S8,new U8(e,i,r,s,a);var e,i,r,s,a}createSyncEngine(t,e){return function(i,r,s,a,c,h,p){const v=new nY(i,r,s,a,c,h);return p&&(v.vc=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,be.Z)(function*(e){const i=Bt(e);_t("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield k0(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function _6(n,t=10240){let e=0;return{read:()=>(0,be.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class HI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):ss("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class CY{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new Fs,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var t=this;return(0,be.Z)(function*(){return t.metadata.promise})()}bc(){var t=this;return(0,be.Z)(function*(){return yield t.getMetadata(),t.Nc()})()}Nc(){var t=this;return(0,be.Z)(function*(){const e=yield t.kc();if(null===e)return null;const i=t.xc.decode(e),r=Number(i);isNaN(r)&&t.Mc(`length string (${i}) is not valid number`);const s=yield t.$c(r);return new J8(JSON.parse(s),e.length+r)})()}Oc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}kc(){var t=this;return(0,be.Z)(function*(){for(;t.Oc()<0&&!(yield t.Fc()););if(0===t.buffer.length)return null;const e=t.Oc();e<0&&t.Mc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}$c(t){var e=this;return(0,be.Z)(function*(){for(;e.buffer.length<t;)(yield e.Fc())&&e.Mc("Reached the end of bundle when more is expected.");const i=e.xc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}Fc(){var t=this;return(0,be.Z)(function*(){const e=yield t.Cc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class TY{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new dt(Ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,be.Z)(function*(s,a){const c=Bt(s),h=NT(c.serializer)+"/documents",p={documents:a.map(P=>RT(c.serializer,P))},v=yield c.vo("BatchGetDocuments",h,p,a.length),b=new Map;v.forEach(P=>{const R=function q9(n,t){return"found"in t?function(e,i){gn(!!i.found);const r=Yh(e,i.found.name),s=as(i.found.updateTime),a=i.found.createTime?as(i.found.createTime):yn.min(),c=new xa({mapValue:{fields:i.found.fields}});return no.newFoundDocument(r,s,a,c)}(n,t):"missing"in t?function(e,i){gn(!!i.missing),gn(!!i.readTime);const r=Yh(e,i.missing),s=as(i.readTime);return no.newNoDocument(r,s)}(n,t):en()}(c.serializer,P);b.set(R.key.toString(),R)});const D=[];return a.forEach(P=>{const R=b.get(P.toString());gn(!!R),D.push(R)}),D}),function(s,a){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new D0(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Ft.fromPath(r);t.mutations.push(new iN(s,t.precondition(s)))}),yield(i=(0,be.Z)(function*(r,s){const a=Bt(r),c=NT(a.serializer)+"/documents",h={writes:s.map(p=>LT(a.serializer,p))};yield a.Io("Commit",c,h)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw en();e=yn.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new dt(Ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(yn.min())?wo.exists(!1):wo.updateTime(e):wo.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(yn.min()))throw new dt(Ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wo.updateTime(e)}return wo.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class EY{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new LN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var t=this;this.qo.No((0,be.Z)(function*(){const e=new TY(t.datastore),i=t.qc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Uc(s)}))}).catch(r=>{t.Uc(r)})}))}qc(t){try{const e=this.updateFunction(t);return!vT(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!HZ(e)}return!1}}class DY{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=na.UNAUTHENTICATED,this.clientId=VV.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var a=(0,be.Z)(function*(c){_t("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(i,a=>(_t("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var t=this;return(0,be.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=N0(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function qI(n,t){return N2.apply(this,arguments)}function N2(){return N2=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,be.Z)(function*(s){i.isEqual(s)||(yield Zz(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}),N2.apply(this,arguments)}function L2(n,t){return F2.apply(this,arguments)}function F2(){return F2=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield U2(n);_t("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>r6(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>r6(t.remoteStore,s)),n._onlineComponents=t}),F2.apply(this,arguments)}function v6(n){return"FirebaseError"===n.name?n.code===Ze.FAILED_PRECONDITION||n.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function U2(n){return B2.apply(this,arguments)}function B2(){return B2=(0,be.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qI(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!v6(e))throw e;Zu("Error using user provided cache. Falling back to memory cache: "+e),yield qI(n,new GT)}}else _t("FirestoreClient","Using default OfflineComponentProvider"),yield qI(n,new GT);return n._offlineComponents}),B2.apply(this,arguments)}function jI(n){return V2.apply(this,arguments)}function V2(){return V2=(0,be.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t("FirestoreClient","Using user provided OnlineComponentProvider"),yield L2(n,n._uninitializedComponentsProvider._online)):(_t("FirestoreClient","Using default OnlineComponentProvider"),yield L2(n,new B0))),n._onlineComponents}),V2.apply(this,arguments)}function y6(n){return U2(n).then(t=>t.persistence)}function WI(n){return U2(n).then(t=>t.localStore)}function w6(n){return jI(n).then(t=>t.remoteStore)}function Z2(n){return jI(n).then(t=>t.syncEngine)}function b6(n){return jI(n).then(t=>t.datastore)}function V0(n){return z2.apply(this,arguments)}function z2(){return z2=(0,be.Z)(function*(n){const t=yield jI(n),e=t.eventManager;return e.onListen=iY.bind(null,t.syncEngine),e.onUnlisten=rY.bind(null,t.syncEngine),e}),z2.apply(this,arguments)}function C6(n,t,e={}){const i=new Fs;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(r,s,a,c,h){const p=new HI({next:b=>{s.enqueueAndForget(()=>o2(r,v));const D=b.docs.has(a);!D&&b.fromCache?h.reject(new dt(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&c&&"server"===c.source?h.reject(new dt(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(b)},error:b=>h.reject(b)}),v=new l2(b0(a.path),p,{includeMetadataChanges:!0,Ku:!0});return n2(r,v)}(yield V0(n),n.asyncQueue,t,e,i)})),i.promise}function T6(n,t,e={}){const i=new Fs;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(r,s,a,c,h){const p=new HI({next:b=>{s.enqueueAndForget(()=>o2(r,v)),b.fromCache&&"server"===c.source?h.reject(new dt(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(b)},error:b=>h.reject(b)}),v=new l2(a,p,{includeMetadataChanges:!0,Ku:!0});return n2(r,v)}(yield V0(n),n.asyncQueue,t,e,i)})),i.promise}function E6(n){const t={};return void 0!==n.timeoutSeconds&&(t.timeoutSeconds=n.timeoutSeconds),t}const D6=new Map;function H2(n,t,e){if(!e)throw new dt(Ze.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function x6(n,t,e,i){if(!0===t&&!0===i)throw new dt(Ze.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function A6(n){if(!Ft.isDocumentKey(n))throw new dt(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I6(n){if(Ft.isDocumentKey(n))throw new dt(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $I(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":en()}function Di(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new dt(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=$I(n);throw new dt(Ze.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function S6(n,t){if(t<=0)throw new dt(Ze.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class M6{constructor(t){var e,i;if(void 0===t.host){if(void 0!==t.ssl)throw new dt(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dt(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}x6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=E6(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new dt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class YT{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dt(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new dt(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M6(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new OG;switch(e.type){case"firstParty":return new FG(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new dt(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=D6.get(t);e&&(_t("ComponentProvider","Removing Datastore"),D6.delete(t),e.terminate())}(this),Promise.resolve()}}function P6(n,t,e,i={}){var r;const s=(n=Di(n,YT))._getSettings(),a=`${t}:${e}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Zu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=na.MOCK_USER;else{c=(0,K.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new dt(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new na(p)}n._authCredentials=new RG(new UV(c,h))}}class io{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new io(this.firestore,t,this._key)}}class Aa{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Aa(this.firestore,t,this._query)}}class Kh extends Aa{constructor(t,e,i){super(t,e,b0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new io(this.firestore,null,new Ft(t))}withConverter(t){return new Kh(this.firestore,t,this._path)}}function q2(n,t,...e){if(n=(0,K.m9)(n),H2("collection","path",t),n instanceof YT){const i=Oi.fromString(t,...e);return I6(i),new Kh(n,null,i)}{if(!(n instanceof io||n instanceof Kh))throw new dt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Oi.fromString(t,...e));return I6(i),new Kh(n.firestore,null,i)}}function KT(n,t,...e){if(n=(0,K.m9)(n),1===arguments.length&&(t=VV.A()),H2("doc","path",t),n instanceof YT){const i=Oi.fromString(t,...e);return A6(i),new io(n,null,new Ft(i))}{if(!(n instanceof io||n instanceof Kh))throw new dt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Oi.fromString(t,...e));return A6(i),new io(n.firestore,n instanceof Kh?n.converter:null,new Ft(i))}}function k6(n,t){return n=(0,K.m9)(n),t=(0,K.m9)(t),(n instanceof io||n instanceof Kh)&&(t instanceof io||t instanceof Kh)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function j2(n,t){return n=(0,K.m9)(n),t=(0,K.m9)(t),n instanceof Aa&&t instanceof Aa&&n.firestore===t.firestore&&DT(n._query,t._query)&&n.converter===t.converter}class NY{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new LN(this,"async_queue_retry"),this.Xc=()=>{const e=VI();e&&_t("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const t=VI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=VI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const e=new Fs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}ea(){var t=this;return(0,be.Z)(function*(){if(0!==t.Qc.length){try{yield t.Qc[0](),t.Qc.shift(),t.qo.reset()}catch(e){if(!Mg(e))throw e;_t("AsyncQueue","Operation failed with retryable error: "+e)}t.Qc.length>0&&t.qo.No(()=>t.ea())}})()}ta(t){const e=this.Gc.then(()=>(this.Hc=!0,t().catch(i=>{throw this.Wc=i,this.Hc=!1,ss("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=e,e}enqueueAfterDelay(t,e,i){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const r=t2.createAndSchedule(this,t,e,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&en()}verifyOperationInProgress(){}sa(){var t=this;return(0,be.Z)(function*(){let e;do{e=t.Gc,yield e}while(e!==t.Gc)})()}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function W2(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class LY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ro extends YT{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new NY,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||R6(this),this._firestoreClient.terminate()}}function O6(n,t){const e="object"==typeof n?n:(0,zo.getApp)(),i="string"==typeof n?n:t||"(default)",r=(0,zo._getProvider)(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,K.P0)("firestore");s&&P6(r,...s)}return r}function ls(n){return n._firestoreClient||R6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function R6(n){var t,e,i;const r=n._freezeSettings(),s=(c=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new f9(n._databaseId,c,n._persistenceKey,(p=r).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,E6(p.experimentalLongPollingOptions),p.useFetchStreams));var c,p;n._firestoreClient=new DY(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(e=r.cache)&&void 0!==e&&e._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function N6(n,t,e){const i=new Fs;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield qI(n,e),yield L2(n,t),i.resolve()}catch(r){const s=r;if(!v6(s))throw s;Zu("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function L6(n){if(n._initialized||n._terminated)throw new dt(Ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class QT{constructor(t="count",e){this._aggregateType=t,this._internalFieldPath=e,this.type="AggregateField"}}class WY{constructor(t,e,i){this._userDataWriter=e,this._data=i,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Qh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qh(Us.fromBase64String(t))}catch(e){throw new dt(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Qh(Us.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class lp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new dt(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class G_{constructor(t){this._methodName=t}}class GI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new dt(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dt(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Qn(this._lat,t._lat)||Qn(this._long,t._long)}}const $Y=/^__.*__$/;class GY{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new op(t,this.data,this.fieldMask,e,this.fieldTransforms):new E0(t,this.data,e,this.fieldTransforms)}}class F6{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new op(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function U6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class YI{constructor(t,e,i,r,s,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new YI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.fa(t),r}da(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.aa({path:i,la:!1});return r.ua(),r}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return JI(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(U6(this.ca)&&$Y.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class YY{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||jT(t)}ya(t,e,i,r=!1){return new YI({ca:t,methodName:e,ga:i,path:qo.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y_(n){const t=n._freezeSettings(),e=jT(n._databaseId);return new YY(n._databaseId,!!t.ignoreUndefinedProperties,e)}function KI(n,t,e,i,r,s={}){const a=n.ya(s.merge||s.mergeFields?2:0,t,e,r);K2("Data must be an object, but it was:",a,i);const c=Z6(i,a);let h,p;if(s.merge)h=new fc(a.fieldMask),p=a.fieldTransforms;else if(s.mergeFields){const v=[];for(const b of s.mergeFields){const D=XT(t,b,e);if(!a.contains(D))throw new dt(Ze.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);H6(v,D)||v.push(D)}h=new fc(v),p=a.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,p=a.fieldTransforms;return new GY(new xa(c),h,p)}class JT extends G_{_toFieldTransform(t){if(2!==t.ca)throw t._a(1===t.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof JT}}function B6(n,t,e){return new YI({ca:3,ga:t.settings.ga,methodName:n._methodName,la:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $2 extends G_{_toFieldTransform(t){return new ST(t.path,new C0)}isEqual(t){return t instanceof $2}}class KY extends G_{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=B6(this,t,!0),i=this.pa.map(s=>K_(s,e)),r=new B_(i);return new ST(t.path,r)}isEqual(t){return this===t}}class QY extends G_{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=B6(this,t,!0),i=this.pa.map(s=>K_(s,e)),r=new V_(i);return new ST(t.path,r)}isEqual(t){return this===t}}class JY extends G_{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new T0(t.serializer,kZ(t.serializer,this.Ia));return new ST(t.path,e)}isEqual(t){return this===t}}function G2(n,t,e,i){const r=n.ya(1,t,e);K2("Data must be an object, but it was:",r,i);const s=[],a=xa.empty();Pg(i,(h,p)=>{const v=QI(t,h,e);p=(0,K.m9)(p);const b=r.da(v);if(p instanceof JT)s.push(v);else{const D=K_(p,b);null!=D&&(s.push(v),a.set(v,D))}});const c=new fc(s);return new F6(a,c,r.fieldTransforms)}function Y2(n,t,e,i,r,s){const a=n.ya(1,t,e),c=[XT(t,i,e)],h=[r];if(s.length%2!=0)throw new dt(Ze.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<s.length;D+=2)c.push(XT(t,s[D])),h.push(s[D+1]);const p=[],v=xa.empty();for(let D=c.length-1;D>=0;--D)if(!H6(p,c[D])){const P=c[D];let R=h[D];R=(0,K.m9)(R);const F=a.da(P);if(R instanceof JT)p.push(P);else{const V=K_(R,F);null!=V&&(p.push(P),v.set(P,V))}}const b=new fc(p);return new F6(v,b,a.fieldTransforms)}function V6(n,t,e,i=!1){return K_(e,n.ya(i?4:3,t))}function K_(n,t){if(z6(n=(0,K.m9)(n)))return K2("Unsupported field value:",t,n),Z6(n,t);if(n instanceof G_)return function(e,i){if(!U6(i.ca))throw i._a(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const a of e){let c=K_(a,i.wa(s));null==c&&(c={nullValue:"NULL_VALUE"}),r.push(c),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,K.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kZ(i.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=yo.fromDate(e);return{timestampValue:x0(i.serializer,r)}}if(e instanceof yo){const r=new yo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:x0(i.serializer,r)}}if(e instanceof GI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qh)return{bytesValue:XZ(i.serializer,e._byteString)};if(e instanceof io){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:uN(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i._a(`Unsupported field value: ${$I(e)}`)}(n,t)}function Z6(n,t){const e={};return tZ(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pg(n,(i,r)=>{const s=K_(r,t.ha(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function z6(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yo||n instanceof GI||n instanceof Qh||n instanceof io||n instanceof G_)}function K2(n,t,e){if(!z6(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=$I(e);throw t._a("an object"===i?n+" a custom object":n+" "+i)}var i}function XT(n,t,e){if((t=(0,K.m9)(t))instanceof lp)return t._internalPath;if("string"==typeof t)return QI(n,t);throw JI("Field path arguments must be of type string or ",n,!1,void 0,e)}const XY=new RegExp("[~\\*/\\[\\]]");function QI(n,t,e){if(t.search(XY)>=0)throw JI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new lp(...t.split("."))._internalPath}catch{throw JI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function JI(n,t,e,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new dt(Ze.INVALID_ARGUMENT,c+n+h)}function H6(n,t){return n.some(e=>e.isEqual(t))}class eE{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new io(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new eK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(XI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class eK extends eE{data(){return super.data()}}function XI(n,t){return"string"==typeof t?QI(n,t):t instanceof lp?t._internalPath:t._delegate._internalPath}function q6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new dt(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q2{}class tE extends Q2{}function Jc(n,t,...e){let i=[];t instanceof Q2&&i.push(t),i=i.concat(e),function(r){const s=r.filter(c=>c instanceof Z0).length,a=r.filter(c=>c instanceof nE).length;if(s>1||s>0&&a>0)throw new dt(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class nE extends tE{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new nE(t,e,i)}_apply(t){const e=this._parse(t);return Y6(t._query,e),new Aa(t.firestore,t.converter,eN(t._query,e))}_parse(t){const e=Y_(t.firestore);return function(r,s,a,c,h,p,v){let b;if(h.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new dt(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){G6(v,p);const D=[];for(const P of v)D.push($6(c,r,P));b={arrayValue:{values:D}}}else b=$6(c,r,v)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||G6(v,p),b=V6(a,"where",v,"in"===p||"not-in"===p);return Ei.create(h,p,b)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}function iE(n,t,e){const i=t,r=XI("where",n);return nE._create(r,i,e)}class Z0 extends Q2{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Z0(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:gr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const a=r.getFlattenedFilters();for(const c of a)Y6(s,c),s=eN(s,c)}(t._query,e),new Aa(t.firestore,t.converter,eN(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class J2 extends tE{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new J2(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new dt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new dt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new y0(r,s);return function(c,h){if(null===JR(c)){const p=vI(c);null!==p&&K6(0,p,h.field)}}(i,a),a}(t._query,this._field,this._direction);return new Aa(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ip(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}function j6(n,t="asc"){const e=t,i=XI("orderBy",n);return J2._create(i,e)}class eS extends tE{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new eS(t,e,i)}_apply(t){return new Aa(t.firestore,t.converter,yI(t._query,this._limit,this._limitType))}}class tS extends tE{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new tS(t,e,i)}_apply(t){const e=W6(t,this.type,this._docOrFields,this._inclusive);return new Aa(t.firestore,t.converter,(r=e,new ip((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class nS extends tE{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new nS(t,e,i)}_apply(t){const e=W6(t,this.type,this._docOrFields,this._inclusive);return new Aa(t.firestore,t.converter,(r=e,new ip((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function W6(n,t,e,i){if(e[0]=(0,K.m9)(e[0]),e[0]instanceof eE)return function(r,s,a,c,h){if(!c)throw new dt(Ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const v of U_(r))if(v.field.isKeyField())p.push(L_(s,c.key));else{const b=c.data.field(v.field);if(dI(b))throw new dt(Ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===b){const D=v.field.canonicalString();throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}p.push(b)}return new Fg(p,h)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Y_(n.firestore);return function(s,a,c,h,p,v){const b=s.explicitOrderBy;if(p.length>b.length)throw new dt(Ze.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let P=0;P<p.length;P++){const R=p[P];if(b[P].field.isKeyField()){if("string"!=typeof R)throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof R}`);if(!XR(s)&&-1!==R.indexOf("/"))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${R}' contains a slash.`);const F=s.path.child(Oi.fromString(R));if(!Ft.isDocumentKey(F))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);const V=new Ft(F);D.push(L_(a,V))}else{const F=V6(c,h,R);D.push(F)}}return new Fg(D,v)}(n._query,n.firestore._databaseId,r,t,e,i)}}function $6(n,t,e){if("string"==typeof(e=(0,K.m9)(e))){if(""===e)throw new dt(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XR(t)&&-1!==e.indexOf("/"))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Oi.fromString(e));if(!Ft.isDocumentKey(i))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return L_(n,new Ft(i))}if(e instanceof io)return L_(n,e._key);throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$I(e)}.`)}function G6(n,t){if(!Array.isArray(n)||0===n.length)throw new dt(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Y6(n,t){if(t.isInequality()){const i=vI(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=JR(n);null!==s&&K6(0,r,s)}const e=function(i,r){for(const s of i)for(const a of s.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new dt(Ze.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function K6(n,t,e){if(!e.isEqual(t))throw new dt(Ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class X2{convertValue(t,e="none"){switch(Ng(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(np(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw en()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Pg(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new GI(jo(t.latitude),jo(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=hI(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(wT(t));default:return null}}convertTimestamp(t){const e=kg(t);return new yo(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Oi.fromString(t);gn(cz(i));const r=new Og(i.get(1),i.get(3)),s=new Ft(i.popFirst(5));return r.isEqual(e)||ss(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function iS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class aK extends X2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qh(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new io(this.firestore,null,e)}}class Q_{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cp extends eE{constructor(t,e,i,r,s,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new rE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(XI("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class rE extends cp{data(t={}){return super.data(t)}}class qg{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Q_(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new rE(this._firestore,this._userDataWriter,i.key,i,new Q_(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dt(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new rE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Q_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||3!==a.type).map(a=>{const c=new rE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Q_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return 0!==a.type&&(h=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:cK(a.type),doc:c,oldIndex:h,newIndex:p}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function cK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}function J6(n,t){return n instanceof cp&&t instanceof cp?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof qg&&t instanceof qg&&n._firestore===t._firestore&&j2(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class jg extends X2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qh(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new io(this.firestore,null,e)}}function X6(n){n=Di(n,Aa);const t=Di(n.firestore,ro),e=ls(t),i=new jg(t);return q6(n._query),T6(e,n._query).then(r=>new qg(t,i,n,r))}function e4(n,t,e){n=Di(n,io);const i=Di(n.firestore,ro),r=iS(n.converter,t,e);return H0(i,[KI(Y_(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,wo.none())])}function eL(n,t,e,...i){n=Di(n,io);const r=Di(n.firestore,ro),s=Y_(r);let a;return a="string"==typeof(t=(0,K.m9)(t))||t instanceof lp?Y2(s,"updateDoc",n._key,t,e,i):G2(s,"updateDoc",n._key,t),H0(r,[a.toMutation(n._key,wo.exists(!0))])}function t4(n){return H0(Di(n.firestore,ro),[new D0(n._key,wo.none())])}function n4(n,t){const e=Di(n.firestore,ro),i=KT(n),r=iS(n.converter,t);return H0(e,[KI(Y_(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,wo.exists(!1))]).then(()=>i)}function z0(n,...t){var e,i,r;n=(0,K.m9)(n);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||W2(t[a])||(s=t[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(W2(t[a])){const b=t[a];t[a]=null===(e=b.next)||void 0===e?void 0:e.bind(b),t[a+1]=null===(i=b.error)||void 0===i?void 0:i.bind(b),t[a+2]=null===(r=b.complete)||void 0===r?void 0:r.bind(b)}let h,p,v;if(n instanceof io)p=Di(n.firestore,ro),v=b0(n._key.path),h={next:b=>{t[a]&&t[a](tL(p,n,b))},error:t[a+1],complete:t[a+2]};else{const b=Di(n,Aa);p=Di(b.firestore,ro),v=b._query;const D=new jg(p);h={next:P=>{t[a]&&t[a](new qg(p,D,b,P))},error:t[a+1],complete:t[a+2]},q6(n._query)}return function(b,D,P,R){const F=new HI(R),V=new l2(D,F,P);return b.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return n2(yield V0(b),V)})),()=>{F.Dc(),b.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return o2(yield V0(b),V)}))}}(ls(p),v,c,h)}function H0(n,t){return function(e,i){const r=new Fs;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function oY(n,t,e){return f2.apply(this,arguments)}(yield Z2(e),i,r)})),r.promise}(ls(n),t)}function tL(n,t,e){const i=e.docs.get(t._key),r=new jg(n);return new cp(n,r,t._key,i,new Q_(e.hasPendingWrites,e.fromCache),t.converter)}const DK={maxAttempts:5};class r4{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Y_(t)}set(t,e,i){this._verifyNotCommitted();const r=Wg(t,this._firestore),s=iS(r.converter,e,i),a=KI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(a.toMutation(r._key,wo.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Wg(t,this._firestore);let a;return a="string"==typeof(e=(0,K.m9)(e))||e instanceof lp?Y2(this._dataReader,"WriteBatch.update",s._key,e,i,r):G2(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,wo.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Wg(t,this._firestore);return this._mutations=this._mutations.concat(new D0(e._key,wo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dt(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wg(n,t){if((n=(0,K.m9)(n)).firestore!==t)throw new dt(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xK extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Y_(t)}get(t){const e=Wg(t,this._firestore),i=new aK(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return en();const s=r[0];if(s.isFoundDocument())return new eE(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new eE(this._firestore,i,e._key,null,e.converter);throw en()})}set(t,e,i){const r=Wg(t,this._firestore),s=iS(r.converter,e,i),a=KI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,a),this}update(t,e,i,...r){const s=Wg(t,this._firestore);let a;return a="string"==typeof(e=(0,K.m9)(e))||e instanceof lp?Y2(this._dataReader,"Transaction.update",s._key,e,i,r):G2(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this}delete(t){const e=Wg(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Wg(t,this._firestore),i=new jg(this._firestore);return super.get(t).then(r=>new cp(this._firestore,i,e._key,r._document,new Q_(!1,!1),e.converter))}}!function(n,t=!0){g0=zo.SDK_VERSION,(0,zo._registerComponent)(new xl.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),a=new ro(new NG(e.getProvider("auth-internal")),new UG(e.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new dt(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Og(c.options.projectId,h)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),(0,zo.registerVersion)(FV,"3.13.0",n),(0,zo.registerVersion)(FV,"3.13.0","esm2017")}();class rS{constructor(t){return t}}const s4="firestore",nL=new o.OlP("angularfire2.firestore-instances");function NK(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new rS(i)}}const LK={provide:class OK{constructor(){return(0,Wn.vb)(s4)}},deps:[[new o.FiY,nL]]},FK={provide:rS,useFactory:function RK(n,t){const e=(0,Wn.JM)(s4,n,t);return e&&new rS(e)},deps:[[new o.FiY,nL],Uf]};let UK=(()=>{class n{constructor(){(0,Sd.KN)("angularfire",Wn.q4.full,"fst")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[FK,LK]}),n})();function BK(n,...t){return{ngModule:UK,providers:[{provide:nL,useFactory:NK(n),multi:!0,deps:[o.R0b,o.zs3,Wn.HU,Pb,[new o.FiY,fA],[new o.FiY,Wf],...t]}]}}const $g=(0,Wn.u3)(q2,!0),iL=(0,Wn.u3)(KT,!0),VK=(0,Wn.u3)(O6,!0);z(9568);const a4="@firebase/database";let rL="";function c4(n){rL=n}class HK{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,K.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,K.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class qK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,K.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const u4=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new HK(t)}}catch{}return new qK},J_=u4("localStorage"),oL=u4("sessionStorage"),q0=new dc.Yd("@firebase/database"),d4=function(){let n=1;return function(){return n++}}(),h4=function(n){const t=(0,K.dS)(n),e=new K.gQ;e.update(t);const i=e.digest();return K.US.encodeByteArray(i)},oE=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=oE.apply(null,i):t+="object"==typeof i?(0,K.Wl)(i):i,t+=" "}return t};let X_=null,f4=!0;const p4=function(n,t){(0,K.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(q0.logLevel=dc.in.VERBOSE,X_=q0.log.bind(q0),t&&oL.set("logging_enabled",!0)):"function"==typeof n?X_=n:(X_=null,oL.remove("logging_enabled"))},oa=function(...n){if(!0===f4&&(f4=!1,null===X_&&!0===oL.get("logging_enabled")&&p4(!0)),X_){const t=oE.apply(null,n);X_(t)}},sE=function(n){return function(...t){oa(n,...t)}},sL=function(...n){const t="FIREBASE INTERNAL ERROR: "+oE(...n);q0.error(t)},Jh=function(...n){const t=`FIREBASE FATAL ERROR: ${oE(...n)}`;throw q0.error(t),new Error(t)},Ka=function(...n){const t="FIREBASE WARNING: "+oE(...n);q0.warn(t)},oS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Gg="[MIN_NAME]",up="[MAX_NAME]",ev=function(n,t){if(n===t)return 0;if(n===Gg||t===up)return-1;if(t===Gg||n===up)return 1;{const e=_4(n),i=_4(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},$K=function(n,t){return n===t?0:n<t?-1:1},aE=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,K.Wl)(t))},aL=function(n){if("object"!=typeof n||null===n)return(0,K.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,K.Wl)(t[i]),e+=":",e+=aL(n[t[i]]);return e+="}",e},g4=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function sa(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const m4=function(n){(0,K.hu)(!oS(n),"Invalid JSON number");const i=1023;let r,s,a,c,h;0===n?(s=0,a=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=c+i,a=Math.round(n*Math.pow(2,52-c)-Math.pow(2,52))):(s=0,a=Math.round(n/Math.pow(2,-1074))));const p=[];for(h=52;h;h-=1)p.push(a%2?1:0),a=Math.floor(a/2);for(h=11;h;h-=1)p.push(s%2?1:0),s=Math.floor(s/2);p.push(r?1:0),p.reverse();const v=p.join("");let b="";for(h=0;h<64;h+=8){let D=parseInt(v.substr(h,8),2).toString(16);1===D.length&&(D="0"+D),b+=D}return b.toLowerCase()},QK=new RegExp("^-?(0*)\\d{1,10}$"),_4=function(n){if(QK.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},j0=function(n){try{n()}catch(t){setTimeout(()=>{throw Ka("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},eQ=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lE=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class tQ{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Ka(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nQ{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(oa("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ka(t)}}let cE=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const C4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D4="websocket",x4="long_polling";class cL{constructor(t,e,i,r,s=!1,a="",c=!1,h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=J_.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&J_.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function A4(n,t,e){let i;if((0,K.hu)("string"==typeof t,"typeof type must == string"),(0,K.hu)("object"==typeof e,"typeof params must == object"),t===D4)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==x4)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function iQ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return sa(e,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}class rQ{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,K.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,K.p$)(this.counters_)}}const uL={},dL={};function hL(n){const t=n.toString();return uL[t]||(uL[t]=new rQ),uL[t]}class sQ{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&j0(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yg{constructor(t,e,i,r,s,a,c){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sE(t),this.stats_=hL(e),this.urlFn=h=>(this.appCheckToken&&(h.ac=this.appCheckToken),A4(e,x4,h))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sQ(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,K.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fL((...s)=>{const[a,c,h,p,v]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=c,this.password=h;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[a,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&C4.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yg.forceAllow_=!0}static forceDisallow(){Yg.forceDisallow_=!0}static isAvailable(){return!((0,K.Yr)()||!Yg.forceAllow_&&(Yg.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,K.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,K.h$)(e),r=g4(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,K.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,K.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class fL{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=d4(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=fL.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){oa("frame writing exception"),c.stack&&oa(c.stack),oa(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||oa("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+r+"="+a.seg+"&ts"+r+"="+a.ts+"&d"+r+"="+a.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,K.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{oa("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let aS=null;typeof MozWebSocket<"u"?aS=MozWebSocket:typeof WebSocket<"u"&&(aS=WebSocket);let W0=(()=>{class n{constructor(e,i,r,s,a,c,h){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sE(this.connId),this.stats_=hL(i),this.connURL=n.connectionURL_(i,c,h,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,a){const c={v:"5"};return!(0,K.Yr)()&&typeof location<"u"&&location.hostname&&C4.test(location.hostname)&&(c.r="f"),i&&(c.s=i),r&&(c.ls=r),s&&(c.ac=s),a&&(c.p=a),A4(e,D4,c)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,J_.set("previous_websocket_failure",!0);try{let r;if((0,K.Yr)()){r={headers:{"User-Agent":`Firebase/5/${rL}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const a=process.env,c=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new aS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==aS&&!n.forceDisallow_}static previouslyFailed(){return J_.isInMemoryStorage||!0===J_.get("previous_websocket_failure")}markConnectionHealthy(){J_.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,K.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,K.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=g4(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),R4=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yg,W0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=W0&&W0.isAvailable();let r=i&&!W0.previouslyFailed();if(e.webSocketOnly&&(i||Ka("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[W0];else{const s=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Z4{constructor(t,e,i,r,s,a,c,h,p,v){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=h,this.onKill_=p,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sE("c:"+this.id+":"),this.transportManager_=new R4(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=lE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=aE("t",t),i=aE("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=aE("t",t),i=aE("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=aE("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?sL("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sL("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Ka("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),lE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(J_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class z4{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class H4{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,K.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,K.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class lS extends H4{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,K.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lS}getInitialEvent(t){return(0,K.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const q4=32,j4=768;class sr{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function $i(){return new sr("")}function gi(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kg(n){return n.pieces_.length-n.pieceNum_}function Mr(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new sr(n.pieces_,t)}function gL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uE(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function W4(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new sr(t,0)}function bo(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof sr)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new sr(e,0)}function mi(n){return n.pieceNum_>=n.pieces_.length}function Ml(n,t){const e=gi(n),i=gi(t);if(null===e)return t;if(e===i)return Ml(Mr(n),Mr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function IQ(n,t){const e=uE(n,0),i=uE(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=ev(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function mL(n,t){if(Kg(n)!==Kg(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function zu(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Kg(n)>Kg(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class SQ{constructor(t,e){this.errorPrefix_=e,this.parts_=uE(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,K.ug)(this.parts_[i]);$4(this)}}function $4(n){if(n.byteLength_>j4)throw new Error(n.errorPrefix_+"has a key path longer than "+j4+" bytes ("+n.byteLength_+").");if(n.parts_.length>q4)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+q4+") or object contains a cycle "+tv(n))}function tv(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class _L extends H4{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new _L}getInitialEvent(t){return(0,K.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const dE=1e3;let uS,nv=(()=>{class n extends z4{constructor(e,i,r,s,a,c,h,p){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=n.nextPersistentConnectionId_++,this.log_=sE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_L.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&lS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,a={r:s,a:e,b:i};this.log_((0,K.Wl)(a)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new K.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;"ok"===c.s?i.resolve(h):i.reject(h)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),(0,K.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r};e.tag&&(a.q=i._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,h=>{const p=h.d,v=h.s;n.warnOnListenWarnings_(p,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",h),"ok"!==v&&this.removeListen_(r,s),e.onComplete&&e.onComplete(v,p))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,K.r3)(e,"w")){const r=(0,K.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();Ka(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,K.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,K.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const a=s.s,c=s.d||"error";this.authToken_===e&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,K.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const a={p:e};s&&(a.q=r,a.t=s),this.sendRequest("n",a)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const a={p:i,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,a){this.initConnection_();const c={p:i,d:r};void 0!==a&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,K.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):sL("Unrecognized action received from server: "+(0,K.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,be.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),a=e.id+":"+n.nextConnectionId_++,c=e.lastSessionId;let h=!1,p=null;const v=function(){p?p.close():(h=!0,s())};e.realtime_={close:v,sendRequest:function(P){(0,K.hu)(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(P)}};const D=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,R]=yield Promise.all([e.authTokenProvider_.getToken(D),e.appCheckTokenProvider_.getToken(D)]);h?oa("getToken() completed but was canceled"):(oa("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=R&&R.token,p=new Z4(a,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,F=>{Ka(F+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},c))}catch(P){e.log_("Failed to get token: "+P),h||(e.repoInfo_.nodeAdmin&&Ka(P),v())}}})()}interrupt(e){oa("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){oa("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=dE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(a=>aL(a)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new sr(e).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(i),a.delete(i),0===a.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){oa("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){oa("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,K.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+rL.replace(/\./g,"-")]=1,(0,K.uI)()?e["framework.cordova"]=1:(0,K.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=lS.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yi{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yi(t,e)}}class cS{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yi(Gg,t),r=new yi(Gg,e);return 0!==this.compare(i,r)}minPost(){return yi.MIN}}class K4 extends cS{static get __EMPTY_NODE(){return uS}static set __EMPTY_NODE(t){uS=t}compare(t,e){return ev(t.name,e.name)}isDefinedOn(t){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yi.MIN}maxPost(){return new yi(up,uS)}makePost(t,e){return(0,K.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yi(t,uS)}toString(){return".key"}}const Xh=new K4;class dS{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,r&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let yL,Bd=(()=>{class n{constructor(e,i,r,s,a){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??gc.EMPTY_NODE,this.right=a??gc.EMPTY_NODE}copy(e,i,r,s,a){return new n(e??this.key,i??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===a?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return gc.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gc{constructor(t,e=gc.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new gc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Bd.BLACK,null,null))}remove(t){return new gc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Bd.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new dS(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new dS(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new dS(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new dS(this.root_,null,this.comparator_,!0,t)}}function FQ(n,t){return ev(n.name,t.name)}function vL(n,t){return ev(n,t)}gc.EMPTY_NODE=new class LQ{copy(t,e,i,r,s){return this}insert(t,e,i){return new Bd(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Q4=function(n){return"number"==typeof n?"number:"+m4(n):"string:"+n},J4=function(n){if(n.isLeafNode()){const t=n.val();(0,K.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,K.r3)(t,".sv"),"Priority must be a string or number.")}else(0,K.hu)(n===yL||n.isEmpty(),"priority of unexpected type.");(0,K.hu)(n===yL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let X4,eH,tH,$0=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),J4(this.priorityNode_)}static set __childrenNodeConstructor(e){X4=e}static get __childrenNodeConstructor(){return X4}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return mi(e)?this:".priority"===gi(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=gi(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,K.hu)(".priority"!==r||1===Kg(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mr(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Q4(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?m4(this.value_):this.value_,this.lazyHash_=h4(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,K.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(r);return(0,K.hu)(s>=0,"Unknown leaf type: "+i),(0,K.hu)(a>=0,"Unknown leaf type: "+r),s===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zr=new class ZQ extends cS{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?ev(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yi.MIN}maxPost(){return new yi(up,new $0("[PRIORITY-POST]",tH))}makePost(t,e){const i=eH(t);return new yi(e,new $0("[PRIORITY-POST]",i))}toString(){return".priority"}},zQ=Math.log(2);class HQ{constructor(t){this.count=parseInt(Math.log(t+1)/zQ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const hS=function(n,t,e,i){n.sort(t);const r=function(h,p){const v=p-h;let b,D;if(0===v)return null;if(1===v)return b=n[h],D=e?e(b):b,new Bd(D,b.node,Bd.BLACK,null,null);{const P=parseInt(v/2,10)+h,R=r(h,P),F=r(P+1,p);return b=n[P],D=e?e(b):b,new Bd(D,b.node,Bd.BLACK,R,F)}},c=function(h){let p=null,v=null,b=n.length;const D=function(R,F){const V=b-R,Q=b;b-=R;const te=r(V+1,Q),re=n[V],de=e?e(re):re;P(new Bd(de,re.node,F,null,te))},P=function(R){p?(p.left=R,p=R):(v=R,p=R)};for(let R=0;R<h.count;++R){const F=h.nextBitIsOne(),V=Math.pow(2,h.count-(R+1));F?D(V,Bd.BLACK):(D(V,Bd.BLACK),D(V,Bd.RED))}return v}(new HQ(n.length));return new gc(i||t,c)};let wL;const G0={};class dp{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,K.hu)(G0&&zr,"ChildrenNode.ts has not been loaded"),wL=wL||new dp({".priority":G0},{".priority":zr}),wL}get(t){const e=(0,K.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof gc?e:null}hasIndex(t){return(0,K.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,K.hu)(t!==Xh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(yi.Wrap);let c,a=s.getNext();for(;a;)r=r||t.isDefinedOn(a.node),i.push(a),a=s.getNext();c=r?hS(i,t.getCompare()):G0;const h=t.toString(),p=Object.assign({},this.indexSet_);p[h]=t;const v=Object.assign({},this.indexes_);return v[h]=c,new dp(v,p)}addToIndexes(t,e){const i=(0,K.UI)(this.indexes_,(r,s)=>{const a=(0,K.DV)(this.indexSet_,s);if((0,K.hu)(a,"Missing index implementation for "+s),r===G0){if(a.isDefinedOn(t.node)){const c=[],h=e.getIterator(yi.Wrap);let p=h.getNext();for(;p;)p.name!==t.name&&c.push(p),p=h.getNext();return c.push(t),hS(c,a.getCompare())}return G0}{const c=e.get(t.name);let h=r;return c&&(h=h.remove(new yi(t.name,c))),h.insert(t,t.node)}});return new dp(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,K.UI)(this.indexes_,r=>{if(r===G0)return r;{const s=e.get(t.name);return s?r.remove(new yi(t.name,s)):r}});return new dp(i,this.indexSet_)}}let hE,ii=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&J4(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hE||(hE=new n(new gc(vL),null,dp.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hE}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?hE:i}}getChild(e){const i=gi(e);return null===i?this:this.getImmediateChild(i).getChild(Mr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,K.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new yi(e,i);let s,a;i.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),a=this.indexMap_.addToIndexes(r,this.children_));const c=s.isEmpty()?hE:this.priorityNode_;return new n(s,c,a)}}updateChild(e,i){const r=gi(e);if(null===r)return i;{(0,K.hu)(".priority"!==gi(e)||1===Kg(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Mr(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,a=!0;if(this.forEachChild(zr,(c,h)=>{i[c]=h.val(e),r++,a&&n.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):a=!1}),!e&&a&&s<2*r){const c=[];for(const h in i)c[h]=i[h];return c}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Q4(this.getPriority().val())+":"),this.forEachChild(zr,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":h4(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new yi(e,i));return a?a.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yi(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yi(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,yi.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,yi.Wrap);let a=s.peek();for(;null!=a&&i.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fE?-1:0}withIndex(e){if(e===Xh||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Xh||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(zr),s=i.getIterator(zr);let a=r.getNext(),c=s.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=r.getNext(),c=s.getNext()}return null===a&&null===c}return!1}return!1}}resolveIndex_(e){return e===Xh?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const fE=new class qQ extends ii{constructor(){super(new gc(vL),ii.EMPTY_NODE,dp.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ii.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(yi,{MIN:{value:new yi(Gg,ii.EMPTY_NODE)},MAX:{value:new yi(up,fE)}}),K4.__EMPTY_NODE=ii.EMPTY_NODE,$0.__childrenNodeConstructor=ii,function UQ(n){yL=n}(fE),function VQ(n){tH=n}(fE);const jQ=!0;function Ro(n,t=null){if(null===n)return ii.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,K.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $0(n,Ro(t));if(n instanceof Array||!jQ){let e=ii.EMPTY_NODE;return sa(n,(i,r)=>{if((0,K.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ro(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Ro(t))}{const e=[];let i=!1;if(sa(n,(a,c)=>{if("."!==a.substring(0,1)){const h=Ro(c);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),e.push(new yi(a,h)))}}),0===e.length)return ii.EMPTY_NODE;const s=hS(e,FQ,a=>a.name,vL);if(i){const a=hS(e,zr.getCompare());return new ii(s,Ro(t),new dp({".priority":a},{".priority":zr}))}return new ii(s,Ro(t),dp.Default)}}!function BQ(n){eH=n}(Ro);class bL extends cS{constructor(t){super(),this.indexPath_=t,(0,K.hu)(!mi(t)&&".priority"!==gi(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?ev(t.name,e.name):s}makePost(t,e){const i=Ro(t),r=ii.EMPTY_NODE.updateChild(this.indexPath_,i);return new yi(e,r)}maxPost(){const t=ii.EMPTY_NODE.updateChild(this.indexPath_,fE);return new yi(up,t)}toString(){return uE(this.indexPath_,0).join("/")}}const CL=new class WQ extends cS{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?ev(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yi.MIN}maxPost(){return yi.MAX}makePost(t,e){const i=Ro(t);return new yi(e,i)}toString(){return".value"}};function nH(n){return{type:"value",snapshotNode:n}}function Y0(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function pE(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function gE(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class TL{constructor(t){this.index_=t}updateChild(t,e,i,r,s,a){(0,K.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=t.getImmediateChild(e);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(null!=a&&(i.isEmpty()?t.hasChild(e)?a.trackChildChange(pE(e,c)):(0,K.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(Y0(e,i)):a.trackChildChange(gE(e,i,c))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(zr,(r,s)=>{e.hasChild(r)||i.trackChildChange(pE(r,s))}),e.isLeafNode()||e.forEachChild(zr,(r,s)=>{if(t.hasChild(r)){const a=t.getImmediateChild(r);a.equals(s)||i.trackChildChange(gE(r,s,a))}else i.trackChildChange(Y0(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?ii.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mE{constructor(t){this.indexedFilter_=new TL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=mE.getStartPost_(t),this.endPost_=mE.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,a){return this.matches(new yi(e,i))||(i=ii.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,a)}updateFullNode(t,e,i){e.isLeafNode()&&(e=ii.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(ii.EMPTY_NODE);const s=this;return e.forEachChild(zr,(a,c)=>{s.matches(new yi(a,c))||(r=r.updateImmediateChild(a,ii.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class GQ{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mE(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,a){return this.rangedFilter_.matches(new yi(e,i))||(i=ii.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,a):this.fullLimitUpdateChild_(t,e,i,s,a)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=ii.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=ii.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const c=s.getNext();if(this.withinDirectionalStart(c)){if(!this.withinDirectionalEnd(c))break;r=r.updateImmediateChild(c.name,c.node),a++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(ii.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let a=0;for(;s.hasNext();){const c=s.getNext();a<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?a++:r=r.updateImmediateChild(c.name,ii.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let a;if(this.reverse_){const b=this.index_.getCompare();a=(D,P)=>b(P,D)}else a=this.index_.getCompare();const c=t;(0,K.hu)(c.numChildren()===this.limit_,"");const h=new yi(e,i),p=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(c.hasChild(e)){const b=c.getImmediateChild(e);let D=r.getChildAfterChild(this.index_,p,this.reverse_);for(;null!=D&&(D.name===e||c.hasChild(D.name));)D=r.getChildAfterChild(this.index_,D,this.reverse_);const P=null==D?1:a(D,h);if(v&&!i.isEmpty()&&P>=0)return s?.trackChildChange(gE(e,i,b)),c.updateImmediateChild(e,i);{s?.trackChildChange(pE(e,b));const F=c.updateImmediateChild(e,ii.EMPTY_NODE);return null!=D&&this.rangedFilter_.matches(D)?(s?.trackChildChange(Y0(D.name,D.node)),F.updateImmediateChild(D.name,D.node)):F}}return i.isEmpty()?t:v&&a(p,h)>=0?(null!=s&&(s.trackChildChange(pE(p.name,p.node)),s.trackChildChange(Y0(e,i))),c.updateImmediateChild(e,i).updateImmediateChild(p.name,ii.EMPTY_NODE)):t}}class fS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gg}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:up}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zr}copy(){const t=new fS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function EL(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function DL(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function pS(n,t){const e=n.copy();return e.index_=t,e}function iH(n){const t={};if(n.isDefault())return t;let e;if(n.index_===zr?e="$priority":n.index_===CL?e="$value":n.index_===Xh?e="$key":((0,K.hu)(n.index_ instanceof bL,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,K.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,K.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,K.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,K.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,K.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function rH(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==zr&&(t.i=n.index_.toString()),t}class gS extends z4{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=sE("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,K.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const a=gS.getListenId_(t,i),c={};this.listens_[a]=c;const h=iH(t._queryParams);this.restRequest_(s+".json",h,(p,v)=>{let b=v;if(404===p&&(b=null,p=null),null===p&&this.onDataUpdate_(s,b,!1,i),(0,K.DV)(this.listens_,a)===c){let D;D=p?401===p?"permission_denied":"rest_error:"+p:"ok",r(D,null)}})}unlisten(t,e){const i=gS.getListenId_(t,e);delete this.listens_[i]}get(t){const e=iH(t._queryParams),i=t._path.toString(),r=new K.BH;return this.restRequest_(i+".json",e,(s,a)=>{let c=a;404===s&&(c=null,s=null),null===s?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,K.xO)(e);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&4===c.readyState){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let h=null;if(c.status>=200&&c.status<300){try{h=(0,K.cI)(c.responseText)}catch{Ka("Failed to parse JSON response for "+a+": "+c.responseText)}i(null,h)}else 401!==c.status&&404!==c.status&&Ka("Got unsuccessful REST response for "+a+" Status: "+c.status),i(c.status);i=null}},c.open("GET",a,!0),c.send()})}}class eJ{constructor(){this.rootNode_=ii.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function mS(){return{value:null,children:new Map}}function K0(n,t,e){if(mi(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=gi(t);n.children.has(i)||n.children.set(i,mS()),K0(n.children.get(i),t=Mr(t),e)}}function xL(n,t){if(mi(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(zr,(i,r)=>{K0(n,new sr(i),r)}),xL(n,t)}}if(n.children.size>0){const e=gi(t);return t=Mr(t),n.children.has(e)&&xL(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function AL(n,t,e){null!==n.value?e(t,n.value):function tJ(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{AL(r,new sr(t.toString()+"/"+i),e)})}class nJ{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&sa(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class oJ{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new nJ(t);const i=1e4+2e4*Math.random();lE(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;sa(t,(r,s)=>{s>0&&(0,K.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),lE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Hu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hu||(Hu={})),Hu))();function ML(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _S{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(mi(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new sr(t));return new _S($i(),e,this.revert)}}return(0,K.hu)(gi(this.path)===t,"operationForChild called for unrelated child."),new _S(Mr(this.path),this.affectedTree,this.revert)}}class _E{constructor(t,e){this.source=t,this.path=e,this.type=Hu.LISTEN_COMPLETE}operationForChild(t){return mi(this.path)?new _E(this.source,$i()):new _E(this.source,Mr(this.path))}}class iv{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Hu.OVERWRITE}operationForChild(t){return mi(this.path)?new iv(this.source,$i(),this.snap.getImmediateChild(t)):new iv(this.source,Mr(this.path),this.snap)}}class Q0{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Hu.MERGE}operationForChild(t){if(mi(this.path)){const e=this.children.subtree(new sr(t));return e.isEmpty()?null:e.value?new iv(this.source,$i(),e.value):new Q0(this.source,$i(),e)}return(0,K.hu)(gi(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Q0(this.source,Mr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qg{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(mi(t))return this.isFullyInitialized()&&!this.filtered_;const e=gi(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class sJ{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function vE(n,t,e,i,r,s){const a=i.filter(c=>c.type===e);a.sort((c,h)=>function cJ(n,t,e){if(null==t.childName||null==e.childName)throw(0,K.g5)("Should only compare child_ events.");const i=new yi(t.childName,t.snapshotNode),r=new yi(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,c,h)),a.forEach(c=>{const h=function lJ(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,c,s);r.forEach(p=>{p.respondsTo(c.type)&&t.push(p.createEvent(h,n.query_))})})}function vS(n,t){return{eventCache:n,serverCache:t}}function yE(n,t,e,i){return vS(new Qg(t,e,i),n.serverCache)}function sH(n,t,e,i){return vS(n.eventCache,new Qg(t,e,i))}function yS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function rv(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PL;class Hr{constructor(t,e=(()=>(PL||(PL=new gc($K)),PL))()){this.value=t,this.children=e}static fromObject(t){let e=new Hr(null);return sa(t,(i,r)=>{e=e.set(new sr(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:$i(),value:this.value};if(mi(t))return null;{const i=gi(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Mr(t),e);return null!=s?{path:bo(new sr(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(mi(t))return this;{const e=gi(t),i=this.children.get(e);return null!==i?i.subtree(Mr(t)):new Hr(null)}}set(t,e){if(mi(t))return new Hr(e,this.children);{const i=gi(t),s=(this.children.get(i)||new Hr(null)).set(Mr(t),e),a=this.children.insert(i,s);return new Hr(this.value,a)}}remove(t){if(mi(t))return this.children.isEmpty()?new Hr(null):new Hr(null,this.children);{const e=gi(t),i=this.children.get(e);if(i){const r=i.remove(Mr(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Hr(null):new Hr(this.value,s)}return this}}get(t){if(mi(t))return this.value;{const e=gi(t),i=this.children.get(e);return i?i.get(Mr(t)):null}}setTree(t,e){if(mi(t))return e;{const i=gi(t),s=(this.children.get(i)||new Hr(null)).setTree(Mr(t),e);let a;return a=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Hr(this.value,a)}}fold(t){return this.fold_($i(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(bo(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,$i(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(mi(t))return null;{const s=gi(t),a=this.children.get(s);return a?a.findOnPath_(Mr(t),bo(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,$i(),e)}foreachOnPath_(t,e,i){if(mi(t))return this;{this.value&&i(e,this.value);const r=gi(t),s=this.children.get(r);return s?s.foreachOnPath_(Mr(t),bo(e,r),i):new Hr(null)}}foreach(t){this.foreach_($i(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(bo(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Vd{constructor(t){this.writeTree_=t}static empty(){return new Vd(new Hr(null))}}function wE(n,t,e){if(mi(t))return new Vd(new Hr(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const a=Ml(r,t);return s=s.updateChild(a,e),new Vd(n.writeTree_.set(r,s))}{const r=new Hr(e),s=n.writeTree_.setTree(t,r);return new Vd(s)}}}function kL(n,t,e){let i=n;return sa(e,(r,s)=>{i=wE(i,bo(t,r),s)}),i}function aH(n,t){if(mi(t))return Vd.empty();{const e=n.writeTree_.setTree(t,new Hr(null));return new Vd(e)}}function OL(n,t){return null!=ov(n,t)}function ov(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Ml(e.path,t)):null}function lH(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(zr,(i,r)=>{t.push(new yi(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new yi(i,r.value))}),t}function Jg(n,t){if(mi(t))return n;{const e=ov(n,t);return new Vd(null!=e?new Hr(e):n.writeTree_.subtree(t))}}function RL(n){return n.writeTree_.isEmpty()}function J0(n,t){return cH($i(),n.writeTree_,t)}function cH(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,K.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=cH(bo(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(bo(n,".priority"),i)),e}}function wS(n,t){return pH(t,n)}function gJ(n,t){if(n.snap)return zu(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&zu(bo(n.path,e),t))return!0;return!1}function _J(n){return n.visible}function uH(n,t,e){let i=Vd.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const a=s.path;let c;if(s.snap)zu(e,a)?(c=Ml(e,a),i=wE(i,c,s.snap)):zu(a,e)&&(c=Ml(a,e),i=wE(i,$i(),s.snap.getChild(c)));else{if(!s.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(zu(e,a))c=Ml(e,a),i=kL(i,c,s.children);else if(zu(a,e))if(c=Ml(a,e),mi(c))i=kL(i,$i(),s.children);else{const h=(0,K.DV)(s.children,gi(c));if(h){const p=h.getChild(Mr(c));i=wE(i,$i(),p)}}}}}return i}function dH(n,t,e,i,r){if(i||r){const s=Jg(n.visibleWrites,t);return!r&&RL(s)?e:r||null!=e||OL(s,$i())?J0(uH(n.allWrites,function(p){return(p.visible||r)&&(!i||!~i.indexOf(p.writeId))&&(zu(p.path,t)||zu(t,p.path))},t),e||ii.EMPTY_NODE):null}{const s=ov(n.visibleWrites,t);if(null!=s)return s;{const a=Jg(n.visibleWrites,t);return RL(a)?e:null!=e||OL(a,$i())?J0(a,e||ii.EMPTY_NODE):null}}}function bS(n,t,e,i){return dH(n.writeTree,n.treePath,t,e,i)}function NL(n,t){return function vJ(n,t,e){let i=ii.EMPTY_NODE;const r=ov(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(zr,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(e){const s=Jg(n.visibleWrites,t);return e.forEachChild(zr,(a,c)=>{const h=J0(Jg(s,new sr(a)),c);i=i.updateImmediateChild(a,h)}),lH(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return lH(Jg(n.visibleWrites,t)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,t)}function hH(n,t,e,i){return function yJ(n,t,e,i,r){(0,K.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=bo(t,e);if(OL(n.visibleWrites,s))return null;{const a=Jg(n.visibleWrites,s);return RL(a)?r.getChild(e):J0(a,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function CS(n,t){return function bJ(n,t){return ov(n.visibleWrites,t)}(n.writeTree,bo(n.treePath,t))}function LL(n,t,e){return function wJ(n,t,e,i){const r=bo(t,e),s=ov(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?J0(Jg(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function fH(n,t){return pH(bo(n.treePath,t),n.writeTree)}function pH(n,t){return{treePath:n,writeTree:t}}class DJ{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,K.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,gE(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,pE(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Y0(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,K.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,gE(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const gH=new class xJ{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class FL{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Qg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return LL(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rv(this.viewCache_),s=function EJ(n,t,e,i,r,s){return function CJ(n,t,e,i,r,s,a){let c;const h=Jg(n.visibleWrites,t),p=ov(h,$i());if(null!=p)c=p;else{if(null==e)return[];c=J0(h,e)}if(c=c.withIndex(a),c.isEmpty()||c.isLeafNode())return[];{const v=[],b=a.getCompare(),D=s?c.getReverseIteratorFrom(i,a):c.getIteratorFrom(i,a);let P=D.getNext();for(;P&&v.length<r;)0!==b(P,i)&&v.push(P),P=D.getNext();return v}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function mH(n,t,e,i,r,s){const a=t.eventCache;if(null!=CS(i,e))return t;{let c,h;if(mi(e))if((0,K.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const p=rv(t),b=NL(i,p instanceof ii?p:ii.EMPTY_NODE);c=n.filter.updateFullNode(t.eventCache.getNode(),b,s)}else{const p=bS(i,rv(t));c=n.filter.updateFullNode(t.eventCache.getNode(),p,s)}else{const p=gi(e);if(".priority"===p){(0,K.hu)(1===Kg(e),"Can't have a priority with additional path components");const v=a.getNode();h=t.serverCache.getNode();const b=hH(i,e,v,h);c=null!=b?n.filter.updatePriority(v,b):a.getNode()}else{const v=Mr(e);let b;if(a.isCompleteForChild(p)){h=t.serverCache.getNode();const D=hH(i,e,a.getNode(),h);b=null!=D?a.getNode().getImmediateChild(p).updateChild(v,D):a.getNode().getImmediateChild(p)}else b=LL(i,p,t.serverCache);c=null!=b?n.filter.updateChild(a.getNode(),p,b,v,r,s):a.getNode()}}return yE(t,c,a.isFullyInitialized()||mi(e),n.filter.filtersNodes())}}function TS(n,t,e,i,r,s,a,c){const h=t.serverCache;let p;const v=a?n.filter:n.filter.getIndexedFilter();if(mi(e))p=v.updateFullNode(h.getNode(),i,null);else if(v.filtersNodes()&&!h.isFiltered()){const P=h.getNode().updateChild(e,i);p=v.updateFullNode(h.getNode(),P,null)}else{const P=gi(e);if(!h.isCompleteForPath(e)&&Kg(e)>1)return t;const R=Mr(e),V=h.getNode().getImmediateChild(P).updateChild(R,i);p=".priority"===P?v.updatePriority(h.getNode(),V):v.updateChild(h.getNode(),P,V,R,gH,null)}const b=sH(t,p,h.isFullyInitialized()||mi(e),v.filtersNodes());return mH(n,b,e,r,new FL(r,b,s),c)}function UL(n,t,e,i,r,s,a){const c=t.eventCache;let h,p;const v=new FL(r,t,s);if(mi(e))p=n.filter.updateFullNode(t.eventCache.getNode(),i,a),h=yE(t,p,!0,n.filter.filtersNodes());else{const b=gi(e);if(".priority"===b)p=n.filter.updatePriority(t.eventCache.getNode(),i),h=yE(t,p,c.isFullyInitialized(),c.isFiltered());else{const D=Mr(e),P=c.getNode().getImmediateChild(b);let R;if(mi(D))R=i;else{const F=v.getCompleteChild(b);R=null!=F?".priority"===gL(D)&&F.getChild(W4(D)).isEmpty()?F:F.updateChild(D,i):ii.EMPTY_NODE}h=P.equals(R)?t:yE(t,n.filter.updateChild(c.getNode(),b,R,D,v,a),c.isFullyInitialized(),n.filter.filtersNodes())}}return h}function _H(n,t){return n.eventCache.isCompleteForChild(t)}function vH(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function BL(n,t,e,i,r,s,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let p,h=t;p=mi(e)?i:new Hr(null).setTree(e,i);const v=t.serverCache.getNode();return p.children.inorderTraversal((b,D)=>{if(v.hasChild(b)){const R=vH(0,t.serverCache.getNode().getImmediateChild(b),D);h=TS(n,h,new sr(b),R,r,s,a,c)}}),p.children.inorderTraversal((b,D)=>{const P=!t.serverCache.isCompleteForChild(b)&&null===D.value;if(!v.hasChild(b)&&!P){const F=vH(0,t.serverCache.getNode().getImmediateChild(b),D);h=TS(n,h,new sr(b),F,r,s,a,c)}}),h}class NJ{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new TL(i.getIndex()),s=function YQ(n){return n.loadsAllData()?new TL(n.getIndex()):n.hasLimit()?new GQ(n):new mE(n)}(i);this.processor_=function AJ(n){return{filter:n}}(s);const a=e.serverCache,c=e.eventCache,h=r.updateFullNode(ii.EMPTY_NODE,a.getNode(),null),p=s.updateFullNode(ii.EMPTY_NODE,c.getNode(),null),v=new Qg(h,a.isFullyInitialized(),r.filtersNodes()),b=new Qg(p,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=vS(b,v),this.eventGenerator_=new sJ(this.query_)}get query(){return this.query_}}function UJ(n,t){const e=rv(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!mi(t)&&!e.getImmediateChild(gi(t)).isEmpty())?e.getChild(t):null}function yH(n){return 0===n.eventRegistrations_.length}function wH(n,t,e){const i=[];if(e){(0,K.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(e,r);a&&i.push(a)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const a=n.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(a)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function bH(n,t,e,i){t.type===Hu.MERGE&&null!==t.source.queryId&&((0,K.hu)(rv(n.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)(yS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function SJ(n,t,e,i,r){const s=new DJ;let a,c;if(e.type===Hu.OVERWRITE){const p=e;p.source.fromUser?a=UL(n,t,p.path,p.snap,i,r,s):((0,K.hu)(p.source.fromServer,"Unknown source."),c=p.source.tagged||t.serverCache.isFiltered()&&!mi(p.path),a=TS(n,t,p.path,p.snap,i,r,c,s))}else if(e.type===Hu.MERGE){const p=e;p.source.fromUser?a=function PJ(n,t,e,i,r,s,a){let c=t;return i.foreach((h,p)=>{const v=bo(e,h);_H(t,gi(v))&&(c=UL(n,c,v,p,r,s,a))}),i.foreach((h,p)=>{const v=bo(e,h);_H(t,gi(v))||(c=UL(n,c,v,p,r,s,a))}),c}(n,t,p.path,p.children,i,r,s):((0,K.hu)(p.source.fromServer,"Unknown source."),c=p.source.tagged||t.serverCache.isFiltered(),a=BL(n,t,p.path,p.children,i,r,c,s))}else if(e.type===Hu.ACK_USER_WRITE){const p=e;a=p.revert?function RJ(n,t,e,i,r,s){let a;if(null!=CS(i,e))return t;{const c=new FL(i,t,r),h=t.eventCache.getNode();let p;if(mi(e)||".priority"===gi(e)){let v;if(t.serverCache.isFullyInitialized())v=bS(i,rv(t));else{const b=t.serverCache.getNode();(0,K.hu)(b instanceof ii,"serverChildren would be complete if leaf node"),v=NL(i,b)}p=n.filter.updateFullNode(h,v,s)}else{const v=gi(e);let b=LL(i,v,t.serverCache);null==b&&t.serverCache.isCompleteForChild(v)&&(b=h.getImmediateChild(v)),p=null!=b?n.filter.updateChild(h,v,b,Mr(e),c,s):t.eventCache.getNode().hasChild(v)?n.filter.updateChild(h,v,ii.EMPTY_NODE,Mr(e),c,s):h,p.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=bS(i,rv(t)),a.isLeafNode()&&(p=n.filter.updateFullNode(p,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=CS(i,$i()),yE(t,p,a,n.filter.filtersNodes())}}(n,t,p.path,i,r,s):function kJ(n,t,e,i,r,s,a){if(null!=CS(r,e))return t;const c=t.serverCache.isFiltered(),h=t.serverCache;if(null!=i.value){if(mi(e)&&h.isFullyInitialized()||h.isCompleteForPath(e))return TS(n,t,e,h.getNode().getChild(e),r,s,c,a);if(mi(e)){let p=new Hr(null);return h.getNode().forEachChild(Xh,(v,b)=>{p=p.set(new sr(v),b)}),BL(n,t,e,p,r,s,c,a)}return t}{let p=new Hr(null);return i.foreach((v,b)=>{const D=bo(e,v);h.isCompleteForPath(D)&&(p=p.set(v,h.getNode().getChild(D)))}),BL(n,t,e,p,r,s,c,a)}}(n,t,p.path,p.affectedTree,i,r,s)}else{if(e.type!==Hu.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+e.type);a=function OJ(n,t,e,i,r){const s=t.serverCache;return mH(n,sH(t,s.getNode(),s.isFullyInitialized()||mi(e),s.isFiltered()),e,i,gH,r)}(n,t,e.path,i,s)}const h=s.getChanges();return function MJ(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=yS(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(nH(yS(t)))}}(t,a,h),{viewCache:a,changes:h}}(n.processor_,r,t,e,i);return function IJ(n,t){(0,K.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,K.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,CH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function CH(n,t,e,i){return function aJ(n,t,e,i){const r=[],s=[];return t.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(function $Q(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(a.childName,a.snapshotNode))}),vE(n,r,"child_removed",t,i,e),vE(n,r,"child_added",t,i,e),vE(n,r,"child_moved",s,i,e),vE(n,r,"child_changed",t,i,e),vE(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let ES,xS;class TH{constructor(){this.views=new Map}}function VL(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,K.hu)(null!=s,"SyncTree gave us an op for an invalid query."),bH(s,t,e,i)}{let s=[];for(const a of n.views.values())s=s.concat(bH(a,t,e,i));return s}}function EH(n,t,e,i,r){const a=n.views.get(t._queryIdentifier);if(!a){let c=bS(e,r?i:null),h=!1;c?h=!0:i instanceof ii?(c=NL(e,i),h=!1):(c=ii.EMPTY_NODE,h=!1);const p=vS(new Qg(c,h,!1),new Qg(i,r,!1));return new NJ(t,p)}return a}function DH(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Xg(n,t){let e=null;for(const i of n.views.values())e=e||UJ(i,t);return e}function xH(n,t){return t._queryParams.loadsAllData()?DS(n):n.views.get(t._queryIdentifier)}function AH(n,t){return null!=xH(n,t)}function em(n){return null!=DS(n)}function DS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let GJ=1;class IH{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Hr(null),this.pendingWriteTree_=function TJ(){return{visibleWrites:Vd.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZL(n,t,e,i,r){return function dJ(n,t,e,i,r){(0,K.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=wE(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?X0(n,new iv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function tm(n,t,e=!1){const i=function fJ(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function pJ(n,t){const e=n.allWrites.findIndex(c=>c.writeId===t);(0,K.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,a=n.allWrites.length-1;for(;r&&a>=0;){const c=n.allWrites[a];c.visible&&(a>=e&&gJ(c,i.path)?r=!1:zu(i.path,c.path)&&(s=!0)),a--}return!!r&&(s?(function mJ(n){n.visibleWrites=uH(n.allWrites,_J,$i()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=aH(n.visibleWrites,i.path):sa(i.children,h=>{n.visibleWrites=aH(n.visibleWrites,bo(i.path,h))}),!0))}(n.pendingWriteTree_,t)){let s=new Hr(null);return null!=i.snap?s=s.set($i(),!0):sa(i.children,a=>{s=s.set(new sr(a),!0)}),X0(n,new _S(i.path,s,e))}return[]}function bE(n,t,e){return X0(n,new iv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function AS(n,t,e,i,r=!1){const s=t._path,a=n.syncPointTree_.get(s);let c=[];if(a&&("default"===t._queryIdentifier||AH(a,t))){const h=function jJ(n,t,e,i){const r=t._queryIdentifier,s=[];let a=[];const c=em(n);if("default"===r)for(const[h,p]of n.views.entries())a=a.concat(wH(p,e,i)),yH(p)&&(n.views.delete(h),p.query._queryParams.loadsAllData()||s.push(p.query));else{const h=n.views.get(r);h&&(a=a.concat(wH(h,e,i)),yH(h)&&(n.views.delete(r),h.query._queryParams.loadsAllData()||s.push(h.query)))}return c&&!em(n)&&s.push(new(function zJ(){return(0,K.hu)(ES,"Reference.ts has not been loaded"),ES}())(t._repo,t._path)),{removed:s,events:a}}(a,t,e,i);(function HJ(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const p=h.removed;if(c=h.events,!r){const v=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(s,(D,P)=>em(P));if(v&&!b){const D=n.syncPointTree_.subtree(s);if(!D.isEmpty()){const P=function tX(n){return n.fold((t,e,i)=>{if(e&&em(e))return[DS(e)];{let r=[];return e&&(r=DH(e)),sa(i,(s,a)=>{r=r.concat(a)}),r}})}(D);for(let R=0;R<P.length;++R){const F=P[R],V=F.query,Q=kH(n,F);n.listenProvider_.startListening(TE(V),CE(n,V),Q.hashFn,Q.onComplete)}}}!b&&p.length>0&&!i&&(v?n.listenProvider_.stopListening(TE(t),null):p.forEach(D=>{const P=n.queryToTagMap.get(SS(D));n.listenProvider_.stopListening(TE(D),P)}))}!function nX(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=SS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function SH(n,t,e,i){const r=HL(n,i);if(null!=r){const s=qL(r),a=s.path,c=s.queryId,h=Ml(a,t);return jL(n,a,new iv(ML(c),h,e))}return[]}function zL(n,t,e,i=!1){const r=t._path;let s=null,a=!1;n.syncPointTree_.foreachOnPath(r,(D,P)=>{const R=Ml(D,r);s=s||Xg(P,R),a=a||em(P)});let h,c=n.syncPointTree_.get(r);c?(a=a||em(c),s=s||Xg(c,$i())):(c=new TH,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=s?h=!0:(h=!1,s=ii.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,R)=>{const F=Xg(R,$i());F&&(s=s.updateImmediateChild(P,F))}));const p=AH(c,t);if(!p&&!t._queryParams.loadsAllData()){const D=SS(t);(0,K.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const P=function iX(){return GJ++}();n.queryToTagMap.set(D,P),n.tagToQueryMap.set(P,D)}let b=function qJ(n,t,e,i,r,s){const a=EH(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,a),function BJ(n,t){n.eventRegistrations_.push(t)}(a,e),function VJ(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(zr,(s,a)=>{i.push(Y0(s,a))}),e.isFullyInitialized()&&i.push(nH(e.getNode())),CH(n,i,e.getNode(),t)}(a,e)}(c,t,e,wS(n.pendingWriteTree_,r),s,h);if(!p&&!a&&!i){const D=xH(c,t);b=b.concat(function rX(n,t,e){const i=t._path,r=CE(n,t),s=kH(n,e),a=n.listenProvider_.startListening(TE(t),r,s.hashFn,s.onComplete),c=n.syncPointTree_.subtree(i);if(r)(0,K.hu)(!em(c.value),"If we're adding a query, it shouldn't be shadowed");else{const h=c.fold((p,v,b)=>{if(!mi(p)&&v&&em(v))return[DS(v).query];{let D=[];return v&&(D=D.concat(DH(v).map(P=>P.query))),sa(b,(P,R)=>{D=D.concat(R)}),D}});for(let p=0;p<h.length;++p){const v=h[p];n.listenProvider_.stopListening(TE(v),CE(n,v))}}return a}(n,t,D))}return b}function IS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(a,c)=>{const p=Xg(c,Ml(a,t));if(p)return p});return dH(r,t,s,e,!0)}function X0(n,t){return MH(t,n.syncPointTree_,null,wS(n.pendingWriteTree_,$i()))}function MH(n,t,e,i){if(mi(n.path))return PH(n,t,e,i);{const r=t.get($i());null==e&&null!=r&&(e=Xg(r,$i()));let s=[];const a=gi(n.path),c=n.operationForChild(a),h=t.children.get(a);if(h&&c){const p=e?e.getImmediateChild(a):null,v=fH(i,a);s=s.concat(MH(c,h,p,v))}return r&&(s=s.concat(VL(r,n,i,e))),s}}function PH(n,t,e,i){const r=t.get($i());null==e&&null!=r&&(e=Xg(r,$i()));let s=[];return t.children.inorderTraversal((a,c)=>{const h=e?e.getImmediateChild(a):null,p=fH(i,a),v=n.operationForChild(a);v&&(s=s.concat(PH(v,c,h,p)))}),r&&(s=s.concat(VL(r,n,i,e))),s}function kH(n,t){const e=t.query,i=CE(n,e);return{hashFn:()=>(function LJ(n){return n.viewCache_.serverCache.getNode()}(t)||ii.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function JJ(n,t,e){const i=HL(n,e);if(i){const r=qL(i),s=r.path,a=r.queryId,c=Ml(s,t);return jL(n,s,new _E(ML(a),c))}return[]}(n,e._path,i):function QJ(n,t){return X0(n,new _E({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function KK(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return AS(n,e,null,s)}}}}function CE(n,t){const e=SS(t);return n.queryToTagMap.get(e)}function SS(n){return n._path.toString()+"$"+n._queryIdentifier}function HL(n,t){return n.tagToQueryMap.get(t)}function qL(n){const t=n.indexOf("$");return(0,K.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new sr(n.substr(0,t))}}function jL(n,t,e){const i=n.syncPointTree_.get(t);return(0,K.hu)(i,"Missing sync point for query tag that we're tracking"),VL(i,e,wS(n.pendingWriteTree_,t),null)}function TE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function $J(){return(0,K.hu)(xS,"Reference.ts has not been loaded"),xS}())(n._repo,n._path):n}class WL{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new WL(e)}node(){return this.node_}}class $L{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=bo(this.path_,t);return new $L(this.syncTree_,e)}node(){return IS(this.syncTree_,this.path_)}}const oX=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},OH=function(n,t,e){return n&&"object"==typeof n?((0,K.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?sX(n[".sv"],t,e):"object"==typeof n[".sv"]?aX(n[".sv"],t):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},sX=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,K.hu)(!1,"Unexpected server value: "+n)},aX=function(n,t,e){n.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,K.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,K.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return"number"!=typeof a?i:a+i},RH=function(n,t,e,i){return YL(t,new $L(e,n),i)},GL=function(n,t,e){return YL(n,new WL(t),e)};function YL(n,t,e){const i=n.getPriority().val(),r=OH(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const a=n,c=OH(a.getValue(),t,e);return c!==a.getValue()||r!==a.getPriority().val()?new $0(c,Ro(r)):n}{const a=n;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new $0(r))),a.forEachChild(zr,(c,h)=>{const p=YL(h,t.getImmediateChild(c),e);p!==h&&(s=s.updateImmediateChild(c,p))}),s}}class KL{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function MS(n,t){let e=t instanceof sr?t:new sr(t),i=n,r=gi(e);for(;null!==r;){const s=(0,K.DV)(i.node.children,r)||{children:{},childCount:0};i=new KL(r,i,s),e=Mr(e),r=gi(e)}return i}function sv(n){return n.node.value}function QL(n,t){n.node.value=t,JL(n)}function NH(n){return n.node.childCount>0}function PS(n,t){sa(n.node.children,(e,i)=>{t(new KL(e,n,i))})}function LH(n,t,e,i){e&&!i&&t(n),PS(n,r=>{LH(r,t,!0,i)}),e&&i&&t(n)}function EE(n){return new sr(null===n.parent?n.name:EE(n.parent)+"/"+n.name)}function JL(n){null!==n.parent&&function uX(n,t,e){const i=function lX(n){return void 0===sv(n)&&!NH(n)}(e),r=(0,K.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,JL(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,JL(n))}(n.parent,n.name,n)}const dX=/[\[\].#$\/\u0000-\u001F\u007F]/,hX=/[\[\].#$\u0000-\u001F\u007F]/,XL=10485760,kS=function(n){return"string"==typeof n&&0!==n.length&&!dX.test(n)},FH=function(n){return"string"==typeof n&&0!==n.length&&!hX.test(n)},DE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!oS(n)||n&&"object"==typeof n&&(0,K.r3)(n,".sv")},ef=function(n,t,e,i){i&&void 0===t||xE((0,K.gK)(n,"value"),t,e)},xE=function(n,t,e){const i=e instanceof sr?new SQ(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+tv(i));if("function"==typeof t)throw new Error(n+"contains a function "+tv(i)+" with contents = "+t.toString());if(oS(t))throw new Error(n+"contains "+t.toString()+" "+tv(i));if("string"==typeof t&&t.length>XL/3&&(0,K.ug)(t)>XL)throw new Error(n+"contains a string greater than "+XL+" utf8 bytes "+tv(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(sa(t,(a,c)=>{if(".value"===a)r=!0;else if(".priority"!==a&&".sv"!==a&&(s=!0,!kS(a)))throw new Error(n+" contains an invalid key ("+a+") "+tv(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function MQ(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,K.ug)(t),$4(n)})(i,a),xE(n,c,i),function PQ(n){const t=n.parts_.pop();n.byteLength_-=(0,K.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+tv(i)+" in addition to actual children.")}},UH=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,K.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];sa(t,(a,c)=>{const h=new sr(a);if(xE(r,c,bo(e,h)),".priority"===gL(h)&&!DE(c))throw new Error(r+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(h)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=uE(i);for(let a=0;a<s.length;a++)if((".priority"!==s[a]||a!==s.length-1)&&!kS(s[a]))throw new Error(n+"contains an invalid key ("+s[a]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(IQ);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&zu(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},eF=function(n,t,e){if(!e||void 0!==t){if(oS(t))throw new Error((0,K.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!DE(t))throw new Error((0,K.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},AE=function(n,t,e,i){if(!(i&&void 0===e||kS(e)))throw new Error((0,K.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},IE=function(n,t,e,i){if(!(i&&void 0===e||FH(e)))throw new Error((0,K.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gX=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),IE(n,t,e,i)},qu=function(n,t){if(".info"===gi(t))throw new Error(n+" failed = Can't modify data under /.info/")},BH=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!kS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FH(n)}(e))throw new Error((0,K.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class mX{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function OS(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!mL(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function VH(n,t,e){OS(n,e),ZH(n,i=>mL(i,t))}function Xc(n,t,e){OS(n,e),ZH(n,i=>zu(i,t)||zu(t,i))}function ZH(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(_X(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function _X(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();X_&&oa("event: "+e.toString()),j0(i)}}}const zH="repo_interrupt",vX=25;class yX{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mX,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mS(),this.transactionQueueTree_=new KL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HH(n){const e=n.infoData_.getNode(new sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function SE(n){return oX({timestamp:HH(n)})}function qH(n,t,e,i,r){n.dataUpdateCount++;const s=new sr(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let a=[];if(r)if(i){const h=(0,K.UI)(e,p=>Ro(p));a=function XJ(n,t,e,i){const r=HL(n,i);if(r){const s=qL(r),a=s.path,c=s.queryId,h=Ml(a,t),p=Hr.fromObject(e);return jL(n,a,new Q0(ML(c),h,p))}return[]}(n.serverSyncTree_,s,h,r)}else{const h=Ro(e);a=SH(n.serverSyncTree_,s,h,r)}else if(i){const h=(0,K.UI)(e,p=>Ro(p));a=function KJ(n,t,e){const i=Hr.fromObject(e);return X0(n,new Q0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,h)}else{const h=Ro(e);a=bE(n.serverSyncTree_,s,h)}let c=s;a.length>0&&(c=tw(n,s)),Xc(n.eventQueue_,c,a)}function jH(n,t){tF(n,"connected",t),!1===t&&function EX(n){ew(n,"onDisconnectEvents");const t=SE(n),e=mS();AL(n.onDisconnect_,$i(),(r,s)=>{const a=RH(r,s,n.serverSyncTree_,t);K0(e,r,a)});let i=[];AL(e,$i(),(r,s)=>{i=i.concat(bE(n.serverSyncTree_,r,s));const a=oF(n,r);tw(n,a)}),n.onDisconnect_=mS(),Xc(n.eventQueue_,$i(),i)}(n)}function tF(n,t,e){const i=new sr("/.info/"+t),r=Ro(e);n.infoData_.updateSnapshot(i,r);const s=bE(n.infoSyncTree_,i,r);Xc(n.eventQueue_,i,s)}function RS(n){return n.nextWriteId_++}function nF(n,t,e,i,r){ew(n,"set",{path:t.toString(),value:e,priority:i});const s=SE(n),a=Ro(e,i),c=IS(n.serverSyncTree_,t),h=GL(a,c,s),p=RS(n),v=ZL(n.serverSyncTree_,t,h,p,!0);OS(n.eventQueue_,v),n.server_.put(t.toString(),a.val(!0),(D,P)=>{const R="ok"===D;R||Ka("set at "+t+" failed: "+D);const F=tm(n.serverSyncTree_,p,!R);Xc(n.eventQueue_,t,F),nm(0,r,D,P)});const b=oF(n,t);tw(n,b),Xc(n.eventQueue_,b,[])}function DX(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&xL(n.onDisconnect_,t),nm(0,e,i,r)})}function WH(n,t,e,i){const r=Ro(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,a)=>{"ok"===s&&K0(n.onDisconnect_,t,r),nm(0,i,s,a)})}function iF(n,t,e){let i;i=".info"===gi(t._path)?AS(n.infoSyncTree_,t,e):AS(n.serverSyncTree_,t,e),VH(n.eventQueue_,t._path,i)}function $H(n){n.persistentConnection_&&n.persistentConnection_.interrupt(zH)}function ew(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),oa(e,...t)}function nm(n,t,e,i){t&&j0(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,t(a)}})}function rF(n,t,e){return IS(n.serverSyncTree_,t,e)||ii.EMPTY_NODE}function NS(n,t=n.transactionQueueTree_){if(t||LS(n,t),sv(t)){const e=YH(n,t);(0,K.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function PX(n,t,e){const i=e.map(p=>p.currentWriteId),r=rF(n,t,i);let s=r;const a=r.hash();for(let p=0;p<e.length;p++){const v=e[p];(0,K.hu)(0===v.status,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const b=Ml(t,v.path);s=s.updateChild(b,v.currentOutputSnapshotRaw)}const c=s.val(!0),h=t;n.server_.put(h.toString(),c,p=>{ew(n,"transaction put response",{path:h.toString(),status:p});let v=[];if("ok"===p){const b=[];for(let D=0;D<e.length;D++)e[D].status=2,v=v.concat(tm(n.serverSyncTree_,e[D].currentWriteId)),e[D].onComplete&&b.push(()=>e[D].onComplete(null,!0,e[D].currentOutputSnapshotResolved)),e[D].unwatcher();LS(n,MS(n.transactionQueueTree_,t)),NS(n,n.transactionQueueTree_),Xc(n.eventQueue_,t,v);for(let D=0;D<b.length;D++)j0(b[D])}else{if("datastale"===p)for(let b=0;b<e.length;b++)e[b].status=3===e[b].status?4:0;else{Ka("transaction at "+h.toString()+" failed: "+p);for(let b=0;b<e.length;b++)e[b].status=4,e[b].abortReason=p}tw(n,t)}},a)}(n,EE(t),e)}else NH(t)&&PS(t,e=>{NS(n,e)})}function tw(n,t){const e=GH(n,t),i=EE(e);return function kX(n,t,e){if(0===t.length)return;const i=[];let r=[];const a=t.filter(c=>0===c.status).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const h=t[c],p=Ml(e,h.path);let b,v=!1;if((0,K.hu)(null!==p,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status)v=!0,b=h.abortReason,r=r.concat(tm(n.serverSyncTree_,h.currentWriteId,!0));else if(0===h.status)if(h.retryCount>=vX)v=!0,b="maxretry",r=r.concat(tm(n.serverSyncTree_,h.currentWriteId,!0));else{const D=rF(n,h.path,a);h.currentInputSnapshot=D;const P=t[c].update(D.val());if(void 0!==P){xE("transaction failed: Data returned ",P,h.path);let R=Ro(P);"object"==typeof P&&null!=P&&(0,K.r3)(P,".priority")||(R=R.updatePriority(D.getPriority()));const V=h.currentWriteId,Q=SE(n),te=GL(R,D,Q);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=te,h.currentWriteId=RS(n),a.splice(a.indexOf(V),1),r=r.concat(ZL(n.serverSyncTree_,h.path,te,h.currentWriteId,h.applyLocally)),r=r.concat(tm(n.serverSyncTree_,V,!0))}else v=!0,b="nodata",r=r.concat(tm(n.serverSyncTree_,h.currentWriteId,!0))}Xc(n.eventQueue_,e,r),r=[],v&&(t[c].status=2,setTimeout(t[c].unwatcher,Math.floor(0)),t[c].onComplete&&i.push("nodata"===b?()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot):()=>t[c].onComplete(new Error(b),!1,null)))}LS(n,n.transactionQueueTree_);for(let c=0;c<i.length;c++)j0(i[c]);NS(n,n.transactionQueueTree_)}(n,YH(n,e),i),i}function GH(n,t){let e,i=n.transactionQueueTree_;for(e=gi(t);null!==e&&void 0===sv(i);)i=MS(i,e),e=gi(t=Mr(t));return i}function YH(n,t){const e=[];return KH(n,t,e),e.sort((i,r)=>i.order-r.order),e}function KH(n,t,e){const i=sv(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);PS(t,r=>{KH(n,r,e)})}function LS(n,t){const e=sv(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,QL(t,e.length>0?e:void 0)}PS(t,i=>{LS(n,i)})}function oF(n,t){const e=EE(GH(n,t)),i=MS(n.transactionQueueTree_,t);return function cX(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{sF(n,r)}),sF(n,i),LH(i,r=>{sF(n,r)}),e}function sF(n,t){const e=sv(t);if(e){const i=[];let r=[],s=-1;for(let a=0;a<e.length;a++)3===e[a].status||(1===e[a].status?((0,K.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,e[a].status=3,e[a].abortReason="set"):((0,K.hu)(0===e[a].status,"Unexpected transaction status in abort"),e[a].unwatcher(),r=r.concat(tm(n.serverSyncTree_,e[a].currentWriteId,!0)),e[a].onComplete&&i.push(e[a].onComplete.bind(null,new Error("set"),!1,null))));-1===s?QL(t,void 0):e.length=s+1,Xc(n.eventQueue_,EE(t),r);for(let a=0;a<i.length;a++)j0(i[a])}}const aF=function(n,t){const e=NX(n),i=e.namespace;return"firebase.com"===e.domain&&Jh(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Jh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ka("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new cL(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new sr(e.pathString)}},NX=function(n){let t="",e="",i="",r="",s="",a=!0,c="https",h=443;if("string"==typeof n){let p=n.indexOf("//");p>=0&&(c=n.substring(0,p-1),n=n.substring(p+2));let v=n.indexOf("/");-1===v&&(v=n.length);let b=n.indexOf("?");-1===b&&(b=n.length),t=n.substring(0,Math.min(v,b)),v<b&&(r=function OX(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(v,b)));const D=function RX(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ka(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,b)));p=t.indexOf(":"),p>=0?(a="https"===c||"wss"===c,h=parseInt(t.substring(p+1),10)):p=t.length;const P=t.slice(0,p);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const R=t.indexOf(".");i=t.substring(0,R).toLowerCase(),e=t.substring(R+1),s=i}"ns"in D&&(s=D.ns)}return{host:t,port:h,domain:e,subdomain:i,secure:a,scheme:c,pathString:r,namespace:s}},QH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",LX=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=QH.charAt(e%64),e=Math.floor(e/64);(0,K.hu)(0===e,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=QH.charAt(t[r]);return(0,K.hu)(20===a.length,"nextPushId: Length should be 20."),a}}();class JH{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,K.Wl)(this.snapshot.exportVal())}}class XH{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lF{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,K.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class eq{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new K.BH;return DX(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){qu("OnDisconnect.remove",this._path);const t=new K.BH;return WH(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){qu("OnDisconnect.set",this._path),ef("OnDisconnect.set",t,this._path,!1);const e=new K.BH;return WH(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){qu("OnDisconnect.setWithPriority",this._path),ef("OnDisconnect.setWithPriority",t,this._path,!1),eF("OnDisconnect.setWithPriority",e,!1);const i=new K.BH;return function xX(n,t,e,i,r){const s=Ro(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(a,c)=>{"ok"===a&&K0(n.onDisconnect_,t,s),nm(0,r,a,c)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){qu("OnDisconnect.update",this._path),UH("OnDisconnect.update",t,this._path,!1);const e=new K.BH;return function AX(n,t,e,i){if((0,K.xb)(e))return oa("onDisconnect().update() called with empty data.  Don't do anything."),void nm(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&sa(e,(a,c)=>{const h=Ro(c);K0(n.onDisconnect_,bo(t,a),h)}),nm(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class mc{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return mi(this._path)?null:gL(this._path)}get ref(){return new ju(this._repo,this._path)}get _queryIdentifier(){const t=rH(this._queryParams),e=aL(t);return"{}"===e?"default":e}get _queryObject(){return rH(this._queryParams)}isEqual(t){if(!((t=(0,K.m9)(t))instanceof mc))return!1;const e=this._repo===t._repo,i=mL(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function AQ(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function FS(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function im(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Xh){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Gg)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==up)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===zr){if(null!=t&&!DE(t)||null!=e&&!DE(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,K.hu)(n.getIndex()instanceof bL||n.getIndex()===CL,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function US(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ju extends mc{constructor(t,e){super(t,e,new fS,!1)}get parent(){const t=W4(this._path);return null===t?null:new ju(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class av{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new sr(t),i=lv(this.ref,t);return new av(this._node.getChild(e),i,zr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new av(r,lv(this.ref,i),zr)))}hasChild(t){const e=new sr(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tq(n,t){return(n=(0,K.m9)(n))._checkNotDeleted("ref"),void 0!==t?lv(n._root,t):n._root}function nq(n,t){(n=(0,K.m9)(n))._checkNotDeleted("refFromURL");const e=aF(t,n._repo.repoInfo_.nodeAdmin);BH("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Jh("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),tq(n,e.path.toString())}function lv(n,t){return null===gi((n=(0,K.m9)(n))._path)?gX("child","path",t,!1):IE("child","path",t,!1),new ju(n._repo,bo(n._path,t))}function cF(n,t){n=(0,K.m9)(n),qu("set",n._path),ef("set",t,n._path,!1);const e=new K.BH;return nF(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function ZX(n,t){UH("update",t,n._path,!1);const e=new K.BH;return function TX(n,t,e,i){ew(n,"update",{path:t.toString(),value:e});let r=!0;const s=SE(n),a={};if(sa(e,(c,h)=>{r=!1,a[c]=RH(bo(t,c),Ro(h),n.serverSyncTree_,s)}),r)oa("update() called with empty data.  Don't do anything."),nm(0,i,"ok",void 0);else{const c=RS(n),h=function YJ(n,t,e,i){!function hJ(n,t,e,i){(0,K.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=kL(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Hr.fromObject(e);return X0(n,new Q0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,a,c);OS(n.eventQueue_,h),n.server_.merge(t.toString(),e,(p,v)=>{const b="ok"===p;b||Ka("update at "+t+" failed: "+p);const D=tm(n.serverSyncTree_,c,!b),P=D.length>0?tw(n,t):t;Xc(n.eventQueue_,P,D),nm(0,i,p,v)}),sa(e,p=>{const v=oF(n,bo(t,p));tw(n,v)}),Xc(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function zX(n){n=(0,K.m9)(n);const t=new lF(()=>{}),e=new ME(t);return function CX(n,t,e){const i=function eX(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(p,v)=>{const b=Ml(p,e);i=i||Xg(v,b)});let r=n.syncPointTree_.get(e);r?i=i||Xg(r,$i()):(r=new TH,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,a=s?new Qg(i,!0,!1):null;return function FJ(n){return yS(n.viewCache_)}(EH(r,t,wS(n.pendingWriteTree_,t._path),s?a.getNode():ii.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Ro(r).withIndex(t._queryParams.getIndex());let a;if(zL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())a=bE(n.serverSyncTree_,t._path,s);else{const c=CE(n.serverSyncTree_,t);a=SH(n.serverSyncTree_,t._path,s,c)}return Xc(n.eventQueue_,t._path,a),AS(n.serverSyncTree_,t,e,null,!0),s},r=>(ew(n,"get for query "+(0,K.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new av(i,new ju(n._repo,n._path),n._queryParams.getIndex()))}class ME{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new JH("value",this,new av(t.snapshotNode,new ju(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new XH(this,t,e):null}matches(t){return t instanceof ME&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class BS{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new XH(this,t,e):null}createEvent(t,e){(0,K.hu)(null!=t.childName,"Child events should have a childName.");const i=lv(new ju(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new JH(t.type,this,new av(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof BS&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function PE(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const h=e,p=(v,b)=>{iF(n._repo,n,c),h(v,b)};p.userCallback=e.userCallback,p.context=e.context,e=p}const a=new lF(e,s||void 0),c="value"===t?new ME(a):new BS(t,a);return function IX(n,t,e){let i;i=".info"===gi(t._path)?zL(n.infoSyncTree_,t,e):zL(n.serverSyncTree_,t,e),VH(n.eventQueue_,t._path,i)}(n._repo,n,c),()=>iF(n._repo,n,c)}function uF(n,t,e,i){return PE(n,"value",t,e,i)}function iq(n,t,e,i){return PE(n,"child_added",t,e,i)}function rq(n,t,e,i){return PE(n,"child_changed",t,e,i)}function oq(n,t,e,i){return PE(n,"child_moved",t,e,i)}function sq(n,t,e,i){return PE(n,"child_removed",t,e,i)}function aq(n,t,e){let i=null;const r=e?new lF(e):null;"value"===t?i=new ME(r):t&&(i=new BS(t,r)),iF(n._repo,n,i)}class Zd{}class lq extends Zd{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ef("endAt",this._value,t._path,!0);const e=DL(t._queryParams,this._value,this._key);if(US(e),im(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mc(t._repo,t._path,e,t._orderByCalled)}}class qX extends Zd{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ef("endBefore",this._value,t._path,!1);const e=function XQ(n,t,e){let i;return i=DL(n,t,n.index_===Xh||e?e:Gg),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(US(e),im(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mc(t._repo,t._path,e,t._orderByCalled)}}class cq extends Zd{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ef("startAt",this._value,t._path,!0);const e=EL(t._queryParams,this._value,this._key);if(US(e),im(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mc(t._repo,t._path,e,t._orderByCalled)}}class $X extends Zd{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ef("startAfter",this._value,t._path,!1);const e=function JQ(n,t,e){let i;return i=EL(n,t,n.index_===Xh||e?e:up),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(US(e),im(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mc(t._repo,t._path,e,t._orderByCalled)}}class YX extends Zd{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mc(t._repo,t._path,function KQ(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class QX extends Zd{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mc(t._repo,t._path,function QQ(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class XX extends Zd{constructor(t){super(),this._path=t}_apply(t){FS(t,"orderByChild");const e=new sr(this._path);if(mi(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new bL(e),r=pS(t._queryParams,i);return im(r),new mc(t._repo,t._path,r,!0)}}class tee extends Zd{_apply(t){FS(t,"orderByKey");const e=pS(t._queryParams,Xh);return im(e),new mc(t._repo,t._path,e,!0)}}class iee extends Zd{_apply(t){FS(t,"orderByPriority");const e=pS(t._queryParams,zr);return im(e),new mc(t._repo,t._path,e,!0)}}class oee extends Zd{_apply(t){FS(t,"orderByValue");const e=pS(t._queryParams,CL);return im(e),new mc(t._repo,t._path,e,!0)}}class aee extends Zd{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(ef("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lq(this._value,this._key)._apply(new cq(this._value,this._key)._apply(t))}}function zd(n,...t){let e=(0,K.m9)(n);for(const i of t)e=i._apply(e);return e}(function ZJ(n){(0,K.hu)(!ES,"__referenceConstructor has already been defined"),ES=n})(ju),function WJ(n){(0,K.hu)(!xS,"__referenceConstructor has already been defined"),xS=n}(ju);const cee="FIREBASE_DATABASE_EMULATOR_HOST",dF={};let uq=!1;function dq(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Jh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oa("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let h,p,a=aF(s,r),c=a.repoInfo;typeof process<"u"&&process.env&&(p=process.env[cee]),p?(h=!0,s=`http://${p}?ns=${c.namespace}`,a=aF(s,r),c=a.repoInfo):h=!a.repoInfo.secure;const v=r&&h?new cE(cE.OWNER):new nQ(n.name,n.options,t);BH("Invalid Firebase Database URL",a),mi(a.path)||Jh("Database URL must point to the root of a Firebase Database (not including a child path).");const b=function hee(n,t,e,i){let r=dF[t.name];r||(r={},dF[t.name]=r);let s=r[n.toURLString()];return s&&Jh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new yX(n,uq,e,i),r[n.toURLString()]=s,s}(c,n,v,new tQ(n.name,e));return new pee(b,n)}class pee{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function wX(n,t,e){if(n.stats_=hL(n.repoInfo_),n.forceRestClient_||eQ())n.server_=new gS(n.repoInfo_,(i,r,s,a)=>{qH(n,i,r,s,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jH(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new nv(n.repoInfo_,t,(i,r,s,a)=>{qH(n,i,r,s,a)},i=>{jH(n,i)},i=>{!function bX(n,t){sa(t,(e,i)=>{tF(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function oQ(n,t){const e=n.toString();return dL[e]||(dL[e]=t()),dL[e]}(n.repoInfo_,()=>new oJ(n.stats_,n.server_)),n.infoData_=new eJ,n.infoSyncTree_=new IH({startListening:(i,r,s,a)=>{let c=[];const h=n.infoData_.getNode(i._path);return h.isEmpty()||(c=bE(n.infoSyncTree_,i._path,h),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),tF(n,"connected",!1),n.serverSyncTree_=new IH({startListening:(i,r,s,a)=>(n.server_.listen(i,s,r,(c,h)=>{const p=a(c,h);Xc(n.eventQueue_,i._path,p)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ju(this._repo,$i())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function dee(n,t){const e=dF[t];(!e||e[n.key]!==n)&&Jh(`Database ${t}(${n.repoInfo_}) has already been deleted.`),$H(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Jh("Cannot call "+t+" on a deleted database.")}}function hq(){R4.IS_TRANSPORT_INITIALIZED&&Ka("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gee(){hq(),Yg.forceDisallow()}function mee(){hq(),W0.forceDisallow(),Yg.forceAllow()}function yee(n,t){p4(n,t)}const bee={".sv":"timestamp"};class Eee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nv.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},nv.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function wee(n){c4(zo.SDK_VERSION),(0,zo._registerComponent)(new xl.wA("database",(t,{instanceIdentifier:e})=>dq(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,zo.registerVersion)(a4,"0.14.4",n),(0,zo.registerVersion)(a4,"0.14.4","esm2017")}();const Iee=new dc.Yd("@firebase/database-compat"),pq=function(n){Iee.warn("FIREBASE WARNING: "+n)};class Pee{constructor(t){this._delegate=t}cancel(t){(0,K.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,K.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,K.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,K.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,K.Dv)("OnDisconnect.set",1,2,arguments.length),(0,K.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,K.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,K.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,K.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,pq("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,K.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class kee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,K.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rm{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,K.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,K.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,K.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,K.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,K.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),IE("DataSnapshot.child","path",t,!1),new rm(this._database,this._delegate.child(t))}hasChild(t){return(0,K.Dv)("DataSnapshot.hasChild",1,1,arguments.length),IE("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,K.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,K.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,K.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new rm(this._database,e)))}hasChildren(){return(0,K.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,K.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,K.Dv)("DataSnapshot.ref",0,0,arguments.length),new eu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ia{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,K.Dv)("Query.on",2,4,arguments.length),(0,K.Wj)("Query.on","callback",e,!1);const a=Ia.getCancelAndContextArgs_("Query.on",i,r),c=(p,v)=>{e.call(a.context,new rm(this.database,p),v)};c.userCallback=e,c.context=a.context;const h=null===(s=a.cancel)||void 0===s?void 0:s.bind(a.context);switch(t){case"value":return uF(this._delegate,c,h),e;case"child_added":return iq(this._delegate,c,h),e;case"child_removed":return sq(this._delegate,c,h),e;case"child_changed":return rq(this._delegate,c,h),e;case"child_moved":return oq(this._delegate,c,h),e;default:throw new Error((0,K.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,K.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,K.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,K.Wj)("Query.off","callback",e,!0),(0,K.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,aq(this._delegate,t,r)}else aq(this._delegate,t)}get(){return zX(this._delegate).then(t=>new rm(this.database,t))}once(t,e,i,r){(0,K.Dv)("Query.once",1,4,arguments.length),(0,K.Wj)("Query.once","callback",e,!0);const s=Ia.getCancelAndContextArgs_("Query.once",i,r),a=new K.BH,c=(p,v)=>{const b=new rm(this.database,p);e&&e.call(s.context,b,v),a.resolve(b)};c.userCallback=e,c.context=s.context;const h=p=>{s.cancel&&s.cancel.call(s.context,p),a.reject(p)};switch(t){case"value":uF(this._delegate,c,h,{onlyOnce:!0});break;case"child_added":iq(this._delegate,c,h,{onlyOnce:!0});break;case"child_removed":sq(this._delegate,c,h,{onlyOnce:!0});break;case"child_changed":rq(this._delegate,c,h,{onlyOnce:!0});break;case"child_moved":oq(this._delegate,c,h,{onlyOnce:!0});break;default:throw new Error((0,K.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise}limitToFirst(t){return(0,K.Dv)("Query.limitToFirst",1,1,arguments.length),new Ia(this.database,zd(this._delegate,function KX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new YX(n)}(t)))}limitToLast(t){return(0,K.Dv)("Query.limitToLast",1,1,arguments.length),new Ia(this.database,zd(this._delegate,function JX(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QX(n)}(t)))}orderByChild(t){return(0,K.Dv)("Query.orderByChild",1,1,arguments.length),new Ia(this.database,zd(this._delegate,function eee(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return IE("orderByChild","path",n,!1),new XX(n)}(t)))}orderByKey(){return(0,K.Dv)("Query.orderByKey",0,0,arguments.length),new Ia(this.database,zd(this._delegate,function nee(){return new tee}()))}orderByPriority(){return(0,K.Dv)("Query.orderByPriority",0,0,arguments.length),new Ia(this.database,zd(this._delegate,function ree(){return new iee}()))}orderByValue(){return(0,K.Dv)("Query.orderByValue",0,0,arguments.length),new Ia(this.database,zd(this._delegate,function see(){return new oee}()))}startAt(t=null,e){return(0,K.Dv)("Query.startAt",0,2,arguments.length),new Ia(this.database,zd(this._delegate,function WX(n=null,t){return AE("startAt","key",t,!0),new cq(n,t)}(t,e)))}startAfter(t=null,e){return(0,K.Dv)("Query.startAfter",0,2,arguments.length),new Ia(this.database,zd(this._delegate,function GX(n,t){return AE("startAfter","key",t,!0),new $X(n,t)}(t,e)))}endAt(t=null,e){return(0,K.Dv)("Query.endAt",0,2,arguments.length),new Ia(this.database,zd(this._delegate,function HX(n,t){return AE("endAt","key",t,!0),new lq(n,t)}(t,e)))}endBefore(t=null,e){return(0,K.Dv)("Query.endBefore",0,2,arguments.length),new Ia(this.database,zd(this._delegate,function jX(n,t){return AE("endBefore","key",t,!0),new qX(n,t)}(t,e)))}equalTo(t,e){return(0,K.Dv)("Query.equalTo",1,2,arguments.length),new Ia(this.database,zd(this._delegate,function lee(n,t){return AE("equalTo","key",t,!0),new aee(n,t)}(t,e)))}toString(){return(0,K.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,K.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,K.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Ia))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,K.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,K.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,K.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new eu(this.database,new ju(this._delegate._repo,this._delegate._path))}}class eu extends Ia{constructor(t,e){super(t,new mc(e._repo,e._path,new fS,!1)),this.database=t,this._delegate=e}getKey(){return(0,K.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,K.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new eu(this.database,lv(this._delegate,t))}getParent(){(0,K.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new eu(this.database,t):null}getRoot(){return(0,K.Dv)("Reference.root",0,0,arguments.length),new eu(this.database,this._delegate.root)}set(t,e){(0,K.Dv)("Reference.set",1,2,arguments.length),(0,K.Wj)("Reference.set","onComplete",e,!0);const i=cF(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,K.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,pq("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qu("Reference.update",this._delegate._path),(0,K.Wj)("Reference.update","onComplete",e,!0);const i=ZX(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,K.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,K.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function VX(n,t,e){if(qu("setWithPriority",n._path),ef("setWithPriority",t,n._path,!1),eF("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new K.BH;return nF(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,K.Dv)("Reference.remove",0,1,arguments.length),(0,K.Wj)("Reference.remove","onComplete",t,!0);const e=function UX(n){return qu("remove",n._path),cF(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,K.Dv)("Reference.transaction",1,3,arguments.length),(0,K.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,K.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,K.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Dee(n,t,e){var i;if(n=(0,K.m9)(n),qu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new K.BH,c=uF(n,()=>{});return function MX(n,t,e,i,r,s){ew(n,"transaction on "+t);const a={path:t,update:e,onComplete:i,status:null,order:d4(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=rF(n,t,void 0);a.currentInputSnapshot=c;const h=a.update(c.val());if(void 0===h)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{xE("transaction failed: Data returned ",h,a.path),a.status=0;const p=MS(n.transactionQueueTree_,t),v=sv(p)||[];let b;v.push(a),QL(p,v),"object"==typeof h&&null!==h&&(0,K.r3)(h,".priority")?(b=(0,K.DV)(h,".priority"),(0,K.hu)(DE(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):b=(IS(n.serverSyncTree_,t)||ii.EMPTY_NODE).getPriority().val();const D=SE(n),P=Ro(h,b),R=GL(P,c,D);a.currentOutputSnapshotRaw=P,a.currentOutputSnapshotResolved=R,a.currentWriteId=RS(n);const F=ZL(n.serverSyncTree_,t,R,a.currentWriteId,a.applyLocally);Xc(n.eventQueue_,t,F),NS(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(h,p,v)=>{let b=null;h?s.reject(h):(b=new av(v,new ju(n._repo,n._path),zr),s.resolve(new Eee(p,b)))},c,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new kee(s.committed,new rm(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,K.Dv)("Reference.setPriority",1,2,arguments.length),(0,K.Wj)("Reference.setPriority","onComplete",e,!0);const i=function BX(n,t){n=(0,K.m9)(n),qu("setPriority",n._path),eF("setPriority",t,!1);const e=new K.BH;return nF(n._repo,bo(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,K.Dv)("Reference.push",0,2,arguments.length),(0,K.Wj)("Reference.push","onComplete",e,!0);const i=function FX(n,t){n=(0,K.m9)(n),qu("push",n._path),ef("push",t,n._path,!0);const e=HH(n._repo),i=LX(e),r=lv(n,i),s=lv(n,i);let a;return a=null!=t?cF(s,t).then(()=>s):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}(this._delegate,t),r=i.then(a=>new eu(this.database,a));e&&r.then(()=>e(null),a=>e(a));const s=new eu(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return qu("Reference.onDisconnect",this._delegate._path),new Pee(new eq(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kE{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:gee,forceLongPolling:mee}}useEmulator(t,e,i={}){!function fq(n,t,e,i={}){(n=(0,K.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jh("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Jh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cE(cE.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:(0,K.Sg)(i.mockUserToken,n.app.options.projectId);s=new cE(a)}!function uee(n,t,e,i){n.repoInfo_=new cL(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,K.Dv)("database.ref",0,1,arguments.length),t instanceof eu){const e=nq(this._delegate,t.toString());return new eu(this,e)}{const e=tq(this._delegate,t);return new eu(this,e)}}refFromURL(t){(0,K.Dv)("database.refFromURL",1,1,arguments.length);const i=nq(this._delegate,t);return new eu(this,i)}goOffline(){return(0,K.Dv)("database.goOffline",0,0,arguments.length),function _ee(n){(n=(0,K.m9)(n))._checkNotDeleted("goOffline"),$H(n._repo)}(this._delegate)}goOnline(){return(0,K.Dv)("database.goOnline",0,0,arguments.length),function vee(n){(n=(0,K.m9)(n))._checkNotDeleted("goOnline"),function SX(n){n.persistentConnection_&&n.persistentConnection_.resume(zH)}(n._repo)}(this._delegate)}}kE.ServerValue={TIMESTAMP:function Cee(){return bee}(),increment:n=>function Tee(n){return{".sv":{increment:n}}}(n)};var Ree=Object.freeze({__proto__:null,initStandalone:function Oee({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){c4(e);const a=new xl.zt("auth-internal",new xl.H0("database-standalone"));return a.setComponent(new xl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new kE(dq(n,a,void 0,t,s),n),namespace:r}}});const Nee=kE.ServerValue;function gq(n,t){return(0,Cu.m)(t)?Mi(()=>n,t):Mi(()=>n)}!function Lee(n){n.INTERNAL.registerComponent(new xl.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new kE(r,i)},"PUBLIC").setServiceProps({Reference:eu,Query:Ia,Database:kE,DataSnapshot:rm,enableLogging:yee,INTERNAL:Ree,ServerValue:Nee}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(cy.Z);const hF=new o.OlP("angularfire2.auth.use-emulator"),fF=new o.OlP("angularfire2.auth.settings"),pF=new o.OlP("angularfire2.auth.tenant-id"),gF=new o.OlP("angularfire2.auth.langugage-code"),mF=new o.OlP("angularfire2.auth.use-device-language"),_F=new o.OlP("angularfire.auth.persistence"),vF=(n,t,e,i,r,s,a,c)=>(0,Po.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const h=t.runOutsideAngular(()=>n.auth());if(e&&h.useEmulator(...e),i&&(h.tenantId=i),h.languageCode=r,s&&h.useDeviceLanguage(),a)for(const[p,v]of Object.entries(a))h.settings[p]=v;return c&&h.setPersistence(c),h},[e,i,r,s,a,c]);let OE=(()=>{class n{constructor(e,i,r,s,a,c,h,p,v,b,D,P){const R=new ns.x,F=Ht(void 0).pipe((0,Km.Q)(a.outsideAngular),Mi(()=>s.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,9568)))),(0,qt.U)(()=>(0,Po.on)(e,s,i)),(0,qt.U)(V=>vF(V,s,c,p,v,b,h,D)),yb({bufferSize:1,refCount:!1}));if(ol(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ht(null);else{F.pipe(va()).subscribe();const Q=F.pipe(Mi(de=>de.getRedirectResult().then(_e=>_e,()=>null)),Wn.iC,yb({bufferSize:1,refCount:!1})),te=F.pipe(Mi(de=>new Ti.y(_e=>({unsubscribe:s.runOutsideAngular(()=>de.onAuthStateChanged(ue=>_e.next(ue),ue=>_e.error(ue),()=>_e.complete()))})))),re=F.pipe(Mi(de=>new Ti.y(_e=>({unsubscribe:s.runOutsideAngular(()=>de.onIdTokenChanged(ue=>_e.next(ue),ue=>_e.error(ue),()=>_e.complete()))}))));this.authState=Q.pipe(gq(te),(0,ty.R)(a.outsideAngular),(0,Km.Q)(a.insideAngular)),this.user=Q.pipe(gq(re),(0,ty.R)(a.outsideAngular),(0,Km.Q)(a.insideAngular)),this.idToken=this.user.pipe(Mi(de=>de?(0,ai.D)(de.getIdToken()):Ht(null))),this.idTokenResult=this.user.pipe(Mi(de=>de?(0,ai.D)(de.getIdTokenResult()):Ht(null))),this.credential=(0,ey.T)(Q,R,this.authState.pipe(is(de=>!de))).pipe((0,qt.U)(de=>de?.user?de:null),(0,ty.R)(a.outsideAngular),(0,Km.Q)(a.insideAngular))}return(0,Po.pX)(this,F,s,{spy:{apply:(V,Q,te)=>{(V.startsWith("signIn")||V.startsWith("createUser"))&&te.then(re=>R.next(re))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Po.Dh),o.LFG(Po.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wn.HU),o.LFG(hF,8),o.LFG(fF,8),o.LFG(pF,8),o.LFG(gF,8),o.LFG(mF,8),o.LFG(_F,8),o.LFG(Wf,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function mq(n){return null==n}function _q(n){return"function"==typeof n.set}function vq(n,t){return _q(t)?t:n.ref(t)}function yq(n,t){if(function Uee(n){return"string"==typeof n}(n))return t.stringCase();if(_q(n))return t.firebaseCase();if(function Bee(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function RE(n,t,e="on",i=Xv.z){return new Ti.y(r=>{let s=null;return s=n[e](t,(a,c)=>{i.schedule(()=>{r.next({snapshot:a,prevKey:c})}),"once"===e&&i.schedule(()=>r.complete())},a=>{i.schedule(()=>r.error(a))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,qt.U)(r=>{const{snapshot:s,prevKey:a}=r;let c=null;return s.exists()&&(c=s.key),{type:t,payload:s,prevKey:a,key:c}}),(0,vb.B)())}function wq(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function zee(n,t){const{payload:e,prevKey:i,key:r}=t,s=wq(n,r),a=function Zee(n,t){if(mq(t))return 0;{const e=wq(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let c=null;t.payload.forEach(h=>{const p={payload:h,type:"value",prevKey:c,key:h.key};return c=h.key,n=[...n,p],!1})}return n;case"child_added":if(s>-1){const c=n[s-1];(c&&c.key||null)!==i&&(n=n.filter(h=>h.payload.key!==e.key)).splice(a,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(a,0,t)}return n;case"child_removed":return n.filter(c=>c.payload.key!==e.key);case"child_changed":return n.map(c=>c.payload.key===r?t:c);case"child_moved":if(s>-1){const c=n.splice(s,1)[0];return(n=n.slice()).splice(a,0,c),n}return n;default:return n}}function bq(n){return(mq(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Cq(n,t,e){return function Vee(n,t,e){return RE(n,"value","once",e).pipe(Mi(i=>{const r=[Ht(i)];return t.forEach(s=>r.push(RE(n,s,"on",e))),(0,ey.T)(...r).pipe(Eu(zee,[]))}),wb())}(n,t=bq(t),e)}function Tq(n,t,e){const i=(t=bq(t)).map(r=>RE(n,r,"on",e));return(0,ey.T)(...i)}function Eq(n,t){return function(i,r){return yq(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function Wee(n){return function(e){return e?yq(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Dq(n,t){return function(){return RE(n,"value","on",t)}}const Yee=new o.OlP("angularfire2.realtimeDatabaseURL"),Kee=new o.OlP("angularfire2.database.use-emulator");let Qee=(()=>{class n{constructor(e,i,r,s,a,c,h,p,v,b,D,P,R,F,V){this.schedulers=c;const Q=h,te=(0,Po.on)(e,a,i);p&&vF(te,a,v,D,P,R,b,F),this.database=(0,Po.cc)(`${te.name}.database.${r}`,"AngularFireDatabase",te.name,()=>{const re=a.runOutsideAngular(()=>te.database(r||void 0));return Q&&re.useEmulator(...Q),re},[Q])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>vq(this.database,e));let s=r;return i&&(s=i(r)),function $ee(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Eq(i,"update"),set:Eq(i,"set"),push:r=>i.push(r),remove:Wee(i),snapshotChanges:r=>Cq(n,r,e).pipe(Wn.iC),stateChanges:r=>Tq(n,r,e).pipe(Wn.iC),auditTrail:r=>function Hee(n,t,e){return function jee(n,t,e){return function qee(n,t){return RE(n,"value","on",t).pipe((0,qt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function ZK(...n){const t=(0,Qs.jO)(n);return(0,Sr.e)((e,i)=>{const r=n.length,s=new Array(r);let a=n.map(()=>!1),c=!1;for(let h=0;h<r;h++)(0,bl.Xf)(n[h]).subscribe((0,fr.x)(i,p=>{s[h]=p,!c&&!a[h]&&(a[h]=!0,(c=a.every(Xl.y))&&(a=null))},_b.Z));e.subscribe((0,fr.x)(i,h=>{if(c){const p=[h,...s];i.next(t?t(...p):p)}}))})}(t),(0,qt.U)(([r,s])=>{const a=r.lastKeyToLoad,c=s.map(h=>h.key);return{actions:s,lastKeyToLoad:a,loadedKeys:c}}),function zK(n){return(0,Sr.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,fr.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,qt.U)(r=>r.actions))}(n,Tq(n,t).pipe(Eu((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Wn.iC),valueChanges:(r,s)=>Cq(n,r,e).pipe((0,qt.U)(c=>c.map(h=>s&&s.idField?Object.assign(Object.assign({},h.payload.val()),{[s.idField]:h.key}):h.payload.val())),Wn.iC)}}(s,this)}object(e){return function Gee(n,t){return{query:n,snapshotChanges:()=>Dq(n,t.schedulers.outsideAngular)().pipe(Wn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Dq(n,t.schedulers.outsideAngular)().pipe(Wn.iC,(0,qt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>vq(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Po.Dh),o.LFG(Po.xv,8),o.LFG(Yee,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wn.HU),o.LFG(Kee,8),o.LFG(OE,8),o.LFG(hF,8),o.LFG(fF,8),o.LFG(pF,8),o.LFG(gF,8),o.LFG(mF,8),o.LFG(_F,8),o.LFG(Wf,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Jee=(()=>{class n{constructor(){SC.Z.registerVersion("angularfire",Wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Qee]}),n})();function yF(){return(0,Sr.e)((n,t)=>{let e,i=!1;n.subscribe((0,fr.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function wF(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new dt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function xq(){if(typeof Uint8Array>"u")throw new dt("unimplemented","Uint8Arrays are not available in this environment.")}function Aq(){if(!function d9(){return typeof atob<"u"}())throw new dt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class NE{constructor(t){this._delegate=t}static fromBase64String(t){return Aq(),new NE(Qh.fromBase64String(t))}static fromUint8Array(t){return xq(),new NE(Qh.fromUint8Array(t))}toBase64(){return Aq(),this._delegate.toBase64()}toUint8Array(){return xq(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bF(n){return function tte(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class nte{enableIndexedDbPersistence(t,e){return function UY(n,t){L6(n=Di(n,ro));const e=ls(n);if(e._uninitializedComponentsProvider)throw new dt(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");Zu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new B0;return N6(e,r,new R2(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function BY(n){L6(n=Di(n,ro));const t=ls(n);if(t._uninitializedComponentsProvider)throw new dt(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");Zu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings(),i=new B0;return N6(t,i,new m6(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function VY(n){if(n._initialized&&!n._terminated)throw new dt(Ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(e=(0,be.Z)(function*(i){if(!Ud.D())return Promise.resolve();const r=i+"main";yield Ud.delete(r)}),function(i){return e.apply(this,arguments)})(DN(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Iq{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Og||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){P6(this._delegate,t,e,i)}enableNetwork(){return function zY(n){return function xY(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield y6(n),e=yield w6(n);return t.setNetworkEnabled(!0),function(i){const r=Bt(i);return r.vu.delete(0),WT(r)}(e)}))}(ls(n=Di(n,ro)))}(this._delegate)}disableNetwork(){return function HY(n){return function AY(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield y6(n),e=yield w6(n);return t.setNetworkEnabled(!1),(i=(0,be.Z)(function*(r){const s=Bt(r);s.vu.add(0),yield k0(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(ls(n=Di(n,ro)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,x6("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ZY(n){return function(t){const e=new Fs;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function cY(n,t){return v2.apply(this,arguments)}(yield Z2(t),e)})),e.promise}(ls(n=Di(n,ro)))}(this._delegate)}onSnapshotsInSync(t){return function gK(n,t){return function MY(n,t){const e=new HI(t);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return i=yield V0(n),r=e,Bt(i).ku.add(r),void r.next();var i,r})),()=>{e.Dc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return i=yield V0(n),r=e,void Bt(i).ku.delete(r);var i,r}))}}(ls(n=Di(n,ro)),W2(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new dt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new nw(this,q2(this._delegate,t))}catch(e){throw Pl(e,"collection()","Firestore.collection()")}}doc(t){try{return new Wu(this,KT(this._delegate,t))}catch(e){throw Pl(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new kl(this,function RY(n,t){if(n=Di(n,YT),H2("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new dt(Ze.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Aa(n,null,(e=t,new ip(Oi.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Pl(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function AK(n,t,e){n=Di(n,ro);const i=Object.assign(Object.assign({},DK),e);return function(r){if(r.maxAttempts<1)throw new dt(Ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,a){const c=new Fs;return r.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const h=yield b6(r);new EY(r.asyncQueue,h,a,s,c).run()})),c.promise}(ls(n),r=>t(new xK(n,r)),i)}(this._delegate,e=>t(new Sq(this,e)))}batch(){return ls(this._delegate),new Mq(new r4(this._delegate,t=>H0(this._delegate,t)))}loadBundle(t){return function qY(n,t){const e=ls(n=Di(n,ro)),i=new LY;return function PY(n,t,e,i){const r=function(s,a){let c;return c="string"==typeof s?jZ().encode(s):s,h=function(h,p){if(h instanceof Uint8Array)return _6(h,p);if(h instanceof ArrayBuffer)return _6(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new CY(h,a);var h}(e,jT(t));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function wY(n,t,e){const i=Bt(n);var r;(r=(0,be.Z)(function*(s,a,c){try{const h=yield a.getMetadata();if(yield function(D,P){const R=Bt(D),F=as(P.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",V=>R.qs.getBundleMetadata(V,P.id)).then(V=>!!V&&V.createTime.compareTo(F)>=0)}(s.localStore,h))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(D=h).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);c._updateProgress(a6(h));const p=new X8(h,s.localStore,a.serializer);let v=yield a.bc();for(;v;){const D=yield p.zu(v);D&&c._updateProgress(D),v=yield a.bc()}const b=yield p.complete();return yield ap(s,b.Ju,void 0),yield function(D,P){const R=Bt(D);return R.persistence.runTransaction("Save bundle","readwrite",F=>R.qs.saveBundleMetadata(F,P))}(s.localStore,h),c._completeWith(b.progress),Promise.resolve(b.Hu)}catch(h){return Zu("SyncEngine",`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}var D}),function(s,a,c){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Z2(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function jY(n,t){return function kY(n,t){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(e,i){const r=Bt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield WI(n),t)}))}(ls(n=Di(n,ro)),t).then(e=>e?new Aa(n,null,e.query):null)}(this._delegate,t).then(e=>e?new kl(this,e):null)}}class VS extends X2{constructor(t){super(),this.firestore=t}convertBytes(t){return new NE(new Qh(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Wu.forKey(e,this.firestore,null)}}class Sq{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new VS(t)}get(t){const e=uv(t);return this._delegate.get(e).then(i=>new LE(this._firestore,new cp(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=uv(t);return i?(wF("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=uv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=uv(t);return this._delegate.delete(e),this}}class Mq{constructor(t){this._delegate=t}set(t,e,i){const r=uv(t);return i?(wF("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=uv(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=uv(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class cv{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new rE(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new FE(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=cv.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new cv(t,new VS(t),e),r.set(e,s)),s}}cv.INSTANCES=new WeakMap;class Wu{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new VS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new dt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Wu(e,new io(e._delegate,i,new Ft(t)))}static forKey(t,e,i){return new Wu(e,new io(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new nw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new nw(this.firestore,q2(this._delegate,t))}catch(e){throw Pl(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,K.m9)(t))instanceof io&&k6(this._delegate,t)}set(t,e){e=wF("DocumentReference.set",e);try{return e?e4(this._delegate,t,e):e4(this._delegate,t)}catch(i){throw Pl(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?eL(this._delegate,t):eL(this._delegate,t,e,...i)}catch(r){throw Pl(r,"updateDoc()","DocumentReference.update()")}}delete(){return t4(this._delegate)}onSnapshot(...t){const e=Pq(t),i=kq(t,r=>new LE(this.firestore,new cp(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return z0(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function dK(n){n=Di(n,io);const t=Di(n.firestore,ro),e=ls(t),i=new jg(t);return function IY(n,t){const e=new Fs;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(i=(0,be.Z)(function*(r,s,a){try{const c=yield function(h,p){const v=Bt(h);return v.persistence.runTransaction("read document","readonly",b=>v.localDocuments.getDocument(b,p))}(r,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new dt(Ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=N0(c,`Failed to get document '${s} from cache`);a.reject(h)}}),function(r,s,a){return i.apply(this,arguments)})(yield WI(n),t,e);var i})),e.promise}(e,n._key).then(r=>new cp(t,i,n._key,r,new Q_(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function hK(n){n=Di(n,io);const t=Di(n.firestore,ro);return C6(ls(t),n._key,{source:"server"}).then(e=>tL(t,n,e))}(this._delegate):function uK(n){n=Di(n,io);const t=Di(n.firestore,ro);return C6(ls(t),n._key).then(e=>tL(t,n,e))}(this._delegate),e.then(i=>new LE(this.firestore,new cp(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Wu(this.firestore,this._delegate.withConverter(t?cv.getInstance(this.firestore,t):null))}}function Pl(n,t,e){return n.message=n.message.replace(t,e),n}function Pq(n){for(const t of n)if("object"==typeof t&&!bF(t))return t;return{}}function kq(n,t){var e,i;let r;return r=bF(n[0])?n[0]:bF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class LE{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Wu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return J6(this._delegate,t._delegate)}}class FE extends LE{data(t){const e=this._delegate.data(t);return function kG(n,t){n||en()}(void 0!==e),e}}class kl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new VS(t)}where(t,e,i){try{return new kl(this.firestore,Jc(this._delegate,iE(t,e,i)))}catch(r){throw Pl(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new kl(this.firestore,Jc(this._delegate,j6(t,e)))}catch(i){throw Pl(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new kl(this.firestore,Jc(this._delegate,function tK(n){return S6("limit",n),eS._create("limit",n,"F")}(t)))}catch(e){throw Pl(e,"limit()","Query.limit()")}}limitToLast(t){try{return new kl(this.firestore,Jc(this._delegate,function nK(n){return S6("limitToLast",n),eS._create("limitToLast",n,"L")}(t)))}catch(e){throw Pl(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new kl(this.firestore,Jc(this._delegate,function iK(...n){return tS._create("startAt",n,!0)}(...t)))}catch(e){throw Pl(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new kl(this.firestore,Jc(this._delegate,function rK(...n){return tS._create("startAfter",n,!1)}(...t)))}catch(e){throw Pl(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new kl(this.firestore,Jc(this._delegate,function oK(...n){return nS._create("endBefore",n,!1)}(...t)))}catch(e){throw Pl(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new kl(this.firestore,Jc(this._delegate,function sK(...n){return nS._create("endAt",n,!0)}(...t)))}catch(e){throw Pl(e,"endAt()","Query.endAt()")}}isEqual(t){return j2(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function fK(n){n=Di(n,Aa);const t=Di(n.firestore,ro),e=ls(t),i=new jg(t);return function SY(n,t){const e=new Fs;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(i=(0,be.Z)(function*(r,s,a){try{const c=yield LI(r,s,!0),h=new u6(s,c.ir),p=h.sc(c.documents),v=h.applyChanges(p,!1);a.resolve(v.snapshot)}catch(c){const h=N0(c,`Failed to execute query '${s} against cache`);a.reject(h)}}),function(r,s,a){return i.apply(this,arguments)})(yield WI(n),t,e);var i})),e.promise}(e,n._query).then(r=>new qg(t,i,n,r))}(this._delegate):"server"===t?.source?function pK(n){n=Di(n,Aa);const t=Di(n.firestore,ro),e=ls(t),i=new jg(t);return T6(e,n._query,{source:"server"}).then(r=>new qg(t,i,n,r))}(this._delegate):X6(this._delegate),e.then(i=>new CF(this.firestore,new qg(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=Pq(t),i=kq(t,r=>new CF(this.firestore,new qg(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return z0(this._delegate,e,i)}withConverter(t){return new kl(this.firestore,this._delegate.withConverter(t?cv.getInstance(this.firestore,t):null))}}class rte{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new FE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CF{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new kl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new FE(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new rte(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new FE(this._firestore,i))})}isEqual(t){return J6(this._delegate,t._delegate)}}class nw extends kl{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Wu(this.firestore,t):null}doc(t){try{return new Wu(this.firestore,void 0===t?KT(this._delegate):KT(this._delegate,t))}catch(e){throw Pl(e,"doc()","CollectionReference.doc()")}}add(t){return n4(this._delegate,t).then(e=>new Wu(this.firestore,e))}isEqual(t){return k6(this._delegate,t._delegate)}withConverter(t){return new nw(this.firestore,this._delegate.withConverter(t?cv.getInstance(this.firestore,t):null))}}function uv(n){return Di(n,io)}class TF{constructor(...t){this._delegate=new lp(...t)}static documentId(){return new TF(qo.keyField().canonicalString())}isEqual(t){return(t=(0,K.m9)(t))instanceof lp&&this._delegate._internalPath.isEqual(t._internalPath)}}class dv{constructor(t){this._delegate=t}static serverTimestamp(){const t=function SK(){return new $2("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new dv(t)}static delete(){const t=function IK(){return new JT("deleteField")}();return t._methodName="FieldValue.delete",new dv(t)}static arrayUnion(...t){const e=function MK(...n){return new KY("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new dv(e)}static arrayRemove(...t){const e=function PK(...n){return new QY("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new dv(e)}static increment(t){const e=function kK(n){return new JY("increment",n)}(t);return e._methodName="FieldValue.increment",new dv(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const ote={Firestore:Iq,GeoPoint:GI,Timestamp:yo,Blob:NE,Transaction:Sq,WriteBatch:Mq,DocumentReference:Wu,DocumentSnapshot:LE,Query:kl,QueryDocumentSnapshot:FE,QuerySnapshot:CF,CollectionReference:nw,FieldPath:TF,FieldValue:dv,setLogLevel:function ite(n){!function PG(n){Ig.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Oq(n,t){return function lte(n,t=Xv.z){return new Ti.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function EF(n,t){return Oq(n,t).pipe((0,qt.U)(e=>({payload:e,type:"query"})))}function ZS(n,t){return EF(n,t).pipe(_a(void 0),yF(),(0,qt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(a=>({type:a.type,payload:a}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const h=r.find(v=>v.doc.ref.isEqual(a.ref)),p=e?.payload.docs.find(v=>v.ref.isEqual(a.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(a.metadata)||!h&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Rq(n,t,e){return ZS(n,e).pipe(Eu((i,r)=>function ute(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function dte(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return DF(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return DF(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return DF(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),wb(),(0,qt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function DF(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function Nq(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ate(n){(function ste(n,t){n.INTERNAL.registerComponent(new xl.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},ote)))})(n,(t,e)=>new Iq(t,e,new nte)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(cy.Z);class Lq{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=ZS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,qt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(_a(void 0),yF(),is(([i,r])=>r.length>0||!i),(0,qt.U)(([i,r])=>r),Wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Eu((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=Nq(t);return Rq(this.query,e,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(t={}){return EF(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Wn.iC)}get(t){return(0,ai.D)(this.query.get(t)).pipe(Wn.iC)}add(t){return this.ref.add(t)}doc(t){return new Fq(this.ref.doc(t),this.afs)}}class Fq{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=Vq(i,e);return new Lq(r,s,this.afs)}snapshotChanges(){return function cte(n,t){return Oq(n,t).pipe(_a(void 0),yF(),(0,qt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,qt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,ai.D)(this.ref.get(t)).pipe(Wn.iC)}}class hte{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ZS(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),is(e=>e.length>0),Wn.iC):ZS(this.query,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Eu((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=Nq(t);return Rq(this.query,e,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(t={}){return EF(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Wn.iC)}get(t){return(0,ai.D)(this.query.get(t)).pipe(Wn.iC)}}const Uq=new o.OlP("angularfire2.enableFirestorePersistence"),Bq=new o.OlP("angularfire2.firestore.persistenceSettings"),fte=new o.OlP("angularfire2.firestore.settings"),pte=new o.OlP("angularfire2.firestore.use-emulator");function Vq(n,t=(e=>e)){return{query:t(n),ref:n}}let Zq=(()=>{class n{constructor(e,i,r,s,a,c,h,p,v,b,D,P,R,F,V,Q,te){this.schedulers=h;const re=(0,Po.on)(e,c,i),de=v;b&&vF(re,c,D,R,F,V,P,Q),[this.firestore,this.persistenceEnabled$]=(0,Po.cc)(`${re.name}.firestore`,"AngularFirestore",re.name,()=>{const _e=c.runOutsideAngular(()=>re.firestore());if(s&&_e.settings(s),de&&_e.useEmulator(...de),r&&!ol(a)){const ue=()=>{try{return(0,ai.D)(_e.enablePersistence(p||void 0).then(()=>!0,()=>!1))}catch(pe){return typeof console<"u"&&console.warn(pe),Ht(!1)}};return[_e,c.runOutsideAngular(ue)]}return[_e,Ht(!1)]},[s,de,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:a}=Vq(r,i),c=this.schedulers.ngZone.run(()=>s);return new Lq(c,a,this)}collectionGroup(e,i){const r=i||(a=>a),s=this.firestore.collectionGroup(e);return new hte(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new Fq(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Po.Dh),o.LFG(Po.xv,8),o.LFG(Uq,8),o.LFG(fte,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Wn.HU),o.LFG(Bq,8),o.LFG(pte,8),o.LFG(OE,8),o.LFG(hF,8),o.LFG(fF,8),o.LFG(pF,8),o.LFG(gF,8),o.LFG(mF,8),o.LFG(_F,8),o.LFG(Wf,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gte=(()=>{class n{constructor(){SC.Z.registerVersion("angularfire",Wn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:Uq,useValue:!0},{provide:Bq,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Zq]}),n})();const zq_firebase={apiKey:"AIzaSyAOsw9i6F61js3aCbwPj5rsEFnApjQnlEQ",authDomain:"estateagent-2da55.firebaseapp.com",projectId:"estateagent-2da55",storageBucket:"estateagent-2da55.appspot.com",messagingSenderId:"791145182474",appId:"1:791145182474:web:9dc937800c64e7ed2036f3",measurementId:"G-F0XSWR6LGP"};class zS{}class xF{}class hp{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),a=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(s=>s.toString()),r.length>0){const s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof hp?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new hp;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof hp?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let a=this.headers.get(e);if(!a)return;a=a.filter(c=>-1===s.indexOf(c)),0===a.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class mte{encodeKey(t){return Hq(t)}encodeValue(t){return Hq(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const vte=/%(\d[a-f0-9])/gi,yte={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hq(n){return encodeURIComponent(n).replace(vte,(t,e)=>yte[e]??t)}function HS(n){return`${n}`}class om{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new mte,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _te(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[a,c]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],h=e.get(a)||[];h.push(c),e.set(a,h)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(HS):[HS(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new om({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(HS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(HS(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class wte{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qq(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function jq(n){return typeof Blob<"u"&&n instanceof Blob}function Wq(n){return typeof FormData<"u"&&n instanceof FormData}class UE{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function bte(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new hp),this.context||(this.context=new wte),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=e;else{const c=e.indexOf("?");this.urlWithParams=e+(-1===c?"?":c<e.length-1?"&":"")+a}}else this.params=new om,this.urlWithParams=e}serializeBody(){return null===this.body?null:qq(this.body)||jq(this.body)||Wq(this.body)||function Cte(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof om?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Wq(this.body)?null:jq(this.body)?this.body.type||null:qq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof om?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,c=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let h=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(h=Object.keys(t.setHeaders).reduce((b,D)=>b.set(D,t.setHeaders[D]),h)),t.setParams&&(p=Object.keys(t.setParams).reduce((b,D)=>b.set(D,t.setParams[D]),p)),new UE(e,i,s,{params:p,headers:h,context:v,reportProgress:c,responseType:r,withCredentials:a})}}var Cs=(()=>((Cs=Cs||{})[Cs.Sent=0]="Sent",Cs[Cs.UploadProgress=1]="UploadProgress",Cs[Cs.ResponseHeader=2]="ResponseHeader",Cs[Cs.DownloadProgress=3]="DownloadProgress",Cs[Cs.Response=4]="Response",Cs[Cs.User=5]="User",Cs))();class AF{constructor(t,e=200,i="OK"){this.headers=t.headers||new hp,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class IF extends AF{constructor(t={}){super(t),this.type=Cs.ResponseHeader}clone(t={}){return new IF({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class qS extends AF{constructor(t={}){super(t),this.type=Cs.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new qS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $q extends AF{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function SF(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let BE=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof UE)s=e;else{let h,p;h=r.headers instanceof hp?r.headers:new hp(r.headers),r.params&&(p=r.params instanceof om?r.params:new om({fromObject:r.params})),s=new UE(e,i,void 0!==r.body?r.body:null,{headers:h,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const a=Ht(s).pipe(Cl(h=>this.handler.handle(h)));if(e instanceof UE||"events"===r.observe)return a;const c=a.pipe(is(h=>h instanceof qS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe((0,qt.U)(h=>{if(null!==h.body&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return c.pipe((0,qt.U)(h=>{if(null!==h.body&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return c.pipe((0,qt.U)(h=>{if(null!==h.body&&"string"!=typeof h.body)throw new Error("Response is not a string.");return h.body}));default:return c.pipe((0,qt.U)(h=>h.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new om).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,SF(r,i))}post(e,i,r={}){return this.request("POST",e,SF(r,i))}put(e,i,r={}){return this.request("PUT",e,SF(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zS))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Gq(n,t){return t(n)}function Tte(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}const Dte=new o.OlP("HTTP_INTERCEPTORS"),VE=new o.OlP("HTTP_INTERCEPTOR_FNS");function xte(){let n=null;return(t,e)=>(null===n&&(n=((0,o.f3M)(Dte,{optional:!0})??[]).reduceRight(Tte,Gq)),n(t,e))}let Yq=(()=>{class n extends zS{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=Array.from(new Set(this.injector.get(VE)));this.chain=i.reduceRight((r,s)=>function Ete(n,t,e){return(i,r)=>e.runInContext(()=>t(i,s=>n(s,r)))}(r,s,this.injector),Gq)}return this.chain(e,i=>this.backend.handle(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(xF),o.LFG(o.lqb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Mte=/^\)\]\}',?\n/;let Qq=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ti.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((P,R)=>r.setRequestHeader(P,R.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const P=e.detectContentTypeHeader();null!==P&&r.setRequestHeader("Content-Type",P)}if(e.responseType){const P=e.responseType.toLowerCase();r.responseType="json"!==P?P:"text"}const s=e.serializeBody();let a=null;const c=()=>{if(null!==a)return a;const P=r.statusText||"OK",R=new hp(r.getAllResponseHeaders()),F=function Pte(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return a=new IF({headers:R,status:r.status,statusText:P,url:F}),a},h=()=>{let{headers:P,status:R,statusText:F,url:V}=c(),Q=null;204!==R&&(Q=typeof r.response>"u"?r.responseText:r.response),0===R&&(R=Q?200:0);let te=R>=200&&R<300;if("json"===e.responseType&&"string"==typeof Q){const re=Q;Q=Q.replace(Mte,"");try{Q=""!==Q?JSON.parse(Q):null}catch(de){Q=re,te&&(te=!1,Q={error:de,text:Q})}}te?(i.next(new qS({body:Q,headers:P,status:R,statusText:F,url:V||void 0})),i.complete()):i.error(new $q({error:Q,headers:P,status:R,statusText:F,url:V||void 0}))},p=P=>{const{url:R}=c(),F=new $q({error:P,status:r.status||0,statusText:r.statusText||"Unknown Error",url:R||void 0});i.error(F)};let v=!1;const b=P=>{v||(i.next(c()),v=!0);let R={type:Cs.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),"text"===e.responseType&&r.responseText&&(R.partialText=r.responseText),i.next(R)},D=P=>{let R={type:Cs.UploadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),i.next(R)};return r.addEventListener("load",h),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",b),null!==s&&r.upload&&r.upload.addEventListener("progress",D)),r.send(s),i.next({type:Cs.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",h),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",b),null!==s&&r.upload&&r.upload.removeEventListener("progress",D)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(fa))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const MF=new o.OlP("XSRF_ENABLED"),Jq=new o.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Xq=new o.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class e5{}let Rte=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=da(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee),o.LFG(o.Lbi),o.LFG(Jq))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Nte(n,t){const e=n.url.toLowerCase();if(!(0,o.f3M)(MF)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const i=(0,o.f3M)(e5).getToken(),r=(0,o.f3M)(Xq);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var cs=(()=>((cs=cs||{})[cs.Interceptors=0]="Interceptors",cs[cs.LegacyInterceptors=1]="LegacyInterceptors",cs[cs.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",cs[cs.NoXsrfProtection=3]="NoXsrfProtection",cs[cs.JsonpSupport=4]="JsonpSupport",cs[cs.RequestsMadeViaParent=5]="RequestsMadeViaParent",cs))();function iw(n,t){return{\u0275kind:n,\u0275providers:t}}function Lte(...n){const t=[BE,Qq,Yq,{provide:zS,useExisting:Yq},{provide:xF,useExisting:Qq},{provide:VE,useValue:Nte,multi:!0},{provide:MF,useValue:!0},{provide:e5,useClass:Rte}];for(const e of n)t.push(...e.\u0275providers);return(0,o.MR2)(t)}const t5=new o.OlP("LEGACY_INTERCEPTOR_FN");let Ute=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Lte(iw(cs.LegacyInterceptors,[{provide:t5,useFactory:xte},{provide:VE,useExisting:t5,multi:!0}]))]}),n})();const Bte=[];let Vte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Yv.forRoot(Bte),Yv]}),n})();class n5{constructor(t,e,i,r){this.email=t,this.id=e,this._token=i,this._tokenExpirationDate=r}get token(){return!this._token||new Date>this._tokenExpirationDate?null:this._token}}let hv=(()=>{class n{constructor(e,i,r,s){this.http=e,this.router=i,this.fb=r,this.authfb=s,this.user=new ns.x,this.getauth()}ngOnInit(){}signup(e,i,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAOsw9i6F61js3aCbwPj5rsEFnApjQnlEQ",{email:e,password:i,returnSecureToken:!0}).pipe(ks(this.handleError),(0,Fr.b)(s=>{this.handleAuth(s.email,s.localId,s.idToken,s.expiresIn)}))}signupAuth(e,i){return this.authfb.createUserWithEmailAndPassword(e,i)}signin(e,i){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAOsw9i6F61js3aCbwPj5rsEFnApjQnlEQ",{email:e,password:i,returnSecureToken:!0}).pipe(ks(this.handleError),(0,Fr.b)(r=>{this.handleAuth(r.email,r.localId,r.idToken,r.expiresIn),this.router.navigate(["/home"])}))}signinAuth(e,i){return this.authfb.signInWithEmailAndPassword(e,i).then(r=>{this.router.navigate(["/home"])})}handleAuth(e,i,r,s){const a=new Date((new Date).getTime()+1e3*parseInt(s)),c=new n5(e,i,r,a);this.user.next(c),this.autoLogout(1e3*parseInt(s)),localStorage.setItem("userData",JSON.stringify(r))}autoSignin(){const e=JSON.parse(localStorage.getItem("userData"));if(!e)return;const i=new n5(e.email,e.id,e._token,new Date(e._tokenExpirationDate));if(i.token){this.user.next(i);const r=new Date(e._tokenExpirationDate).getTime()-(new Date).getTime();this.autoLogout(r)}}logout(){this.user.next(null),this.router.navigate(["/loginAuth"]),localStorage.removeItem("userData"),localStorage.removeItem("position"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}logoutAuth(){this.authfb.signOut().then(()=>{}),this.router.navigate(["/loginAuth"]),localStorage.removeItem("userData"),localStorage.removeItem("position"),this.tokenExpirationTimer&&clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null}autoLogout(e){this.tokenExpirationTimer=setTimeout(()=>{this.authfb.signOut()},e)}handleError(e){let i="An unknown error occurred!";if(!e.error||!e.error.error)return ec(e);switch(e.error.error.message){case"EMAIL_NOT_FOUND":i="This email exists already.";break;case"INVALID_PASSWORD":i="This email does not exist.";break;case"USER_DISABLED":i="This password is not correct."}return ec(i)}getauth(){return(0,hA.o)().onAuthStateChanged(i=>{})}deleteAuth(e){return(0,be.Z)(function*(){})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(BE),o.LFG(rs),o.LFG(Po.Ot),o.LFG(OE))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PF(n){this.message=n}(PF.prototype=new Error).name="InvalidCharacterError";var i5=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var t=String(n).replace(/=+$/,"");if(t.length%4==1)throw new PF("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,r=0,s=0,a="";i=t.charAt(s++);~i&&(e=r%4?64*e+i:i,r++%4)?a+=String.fromCharCode(255&e>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function jS(n){this.message=n}(jS.prototype=new Error).name="InvalidTokenError";const WS=function zte(n,t){if("string"!=typeof n)throw new jS("Invalid token specified");var e=!0===(t=t||{}).header?0:1;try{return JSON.parse(function Zte(n){var t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(i5(t).replace(/(.)/g,function(i,r){var s=r.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch{return i5(t)}}(n.split(".")[e]))}catch(i){throw new jS("Invalid token specified: "+i.message)}};let Pr=(()=>{class n{constructor(e,i){this.fdb=e,this.ngFb=i,this.firebaseConfig={apiKey:"AIzaSyAOsw9i6F61js3aCbwPj5rsEFnApjQnlEQ",authDomain:"estateagent-2da55.firebaseapp.com",projectId:"estateagent-2da55",storageBucket:"estateagent-2da55.appspot.com",messagingSenderId:"791145182474",appId:"1:791145182474:web:9dc937800c64e7ed2036f3",measurementId:"G-F0XSWR6LGP"},this.app=(0,Sd.ZF)(this.firebaseConfig),this.dbs=O6(this.app)}ngOnInit(){throw new Error("Method not implemented.")}addData(e,i){var r=this;return(0,be.Z)(function*(){const s=$g(r.fdb,i);let c=(yield function mK(n){return function _K(n,t){const e=Di(n.firestore,ro),i=ls(e),r=function(s,a){const c=[];for(const h in s)Object.prototype.hasOwnProperty.call(s,h)&&c.push(a(s[h],h));return c}(t,(s,a)=>new N9(a,s._aggregateType,s._internalFieldPath));return function(s,a,c){const h=new Fs;return s.asyncQueue.enqueueAndForget((0,be.Z)(function*(){try{const p=yield b6(s);h.resolve(function L8(n,t,e){return FN.apply(this,arguments)}(p,a,c))}catch(p){h.reject(p)}})),h.promise}(i,n._query,r).then(s=>function(a,c,h){const p=new jg(a);return new WY(c,p,h)}(e,n,s))}(n,{count:new QT("count")})}(s)).data().count+1;const h=iL($g(r.fdb,"id")).id;return e.Id=h,e.id=c,n4($g(r.fdb,i),e)})()}deleteData(e,i){var r=this;return(0,be.Z)(function*(){let s;return z0(Jc($g(r.fdb,i),iE("landlordId","==",e.landlordId)),p=>{p.docs.forEach(v=>{s=v.id}),null===s?alert("this document is not exist."):t4(iL(r.fdb,i,s)).then(v=>{}).catch(v=>console.log(v))})})()}getData(e){var i=this;return(0,be.Z)(function*(){let r;r=yield $g(i.fdb,e);const s=Jc(r,j6("id","asc"));return yield X6(s)})()}updateData(e,i,r){var s=this;return(0,be.Z)(function*(){let a=e.id,c=$g(s.fdb,r),h=yield Jc(c,iE("id","==",a));console.log("next step ..."),z0(h,p=>{let v="";return p.docs.forEach(D=>{v=D.id}),eL(iL(s.fdb,r,v),i)})})()}addFieldData(){return(0,be.Z)(function*(){})()}storageData(e,i){var r=this;return(0,be.Z)(function*(){const a=Od(rC(r.app),e);yield function oO(n,t,e){return function tC(n,t,e){n._throwIfRoot("uploadBytes");const i=mx(n.storage,n._location,pg(),new ja(t,!0),e);return n.storage.makeRequestWithTokens(i,uc).then(r=>({metadata:r,ref:n}))}(n=(0,K.m9)(n),t,e)}(a,i).then(c=>alert("File is uploaded."))})()}getStorageData(e){var i=this;return(0,be.Z)(function*(){const s=Od(rC(i.app),e);return yield Nx(s)})()}deleteStorageData(e){var i=this;return(0,be.Z)(function*(){const s=Od(rC(i.app),e);yield _g(s).then(()=>alert("The item is deleted.")).catch(a=>alert(a))})()}updateFieldStatus(e,i,r){var s=this;return(0,be.Z)(function*(){let a="",c=$g(s.fdb,e);z0(yield Jc(c,iE("email","==",i)),p=>{a=p.docs[0].id.toString(),s.ngFb.collection(e).doc("/"+a).update({status:r}).then(()=>{console.log("done")}).catch(v=>{console.log("Error writing document: "+v)})})})()}updateFieldAuthorization(e,i,r){var s=this;return(0,be.Z)(function*(){let a="",c=$g(s.fdb,e);z0(yield Jc(c,iE("email","==",i)),p=>{a=p.docs[0].id.toString(),s.ngFb.collection(e).doc("/"+a).update({authori:r}).then(()=>{console.log("done")}).catch(v=>{console.log("Error writing document: "+v)})})})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(rS),o.LFG(Zq))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kF=(()=>{class n{constructor(e){this.dbService=e}ngOnInit(){}userDetails(){var e=this;return(0,be.Z)(function*(){let i;if(localStorage.getItem("userData")){let r=localStorage.getItem("userData"),a=WS(r).email;yield e.dbService.getData("usersDb").then(h=>{h.forEach(p=>{p.data().email==a&&(i={username:p.data().username,phonenumber:p.data().phonenumber,email:p.data().email,status:p.data().position})})})}return i})()}usersList(){var e=this;return(0,be.Z)(function*(){let i=[];return yield e.dbService.getData("usersDb").then(s=>{s.forEach(a=>{i.push(a.data())})}),i})()}checkUser(){var e=this;return(0,be.Z)(function*(){let i=!1;if(localStorage.getItem("userData")){let r=localStorage.getItem("userData"),a=WS(r).email;yield e.dbService.getData("usersDb").then(h=>{h.forEach(p=>{p.data().email==a&&"Admin"==p.data().position&&(i=!0)})})}return i})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rw=(()=>{class n{set RouteEdit(e){this.routeId=e}get RouteEdit(){return this.routeId}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hte(n,t){if(1&n&&(o.TgZ(0,"div",38),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.count)}}function qte(n,t){1&n&&(o.TgZ(0,"li",13)(1,"a",39)(2,"i",9),o._UZ(3,"img",40),o.qZA(),o.TgZ(4,"span",11),o._uU(5,"Setting"),o.qZA()()())}let jte=(()=>{class n{constructor(e,i,r,s,a,c){this.http=e,this.authService=i,this.authriService=r,this.dbService=s,this.router=a,this.routeService=c,this.title="estate",this.arrs=[],this.count=0,this.emailSignIn="user email",this.statusSinIn="active",this.authoriSinIn="",this._isAdmin=!1,this.fatchDataNoFilter(),this._isAdmin=!1,this.isAdminFunc()}ngOnInit(){this.userDataDetails(),this.onstatus()}fatchDataNoFilter(){var e=this;return(0,be.Z)(function*(){return yield e.http.get("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json").subscribe(i=>{e.arrs.push(Object.values(i));for(let r in e.arrs[0])e.count+=1})})()}userDataDetails(){var e=this;return(0,be.Z)(function*(){if(null!==localStorage.getItem("userData"))if(e._userData=JSON.parse(localStorage.getItem("userData")),e._userData){let i=WS(e._userData);e.emailSignIn=i.email,yield e.dbService.getData("usersDb").then(r=>{r.forEach(s=>{s.data().email==e.emailSignIn&&(s.data().authori=e._isAuthori)})})}else e.emailSignIn=""})()}isAdminFunc(){var e=this;return(0,be.Z)(function*(){e.authriService.checkUser()&&(e._isAdmin=yield e.authriService.checkUser())})()}onstatus(){if(null!==localStorage.getItem("userData"))if(this._userData=JSON.parse(localStorage.getItem("userData")),this._userData){let e=WS(this._userData);this.emailSignIn=e.email,this.dbService.getData("usersDb").then(i=>{i.forEach(r=>{r.data().email==this.emailSignIn&&(r.data().authori=this._isAuthori,this.routeService.RouteEdit=r.data().authori)})})}else this.emailSignIn=""}onlogout(){this.authService.logout(),this.emailSignIn=""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(BE),o.Y36(hv),o.Y36(kF),o.Y36(Pr),o.Y36(rs),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main"]],decls:79,vars:3,consts:[[1,"container-fluid"],[1,"row","flex-nowrap"],["id","sidebar",1,"bg-dark","col-auto","col-md-4","col-lg-3","min-vh-100","d-flex","flex-column","justify-content-between"],[1,"bg-dark","p-2"],["routerLink","not-found",1,"d-flex","text-decoration-none","mt-1","align-items-center","text-white"],[1,"fs-4","d-none","d-sm-inline"],[1,"nav","nav-pills","flex-column","mt-4"],["id","i_home",1,"nav-item","py-2","py-sm-0"],["href","#","routerLink","home",1,"nav-link","text-white"],[1,"fs-5","fa","fa-table-list"],["src","assets/images/homeIcon.png",2,"width","25px"],[1,"fs-6","ms-3","d-none","d-sm-inline"],["class","fs-6 ms-3 d-none d-sm-inline","id","notificationCount",4,"ngIf"],[1,"nav-item","py-2","py-sm-0"],["routerLink","landlords",1,"nav-link","text-white"],["src","assets/images/landlordIcon.png",2,"width","25px"],["href","#","routerLink","tenants",1,"nav-link","text-white"],["src","assets/images/tenantIcon.png",2,"width","25px"],["href","#","routerLink","properties",1,"nav-link","text-white"],["src","assets/images/propertyIcon.png",2,"width","25px"],["href","#","routerLink","others",1,"nav-link","text-white"],["src","assets/images/otherIcon.png",2,"width","25px"],["href","#","routerLink","money",1,"nav-link","text-white"],["src","assets/images/moneyIcon.png",2,"width","25px"],["href","#","routerLink","reports",1,"nav-link","text-white"],["src","assets/images/reportIcon.png",2,"width","25px"],["href","#","routerLink","charts",1,"nav-link","text-white"],["src","assets/images/chartIcon.png",2,"width","25px"],["class","nav-item py-2 py-sm-0",4,"ngIf"],[1,"userInfo"],[2,"color","white"],[1,"dropdown","bg-dark","p-3"],["routerLink","profile",1,"nav-link","text-white"],["src","assets/images/userIcon.png",2,"width","25px"],["id","logout",3,"click"],[1,"nav-link","text-white"],["src","assets/images/loginIcon.png",2,"width","25px"],["id","content",1,"p-3"],["id","notificationCount",1,"fs-6","ms-3","d-none","d-sm-inline"],["href","#","routerLink","setting",1,"nav-link","text-white"],["src","assets/images/settingIcon.png",2,"width","25px"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"span",5),o._uU(6,"Company Name"),o.qZA()(),o.TgZ(7,"ul",6)(8,"li",7)(9,"a",8)(10,"i",9),o._UZ(11,"img",10),o.qZA(),o.TgZ(12,"span",11),o._uU(13,"Home "),o.qZA(),o.YNc(14,Hte,2,1,"div",12),o.qZA()(),o.TgZ(15,"li",13)(16,"a",14)(17,"i",9),o._UZ(18,"img",15),o.qZA(),o.TgZ(19,"span",11),o._uU(20,"Landlodrd"),o.qZA()()(),o.TgZ(21,"li",13)(22,"a",16)(23,"i",9),o._UZ(24,"img",17),o.qZA(),o.TgZ(25,"span",11),o._uU(26,"Tenant"),o.qZA()()(),o.TgZ(27,"li",13)(28,"a",18)(29,"i",9),o._UZ(30,"img",19),o.qZA(),o.TgZ(31,"span",11),o._uU(32,"Property"),o.qZA()()(),o.TgZ(33,"li",13)(34,"a",20)(35,"i",9),o._UZ(36,"img",21),o.qZA(),o.TgZ(37,"span",11),o._uU(38,"Other"),o.qZA()()(),o.TgZ(39,"li",13)(40,"a",22)(41,"i",9),o._UZ(42,"img",23),o.qZA(),o.TgZ(43,"span",11),o._uU(44,"Money"),o.qZA()()(),o.TgZ(45,"li",13)(46,"a",24)(47,"i",9),o._UZ(48,"img",25),o.qZA(),o.TgZ(49,"span",11),o._uU(50,"Report"),o.qZA()()(),o.TgZ(51,"li",13)(52,"a",26)(53,"i",9),o._UZ(54,"img",27),o.qZA(),o.TgZ(55,"span",11),o._uU(56,"Charts"),o.qZA()()(),o.YNc(57,qte,6,0,"li",28),o.TgZ(58,"li")(59,"div",29)(60,"p",30),o._uU(61),o.qZA()()()()(),o.TgZ(62,"div",31)(63,"ul",6)(64,"li",13)(65,"a",32)(66,"i",9),o._UZ(67,"img",33),o.qZA(),o.TgZ(68,"span",11),o._uU(69,"Profile"),o.qZA()()(),o.TgZ(70,"li",13)(71,"div",34),o.NdJ("click",function(){return i.onlogout()}),o.TgZ(72,"a",35)(73,"i",9),o._UZ(74,"img",36),o.qZA(),o.TgZ(75,"span",11),o._uU(76,"Logout"),o.qZA()()()()()()(),o.TgZ(77,"div",37),o._UZ(78,"router-outlet"),o.qZA()()()),2&e&&(o.xp6(14),o.Q6J("ngIf",i.count>0),o.xp6(43),o.Q6J("ngIf",i._isAdmin),o.xp6(4),o.Oqu(i.emailSignIn))},dependencies:[si,Uw,Hm],styles:[".nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#61ae3d}#content[_ngcontent-%COMP%]{width:75%}#notificationCount[_ngcontent-%COMP%]{background-color:red;color:#fff;text-align:center;padding:.2rem .5rem;border-radius:60%;z-index:100}#login_row[_ngcontent-%COMP%]{display:flex;position:absolute}.card[_ngcontent-%COMP%]{position:fixed;width:300px;top:200px;left:40%}#errorText[_ngcontent-%COMP%]{top:30px;left:40%;width:300px;position:fixed}.form-control[_ngcontent-%COMP%]{margin-top:.8vh}#login_btn[_ngcontent-%COMP%]{margin-top:1rem;width:100%;padding:.4rem;font-size:16px}.backgroundImg[_ngcontent-%COMP%]{position:fixed;width:1000px;height:1000px;z-index:0}#logout[_ngcontent-%COMP%]{cursor:pointer}.userInfo[_ngcontent-%COMP%]{margin-top:5px;padding:10px;border:solid 1px white}@media only screen and (max-width:950px){.card[_ngcontent-%COMP%], #errorText[_ngcontent-%COMP%]{left:20%}}@media only screen and (max-width:650px){.userInfo[_ngcontent-%COMP%]{display:none}}"]}),n})(),Wte=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){this.authService.autoSignin()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hv))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"app-main")},dependencies:[jte]}),n})(),$te=(()=>{class n{constructor(e,i){this.dbService=e,this.http=i,this.date=new Date,this.getDataArr=[]}ngOnInit(){}getPropertyData(){var e=this;return(0,be.Z)(function*(){return yield e.dbService.getData("propertyDb")})()}getTenantData(){var e=this;return(0,be.Z)(function*(){return yield e.dbService.getData("tenantDb")})()}getPorpToNotificaion(){var e=this;return(0,be.Z)(function*(){let i=e.date.getUTCDate(),r=[];return yield e.getPropertyData().then(s=>{s.forEach(a=>{let h=new Date(a.data().date).getDate();i===h&&r.push(a.data())})}),yield r})()}getTenantToNotification(){var e=this;return(0,be.Z)(function*(){let i=[];return e.tenantarr=yield e.getTenantData().then(r=>{r.forEach(s=>{i.push(s.data())})}),yield i})()}getTenantNote(){var e=this;return(0,be.Z)(function*(){let i=[],r=[],s=[];yield e.getPorpToNotificaion().then(a=>{a.forEach(c=>{i.push(c)})}),yield e.getTenantToNotification().then(a=>{a.forEach(c=>s.push(c)),r=[]});for(let a of s)for(let c of i)a.curpostcode.toString()===c.postcode.toString()&&r.push({currentDayDate:(new Date).getUTCDate(),currentMonthDate:(new Date).getUTCMonth(),currentYearDate:(new Date).getUTCFullYear(),tfn:a.firstname,tln:a.lastname,postcode:c.postcode,rent:c.rent,schrent:c.charge,owner:c.owner,date:c.date});e.postData(r)})()}postData(e){var i=this;return(0,be.Z)(function*(){yield i.http.get("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json").subscribe(r=>{if(null===r)e.forEach(a=>{i.http.post("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json",a).subscribe(c=>{})});else{let a=Object.values(r),c=(new Date).getUTCDate(),h=(new Date).getUTCMonth(),p=(new Date).getFullYear(),v=!1;for(let b=0;b<a.length;b++){if(a[b].currentDayDate==c&&a[b].currentMonthDate==h&&a[b].currentYearDate==p){v=!1;break}v=!0}v&&e.forEach(b=>{i.http.post("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json",b).subscribe(D=>{})})}})})()}fetchData(e=10){var i=this;return(0,be.Z)(function*(){yield i.http.get("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json").subscribe(r=>{if(i.getDataArr.push(r),Object.keys(i.getDataArr[0]).length>e){let s=i.getDataArr[0],a=Object.values(i.getDataArr[0]);a.sort((h,p)=>Date.parse(p.date)-Date.parse(h.date));let c=a.slice(0,e);Object.fromEntries(Object.entries(s).filter(h=>{Object.values(c).includes(Object.values(h)[1])||i.deleteData(h[0])}))}})})()}deleteData(e){var i=this;return(0,be.Z)(function*(){null==e?yield i.http.delete("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json").subscribe(r=>{}):yield i.http.delete(`https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts/${e}.json`).subscribe(r=>{})})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pr),o.LFG(BE))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gte=(()=>{class n{calender(){const e=new Date,i=()=>{e.setDate(1);const r=document.querySelector(".days"),s=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),a=new Date(e.getFullYear(),e.getMonth(),0).getDate(),c=e.getDay(),p=7-new Date(e.getFullYear(),e.getMonth()+1,0).getDay()-1;document.querySelector(".date h1").innerHTML=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],document.querySelector(".date p").innerHTML=(new Date).toDateString();let b="";for(let D=c;D>0;D--)b+=`<div class="prev-date"\n        style="\n        background-color: transparent;\n        font-size: 12px;\n        margin: 0.3rem;\n        width: calc(20.2rem / 7);\n        height: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-shadow: 0 0.3rem 0.5rem rgba(0, 0, 0, 0.5);\n        transition: background-color 0.2s;\n        opacity: 0.5;\n        "\n\n        onmouseover="this.style.backgroundColor= '#383838';"\n        onmouseout="this.style.backgroundColor= 'transparent';"\n        >${a-D+1}</div>`;for(let D=1;D<=s;D++)D===(new Date).getDate()&&e.getMonth()===(new Date).getMonth()?b+=`<div class="today" style="\n\n          display: flex;\n          flex-wrap: wrap;\n          padding: 0.1rem;\n\n          background-color: #167e56;\n          font-size: 12px;\n          margin: 0.3rem;\n          width: calc(20.2rem / 7);\n          height: 2rem;\n\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          text-shadow: 0 0.3rem 0.5rem rgba(0, 0, 0, 0.5);\n          transition: background-color 0.2s;\n          "\n\n          onmouseover="this.style.backgroundColor= '#383838';"\n          onmouseout="this.style.backgroundColor= '#167e56';"\n\n          ">${D}</div>`:b+=`<div\n          style="\n          background-color: transparent;\n          font-size: 12px;\n          margin: 0.3rem;\n          width: calc(20.2rem / 7);\n          height: 2rem;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          text-shadow: 0 0.3rem 0.5rem rgba(0, 0, 0, 0.5);\n          transition: background-color 0.2s;\n          "\n          onmouseover="this.style.backgroundColor= '#383838';"\n          onmouseout="this.style.backgroundColor= 'transparent';"\n\n          >${D}</div>`;for(let D=1;D<=p;D++)b+=`<div class="next-date"\n        style="\n        background-color: transparent;\n        font-size: 12px;\n        margin: 0.3rem;\n        width: calc(20.2rem / 7);\n        height: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-shadow: 0 0.3rem 0.5rem rgba(0, 0, 0, 0.5);\n        transition: background-color 0.2s;\n        opacity: 0.5;\n        "\n\n          onmouseover="this.style.backgroundColor= '#383838';"\n          onmouseout="this.style.backgroundColor= 'transparent';"\n        >${D}</div>`,r.innerHTML=b};document.querySelector(".prev").addEventListener("click",()=>{e.setMonth(e.getMonth()-1),i()}),document.querySelector(".next").addEventListener("click",()=>{e.setMonth(e.getMonth()+1),i()}),i()}mouseover(){document.getElementById("hov").style.color="yellow"}mouseout(){document.getElementById("hov").style.color="white"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yte=(()=>{class n{constructor(e){this.calendar=e}ngOnInit(){this.calendar.calender()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Gte))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-calendar"]],decls:26,vars:0,consts:[[1,"container"],[1,"calendar"],[1,"month"],[1,"fas","fa-angle-left","prev"],["alt","arrowIcon","src","assets/images/arrowPrevIcon.png"],[1,"date"],[1,"fas","fa-angle-right","next"],["alt","arrowIcon","src","assets/images/arrowNextIcon.png"],[1,"weekdays"],[1,"days"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"i",3),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"div",5),o._UZ(6,"h1")(7,"p"),o.qZA(),o.TgZ(8,"i",6),o._UZ(9,"img",7),o.qZA()(),o.TgZ(10,"div",8)(11,"div"),o._uU(12,"Sun"),o.qZA(),o.TgZ(13,"div"),o._uU(14,"Mon"),o.qZA(),o.TgZ(15,"div"),o._uU(16,"Tue"),o.qZA(),o.TgZ(17,"div"),o._uU(18,"Wed"),o.qZA(),o.TgZ(19,"div"),o._uU(20,"Thu"),o.qZA(),o.TgZ(21,"div"),o._uU(22,"Fri"),o.qZA(),o.TgZ(23,"div"),o._uU(24,"Sat"),o.qZA()(),o._UZ(25,"div",9),o.qZA()())},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Quicksand,sans-serif}.container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#12121f;color:#eee;display:flex;justify-content:center;align-items:center}.calendar[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#222227;box-shadow:0 .5rem 3rem #0006}.month[_ngcontent-%COMP%]{width:100%;height:5rem;background-color:#167e56;display:flex;justify-content:space-between;align-items:center;padding:0 2rem;text-align:center;text-shadow:0 .3rem .5rem rgba(0,0,0,.5)}.month[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;cursor:pointer}.month[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem;text-transform:uppercase;letter-spacing:.1rem;margin-bottom:.2rem}.month[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.weekdays[_ngcontent-%COMP%]{width:100%;height:2rem;padding:1.5rem .4rem;display:flex;align-items:center}.weekdays[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.1rem;width:calc(30.2rem / 7);display:flex;justify-content:center;align-items:center;text-shadow:0 .3rem .5rem rgba(0,0,0,.5)}.days[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;padding:.2rem}.days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.9rem;margin:.3rem;width:calc(30.2rem / 7);height:5rem;display:flex;justify-content:center;align-items:center;text-shadow:0 .3rem .5rem rgba(0,0,0,.5);transition:background-color .2s}.days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover:not(.today){background-color:#262626;border:.2rem solid #777;cursor:pointer}.prev-date[_ngcontent-%COMP%], .next-date[_ngcontent-%COMP%]{opacity:.5}.today[_ngcontent-%COMP%]{background-color:#167e56}"]}),n})();function ZE(n){return(ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Nt(n,t,e){return(t=function Qte(n){var t=function Kte(n,t){if("object"!==ZE(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,t||"default");if("object"!==ZE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===ZE(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ow(n){return n+.5|0}const fp=(n,t,e)=>Math.max(Math.min(n,e),t);function zE(n){return fp(ow(2.55*n),0,255)}function sm(n){return fp(ow(255*n),0,255)}function pp(n){return fp(ow(n/2.55)/100,0,1)}function r5(n){return fp(ow(100*n),0,100)}const $u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},OF=[..."0123456789ABCDEF"],Jte=n=>OF[15&n],Xte=n=>OF[(240&n)>>4]+OF[15&n],$S=n=>(240&n)>>4==(15&n),rne=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function o5(n,t,e){const i=t*Math.min(e,1-e),r=(s,a=(s+n/30)%12)=>e-i*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function one(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function sne(n,t,e){const i=o5(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function RF(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),a=Math.min(e,i,r),c=(s+a)/2;let h,p,v;return s!==a&&(v=s-a,p=c>.5?v/(2-s-a):v/(s+a),h=function ane(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}(e,i,r,v,s),h=60*h+.5),[0|h,p||0,c]}function NF(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(sm)}function LF(n,t,e){return NF(o5,n,t,e)}function s5(n){return(n%360+360)%360}const a5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},l5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let GS;const gne=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,FF=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,sw=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function YS(n,t,e){if(n){let i=RF(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=LF(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function c5(n,t){return n&&Object.assign(t||{},n)}function u5(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=sm(n[3]))):(t=c5(n,{r:0,g:0,b:0,a:1})).a=sm(t.a),t}function yne(n){return"r"===n.charAt(0)?function mne(n){const t=gne.exec(n);let i,r,s,e=255;if(t){if(t[7]!==i){const a=+t[7];e=t[8]?zE(a):fp(255*a,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?zE(i):fp(i,0,255)),r=255&(t[4]?zE(r):fp(r,0,255)),s=255&(t[6]?zE(s):fp(s,0,255)),{r:i,g:r,b:s,a:e}}}(n):function une(n){const t=rne.exec(n);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?zE(+t[5]):sm(+t[5]));const r=s5(+t[2]),s=+t[3]/100,a=+t[4]/100;return i="hwb"===t[1]?function lne(n,t,e){return NF(sne,n,t,e)}(r,s,a):"hsv"===t[1]?function cne(n,t,e){return NF(one,n,t,e)}(r,s,a):LF(r,s,a),{r:i[0],g:i[1],b:i[2],a:e}}(n)}class aw{constructor(t){if(t instanceof aw)return t;const e=typeof t;let i;"object"===e?i=u5(t):"string"===e&&(i=function tne(n){var e,t=n.length;return"#"===n[0]&&(4===t||5===t?e={r:255&17*$u[n[1]],g:255&17*$u[n[2]],b:255&17*$u[n[3]],a:5===t?17*$u[n[4]]:255}:(7===t||9===t)&&(e={r:$u[n[1]]<<4|$u[n[2]],g:$u[n[3]]<<4|$u[n[4]],b:$u[n[5]]<<4|$u[n[6]],a:9===t?$u[n[7]]<<4|$u[n[8]]:255})),e}(t)||function pne(n){GS||(GS=function fne(){const n={},t=Object.keys(l5),e=Object.keys(a5);let i,r,s,a,c;for(i=0;i<t.length;i++){for(a=c=t[i],r=0;r<e.length;r++)s=e[r],c=c.replace(s,a5[s]);s=parseInt(l5[a],16),n[c]=[s>>16&255,s>>8&255,255&s]}return n}(),GS.transparent=[0,0,0,0]);const t=GS[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||yne(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=c5(this._rgb);return t&&(t.a=pp(t.a)),t}set rgb(t){this._rgb=u5(t)}rgbString(){return this._valid?function _ne(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${pp(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function ine(n){var t=(n=>$S(n.r)&&$S(n.g)&&$S(n.b)&&$S(n.a))(n)?Jte:Xte;return n?"#"+t(n.r)+t(n.g)+t(n.b)+((n,t)=>n<255?t(n):"")(n.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function hne(n){if(!n)return;const t=RF(n),e=t[0],i=r5(t[1]),r=r5(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${pp(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const a=e===s?.5:e,c=2*a-1,h=i.a-r.a,p=((c*h==-1?c:(c+h)/(1+c*h))+1)/2;s=1-p,i.r=255&p*i.r+s*r.r+.5,i.g=255&p*i.g+s*r.g+.5,i.b=255&p*i.b+s*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function vne(n,t,e){const i=sw(pp(n.r)),r=sw(pp(n.g)),s=sw(pp(n.b));return{r:sm(FF(i+e*(sw(pp(t.r))-i))),g:sm(FF(r+e*(sw(pp(t.g))-r))),b:sm(FF(s+e*(sw(pp(t.b))-s))),a:n.a+e*(t.a-n.a)}}(this._rgb,t._rgb,e)),this}clone(){return new aw(this.rgb)}alpha(t){return this._rgb.a=sm(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ow(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return YS(this._rgb,2,t),this}darken(t){return YS(this._rgb,2,-t),this}saturate(t){return YS(this._rgb,1,t),this}desaturate(t){return YS(this._rgb,1,-t),this}rotate(t){return function dne(n,t){var e=RF(n);e[0]=s5(e[0]+t),e=LF(e),n.r=e[0],n.g=e[1],n.b=e[2]}(this._rgb,t),this}}function gp(){}const wne=(()=>{let n=0;return()=>n++})();function zi(n){return null===n||typeof n>"u"}function oo(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function xi(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function Wo(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function tu(n,t){return Wo(n)?n:t}function ci(n,t){return typeof n>"u"?t:n}const d5=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n;function qr(n,t,e){if(n&&"function"==typeof n.call)return n.apply(e,t)}function mr(n,t,e,i){let r,s,a;if(oo(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(xi(n))for(a=Object.keys(n),s=a.length,r=0;r<s;r++)t.call(e,n[a[r]],a[r])}function KS(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function QS(n){if(oo(n))return n.map(QS);if(xi(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=QS(n[e[r]]);return t}return n}function h5(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function Cne(n,t,e,i){if(!h5(n))return;const r=t[n],s=e[n];xi(r)&&xi(s)?HE(r,s,i):t[n]=QS(s)}function HE(n,t,e){const i=oo(t)?t:[t],r=i.length;if(!xi(n))return n;const s=(e=e||{}).merger||Cne;let a;for(let c=0;c<r;++c){if(a=i[c],!xi(a))continue;const h=Object.keys(a);for(let p=0,v=h.length;p<v;++p)s(h[p],n,a,e)}return n}function qE(n,t){return HE(n,t,{merger:Tne})}function Tne(n,t,e){if(!h5(n))return;const i=t[n],r=e[n];xi(i)&&xi(r)?qE(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=QS(r))}const f5={"":n=>n,x:n=>n.x,y:n=>n.y};function am(n,t){return(f5[t]||(f5[t]=function Dne(n){const t=function Ene(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}(n);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(n)}function UF(n){return n.charAt(0).toUpperCase()+n.slice(1)}const jE=n=>typeof n<"u",lm=n=>"function"==typeof n,p5=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0},Co=Math.PI,so=2*Co,Ane=so+Co,JS=Number.POSITIVE_INFINITY,Ine=Co/180,$o=Co/2,fv=Co/4,g5=2*Co/3,cm=Math.log10,tf=Math.sign;function WE(n,t,e){return Math.abs(n-t)<e}function m5(n){const t=Math.round(n);n=WE(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(cm(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function lw(n){return!isNaN(parseFloat(n))&&isFinite(n)}function _5(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Hd(n){return n*(Co/180)}function BF(n){return n*(180/Co)}function v5(n){if(!Wo(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function y5(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*Co&&(s+=so),{angle:s,distance:r}}function VF(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Pne(n,t){return(n-t+Ane)%so-Co}function nu(n){return(n%so+so)%so}function $E(n,t,e,i){const r=nu(n),s=nu(t),a=nu(e),c=nu(s-r),h=nu(a-r),p=nu(r-s),v=nu(r-a);return r===s||r===a||i&&s===a||c>h&&p<v}function aa(n,t,e){return Math.max(t,Math.min(e,n))}function mp(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ZF(n,t,e){e=e||(a=>n[a]<t);let s,i=n.length-1,r=0;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const _p=(n,t,e,i)=>ZF(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),One=(n,t,e)=>ZF(n,e,i=>n[i][t]>=e),w5=["push","pop","shift","splice","unshift"];function b5(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),!(i.length>0)&&(w5.forEach(s=>{delete n[s]}),delete n._chartjs)}function C5(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const T5=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function E5(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,T5.call(window,()=>{i=!1,n.apply(t,e)}))}}const zF=n=>"start"===n?"left":"end"===n?"right":"center",Qa=(n,t,e)=>"start"===n?t:"end"===n?e:(t+e)/2;function D5(n,t,e){const i=t.length;let r=0,s=i;if(n._sorted){const{iScale:a,_parsed:c}=n,h=a.axis,{min:p,max:v,minDefined:b,maxDefined:D}=a.getUserBounds();b&&(r=aa(Math.min(_p(c,a.axis,p).lo,e?i:_p(t,h,a.getPixelForValue(p)).lo),0,i-1)),s=D?aa(Math.max(_p(c,a.axis,v,!0).hi+1,e?0:_p(t,h,a.getPixelForValue(v),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function x5(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}const XS=n=>0===n||1===n,A5=(n,t,e)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*so/e),I5=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*so/e)+1,GE={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*$o),easeOutSine:n=>Math.sin(n*$o),easeInOutSine:n=>-.5*(Math.cos(Co*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>XS(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>XS(n)?n:A5(n,.075,.3),easeOutElastic:n=>XS(n)?n:I5(n,.075,.3),easeInOutElastic:n=>XS(n)?n:n<.5?.5*A5(2*n,.1125,.45):.5+.5*I5(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-GE.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*GE.easeInBounce(2*n):.5*GE.easeOutBounce(2*n-1)+.5};function HF(n){if(n&&"object"==typeof n){const t=n.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function S5(n){return HF(n)?n:new aw(n)}function qF(n){return HF(n)?n:new aw(n).saturate(.5).darken(.1).hexString()}const Une=["x","y","borderWidth","radius","tension"],Bne=["color","borderColor","backgroundColor"],M5=new Map;function YE(n,t,e){return function zne(n,t){t=t||{};const e=n+JSON.stringify(t);let i=M5.get(e);return i||(i=new Intl.NumberFormat(n,t),M5.set(e,i)),i}(t,e).format(n)}const P5={values:n=>oo(n)?n:""+n,numeric(n,t,e){if(0===n)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function Hne(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}(n,e)}const a=cm(Math.abs(s)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),h={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),YE(n,i,h)},logarithmic(n,t,e){if(0===n)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(cm(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?P5.numeric.call(this,n,t,e):""}};var eM={formatters:P5};const pv=Object.create(null),jF=Object.create(null);function KE(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function WF(n,t,e){return"string"==typeof t?HE(KE(n,t),e):HE(KE(n,""),t)}class jne{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>qF(r.backgroundColor),this.hoverBorderColor=(i,r)=>qF(r.borderColor),this.hoverColor=(i,r)=>qF(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return WF(this,t,e)}get(t){return KE(this,t)}describe(t,e){return WF(jF,t,e)}override(t,e){return WF(pv,t,e)}route(t,e,i,r){const s=KE(this,t),a=KE(this,i),c="_"+e;Object.defineProperties(s,{[c]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[c],p=a[r];return xi(h)?Object.assign({},p,h):ci(h,p)},set(h){this[c]=h}}})}apply(t){t.forEach(e=>e(this))}}var Go=new jne({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function Vne(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),n.set("animations",{colors:{type:"color",properties:Bne},numbers:{type:"number",properties:Une}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function Zne(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function qne(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:eM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function tM(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function $ne(n,t,e,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let a=0;const c=e.length;let h,p,v,b,D;for(h=0;h<c;h++)if(b=e[h],null==b||oo(b)){if(oo(b))for(p=0,v=b.length;p<v;p++)D=b[p],null!=D&&!oo(D)&&(a=tM(n,r,s,a,D))}else a=tM(n,r,s,a,b);n.restore();const P=s.length/2;if(P>e.length){for(h=0;h<P;h++)delete r[s[h]];s.splice(0,P)}return a}function gv(n,t,e){const i=n.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function k5(n,t){(t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function $F(n,t,e,i){O5(n,t,e,i,null)}function O5(n,t,e,i,r){let s,a,c,h,p,v,b,D;const P=t.pointStyle,R=t.rotation,F=t.radius;let V=(R||0)*Ine;if(P&&"object"==typeof P&&(s=P.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return n.save(),n.translate(e,i),n.rotate(V),n.drawImage(P,-P.width/2,-P.height/2,P.width,P.height),void n.restore();if(!(isNaN(F)||F<=0)){switch(n.beginPath(),P){default:r?n.ellipse(e,i,r/2,F,0,0,so):n.arc(e,i,F,0,so),n.closePath();break;case"triangle":v=r?r/2:F,n.moveTo(e+Math.sin(V)*v,i-Math.cos(V)*F),V+=g5,n.lineTo(e+Math.sin(V)*v,i-Math.cos(V)*F),V+=g5,n.lineTo(e+Math.sin(V)*v,i-Math.cos(V)*F),n.closePath();break;case"rectRounded":p=.516*F,h=F-p,a=Math.cos(V+fv)*h,b=Math.cos(V+fv)*(r?r/2-p:h),c=Math.sin(V+fv)*h,D=Math.sin(V+fv)*(r?r/2-p:h),n.arc(e-b,i-c,p,V-Co,V-$o),n.arc(e+D,i-a,p,V-$o,V),n.arc(e+b,i+c,p,V,V+$o),n.arc(e-D,i+a,p,V+$o,V+Co),n.closePath();break;case"rect":if(!R){h=Math.SQRT1_2*F,v=r?r/2:h,n.rect(e-v,i-h,2*v,2*h);break}V+=fv;case"rectRot":b=Math.cos(V)*(r?r/2:F),a=Math.cos(V)*F,c=Math.sin(V)*F,D=Math.sin(V)*(r?r/2:F),n.moveTo(e-b,i-c),n.lineTo(e+D,i-a),n.lineTo(e+b,i+c),n.lineTo(e-D,i+a),n.closePath();break;case"crossRot":V+=fv;case"cross":b=Math.cos(V)*(r?r/2:F),a=Math.cos(V)*F,c=Math.sin(V)*F,D=Math.sin(V)*(r?r/2:F),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+D,i-a),n.lineTo(e-D,i+a);break;case"star":b=Math.cos(V)*(r?r/2:F),a=Math.cos(V)*F,c=Math.sin(V)*F,D=Math.sin(V)*(r?r/2:F),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+D,i-a),n.lineTo(e-D,i+a),V+=fv,b=Math.cos(V)*(r?r/2:F),a=Math.cos(V)*F,c=Math.sin(V)*F,D=Math.sin(V)*(r?r/2:F),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+D,i-a),n.lineTo(e-D,i+a);break;case"line":a=r?r/2:Math.cos(V)*F,c=Math.sin(V)*F,n.moveTo(e-a,i-c),n.lineTo(e+a,i+c);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(V)*(r?r/2:F),i+Math.sin(V)*F);break;case!1:n.closePath()}n.fill(),t.borderWidth>0&&n.stroke()}}function vp(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function nM(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function iM(n){n.restore()}function Gne(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else"after"===r!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Yne(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Qne(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),a=t-s.actualBoundingBoxLeft,c=t+s.actualBoundingBoxRight,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(e-s.actualBoundingBoxAscent+p)/2:p;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(a,v),n.lineTo(c,v),n.stroke()}}function Jne(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function mv(n,t,e,i,r,s={}){const a=oo(t)?t:[t],c=s.strokeWidth>0&&""!==s.strokeColor;let h,p;for(n.save(),n.font=r.string,function Kne(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),zi(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}(n,s),h=0;h<a.length;++h)p=a[h],s.backdrop&&Jne(n,s.backdrop),c&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),zi(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(p,e,i,s.maxWidth)),n.fillText(p,e,i,s.maxWidth),Qne(n,e,i,p,s),i+=Number(r.lineHeight);n.restore()}function QE(n,t){const{x:e,y:i,w:r,h:s,radius:a}=t;n.arc(e+a.topLeft,i+a.topLeft,a.topLeft,-$o,Co,!0),n.lineTo(e,i+s-a.bottomLeft),n.arc(e+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Co,$o,!0),n.lineTo(e+r-a.bottomRight,i+s),n.arc(e+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,$o,0,!0),n.lineTo(e+r,i+a.topRight),n.arc(e+r-a.topRight,i+a.topRight,a.topRight,0,-$o,!0),n.lineTo(e+a.topLeft,i)}const Xne=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tie(n,t){const e=(""+n).match(Xne);if(!e||"normal"===e[1])return 1.2*t;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100}return t*n}const nie=n=>+n||0;function GF(n,t){const e={},i=xi(t),r=i?Object.keys(t):t,s=xi(n)?i?a=>ci(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of r)e[a]=nie(s(a));return e}function R5(n){return GF(n,{top:"y",right:"x",bottom:"y",left:"x"})}function _v(n){return GF(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ja(n){const t=R5(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Bs(n,t){let e=ci((n=n||{}).size,(t=t||Go.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=ci(n.style,t.style);i&&!(""+i).match(eie)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ci(n.family,t.family),lineHeight:tie(ci(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ci(n.weight,t.weight),string:""};return r.string=function Wne(n){return!n||zi(n.size)||zi(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(r),r}function JE(n,t,e,i){let s,a,c,r=!0;for(s=0,a=n.length;s<a;++s)if(c=n[s],void 0!==c&&(void 0!==t&&"function"==typeof c&&(c=c(t),r=!1),void 0!==e&&oo(c)&&(c=c[e%c.length],r=!1),void 0!==c))return i&&!r&&(i.cacheable=!1),c}function um(n,t){return Object.assign(Object.create(n),t)}function YF(n,t=[""],e,i,r=(()=>n[0])){const s=e||n;typeof i>"u"&&(i=B5("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:c=>YF([c,...n],t,s,i)};return new Proxy(a,{deleteProperty:(c,h)=>(delete c[h],delete c._keys,delete n[0][h],!0),get:(c,h)=>L5(c,h,()=>function die(n,t,e,i){let r;for(const s of t)if(r=B5(rie(s,n),e),typeof r<"u")return KF(n,r)?QF(e,i,n,r):r}(h,t,n,c)),getOwnPropertyDescriptor:(c,h)=>Reflect.getOwnPropertyDescriptor(c._scopes[0],h),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(c,h)=>V5(c).includes(h),ownKeys:c=>V5(c),set(c,h,p){const v=c._storage||(c._storage=r());return c[h]=v[h]=p,delete c._keys,!0}})}function cw(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:N5(n,i),setContext:s=>cw(n,s,e,i),override:s=>cw(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty:(s,a)=>(delete s[a],delete n[a],!0),get:(s,a,c)=>L5(s,a,()=>function oie(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=n;let c=i[t];return lm(c)&&a.isScriptable(t)&&(c=function sie(n,t,e,i){const{_proxy:r,_context:s,_subProxy:a,_stack:c}=e;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=t(s,a||i);return c.delete(n),KF(n,h)&&(h=QF(r._scopes,r,n,h)),h}(t,c,n,e)),oo(c)&&c.length&&(c=function aie(n,t,e,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:c}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(xi(t[0])){const h=t,p=r._scopes.filter(v=>v!==h);t=[];for(const v of h){const b=QF(p,r,n,v);t.push(cw(b,s,a&&a[n],c))}}return t}(t,c,n,a.isIndexable)),KF(t,c)&&(c=cw(c,r,s&&s[t],a)),c}(s,a,c)),getOwnPropertyDescriptor:(s,a)=>s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(s,a)=>Reflect.has(n,a),ownKeys:()=>Reflect.ownKeys(n),set:(s,a,c)=>(n[a]=c,delete s[a],!0)})}function N5(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:lm(e)?e:()=>e,isIndexable:lm(i)?i:()=>i}}const rie=(n,t)=>n?n+UF(t):t,KF=(n,t)=>xi(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function L5(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function F5(n,t,e){return lm(n)?n(t,e):n}const lie=(n,t)=>!0===n?t:"string"==typeof n?am(t,n):void 0;function cie(n,t,e,i,r){for(const s of t){const a=lie(e,s);if(a){n.add(a);const c=F5(a._fallback,e,r);if(typeof c<"u"&&c!==e&&c!==i)return c}else if(!1===a&&typeof i<"u"&&e!==i)return null}return!1}function QF(n,t,e,i){const r=t._rootScopes,s=F5(t._fallback,e,i),a=[...n,...r],c=new Set;c.add(i);let h=U5(c,a,e,s||e,i);return!(null===h||typeof s<"u"&&s!==e&&(h=U5(c,a,s,h,i),null===h))&&YF(Array.from(c),[""],r,s,()=>function uie(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return oo(r)&&xi(e)?e:r||{}}(t,e,i))}function U5(n,t,e,i,r){for(;e;)e=cie(n,t,e,i,r);return e}function B5(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function V5(n){let t=n._keys;return t||(t=n._keys=function hie(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}(n._scopes)),t}function Z5(n,t,e,i){const{iScale:r}=n,{key:s="r"}=this._parsing,a=new Array(i);let c,h,p,v;for(c=0,h=i;c<h;++c)p=c+e,v=t[p],a[c]={r:r.parse(am(v,s),p)};return a}const fie=Number.EPSILON||1e-14,uw=(n,t)=>t<n.length&&!n[t].skip&&n[t],z5=n=>"x"===n?"y":"x";function pie(n,t,e,i){const r=n.skip?t:n,s=t,a=e.skip?t:e,c=VF(s,r),h=VF(a,s);let p=c/(c+h),v=h/(c+h);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const b=i*p,D=i*v;return{previous:{x:s.x-b*(a.x-r.x),y:s.y-b*(a.y-r.y)},next:{x:s.x+D*(a.x-r.x),y:s.y+D*(a.y-r.y)}}}function rM(n,t,e){return Math.max(Math.min(n,e),t)}function yie(n,t,e,i,r){let s,a,c,h;if(t.spanGaps&&(n=n.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function _ie(n,t="x"){const e=z5(t),i=n.length,r=Array(i).fill(0),s=Array(i);let a,c,h,p=uw(n,0);for(a=0;a<i;++a)if(c=h,h=p,p=uw(n,a+1),h){if(p){const v=p[t]-h[t];r[a]=0!==v?(p[e]-h[e])/v:0}s[a]=c?p?tf(r[a-1])!==tf(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}(function gie(n,t,e){const i=n.length;let r,s,a,c,h,p=uw(n,0);for(let v=0;v<i-1;++v)if(h=p,p=uw(n,v+1),h&&p){if(WE(t[v],0,fie)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],c=Math.pow(r,2)+Math.pow(s,2),!(c<=9)&&(a=3/Math.sqrt(c),e[v]=r*a*t[v],e[v+1]=s*a*t[v])}})(n,r,s),function mie(n,t,e="x"){const i=z5(e),r=n.length;let s,a,c,h=uw(n,0);for(let p=0;p<r;++p){if(a=c,c=h,h=uw(n,p+1),!c)continue;const v=c[e],b=c[i];a&&(s=(v-a[e])/3,c[`cp1${e}`]=v-s,c[`cp1${i}`]=b-s*t[p]),h&&(s=(h[e]-v)/3,c[`cp2${e}`]=v+s,c[`cp2${i}`]=b+s*t[p])}}(n,s,t)}(n,r);else{let p=i?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)c=n[s],h=pie(p,c,n[Math.min(s+1,a-(i?0:1))%a],t.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,p=c}t.capBezierPoints&&function vie(n,t){let e,i,r,s,a,c=vp(n[0],t);for(e=0,i=n.length;e<i;++e)a=s,s=c,c=e<i-1&&vp(n[e+1],t),s&&(r=n[e],a&&(r.cp1x=rM(r.cp1x,t.left,t.right),r.cp1y=rM(r.cp1y,t.top,t.bottom)),c&&(r.cp2x=rM(r.cp2x,t.left,t.right),r.cp2y=rM(r.cp2y,t.top,t.bottom)))}(n,e)}function H5(){return typeof window<"u"&&typeof document<"u"}function JF(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function oM(n,t,e){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*t.parentNode[e])):i=n,i}const sM=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),bie=["top","right","bottom","left"];function vv(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=bie[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Cie=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function yv(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=sM(e),s="border-box"===r.boxSizing,a=vv(r,"padding"),c=vv(r,"border","width"),{x:h,y:p,box:v}=function Tie(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let c,h,a=!1;if(Cie(r,s,n.target))c=r,h=s;else{const p=t.getBoundingClientRect();c=i.clientX-p.left,h=i.clientY-p.top,a=!0}return{x:c,y:h,box:a}}(n,e),b=a.left+(v&&c.left),D=a.top+(v&&c.top);let{width:P,height:R}=t;return s&&(P-=a.width+c.width,R-=a.height+c.height),{x:Math.round((h-b)/P*e.width/i),y:Math.round((p-D)/R*e.height/i)}}const aM=n=>Math.round(10*n)/10;function q5(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(n.currentDevicePixelRatio=i,a.height=r,a.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0)}const xie=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function j5(n,t){const e=function wie(n,t){return sM(n).getPropertyValue(t)}(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function wv(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Aie(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:"middle"===i?e<.5?n.y:t.y:"after"===i?e<1?n.y:t.y:e>0?t.y:n.y}}function Iie(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},a=wv(n,r,e),c=wv(r,s,e),h=wv(s,t,e),p=wv(a,c,e),v=wv(c,h,e);return wv(p,v,e)}const Sie=function(n,t){return{x:e=>n+n+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}},Mie=function(){return{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:(n,t)=>n}};function dw(n,t,e){return n?Sie(t,e):Mie()}function W5(n,t){let e,i;("ltr"===t||"rtl"===t)&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function $5(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function G5(n){return"angle"===n?{between:$E,compare:Pne,normalize:nu}:{between:mp,compare:(t,e)=>t-e,normalize:t=>t}}function Y5({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e==0,style:r}}function K5(n,t,e){if(!e)return[n];const{property:i,start:r,end:s}=e,a=t.length,{compare:c,between:h,normalize:p}=G5(i),{start:v,end:b,loop:D,style:P}=function Pie(n,t,e){const{property:i,start:r,end:s}=e,{between:a,normalize:c}=G5(i),h=t.length;let D,P,{start:p,end:v,loop:b}=n;if(b){for(p+=h,v+=h,D=0,P=h;D<P&&a(c(t[p%h][i]),r,s);++D)p--,v--;p%=h,v%=h}return v<p&&(v+=h),{start:p,end:v,loop:b,style:n.style}}(n,t,e),R=[];let Q,te,re,F=!1,V=null;for(let Le=v,et=v;Le<=b;++Le)te=t[Le%a],!te.skip&&(Q=p(te[i]),Q!==re&&(F=h(Q,r,s),null===V&&(F||h(r,re,Q)&&0!==c(r,re))&&(V=0===c(Q,r)?Le:et),null!==V&&(!F||0===c(s,Q)||h(s,re,Q))&&(R.push(Y5({start:V,end:Le,loop:D,count:a,style:P})),V=null),et=Le,re=Q));return null!==V&&R.push(Y5({start:V,end:b,loop:D,count:a,style:P})),R}function Q5(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const s=K5(i[r],n.points,t);s.length&&e.push(...s)}return e}function X5(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Lie(n,t){if(!t)return!1;const e=[],i=function(r,s){return HF(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}class Fie{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const a=e.duration;e.listeners[r].forEach(c=>c({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=T5.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let h,a=s.length-1,c=!1;for(;a>=0;--a)h=s[a],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(t),c=!0):(s[a]=s[s.length-1],s.pop());c&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var yp=new Fie;const ej="transparent",Uie={boolean:(n,t,e)=>e>.5?t:n,color(n,t,e){const i=S5(n||ej),r=i.valid&&S5(t||ej);return r&&r.valid?r.mix(i,e).hexString():t},number:(n,t,e)=>n+(t-n)*e};class Bie{constructor(t,e,i,r){const s=e[i];r=JE([t.to,r,s,t.from]);const a=JE([t.from,s,r]);this._active=!0,this._fn=t.fn||Uie[t.type||typeof a],this._easing=GE[t.easing]||GE.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=JE([t.to,e,r,t.from]),this._from=JE([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,c=this._to;let h;if(this._active=s!==c&&(a||e<i),!this._active)return this._target[r]=c,void this._notify(!0);e<0?this._target[r]=s:(h=e/i%2,h=a&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[r]=this._fn(s,c,h))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class tj{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!xi(t))return;const e=Object.keys(Go.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!xi(s))return;const a={};for(const c of e)a[c]=s[c];(oo(s.properties)&&s.properties||[r]).forEach(c=>{(c===r||!i.has(c))&&i.set(c,a)})})}_animateOptions(t,e){const i=e.options,r=function Zie(n,t){if(!t)return;let e=n.options;if(e)return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;n.options=t}(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function Vie(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),a=Object.keys(e),c=Date.now();let h;for(h=a.length-1;h>=0;--h){const p=a[h];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let b=s[p];const D=i.get(p);if(b){if(D&&b.active()){b.update(D,v,c);continue}b.cancel()}D&&D.duration?(s[p]=b=new Bie(D,t,p,v),r.push(b)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(yp.add(this._chart,i),!0):void 0}}function nj(n,t){const e=n&&n.options||{},i=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:i?s:r,end:i?r:s}}function ij(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function rj(n,t,e,i={}){const r=n.keys,s="single"===i.mode;let a,c,h,p;if(null!==t){for(a=0,c=r.length;a<c;++a){if(h=+r[a],h===e){if(i.all)continue;break}p=n.values[h],Wo(p)&&(s||0===t||tf(t)===tf(p))&&(t+=p)}return t}}function oj(n,t){const e=n&&n.options.stacked;return e||void 0===e&&void 0!==t.stack}function $ie(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function sj(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function aj(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:a,index:c}=i,h=s.axis,p=a.axis,v=function jie(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}(s,a,i),b=t.length;let D;for(let P=0;P<b;++P){const R=t[P],{[h]:F,[p]:V}=R;D=(R._stacks||(R._stacks={}))[p]=$ie(r,v,F),D[c]=V,D._top=sj(D,a,!0,i.type),D._bottom=sj(D,a,!1,i.type),(D._visualValues||(D._visualValues={}))[c]=V}}function XF(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function XE(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][e])return;delete s[i][e],void 0!==s[i]._visualValues&&void 0!==s[i]._visualValues[e]&&delete s[i]._visualValues[e]}}}const eU=n=>"reset"===n||"none"===n,lj=(n,t)=>t?n:Object.assign({},n);let dm=(()=>{class n{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=oj(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&XE(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(D,P,R,F)=>"x"===D?P:"r"===D?F:R,a=i.xAxisID=ci(r.xAxisID,XF(e,"x")),c=i.yAxisID=ci(r.yAxisID,XF(e,"y")),h=i.rAxisID=ci(r.rAxisID,XF(e,"r")),p=i.indexAxis,v=i.iAxisID=s(p,a,c,h),b=i.vAxisID=s(p,c,a,h);i.xScale=this.getScaleForId(a),i.yScale=this.getScaleForId(c),i.rScale=this.getScaleForId(h),i.iScale=this.getScaleForId(v),i.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&b5(this._data,this),e._stacked&&XE(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(xi(i))this._data=function qie(n){const t=Object.keys(n),e=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],e[i]={x:s,y:n[s]};return e}(i);else if(r!==i){if(r){b5(r,this);const s=this._cachedMeta;XE(s),s._parsed=[]}i&&Object.isExtensible(i)&&function Nne(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),w5.forEach(e=>{const i="_onData"+UF(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return n._chartjs.listeners.forEach(c=>{"function"==typeof c[i]&&c[i](...s)}),a}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const a=i._stacked;i._stacked=oj(i.vScale,i),i.stack!==r.stack&&(s=!0,XE(i),i.stack=r.stack),this._resyncElements(e),(s||a!==i._stacked)&&aj(this,i._parsed)}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:r,_data:s}=this,{iScale:a,_stacked:c}=r,h=a.axis;let b,D,P,p=0===e&&i===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,P=s;else{P=oo(s[e])?this.parseArrayData(r,s,e,i):xi(s[e])?this.parseObjectData(r,s,e,i):this.parsePrimitiveData(r,s,e,i);const R=()=>null===D[h]||v&&D[h]<v[h];for(b=0;b<i;++b)r._parsed[b+e]=D=P[b],p&&(R()&&(p=!1),v=D);r._sorted=p}c&&aj(this,P)}parsePrimitiveData(e,i,r,s){const{iScale:a,vScale:c}=e,h=a.axis,p=c.axis,v=a.getLabels(),b=a===c,D=new Array(s);let P,R,F;for(P=0,R=s;P<R;++P)F=P+r,D[P]={[h]:b||a.parse(v[F],F),[p]:c.parse(i[F],F)};return D}parseArrayData(e,i,r,s){const{xScale:a,yScale:c}=e,h=new Array(s);let p,v,b,D;for(p=0,v=s;p<v;++p)b=p+r,D=i[b],h[p]={x:a.parse(D[0],b),y:c.parse(D[1],b)};return h}parseObjectData(e,i,r,s){const{xScale:a,yScale:c}=e,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let b,D,P,R;for(b=0,D=s;b<D;++b)P=b+r,R=i[P],v[b]={x:a.parse(am(R,h),P),y:c.parse(am(R,p),P)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){const a=this._cachedMeta,c=i[e.axis];return rj({keys:ij(this.chart,!0),values:i._stacks[e.axis]._visualValues},c,a.index,{mode:r})}updateRangeFromParsed(e,i,r,s){const a=r[i.axis];let c=null===a?NaN:a;const h=s&&r._stacks[i.axis];s&&h&&(s.values=h,c=rj(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,i){const r=this._cachedMeta,s=r._parsed,a=r._sorted&&e===r.iScale,c=s.length,h=this._getOtherScale(e),p=((n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:ij(this.chart,!0),values:null})(i,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:D}=function Wie(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(h);let P,R;function F(){R=s[P];const V=R[h.axis];return!Wo(R[e.axis])||b>V||D<V}for(P=0;P<c&&(F()||(this.updateRangeFromParsed(v,e,R,p),!a));++P);if(a)for(P=c-1;P>=0;--P)if(!F()){this.updateRangeFromParsed(v,e,R,p);break}return v}getAllParsedValues(e){const i=this._cachedMeta._parsed,r=[];let s,a,c;for(s=0,a=i.length;s<a;++s)c=i[s][e.axis],Wo(c)&&r.push(c);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,r=i.iScale,s=i.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function Hie(n){let t,e,i,r;return xi(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:!1===n}}(ci(this.options.clip,function zie(n,t,e){if(!1===e)return!1;const i=nj(n,e),r=nj(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],a=this.chart.chartArea,c=[],h=this._drawStart||0,p=this._drawCount||s.length-h,v=this.options.drawActiveElementsOnTop;let b;for(r.dataset&&r.dataset.draw(e,a,h,p),b=h;b<h+p;++b){const D=s[b];D.hidden||(D.active&&v?c.push(D):D.draw(e,a))}for(b=0;b<c.length;++b)c[b].draw(e,a)}getStyle(e,i){const r=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];a=c.$context||(c.$context=function Yie(n,t,e){return um(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,c)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function Gie(n,t){return um(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!i,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){const s="active"===i,a=this._cachedDataOpts,c=e+"-"+i,h=a[c],p=this.enableOptionSharing&&jE(r);if(h)return lj(h,p);const v=this.chart.config,b=v.datasetElementScopeKeys(this._type,e),D=s?[`${e}Hover`,"hover",e,""]:[e,""],P=v.getOptionScopes(this.getDataset(),b),R=Object.keys(Go.elements[e]),V=v.resolveNamedOptions(P,R,()=>this.getContext(r,s,i),D);return V.$shared&&(V.$shared=p,a[c]=Object.freeze(lj(V,p))),V}_resolveAnimations(e,i,r){const s=this.chart,a=this._cachedDataOpts,c=`animation-${i}`,h=a[c];if(h)return h;let p;if(!1!==s.options.animation){const b=this.chart.config,D=b.datasetAnimationScopeKeys(this._type,i),P=b.getOptionScopes(this.getDataset(),D);p=b.createResolver(P,this.getContext(e,r,i))}const v=new tj(s,p&&p.animations);return p&&p._cacheable&&(a[c]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||eU(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,a=this.getSharedOptions(r),c=this.includeOptions(i,a)||a!==s;return this.updateSharedOptions(a,i,r),{sharedOptions:a,includeOptions:c}}updateElement(e,i,r,s){eU(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!eU(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;const a=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,r=this._cachedMeta.data;for(const[h,p,v]of this._syncList)this[h](p,v);this._syncList=[];const s=r.length,a=i.length,c=Math.min(a,s);c&&this.parse(0,c),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,i,r=!0){const s=this._cachedMeta,a=s.data,c=e+i;let h;const p=v=>{for(v.length+=i,h=v.length-1;h>=c;h--)v[h]=v[h-i]};for(p(a),h=e;h<c;++h)a[h]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,i),r&&this.updateElements(a,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,i);r._stacked&&XE(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return Nt(n,"defaults",{}),Nt(n,"datasetElementType",null),Nt(n,"dataElementType",null),n})();function Jie(n){const t=n.iScale,e=function Qie(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=C5(i.sort((r,s)=>r-s))}return n._cache.$bar}(t,n.type);let r,s,a,c,i=t._length;const h=()=>{32767===a||-32768===a||(jE(c)&&(i=Math.min(i,Math.abs(a-c)||i)),c=a)};for(r=0,s=e.length;r<s;++r)a=t.getPixelForValue(e[r]),h();for(c=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),h();return i}function cj(n,t,e,i){return oo(n)?function tre(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),a=Math.min(r,s),c=Math.max(r,s);let h=a,p=c;Math.abs(a)>Math.abs(c)&&(h=c,p=a),t[e.axis]=p,t._custom={barStart:h,barEnd:p,start:r,end:s,min:a,max:c}}(n,t,e,i):t[e.axis]=e.parse(n,i),t}function uj(n,t,e,i){const r=n.iScale,s=n.vScale,a=r.getLabels(),c=r===s,h=[];let p,v,b,D;for(p=e,v=e+i;p<v;++p)D=t[p],b={},b[r.axis]=c||r.parse(a[p],p),h.push(cj(D,b,s,p));return h}function tU(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function rre(n,t,e,i){let r=t.borderSkipped;const s={};if(!r)return void(n.borderSkipped=s);if(!0===r)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:c,reverse:h,top:p,bottom:v}=function ire(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}(n);"middle"===r&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=p:(e._bottom||0)===i?r=v:(s[dj(v,a,c,h)]=!0,r=p)),s[dj(r,a,c,h)]=!0,n.borderSkipped=s}function dj(n,t,e,i){return i?(n=function ore(n,t,e){return n===t?e:n===e?t:n}(n,t,e),n=hj(n,e,t)):n=hj(n,t,e),n}function hj(n,t,e){return"start"===n?t:"end"===n?e:n}function sre(n,{inflateAmount:t},e){n.inflateAmount="auto"===t?1===e?.33:0:t}let are=(()=>{class n extends dm{parsePrimitiveData(e,i,r,s){return uj(e,i,r,s)}parseArrayData(e,i,r,s){return uj(e,i,r,s)}parseObjectData(e,i,r,s){const{iScale:a,vScale:c}=e,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,v="x"===a.axis?h:p,b="x"===c.axis?h:p,D=[];let P,R,F,V;for(P=r,R=r+s;P<R;++P)V=i[P],F={},F[a.axis]=a.parse(am(V,v),P),D.push(cj(am(V,b),F,c,P));return D}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);const a=r._custom;a&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:r,vScale:s}=i,a=this.getParsed(e),c=a._custom,h=tU(c)?"["+c.start+", "+c.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){const a="reset"===s,{index:c,_cachedMeta:{vScale:h}}=this,p=h.getBasePixel(),v=h.isHorizontal(),b=this._getRuler(),{sharedOptions:D,includeOptions:P}=this._getSharedOptions(i,s);for(let R=i;R<i+r;R++){const F=this.getParsed(R),V=a||zi(F[h.axis])?{base:p,head:p}:this._calculateBarValuePixels(R),Q=this._calculateBarIndexPixels(R,b),te=(F._stacks||{})[h.axis],re={horizontal:v,base:V.base,enableBorderRadius:!te||tU(F._custom)||c===te._top||c===te._bottom,x:v?V.head:Q.center,y:v?Q.center:V.head,height:v?Q.size:Math.abs(V.size),width:v?Math.abs(V.size):Q.size};P&&(re.options=D||this.resolveDataElementOptions(R,e[R].active?"active":s));const de=re.options||e[R].options;rre(re,de,te,c),sre(re,de,b.ratio),this.updateElement(e[R],R,re,s)}}_getStacks(e,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),a=r.options.stacked,c=[],h=p=>{const v=p.controller.getParsed(i),b=v&&v[p.vScale.axis];if(zi(b)||isNaN(b))return!0};for(const p of s)if((void 0===i||!h(p))&&((!1===a||-1===c.indexOf(p.stack)||void 0===a&&void 0===p.stack)&&c.push(p.stack),p.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){const s=this._getStacks(e,r),a=void 0!==i?s.indexOf(i):-1;return-1===a?s.length-1:a}_getRuler(){const e=this.options,i=this._cachedMeta,r=i.iScale,s=[];let a,c;for(a=0,c=i.data.length;a<c;++a)s.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const h=e.barThickness;return{min:h||Jie(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:h?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:a,minBarLength:c}}=this,h=a||0,p=this.getParsed(e),v=p._custom,b=tU(v);let F,V,D=p[i.axis],P=0,R=r?this.applyStack(i,p,r):D;R!==D&&(P=R-D,R=D),b&&(D=v.barStart,R=v.barEnd-v.barStart,0!==D&&tf(D)!==tf(v.barEnd)&&(P=0),P+=D);const Q=zi(a)||b?P:a;let te=i.getPixelForValue(Q);if(F=this.chart.getDataVisibility(e)?i.getPixelForValue(P+R):te,V=F-te,Math.abs(V)<c){V=function nre(n,t,e){return 0!==n?tf(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(V,i,h)*c,D===h&&(te-=V/2);const re=i.getPixelForDecimal(0),de=i.getPixelForDecimal(1),_e=Math.min(re,de),ue=Math.max(re,de);te=Math.max(Math.min(te,ue),_e),F=te+V,r&&!b&&(p._stacks[i.axis]._visualValues[s]=i.getValueForPixel(F)-i.getValueForPixel(te))}if(te===i.getPixelForValue(h)){const re=tf(V)*i.getLineWidthForValue(h)/2;te+=re,V-=re}return{size:V,base:te,head:F,center:F+V/2}}_calculateBarIndexPixels(e,i){const r=i.scale,s=this.options,a=s.skipNull,c=ci(s.maxBarThickness,1/0);let h,p;if(i.grouped){const v=a?this._getStackCount(e):i.stackCount,b="flex"===s.barThickness?function ere(n,t,e,i){const r=t.pixels,s=r[n];let a=n>0?r[n-1]:null,c=n<r.length-1?r[n+1]:null;const h=e.categoryPercentage;null===a&&(a=s-(null===c?t.end-t.start:c-s)),null===c&&(c=s+s-a);const p=s-(s-Math.min(a,c))/2*h;return{chunk:Math.abs(c-a)/2*h/i,ratio:e.barPercentage,start:p}}(e,i,s,v):function Xie(n,t,e,i){const r=e.barThickness;let s,a;return zi(r)?(s=t.min*e.categoryPercentage,a=e.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[n]-s/2}}(e,i,s,v),D=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);h=b.start+b.chunk*D+b.chunk/2,p=Math.min(c,b.chunk*b.ratio)}else h=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(c,i.min*i.ratio);return{base:h-p/2,head:h+p/2,center:h,size:p}}draw(){const e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length;let a=0;for(;a<s;++a)null!==this.getParsed(a)[i.axis]&&r[a].draw(this._ctx)}}return Nt(n,"id","bar"),Nt(n,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Nt(n,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),n})(),lre=(()=>{class n extends dm{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){const a=super.parsePrimitiveData(e,i,r,s);for(let c=0;c<a.length;c++)a[c]._custom=this.resolveDataElementOptions(c+r).radius;return a}parseArrayData(e,i,r,s){const a=super.parseArrayData(e,i,r,s);for(let c=0;c<a.length;c++)a[c]._custom=ci(i[r+c][2],this.resolveDataElementOptions(c+r).radius);return a}parseObjectData(e,i,r,s){const a=super.parseObjectData(e,i,r,s);for(let c=0;c<a.length;c++){const h=i[r+c];a[c]._custom=ci(h&&h.r&&+h.r,this.resolveDataElementOptions(c+r).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:a}=i,c=this.getParsed(e),h=s.getLabelForValue(c.x),p=a.getLabelForValue(c.y),v=c._custom;return{label:r[e]||"",value:"("+h+", "+p+(v?", "+v:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){const a="reset"===s,{iScale:c,vScale:h}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(i,s),b=c.axis,D=h.axis;for(let P=i;P<i+r;P++){const R=e[P],F=!a&&this.getParsed(P),V={},Q=V[b]=a?c.getPixelForDecimal(.5):c.getPixelForValue(F[b]),te=V[D]=a?h.getBasePixel():h.getPixelForValue(F[D]);V.skip=isNaN(Q)||isNaN(te),v&&(V.options=p||this.resolveDataElementOptions(P,R.active?"active":s),a&&(V.options.radius=0)),this.updateElement(R,P,V,s)}}resolveDataElementOptions(e,i){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return"active"!==i&&(s.radius=0),s.radius+=ci(r&&r._custom,a),s}}return Nt(n,"id","bubble"),Nt(n,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Nt(n,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),n})(),nU=(()=>{class n extends dm{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let c,h,a=p=>+r[p];if(xi(r[e])){const{key:p="value"}=this._parsing;a=v=>+am(r[v],p)}for(c=e,h=e+i;c<h;++c)s._parsed[c]=a(c)}}_getRotation(){return Hd(this.options.rotation-90)}_getCircumference(){return Hd(this.options.circumference)}_getRotationExtents(){let e=so,i=-so;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,a=s._getRotation(),c=s._getCircumference();e=Math.min(e,a),i=Math.max(i,a+c)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,a=s.data,c=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(r.width,r.height)-c)/2,0),p=Math.min(((n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/t)(this.options.cutout,h),1),v=this._getRingWeight(this.index),{circumference:b,rotation:D}=this._getRotationExtents(),{ratioX:P,ratioY:R,offsetX:F,offsetY:V}=function cre(n,t,e){let i=1,r=1,s=0,a=0;if(t<so){const c=n,h=c+t,p=Math.cos(c),v=Math.sin(c),b=Math.cos(h),D=Math.sin(h),P=(re,de,_e)=>$E(re,c,h,!0)?1:Math.max(de,de*e,_e,_e*e),R=(re,de,_e)=>$E(re,c,h,!0)?-1:Math.min(de,de*e,_e,_e*e),F=P(0,p,b),V=P($o,v,D),Q=R(Co,p,b),te=R(Co+$o,v,D);i=(F-Q)/2,r=(V-te)/2,s=-(F+Q)/2,a=-(V+te)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(D,b,p),re=Math.max(Math.min((r.width-c)/P,(r.height-c)/R)/2,0),de=d5(this.options.radius,re),ue=(de-Math.max(de*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=F*de,this.offsetY=V*de,s.total=this.calculateTotal(),this.outerRadius=de-ue*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ue*v,0),this.updateElements(a,0,a.length,e)}_circumference(e,i){const r=this.options,s=this._cachedMeta,a=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/so)}updateElements(e,i,r,s){const a="reset"===s,c=this.chart,h=c.chartArea,b=(h.left+h.right)/2,D=(h.top+h.bottom)/2,P=a&&c.options.animation.animateScale,R=P?0:this.innerRadius,F=P?0:this.outerRadius,{sharedOptions:V,includeOptions:Q}=this._getSharedOptions(i,s);let re,te=this._getRotation();for(re=0;re<i;++re)te+=this._circumference(re,a);for(re=i;re<i+r;++re){const de=this._circumference(re,a),_e=e[re],ue={x:b+this.offsetX,y:D+this.offsetY,startAngle:te,endAngle:te+de,circumference:de,outerRadius:F,innerRadius:R};Q&&(ue.options=V||this.resolveDataElementOptions(re,_e.active?"active":s)),te+=de,this.updateElement(_e,re,ue,s)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let s,r=0;for(s=0;s<i.length;s++){const a=e._parsed[s];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?so*(Math.abs(e)/i):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],a=YE(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let i=0;const r=this.chart;let s,a,c,h,p;if(!e)for(s=0,a=r.data.datasets.length;s<a;++s)if(r.isDatasetVisible(s)){c=r.getDatasetMeta(s),e=c.data,h=c.controller;break}if(!e)return 0;for(s=0,a=e.length;s<a;++s)p=h.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(i=Math.max(i,p.borderWidth||0,p.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){const a=this.resolveDataElementOptions(r);i=Math.max(i,a.offset||0,a.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(ci(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return Nt(n,"id","doughnut"),Nt(n,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Nt(n,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Nt(n,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,a)=>{const h=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:r,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}}),n})(),ure=(()=>{class n extends dm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:a}=i,c=this.chart._animationsDisabled;let{start:h,count:p}=D5(i,s,c);this._drawStart=h,this._drawCount=p,x5(i)&&(h=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!c,options:v},e),this.updateElements(s,h,p,e)}updateElements(e,i,r,s){const a="reset"===s,{iScale:c,vScale:h,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:b,includeOptions:D}=this._getSharedOptions(i,s),P=c.axis,R=h.axis,{spanGaps:F,segment:V}=this.options,Q=lw(F)?F:Number.POSITIVE_INFINITY,te=this.chart._animationsDisabled||a||"none"===s,re=i+r,de=e.length;let _e=i>0&&this.getParsed(i-1);for(let ue=0;ue<de;++ue){const pe=e[ue],Le=te?pe:{};if(ue<i||ue>=re){Le.skip=!0;continue}const et=this.getParsed(ue),bt=zi(et[R]),at=Le[P]=c.getPixelForValue(et[P],ue),ot=Le[R]=a||bt?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,et,p):et[R],ue);Le.skip=isNaN(at)||isNaN(ot)||bt,Le.stop=ue>0&&Math.abs(et[P]-_e[P])>Q,V&&(Le.parsed=et,Le.raw=v.data[ue]),D&&(Le.options=b||this.resolveDataElementOptions(ue,pe.active?"active":s)),te||this.updateElement(pe,ue,Le,s),_e=et}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const a=s[0].size(this.resolveDataElementOptions(0)),c=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,a,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return Nt(n,"id","line"),Nt(n,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Nt(n,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),n})(),fj=(()=>{class n extends dm{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],a=YE(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,i,r,s){return Z5.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<i.min&&(i.min=a),a>i.max&&(i.max=a))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),a=Math.max(s/2,0),h=(a-Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(e,i,r,s){const a="reset"===s,c=this.chart,p=c.options.animation,v=this._cachedMeta.rScale,b=v.xCenter,D=v.yCenter,P=v.getIndexAngle(0)-.5*Co;let F,R=P;const V=360/this.countVisibleElements();for(F=0;F<i;++F)R+=this._computeAngle(F,s,V);for(F=i;F<i+r;F++){const Q=e[F];let te=R,re=R+this._computeAngle(F,s,V),de=c.getDataVisibility(F)?v.getDistanceFromCenterForValue(this.getParsed(F).r):0;R=re,a&&(p.animateScale&&(de=0),p.animateRotate&&(te=re=P));const _e={x:b,y:D,innerRadius:0,outerRadius:de,startAngle:te,endAngle:re,options:this.resolveDataElementOptions(F,Q.active?"active":s)};this.updateElement(Q,F,_e,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?Hd(this.resolveDataElementOptions(e,i).angle||r):0}}return Nt(n,"id","polarArea"),Nt(n,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Nt(n,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,a)=>{const h=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:r,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),n})();var dre=Object.freeze({__proto__:null,BarController:are,BubbleController:lre,DoughnutController:nU,LineController:ure,PieController:(()=>{class n extends nU{}return Nt(n,"id","pie"),Nt(n,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),n})(),PolarAreaController:fj,RadarController:(()=>{class n extends dm{getLabelAndValue(e){const i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return Z5.bind(this)(e,i,r,s)}update(e){const i=this._cachedMeta,r=i.dataset,s=i.data||[],a=i.iScale.getLabels();if(r.points=s,"resize"!==e){const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:a.length===s.length,options:c},e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){const a=this._cachedMeta.rScale,c="reset"===s;for(let h=i;h<i+r;h++){const p=e[h],v=this.resolveDataElementOptions(h,p.active?"active":s),b=a.getPointPositionForValue(h,this.getParsed(h).r),D=c?a.xCenter:b.x,P=c?a.yCenter:b.y,R={x:D,y:P,angle:b.angle,skip:isNaN(D)||isNaN(P),options:v};this.updateElement(p,h,R,s)}}}return Nt(n,"id","radar"),Nt(n,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Nt(n,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),n})(),ScatterController:(()=>{class n extends dm{getLabelAndValue(e){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:a}=i,c=this.getParsed(e),h=s.getLabelForValue(c.x),p=a.getLabelForValue(c.y);return{label:r[e]||"",value:"("+h+", "+p+")"}}update(e){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:a,count:c}=D5(i,r,s);if(this._drawStart=a,this._drawCount=c,x5(i)&&(a=0,c=r.length),this.options.showLine){const{dataset:h,_dataset:p}=i;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!p._decimated,h.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(h,void 0,{animated:!s,options:v},e)}this.updateElements(r,a,c,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){const a="reset"===s,{iScale:c,vScale:h,_stacked:p,_dataset:v}=this._cachedMeta,b=this.resolveDataElementOptions(i,s),D=this.getSharedOptions(b),P=this.includeOptions(s,D),R=c.axis,F=h.axis,{spanGaps:V,segment:Q}=this.options,te=lw(V)?V:Number.POSITIVE_INFINITY,re=this.chart._animationsDisabled||a||"none"===s;let de=i>0&&this.getParsed(i-1);for(let _e=i;_e<i+r;++_e){const ue=e[_e],pe=this.getParsed(_e),Le=re?ue:{},et=zi(pe[F]),bt=Le[R]=c.getPixelForValue(pe[R],_e),at=Le[F]=a||et?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,pe,p):pe[F],_e);Le.skip=isNaN(bt)||isNaN(at)||et,Le.stop=_e>0&&Math.abs(pe[R]-de[R])>te,Q&&(Le.parsed=pe,Le.raw=v.data[_e]),P&&(Le.options=D||this.resolveDataElementOptions(_e,ue.active?"active":s)),re||this.updateElement(ue,_e,Le,s),de=pe}this.updateSharedOptions(D,s,b)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let h=0;for(let p=i.length-1;p>=0;--p)h=Math.max(h,i[p].size(this.resolveDataElementOptions(p))/2);return h>0&&h}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const a=i[0].size(this.resolveDataElementOptions(0)),c=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,a,c)/2}}return Nt(n,"id","scatter"),Nt(n,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Nt(n,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),n})()});function bv(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class iU{static override(t){Object.assign(iU.prototype,t)}constructor(t){Nt(this,"options",void 0),this.options=t||{}}init(){}formats(){return bv()}parse(){return bv()}format(){return bv()}add(){return bv()}diff(){return bv()}startOf(){return bv()}endOf(){return bv()}}var hre__date=iU;function fre(n,t,e,i){const{controller:r,data:s,_sorted:a}=n,c=r._cachedMeta.iScale;if(c&&t===c.axis&&"r"!==t&&a&&s.length){const h=c._reversePixels?One:_p;if(!i)return h(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const b=h(s,t,e-v),D=h(s,t,e+v);return{lo:b.lo,hi:D.hi}}}}return{lo:0,hi:s.length-1}}function eD(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),a=e[t];for(let c=0,h=s.length;c<h;++c){const{index:p,data:v}=s[c],{lo:b,hi:D}=fre(s[c],t,a,r);for(let P=b;P<=D;++P){const R=v[P];R.skip||i(R,p,P)}}}function rU(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||eD(n,e,t,function(c,h,p){!r&&!vp(c,n.chartArea,0)||c.inRange(t.x,t.y,i)&&s.push({element:c,datasetIndex:h,index:p})},!0),s}function oU(n,t,e,i,r,s){return s||n.isPointInArea(t)?"r"!==e||i?function mre(n,t,e,i,r,s){let a=[];const c=function pre(n){const t=-1!==n.indexOf("x"),e=-1!==n.indexOf("y");return function(i,r){const s=t?Math.abs(i.x-r.x):0,a=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(e);let h=Number.POSITIVE_INFINITY;return eD(n,e,t,function p(v,b,D){const P=v.inRange(t.x,t.y,r);if(i&&!P)return;const R=v.getCenterPoint(r);if(!s&&!n.isPointInArea(R)&&!P)return;const V=c(t,R);V<h?(a=[{element:v,datasetIndex:b,index:D}],h=V):V===h&&a.push({element:v,datasetIndex:b,index:D})}),a}(n,t,e,i,r,s):function gre(n,t,e,i){let r=[];return eD(n,e,t,function s(a,c,h){const{startAngle:p,endAngle:v}=a.getProps(["startAngle","endAngle"],i),{angle:b}=y5(a,{x:t.x,y:t.y});$E(b,p,v)&&r.push({element:a,datasetIndex:c,index:h})}),r}(n,t,e,r):[]}function pj(n,t,e,i,r){const s=[],a="x"===e?"inXRange":"inYRange";let c=!1;return eD(n,e,t,(h,p,v)=>{h[a](t[e],r)&&(s.push({element:h,datasetIndex:p,index:v}),c=c||h.inRange(t.x,t.y,r))}),i&&!c?[]:s}var _re={evaluateInteractionItems:eD,modes:{index(n,t,e,i){const r=yv(t,n),s=e.axis||"x",a=e.includeInvisible||!1,c=e.intersect?rU(n,r,s,i,a):oU(n,r,s,!1,i,a),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(p=>{const v=c[0].index,b=p.data[v];b&&!b.skip&&h.push({element:b,datasetIndex:p.index,index:v})}),h):[]},dataset(n,t,e,i){const r=yv(t,n),s=e.axis||"xy",a=e.includeInvisible||!1;let c=e.intersect?rU(n,r,s,i,a):oU(n,r,s,!1,i,a);if(c.length>0){const h=c[0].datasetIndex,p=n.getDatasetMeta(h).data;c=[];for(let v=0;v<p.length;++v)c.push({element:p[v],datasetIndex:h,index:v})}return c},point:(n,t,e,i)=>rU(n,yv(t,n),e.axis||"xy",i,e.includeInvisible||!1),nearest:(n,t,e,i)=>oU(n,yv(t,n),e.axis||"xy",e.intersect,i,e.includeInvisible||!1),x:(n,t,e,i)=>pj(n,yv(t,n),"x",e.intersect,i),y:(n,t,e,i)=>pj(n,yv(t,n),"y",e.intersect,i)}};const gj=["left","top","right","bottom"];function tD(n,t){return n.filter(e=>e.pos===t)}function mj(n,t){return n.filter(e=>-1===gj.indexOf(e.pos)&&e.box.axis===t)}function nD(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function _j(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function vj(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Cre(n,t,e,i){const{pos:r,box:s}=e,a=n.maxPadding;if(!xi(r)){e.size&&(n[r]-=e.size);const b=i[e.stack]||{size:0,count:1};b.size=Math.max(b.size,e.horizontal?s.height:s.width),e.size=b.size/b.count,n[r]+=e.size}s.getPadding&&vj(a,s.getPadding());const c=Math.max(0,t.outerWidth-_j(a,n,"left","right")),h=Math.max(0,t.outerHeight-_j(a,n,"top","bottom")),p=c!==n.w,v=h!==n.h;return n.w=c,n.h=h,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Ere(n,t){const e=t.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(t[a],e[a])}),s}(n?["left","right"]:["top","bottom"])}function iD(n,t,e,i){const r=[];let s,a,c,h,p,v;for(s=0,a=n.length,p=0;s<a;++s){c=n[s],h=c.box,h.update(c.width||t.w,c.height||t.h,Ere(c.horizontal,t));const{same:b,other:D}=Cre(t,e,c,i);p|=b&&r.length,v=v||D,h.fullSize||r.push(c)}return p&&iD(r,t,e,i)||v}function lM(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function yj(n,t,e,i){const r=e.padding;let{x:s,y:a}=t;for(const c of n){const h=c.box,p=i[c.stack]||{count:1,placed:0,weight:1},v=c.stackWeight/p.weight||1;if(c.horizontal){const b=t.w*v,D=p.size||h.height;jE(p.start)&&(a=p.start),h.fullSize?lM(h,r.left,a,e.outerWidth-r.right-r.left,D):lM(h,t.left+p.placed,a,b,D),p.start=a,p.placed+=b,a=h.bottom}else{const b=t.h*v,D=p.size||h.width;jE(p.start)&&(s=p.start),h.fullSize?lM(h,s,r.top,D,e.outerHeight-r.bottom-r.top):lM(h,s,t.top+p.placed,D,b),p.start=s,p.placed+=b,s=h.right}}t.x=s,t.y=a}var Xa={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;-1!==e&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Ja(n.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(e-r.height,0),c=function bre(n){const t=function vre(n){const t=[];let e,i,r,s,a,c;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],({position:s,options:{stack:a,stackWeight:c=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:c});return t}(n),e=nD(t.filter(p=>p.box.fullSize),!0),i=nD(tD(t,"left"),!0),r=nD(tD(t,"right")),s=nD(tD(t,"top"),!0),a=nD(tD(t,"bottom")),c=mj(t,"x"),h=mj(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(h).concat(a).concat(c),chartArea:tD(t,"chartArea"),vertical:i.concat(r).concat(h),horizontal:s.concat(a).concat(c)}}(n.boxes),h=c.vertical,p=c.horizontal;mr(n.boxes,F=>{"function"==typeof F.beforeLayout&&F.beforeLayout()});const v=h.reduce((F,V)=>V.box.options&&!1===V.box.options.display?F:F+1,0)||1,b=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/v,hBoxMaxHeight:a/2}),D=Object.assign({},r);vj(D,Ja(i));const P=Object.assign({maxPadding:D,w:s,h:a,x:r.left,y:r.top},r),R=function wre(n,t){const e=function yre(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!gj.includes(r))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,c;for(s=0,a=n.length;s<a;++s){c=n[s];const{fullSize:h}=c.box,p=e[c.stack],v=p&&c.stackWeight/p.weight;c.horizontal?(c.width=v?v*i:h&&t.availableWidth,c.height=r):(c.width=i,c.height=v?v*r:h&&t.availableHeight)}return e}(h.concat(p),b);iD(c.fullSize,P,b,R),iD(h,P,b,R),iD(p,P,b,R)&&iD(h,P,b,R),function Tre(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}(P),yj(c.leftAndTop,P,b,R),P.x+=P.w,P.y+=P.h,yj(c.rightAndBottom,P,b,R),n.chartArea={left:P.left,top:P.top,right:P.left+P.w,bottom:P.top+P.h,height:P.h,width:P.w},mr(c.chartArea,F=>{const V=F.box;Object.assign(V,n.chartArea),V.update(P.w,P.h,{left:0,top:0,right:0,bottom:0})})}};class wj{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class Dre extends wj{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cM="$chartjs",xre={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bj=n=>null===n||""===n,Cj=!!xie&&{passive:!0};function Sre(n,t,e){n.canvas.removeEventListener(t,e,Cj)}function uM(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Pre(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const c of s)a=a||uM(c.addedNodes,i),a=a&&!uM(c.removedNodes,i);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function kre(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const c of s)a=a||uM(c.removedNodes,i),a=a&&!uM(c.addedNodes,i);a&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const rD=new Map;let Tj=0;function Ej(){const n=window.devicePixelRatio;n!==Tj&&(Tj=n,rD.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Nre(n,t,e){const i=n.canvas,r=i&&JF(i);if(!r)return;const s=E5((c,h)=>{const p=r.clientWidth;e(c,h),p<r.clientWidth&&e()},window),a=new ResizeObserver(c=>{const h=c[0],p=h.contentRect.width,v=h.contentRect.height;0===p&&0===v||s(p,v)});return a.observe(r),function Ore(n,t){rD.size||window.addEventListener("resize",Ej),rD.set(n,t)}(n,s),a}function sU(n,t,e){e&&e.disconnect(),"resize"===t&&function Rre(n){rD.delete(n),rD.size||window.removeEventListener("resize",Ej)}(n)}function Lre(n,t,e){const i=n.canvas,r=E5(s=>{null!==n.ctx&&e(function Mre(n,t){const e=xre[n.type]||n.type,{x:i,y:r}=yv(n,t);return{type:e,chart:t,native:n,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,n))},n);return function Ire(n,t,e){n.addEventListener(t,e,Cj)}(i,t,r),r}class Fre extends wj{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function Are(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[cM]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",bj(r)){const s=j5(n,"width");void 0!==s&&(n.width=s)}if(bj(i))if(""===n.style.height)n.height=n.width/(t||2);else{const s=j5(n,"height");void 0!==s&&(n.height=s)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[cM])return!1;const i=e[cM].initial;["height","width"].forEach(s=>{const a=i[s];zi(a)?e.removeAttribute(s):e.setAttribute(s,a)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[cM],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Pre,detach:kre,resize:Nre}[e]||Lre)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];r&&(({attach:sU,detach:sU,resize:sU}[e]||Sre)(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function Die(n,t,e,i){const r=sM(n),s=vv(r,"margin"),a=oM(r.maxWidth,n,"clientWidth")||JS,c=oM(r.maxHeight,n,"clientHeight")||JS,h=function Eie(n,t,e){let i,r;if(void 0===t||void 0===e){const s=JF(n);if(s){const a=s.getBoundingClientRect(),c=sM(s),h=vv(c,"border","width"),p=vv(c,"padding");t=a.width-p.width-h.width,e=a.height-p.height-h.height,i=oM(c.maxWidth,s,"clientWidth"),r=oM(c.maxHeight,s,"clientHeight")}else t=n.clientWidth,e=n.clientHeight}return{width:t,height:e,maxWidth:i||JS,maxHeight:r||JS}}(n,t,e);let{width:p,height:v}=h;if("content-box"===r.boxSizing){const D=vv(r,"border","width"),P=vv(r,"padding");p-=P.width+D.width,v-=P.height+D.height}return p=Math.max(0,p-s.width),v=Math.max(0,i?p/i:v-s.height),p=aM(Math.min(p,a,h.maxWidth)),v=aM(Math.min(v,c,h.maxHeight)),p&&!v&&(v=aM(p/2)),(void 0!==t||void 0!==e)&&i&&h.height&&v>h.height&&(v=h.height,p=aM(Math.floor(v*i))),{width:p,height:v}}(t,e,i,r)}isAttached(t){const e=JF(t);return!(!e||!e.isConnected)}}class qd{constructor(){Nt(this,"x",void 0),Nt(this,"y",void 0),Nt(this,"active",!1),Nt(this,"options",void 0),Nt(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return lw(this.x)&&lw(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function dM(n,t,e,i,r){const s=ci(i,0),a=Math.min(ci(r,n.length),n.length);let h,p,v,c=0;for(e=Math.ceil(e),r&&(h=r-i,e=h/Math.floor(h/e)),v=s;v<0;)c++,v=Math.round(s+c*e);for(p=Math.max(s,0);p<a;p++)p===v&&(t.push(n[p]),c++,v=Math.round(s+c*e))}Nt(qd,"defaults",{}),Nt(qd,"defaultRoutes",void 0);const jre=n=>"left"===n?"right":"right"===n?"left":n,Dj=(n,t,e)=>"top"===t||"left"===t?n[t]+e:n[t]-e,xj=(n,t)=>Math.min(t||n,n);function Aj(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function Wre(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,a=n._endPixel,c=1e-6;let p,h=n.getPixelForTick(r);if(!(e&&(p=1===i?Math.max(h-s,a-h):0===t?(n.getPixelForTick(1)-h)/2:(h-n.getPixelForTick(r-1))/2,h+=r<t?p:-p,h<s-c||h>a+c)))return h}function oD(n){return n.drawTicks?n.tickLength:0}function Ij(n,t){if(!n.display)return 0;const e=Bs(n.font,t),i=Ja(n.padding);return(oo(n.text)?n.text.length:1)*e.lineHeight+i.height}function Kre(n,t,e){let i=zF(n);return(e&&"right"!==t||!e&&"right"===t)&&(i=jre(i)),i}class Cv extends qd{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=tu(t,Number.POSITIVE_INFINITY),e=tu(e,Number.NEGATIVE_INFINITY),i=tu(i,Number.POSITIVE_INFINITY),r=tu(r,Number.NEGATIVE_INFINITY),{min:tu(t,i),max:tu(e,r),minDefined:Wo(t),maxDefined:Wo(e)}}getMinMax(t){let a,{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,p=c.length;h<p;++h)a=c[h].controller.getMinMax(this,t),r||(e=Math.min(e,a.min)),s||(i=Math.max(i,a.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:tu(e,tu(i,e)),max:tu(i,tu(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qr(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function iie(n,t,e){const{min:i,max:r}=n,s=d5(t,(r-i)/2),a=(c,h)=>e&&0===c?0:c+h;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?Aj(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function Bre(n,t){const e=n.options.ticks,i=function Vre(n){const t=n.options.offset,e=n._tickSize();return Math.floor(Math.min(n._length/e+(t?0:1),n._maxLength/e))}(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?function zre(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}(t):[],a=s.length,c=s[0],h=s[a-1],p=[];if(a>r)return function Hre(n,t,e,i){let a,r=0,s=e[0];for(i=Math.ceil(i),a=0;a<n.length;a++)a===s&&(t.push(n[a]),r++,s=e[r*i])}(t,p,s,a/r),p;const v=function Zre(n,t,e){const i=function qre(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}(n),r=t.length/e;if(!i)return Math.max(r,1);const s=function Sne(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i==0&&(t.push(i),t.push(n/i));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(i);for(let a=0,c=s.length-1;a<c;a++){const h=s[a];if(h>r)return h}return Math.max(r,1)}(s,t,r);if(a>0){let b,D;const P=a>1?Math.round((h-c)/(a-1)):null;for(dM(t,p,v,zi(P)?0:c-P,c),b=0,D=a-1;b<D;b++)dM(t,p,v,s[b],s[b+1]);return dM(t,p,v,h,zi(P)?t.length:h+P),p}return dM(t,p,v),p}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qr(this.options.afterUpdate,[this])}beforeSetDimensions(){qr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),qr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=qr(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){qr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=xj(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let c,h,p,a=r;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),b=v.widest.width,D=v.highest.height,P=aa(this.chart.width-b,0,this.maxWidth);c=t.offset?this.maxWidth/i:P/(i-1),b+6>c&&(c=P/(i-(t.offset?.5:1)),h=this.maxHeight-oD(t.grid)-e.padding-Ij(t.title,this.chart.options.font),p=Math.sqrt(b*b+D*D),a=BF(Math.min(Math.asin(aa((v.highest.height+6)/c,-1,1)),Math.asin(aa(h/p,-1,1))-Math.asin(aa(D/p,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){qr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const h=Ij(r,e.options.font);if(c?(t.width=this.maxWidth,t.height=oD(s)+h):(t.height=this.maxHeight,t.width=oD(s)+h),i.display&&this.ticks.length){const{first:p,last:v,widest:b,highest:D}=this._getLabelSizes(),P=2*i.padding,R=Hd(this.labelRotation),F=Math.cos(R),V=Math.sin(R);c?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:V*b.width+F*D.height)+P):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:F*b.width+V*D.height)+P),this._calculatePadding(p,v,V,F)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:a},position:c}=this.options,h=0!==this.labelRotation,p="top"!==c&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let D=0,P=0;h?p?(D=r*t.width,P=i*e.height):(D=i*t.height,P=r*e.width):"start"===s?P=e.width:"end"===s?D=t.width:"inner"!==s&&(D=t.width/2,P=e.width/2),this.paddingLeft=Math.max((D-v+a)*this.width/(this.width-v),0),this.paddingRight=Math.max((P-b+a)*this.width/(this.width-b),0)}else{let v=e.height/2,b=t.height/2;"start"===s?(v=0,b=t.height):"end"===s&&(v=e.height,b=0),this.paddingTop=v+a,this.paddingBottom=b+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)zi(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Aj(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,a=[],c=[],h=Math.floor(e/xj(e,i));let b,D,P,R,F,V,Q,te,re,de,_e,p=0,v=0;for(b=0;b<e;b+=h){if(R=t[b].label,F=this._resolveTickFontOptions(b),r.font=V=F.string,Q=s[V]=s[V]||{data:{},gc:[]},te=F.lineHeight,re=de=0,zi(R)||oo(R)){if(oo(R))for(D=0,P=R.length;D<P;++D)_e=R[D],!zi(_e)&&!oo(_e)&&(re=tM(r,Q.data,Q.gc,re,_e),de+=te)}else re=tM(r,Q.data,Q.gc,re,R),de=te;a.push(re),c.push(de),p=Math.max(re,p),v=Math.max(de,v)}!function $re(n,t){mr(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}(s,e);const ue=a.indexOf(p),pe=c.indexOf(v),Le=et=>({width:a[et]||0,height:c[et]||0});return{first:Le(0),last:Le(e-1),widest:Le(ue),highest:Le(pe),widths:a,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function kne(n){return aa(n,-32768,32767)}(this._alignToPixels?gv(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function Yre(n,t,e){return um(n,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function Gre(n,t){return um(n,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Hd(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,c=s?s.widest.width+a:0,h=s?s.highest.height+a:0;return this.isHorizontal()?h*i>c*r?c/i:h/r:h*r<c*i?h/i:c/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:a,border:c}=r,h=s.offset,p=this.isHorizontal(),b=this.ticks.length+(h?1:0),D=oD(s),P=[],R=c.setContext(this.getContext()),F=R.display?R.width:0,V=F/2,Q=function(Ct){return gv(i,Ct,F)};let te,re,de,_e,ue,pe,Le,et,bt,at,ot,Tn;if("top"===a)te=Q(this.bottom),pe=this.bottom-D,et=te-V,at=Q(t.top)+V,Tn=t.bottom;else if("bottom"===a)te=Q(this.top),at=t.top,Tn=Q(t.bottom)-V,pe=te+V,et=this.top+D;else if("left"===a)te=Q(this.right),ue=this.right-D,Le=te-V,bt=Q(t.left)+V,ot=t.right;else if("right"===a)te=Q(this.left),bt=t.left,ot=Q(t.right)-V,ue=te+V,Le=this.left+D;else if("x"===e){if("center"===a)te=Q((t.top+t.bottom)/2+.5);else if(xi(a)){const Ct=Object.keys(a)[0];te=Q(this.chart.scales[Ct].getPixelForValue(a[Ct]))}at=t.top,Tn=t.bottom,pe=te+V,et=pe+D}else if("y"===e){if("center"===a)te=Q((t.left+t.right)/2);else if(xi(a)){const Ct=Object.keys(a)[0];te=Q(this.chart.scales[Ct].getPixelForValue(a[Ct]))}ue=te-V,Le=ue-D,bt=t.left,ot=t.right}const Jn=ci(r.ticks.maxTicksLimit,b),wi=Math.max(1,Math.ceil(b/Jn));for(re=0;re<b;re+=wi){const Ct=this.getContext(re),St=s.setContext(Ct),nn=c.setContext(Ct),$t=St.lineWidth,Ni=St.color,nr=nn.dash||[],jr=nn.dashOffset,ca=St.tickWidth,ki=St.tickColor,Ma=St.tickBorderDash||[],uu=St.tickBorderDashOffset;de=Wre(this,re,h),void 0!==de&&(_e=gv(i,de,$t),p?ue=Le=bt=ot=_e:pe=et=at=Tn=_e,P.push({tx1:ue,ty1:pe,tx2:Le,ty2:et,x1:bt,y1:at,x2:ot,y2:Tn,width:$t,color:Ni,borderDash:nr,borderDashOffset:jr,tickWidth:ca,tickColor:ki,tickBorderDash:Ma,tickBorderDashOffset:uu}))}return this._ticksLength=b,this._borderValue=te,P}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,a=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:p,padding:v,mirror:b}=s,D=oD(i.grid),P=D+v,R=b?-v:P,F=-Hd(this.labelRotation),V=[];let Q,te,re,de,_e,ue,pe,Le,et,bt,at,ot,Tn="middle";if("top"===r)ue=this.bottom-R,pe=this._getXAxisLabelAlignment();else if("bottom"===r)ue=this.top+R,pe=this._getXAxisLabelAlignment();else if("left"===r){const wi=this._getYAxisLabelAlignment(D);pe=wi.textAlign,_e=wi.x}else if("right"===r){const wi=this._getYAxisLabelAlignment(D);pe=wi.textAlign,_e=wi.x}else if("x"===e){if("center"===r)ue=(t.top+t.bottom)/2+P;else if(xi(r)){const wi=Object.keys(r)[0];ue=this.chart.scales[wi].getPixelForValue(r[wi])+P}pe=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)_e=(t.left+t.right)/2-P;else if(xi(r)){const wi=Object.keys(r)[0];_e=this.chart.scales[wi].getPixelForValue(r[wi])}pe=this._getYAxisLabelAlignment(D).textAlign}"y"===e&&("start"===h?Tn="top":"end"===h&&(Tn="bottom"));const Jn=this._getLabelSizes();for(Q=0,te=c.length;Q<te;++Q){re=c[Q],de=re.label;const wi=s.setContext(this.getContext(Q));Le=this.getPixelForTick(Q)+s.labelOffset,et=this._resolveTickFontOptions(Q),bt=et.lineHeight,at=oo(de)?de.length:1;const Ct=at/2,St=wi.color,nn=wi.textStrokeColor,$t=wi.textStrokeWidth;let nr,Ni=pe;if(a?(_e=Le,"inner"===pe&&(Ni=Q===te-1?this.options.reverse?"left":"right":0===Q?this.options.reverse?"right":"left":"center"),ot="top"===r?"near"===p||0!==F?-at*bt+bt/2:"center"===p?-Jn.highest.height/2-Ct*bt+bt:bt/2-Jn.highest.height:"near"===p||0!==F?bt/2:"center"===p?Jn.highest.height/2-Ct*bt:Jn.highest.height-at*bt,b&&(ot*=-1),0!==F&&!wi.showLabelBackdrop&&(_e+=bt/2*Math.sin(F))):(ue=Le,ot=(1-at)*bt/2),wi.showLabelBackdrop){const jr=Ja(wi.backdropPadding),ca=Jn.heights[Q],ki=Jn.widths[Q];let Ma=ot-jr.top,uu=0-jr.left;switch(Tn){case"middle":Ma-=ca/2;break;case"bottom":Ma-=ca}switch(pe){case"center":uu-=ki/2;break;case"right":uu-=ki}nr={left:uu,top:Ma,width:ki+jr.width,height:ca+jr.height,color:wi.backdropColor}}V.push({label:de,font:et,textOffset:ot,options:{rotation:F,color:St,strokeColor:nn,strokeWidth:$t,textAlign:Ni,textBaseline:Tn,translation:[_e,ue],backdrop:nr}})}return V}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Hd(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,c=t+s,h=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===i?p="left":"center"===i?(p="center",v+=h/2):(p="right",v+=h)):(v=this.right-c,"near"===i?p="right":"center"===i?(p="center",v-=h/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===i?p="right":"center"===i?(p="center",v-=h/2):(p="left",v-=h)):(v=this.left+c,"near"===i?p="left":"center"===i?(p="center",v+=h/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const c=(h,p,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(e.display)for(s=0,a=r.length;s<a;++s){const h=r[s];e.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const c=r.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let p,v,b,D;this.isHorizontal()?(p=gv(t,this.left,a)-a/2,v=gv(t,this.right,c)+c/2,b=D=h):(b=gv(t,this.top,a)-a/2,D=gv(t,this.bottom,c)+c/2,p=v=h),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(p,b),e.lineTo(v,D),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&nM(i,r);const s=this.getLabelItems(t);for(const a of s)mv(i,a.label,0,a.textOffset,a.font,a.options);r&&iM(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=Bs(i.font),a=Ja(i.padding),c=i.align;let h=s.lineHeight/2;"bottom"===e||"center"===e||xi(e)?(h+=a.bottom,oo(i.text)&&(h+=s.lineHeight*(i.text.length-1))):h+=a.top;const{titleX:p,titleY:v,maxWidth:b,rotation:D}=function Qre(n,t,e,i){const{top:r,left:s,bottom:a,right:c,chart:h}=n,{chartArea:p,scales:v}=h;let D,P,R,b=0;const F=a-r,V=c-s;if(n.isHorizontal()){if(P=Qa(i,s,c),xi(e)){const Q=Object.keys(e)[0];R=v[Q].getPixelForValue(e[Q])+F-t}else R="center"===e?(p.bottom+p.top)/2+F-t:Dj(n,e,t);D=c-s}else{if(xi(e)){const Q=Object.keys(e)[0];P=v[Q].getPixelForValue(e[Q])-V+t}else P="center"===e?(p.left+p.right)/2-V+t:Dj(n,e,t);R=Qa(i,a,r),b="left"===e?-$o:$o}return{titleX:P,titleY:R,maxWidth:D,rotation:b}}(this,h,e,c);mv(t,i.text,0,0,s,{color:i.color,maxWidth:b,rotation:D,textAlign:Kre(c,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ci(t.grid&&t.grid.z,-1),r=ci(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Cv.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]:[{z:e,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,a;for(s=0,a=e.length;s<a;++s){const c=e[s];c[i]===this.id&&(!t||c.type===t)&&r.push(c)}return r}_resolveTickFontOptions(t){return Bs(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hM{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function eoe(n){return"id"in n&&"defaults"in n})(e)&&(i=this.register(e));const r=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function Jre(n,t,e){const i=HE(Object.create(null),[e?Go.get(e):{},Go.get(t),n.defaults]);Go.set(t,i),n.defaultRoutes&&function Xre(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),a=t[e].split("."),c=a.pop(),h=a.join(".");Go.route(s,r,h,c)})}(t,n.defaultRoutes),n.descriptors&&Go.describe(t,n.descriptors)}(t,a,i),this.override&&Go.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Go[r]&&(delete Go[r][i],this.override&&delete pv[i])}}class toe{constructor(){this.controllers=new hM(dm,"datasets",!0),this.elements=new hM(qd,"elements"),this.plugins=new hM(Object,"plugins"),this.scales=new hM(Cv,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):mr(r,a=>{const c=i||this._getRegistryForType(a);this._exec(t,c,a)})})}_exec(t,e,i){const r=UF(t);qr(i["before"+r],[],i),e[t](i),qr(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var nf=new toe;class noe{constructor(){this._init=[]}notify(t,e,i,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,i,r){r=r||{};for(const s of t){const a=s.plugin;if(!1===qr(a[i],[e,r,s.options],a)&&r.cancelable)return!1}return!0}invalidate(){zi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=ci(i.options&&i.options.plugins,{}),s=function ioe(n){const t={},e=[],i=Object.keys(nf.plugins.items);for(let s=0;s<i.length;s++)e.push(nf.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];-1===e.indexOf(a)&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}(i);return!1!==r||e?function ooe(n,{plugins:t,localIds:e},i,r){const s=[],a=n.getContext();for(const c of t){const h=c.id,p=roe(i[h],r);null!==p&&s.push({plugin:c,options:soe(n.config,{plugin:c,local:e[h]},p,a)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,a)=>s.filter(c=>!a.some(h=>c.plugin.id===h.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function roe(n,t){return t||!1!==n?!0===n?{}:n:null}function soe(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),a=n.getOptionScopes(i,s);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function aU(n,t){return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||(Go.datasets[n]||{}).indexAxis||"x"}function Sj(n){if("x"===n||"y"===n||"r"===n)return n}function coe(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}function lU(n,...t){if(Sj(n))return n;for(const e of t){const i=e.axis||coe(e.position)||n.length>1&&Sj(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Mj(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function Pj(n){const t=n.options||(n.options={});t.plugins=ci(t.plugins,{}),t.scales=function doe(n,t){const e=pv[n.type]||{scales:{}},i=t.scales||{},r=aU(n.type,t),s=Object.create(null);return Object.keys(i).forEach(a=>{const c=i[a];if(!xi(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const h=lU(a,c,function uoe(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Mj(n,"x",e[0])||Mj(n,"y",e[0])}return{}}(a,n),Go.scales[c.type]),p=function loe(n,t){return n===t?"_index_":"_value_"}(h,r),v=e.scales||{};s[a]=qE(Object.create(null),[{axis:h},c,v[h],v[p]])}),n.data.datasets.forEach(a=>{const c=a.type||n.type,h=a.indexAxis||aU(c,t),v=(pv[c]||{}).scales||{};Object.keys(v).forEach(b=>{const D=function aoe(n,t){let e=n;return"_index_"===n?e=t:"_value_"===n&&(e="x"===t?"y":"x"),e}(b,h),P=a[D+"AxisID"]||D;s[P]=s[P]||Object.create(null),qE(s[P],[{axis:D},i[P],v[b]])})}),Object.keys(s).forEach(a=>{const c=s[a];qE(c,[Go.scales[c.type],Go.scale])}),s}(n,t)}function kj(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const Oj=new Map,Rj=new Set;function fM(n,t){let e=Oj.get(n);return e||(e=t(),Oj.set(n,e),Rj.add(e)),e}const sD=(n,t,e)=>{const i=am(t,e);void 0!==i&&n.add(i)};class foe{constructor(t){this._config=function hoe(n){return(n=n||{}).data=kj(n.data),Pj(n),n}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=kj(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Pj(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fM(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fM(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fM(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return fM(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,a=this._cachedScopes(t,i),c=a.get(e);if(c)return c;const h=new Set;e.forEach(v=>{t&&(h.add(t),v.forEach(b=>sD(h,t,b))),v.forEach(b=>sD(h,r,b)),v.forEach(b=>sD(h,pv[s]||{},b)),v.forEach(b=>sD(h,Go,b)),v.forEach(b=>sD(h,jF,b))});const p=Array.from(h);return 0===p.length&&p.push(Object.create(null)),Rj.has(e)&&a.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,pv[e]||{},Go.datasets[e]||{},{type:e},Go,jF]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:c}=Nj(this._resolverCache,t,r);let h=a;(function goe(n,t){const{isScriptable:e,isIndexable:i}=N5(n);for(const r of t){const s=e(r),a=i(r),c=(a||s)&&n[r];if(s&&(lm(c)||poe(c))||a&&oo(c))return!0}return!1})(a,e)&&(s.$shared=!1,h=cw(a,i=lm(i)?i():i,this.createResolver(t,i,c)));for(const p of e)s[p]=h[p];return s}createResolver(t,e,i=[""],r){const{resolver:s}=Nj(this._resolverCache,t,i);return xi(e)?cw(s,e,void 0,r):s}}function Nj(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:YF(t,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},i.set(r,s)),s}const poe=n=>xi(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||lm(n[e]),!1),_oe=["top","bottom","left","right","chartArea"];function Lj(n,t){return"top"===n||"bottom"===n||-1===_oe.indexOf(n)&&"x"===t}function Fj(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Uj(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),qr(e&&e.onComplete,[n],t)}function voe(n){const t=n.chart,e=t.options.animation;qr(e&&e.onProgress,[n],t)}function Bj(n){return H5()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const pM={},Vj=n=>{const t=Bj(n);return Object.values(pM).filter(e=>e.canvas===t).pop()};function yoe(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const a=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=a)}}}let hm=(()=>{class n{static register(...e){nf.add(...e),Zj()}static unregister(...e){nf.remove(...e),Zj()}constructor(e,i){const r=this.config=new foe(i),s=Bj(e),a=Vj(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const c=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function Ure(n){return!H5()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Dre:Fre}(s)),this.platform.updateConfig(r);const h=this.platform.acquireContext(s,c.aspectRatio),p=h&&h.canvas,v=p&&p.height,b=p&&p.width;this.id=wne(),this.ctx=h,this.canvas=p,this.width=b,this.height=v,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new noe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Lne(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}(D=>this.update(D),c.resizeDelay||0),this._dataChanges=[],pM[this.id]=this,h&&p?(yp.listen(this,"complete",Uj),yp.listen(this,"progress",voe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:a}=this;return zi(e)?i&&a?a:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nf}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():q5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return k5(this.canvas,this.ctx),this}stop(){return yp.stop(this),this}resize(e,i){yp.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const r=this.options,c=this.platform.getMaximumSize(this.canvas,e,i,r.maintainAspectRatio&&this.aspectRatio),h=r.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,q5(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),qr(r.onResize,[this,c],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){mr(this.options.scales||{},(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((c,h)=>(c[h]=!1,c),{});let a=[];i&&(a=a.concat(Object.keys(i).map(c=>{const h=i[c],p=lU(c,h),v="r"===p,b="x"===p;return{options:h,dposition:v?"chartArea":b?"bottom":"left",dtype:v?"radialLinear":b?"category":"linear"}}))),mr(a,c=>{const h=c.options,p=h.id,v=lU(p,h),b=ci(h.type,c.dtype);(void 0===h.position||Lj(h.position,v)!==Lj(c.dposition))&&(h.position=c.dposition),s[p]=!0;let D=null;p in r&&r[p].type===b?D=r[p]:(D=new(nf.getScale(b))({id:p,type:b,ctx:this.ctx,chart:this}),r[D.id]=D),D.init(h,e)}),mr(s,(c,h)=>{c||delete r[h]}),mr(r,c=>{Xa.configure(this,c,c.options),Xa.addBox(this,c)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,a)=>s.index-a.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(Fj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{0===i.filter(a=>a===r._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){const a=i[r];let c=this.getDatasetMeta(r);const h=a.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(r),c=this.getDatasetMeta(r)),c.type=h,c.indexAxis=a.indexAxis||aU(h,this.options),c.order=a.order||0,c.index=r,c.label=""+a.label,c.visible=this.isDatasetVisible(r),c.controller)c.controller.updateIndex(r),c.controller.linkScales();else{const p=nf.getController(h),{datasetElementType:v,dataElementType:b}=Go.datasets[h];Object.assign(p,{dataElementType:nf.getElement(b),datasetElementType:v&&nf.getElement(v)}),c.controller=new p(this,r),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){mr(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let v=0,b=this.data.datasets.length;v<b;v++){const{controller:D}=this.getDatasetMeta(v),P=!s&&-1===a.indexOf(D);D.buildOrUpdateElements(P),c=Math.max(+D.getMaxOverflow(),c)}c=this._minPadding=r.layout.autoPadding?c:0,this._updateLayout(c),s||mr(a,v=>{v.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Fj("z","_idx"));const{_active:h,_lastEvent:p}=this;p?this._eventHandler(p,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){mr(this.scales,e=>{Xa.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!p5(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:a}of i)yoe(e,s,"_removeElements"===r?-a:a)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,r=a=>new Set(e.filter(c=>c[0]===a).map((c,h)=>h+","+c.splice(1).join(","))),s=r(0);for(let a=1;a<i;a++)if(!p5(s,r(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Xa.update(this,this.width,this.height,e);const i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],mr(this.boxes,s=>{r&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,lm(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(yp.has(this)?this.attached&&!yp.running(this)&&yp.start(this):(this.draw(),Uj({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,r=[];let s,a;for(s=0,a=i.length;s<a;++s){const c=i[s];(!e||c.visible)&&r.push(c)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,r=e._clip,s=!r.disabled,a=function boe(n){const{xScale:t,yScale:e}=n;if(t&&e)return{left:t.left,right:t.right,top:e.top,bottom:e.bottom}}(e)||this.chartArea,c={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",c)&&(s&&nM(i,{left:!1===r.left?0:a.left-r.left,right:!1===r.right?this.width:a.right+r.right,top:!1===r.top?0:a.top-r.top,bottom:!1===r.bottom?this.height:a.bottom+r.bottom}),e.controller.draw(),s&&iM(i),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(e){return vp(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){const a=_re.modes[i];return"function"==typeof a?a(this,e,r,s):[]}getDatasetMeta(e){const i=this.data.datasets[e],r=this._metasets;let s=r.filter(a=>a&&a._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=um(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){const s=r?"show":"hide",a=this.getDatasetMeta(e),c=a.controller._resolveAnimations(void 0,s);jE(i)?(a.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),c.update(a,{visible:r}),this.update(h=>h.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),yp.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),k5(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete pM[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,r=(a,c)=>{i.addEventListener(this,a,c),e[a]=c},s=(a,c,h)=>{a.offsetX=c,a.offsetY=h,this._eventHandler(a)};mr(this.options.events,a=>r(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,r=(p,v)=>{i.addEventListener(this,p,v),e[p]=v},s=(p,v)=>{e[p]&&(i.removeEventListener(this,p,v),delete e[p])},a=(p,v)=>{this.canvas&&this.resize(p,v)};let c;const h=()=>{s("attach",h),this.attached=!0,this.resize(),r("resize",a),r("detach",c)};c=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),r("attach",h)},i.isAttached(this.canvas)?h():c()}unbindEvents(){mr(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},mr(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){const s=r?"set":"remove";let a,c,h,p;for("dataset"===i&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),h=0,p=e.length;h<p;++h){c=e[h];const v=c&&this.getDatasetMeta(c.datasetIndex).controller;v&&v[s+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],r=e.map(({datasetIndex:a,index:c})=>{const h=this.getDatasetMeta(a);if(!h)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:h.data[c],index:c}});!KS(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,r){const s=this.options.hover,a=(p,v)=>p.filter(b=>!v.some(D=>b.datasetIndex===D.datasetIndex&&b.index===D.index)),c=a(i,e),h=r?e:a(e,i);c.length&&this.updateHoverStyle(c,s.mode,!1),h.length&&s.mode&&this.updateHoverStyle(h,s.mode,!0)}_eventHandler(e,i){const r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=c=>(c.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,s))return;const a=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(a||r.changed)&&this.render(),this}_handleEvent(e,i,r){const{_active:s=[],options:a}=this,h=this._getActiveElements(e,s,r,i),p=function xne(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),v=function woe(n,t,e,i){return e&&"mouseout"!==n.type?i?t:n:null}(e,this._lastEvent,r,p);r&&(this._lastEvent=null,qr(a.onHover,[e,h,this],this),p&&qr(a.onClick,[e,h,this],this));const b=!KS(h,s);return(b||i)&&(this._active=h,this._updateHoverStyles(h,s,i)),this._lastEvent=v,b}_getActiveElements(e,i,r,s){if("mouseout"===e.type)return[];if(!r)return i;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}}return Nt(n,"defaults",Go),Nt(n,"instances",pM),Nt(n,"overrides",pv),Nt(n,"registry",nf),Nt(n,"version","4.3.0"),Nt(n,"getChart",Vj),n})();function Zj(){return mr(hm.instances,n=>n._plugins.invalidate())}function hw(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function gM(n,t,e,i,r,s){const{x:a,y:c,startAngle:h,pixelMargin:p,innerRadius:v}=t,b=Math.max(t.outerRadius+i+e-p,0),D=v>0?v+i+e+p:0;let P=0;const R=r-h;if(i){const St=((v>0?v-i:0)+(b>0?b-i:0))/2;P=(R-(0!==St?R*St/(St+i):R))/2}const V=(R-Math.max(.001,R*b-e/Co)/b)/2,Q=h+V+P,te=r-V-P,{outerStart:re,outerEnd:de,innerStart:_e,innerEnd:ue}=function Eoe(n,t,e,i){const r=function Toe(n){return GF(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),s=(e-t)/2,a=Math.min(s,i*t/2),c=h=>{const p=(e-Math.min(s,h))*i/2;return aa(h,0,Math.min(s,p))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:aa(r.innerStart,0,a),innerEnd:aa(r.innerEnd,0,a)}}(t,D,b,te-Q),pe=b-re,Le=b-de,et=Q+re/pe,bt=te-de/Le,at=D+_e,ot=D+ue,Tn=Q+_e/at,Jn=te-ue/ot;if(n.beginPath(),s){const wi=(et+bt)/2;if(n.arc(a,c,b,et,wi),n.arc(a,c,b,wi,bt),de>0){const $t=hw(Le,bt,a,c);n.arc($t.x,$t.y,de,bt,te+$o)}const Ct=hw(ot,te,a,c);if(n.lineTo(Ct.x,Ct.y),ue>0){const $t=hw(ot,Jn,a,c);n.arc($t.x,$t.y,ue,te+$o,Jn+Math.PI)}const St=(te-ue/D+(Q+_e/D))/2;if(n.arc(a,c,D,te-ue/D,St,!0),n.arc(a,c,D,St,Q+_e/D,!0),_e>0){const $t=hw(at,Tn,a,c);n.arc($t.x,$t.y,_e,Tn+Math.PI,Q-$o)}const nn=hw(pe,Q,a,c);if(n.lineTo(nn.x,nn.y),re>0){const $t=hw(pe,et,a,c);n.arc($t.x,$t.y,re,Q-$o,et)}}else{n.moveTo(a,c);const wi=Math.cos(et)*b+a,Ct=Math.sin(et)*b+c;n.lineTo(wi,Ct);const St=Math.cos(bt)*b+a,nn=Math.sin(bt)*b+c;n.lineTo(St,nn)}n.closePath()}class aD extends qd{constructor(t){super(),Nt(this,"circumference",void 0),Nt(this,"endAngle",void 0),Nt(this,"fullCircles",void 0),Nt(this,"innerRadius",void 0),Nt(this,"outerRadius",void 0),Nt(this,"pixelMargin",void 0),Nt(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:s,distance:a}=y5(r,{x:t,y:e}),{startAngle:c,endAngle:h,innerRadius:p,outerRadius:v,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),D=(this.options.spacing+this.options.borderWidth)/2,R=ci(b,h-c)>=so||$E(s,c,h),F=mp(a,p+D,v+D);return R&&F}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:s,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:h,spacing:p}=this.options,v=(r+s)/2,b=(a+c+p+h)/2;return{x:e+Math.cos(v)*b,y:i+Math.sin(v)*b}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>so?Math.floor(i/so):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*r,Math.sin(c)*r);const p=r*(1-Math.sin(Math.min(Co,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function Doe(n,t,e,i,r){const{fullCircles:s,startAngle:a,circumference:c}=t;let h=t.endAngle;if(s){gM(n,t,e,i,h,r);for(let p=0;p<s;++p)n.fill();isNaN(c)||(h=a+(c%so||so))}gM(n,t,e,i,h,r),n.fill()}(t,this,p,s,a),function xoe(n,t,e,i,r){const{fullCircles:s,startAngle:a,circumference:c,options:h}=t,{borderWidth:p,borderJoinStyle:v,borderDash:b,borderDashOffset:D}=h,P="inner"===h.borderAlign;if(!p)return;n.setLineDash(b||[]),n.lineDashOffset=D,P?(n.lineWidth=2*p,n.lineJoin=v||"round"):(n.lineWidth=p,n.lineJoin=v||"bevel");let R=t.endAngle;if(s){gM(n,t,e,i,R,r);for(let F=0;F<s;++F)n.stroke();isNaN(c)||(R=a+(c%so||so))}P&&function Coe(n,t,e){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:c,innerRadius:h}=t;let p=r/c;n.beginPath(),n.arc(s,a,c,i-p,e+p),h>r?(p=r/h,n.arc(s,a,h,e+p,i-p,!0)):n.arc(s,a,r,e+$o,i-$o),n.closePath(),n.clip()}(n,t,R),s||(gM(n,t,e,i,R,r),n.stroke())}(t,this,p,s,a),t.restore()}}function zj(n,t,e=t){n.lineCap=ci(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ci(e.borderDash,t.borderDash)),n.lineDashOffset=ci(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ci(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ci(e.borderWidth,t.borderWidth),n.strokeStyle=ci(e.borderColor,t.borderColor)}function Aoe(n,t,e){n.lineTo(e.x,e.y)}function Hj(n,t,e={}){const i=n.length,{start:r=0,end:s=i-1}=e,{start:a,end:c}=t,h=Math.max(r,a),p=Math.min(s,c);return{count:i,start:h,loop:t.loop,ilen:p<h&&!(r<a&&s<a||r>c&&s>c)?i+p-h:p-h}}function Soe(n,t,e,i){const{points:r,options:s}=t,{count:a,start:c,loop:h,ilen:p}=Hj(r,e,i),v=function Ioe(n){return n.stepped?Gne:n.tension||"monotone"===n.cubicInterpolationMode?Yne:Aoe}(s);let P,R,F,{move:b=!0,reverse:D}=i||{};for(P=0;P<=p;++P)R=r[(c+(D?p-P:P))%a],!R.skip&&(b?(n.moveTo(R.x,R.y),b=!1):v(n,F,R,D,s.stepped),F=R);return h&&(R=r[(c+(D?p:0))%a],v(n,F,R,D,s.stepped)),!!h}function Moe(n,t,e,i){const r=t.points,{count:s,start:a,ilen:c}=Hj(r,e,i),{move:h=!0,reverse:p}=i||{};let D,P,R,F,V,Q,v=0,b=0;const te=de=>(a+(p?c-de:de))%s,re=()=>{F!==V&&(n.lineTo(v,V),n.lineTo(v,F),n.lineTo(v,Q))};for(h&&(P=r[te(0)],n.moveTo(P.x,P.y)),D=0;D<=c;++D){if(P=r[te(D)],P.skip)continue;const de=P.x,_e=P.y,ue=0|de;ue===R?(_e<F?F=_e:_e>V&&(V=_e),v=(b*v+de)/++b):(re(),n.lineTo(de,_e),R=ue,b=0,F=V=_e),Q=_e}re()}function cU(n){const t=n.options;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?Soe:Moe}Nt(aD,"id","arc"),Nt(aD,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Nt(aD,"defaultRoutes",{backgroundColor:"backgroundColor"}),Nt(aD,"descriptors",{_scriptable:!0,_indexable:n=>"borderDash"!==n});const Roe="function"==typeof Path2D;let mM=(()=>{class n extends qd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(yie(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Rie(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const s=!!n._loop,{start:a,end:c}=function kie(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,i);return function J5(n,t,e,i){return i&&i.setContext&&e?function Nie(n,t,e,i){const r=n._chart.getContext(),s=X5(n.options),{_datasetIndex:a,options:{spanGaps:c}}=n,h=e.length,p=[];let v=s,b=t[0].start,D=b;function P(R,F,V,Q){const te=c?-1:1;if(R!==F){for(R+=h;e[R%h].skip;)R-=te;for(;e[F%h].skip;)F+=te;R%h!=F%h&&(p.push({start:R%h,end:F%h,loop:V,style:Q}),v=Q,b=F%h)}}for(const R of t){b=c?b:R.start;let V,F=e[b%h];for(D=b+1;D<=R.end;D++){const Q=e[D%h];V=X5(i.setContext(um(r,{type:"segment",p0:F,p1:Q,p0DataIndex:(D-1)%h,p1DataIndex:D%h,datasetIndex:a}))),Lie(V,v)&&P(b,D-1,R.loop,v),F=Q,v=V}b<D-1&&P(b,D-1,R.loop,v)}return p}(n,t,e,i):t}(n,!0===i?[{start:a,end:c,loop:s}]:function Oie(n,t,e,i){const r=n.length,s=[];let h,a=t,c=n[t];for(h=t+1;h<=e;++h){const p=n[h%r];p.skip||p.stop?c.skip||(s.push({start:t%r,end:(h-1)%r,loop:i=!1}),t=a=p.stop?h:null):(a=h,c.skip&&(t=h)),c=p}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(e,a,c<a?c+r:c,!!n._fullLoop&&0===a&&c===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,i){const r=this.options,s=e[i],a=this.points,c=Q5(this,{property:i,start:s,end:s});if(!c.length)return;const h=[],p=function Poe(n){return n.stepped?Aie:n.tension||"monotone"===n.cubicInterpolationMode?Iie:wv}(r);let v,b;for(v=0,b=c.length;v<b;++v){const{start:D,end:P}=c[v],R=a[D],F=a[P];if(R===F){h.push(R);continue}const Q=p(R,F,Math.abs((s-R[i])/(F[i]-R[i])),r.stepped);Q[i]=e[i],h.push(Q)}return 1===h.length?h[0]:h}pathSegment(e,i,r){return cU(this)(e,this,i,r)}path(e,i,r){const s=this.segments,a=cU(this);let c=this._loop;i=i||0,r=r||this.points.length-i;for(const h of s)c&=a(e,this,h,{start:i,end:i+r-1});return!!c}draw(e,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Noe(n,t,e,i){Roe&&!t.options.segment?function koe(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),zj(n,t.options),n.stroke(r)}(n,t,e,i):function Ooe(n,t,e,i){const{segments:r,options:s}=t,a=cU(t);for(const c of r)zj(n,s,c.style),n.beginPath(),a(n,t,c,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}(n,t,e,i)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return Nt(n,"id","line"),Nt(n,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Nt(n,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Nt(n,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t}),n})();function qj(n,t,e,i){const r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}let Loe=(()=>{class n extends qd{constructor(e){super(),Nt(this,"parsed",void 0),Nt(this,"skip",void 0),Nt(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const s=this.options,{x:a,y:c}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(i-c,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return qj(this,e,"x",i)}inYRange(e,i){return qj(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const r=this.options;this.skip||r.radius<.1||!vp(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,$F(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return Nt(n,"id","point"),Nt(n,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Nt(n,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),n})();function jj(n,t){const{x:e,y:i,base:r,width:s,height:a}=n.getProps(["x","y","base","width","height"],t);let c,h,p,v,b;return n.horizontal?(b=a/2,c=Math.min(e,r),h=Math.max(e,r),p=i-b,v=i+b):(b=s/2,c=e-b,h=e+b,p=Math.min(i,r),v=Math.max(i,r)),{left:c,top:p,right:h,bottom:v}}function fm(n,t,e,i){return n?0:aa(t,e,i)}function uU(n,t,e,i){const r=null===t,s=null===e,c=n&&!(r&&s)&&jj(n,i);return c&&(r||mp(t,c.left,c.right))&&(s||mp(e,c.top,c.bottom))}function Zoe(n,t){n.rect(t.x,t.y,t.w,t.h)}function dU(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0;return{x:n.x+i,y:n.y+r,w:n.w+((n.x+n.w!==e.x+e.w?t:0)-i),h:n.h+((n.y+n.h!==e.y+e.h?t:0)-r),radius:n.radius}}class _M extends qd{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:a}=function Boe(n){const t=jj(n),e=t.right-t.left,i=t.bottom-t.top,r=function Foe(n,t,e){const r=n.borderSkipped,s=R5(n.options.borderWidth);return{t:fm(r.top,s.top,0,e),r:fm(r.right,s.right,0,t),b:fm(r.bottom,s.bottom,0,e),l:fm(r.left,s.left,0,t)}}(n,e/2,i/2),s=function Uoe(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=_v(r),a=Math.min(t,e),c=n.borderSkipped,h=i||xi(r);return{topLeft:fm(!h||c.top||c.left,s.topLeft,0,a),topRight:fm(!h||c.top||c.right,s.topRight,0,a),bottomLeft:fm(!h||c.bottom||c.left,s.bottomLeft,0,a),bottomRight:fm(!h||c.bottom||c.right,s.bottomRight,0,a)}}(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),c=function Voe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(a.radius)?QE:Zoe;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),c(t,dU(a,e,s)),t.clip(),c(t,dU(s,-e,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),c(t,dU(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return uU(this,t,e,i)}inXRange(t,e){return uU(this,t,null,e)}inYRange(t,e){return uU(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Nt(_M,"id","bar"),Nt(_M,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Nt(_M,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var zoe=Object.freeze({__proto__:null,ArcElement:aD,BarElement:_M,LineElement:mM,PointElement:Loe});const hU=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Wj=hU.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function $j(n){return hU[n%hU.length]}function Gj(n){return Wj[n%Wj.length]}function Yj(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}var Goe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!e.forceOverride&&(Yj(i)||function $oe(n){return n&&(n.borderColor||n.backgroundColor)}(r)||s&&Yj(s)))return;const a=function Woe(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof nU?t=function qoe(n,t){return n.backgroundColor=n.data.map(()=>$j(t++)),t}(e,t):r instanceof fj?t=function joe(n,t){return n.backgroundColor=n.data.map(()=>Gj(t++)),t}(e,t):r&&(t=function Hoe(n,t){return n.borderColor=$j(t),n.backgroundColor=Gj(t),++t}(e,t))}}(n);i.forEach(a)}};function Kj(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Qj(n){n.data.datasets.forEach(t=>{Kj(t)})}var Joe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled)return void Qj(n);const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:a,indexAxis:c}=r,h=n.getDatasetMeta(s),p=a||r.data;if("y"===JE([c,n.options.indexAxis])||!h.controller.supportsDecimation)return;const v=n.scales[h.xAxisID];if("linear"!==v.type&&"time"!==v.type||n.options.parsing)return;let R,{start:b,count:D}=function Qoe(n,t){const e=t.length;let r,i=0;const{iScale:s}=n,{min:a,max:c,minDefined:h,maxDefined:p}=s.getUserBounds();return h&&(i=aa(_p(t,s.axis,a).lo,0,e-1)),r=p?aa(_p(t,s.axis,c).hi+1,i,e)-i:e-i,{start:i,count:r}}(h,p);if(D<=(e.threshold||4*i))Kj(r);else{switch(zi(a)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(F){this._data=F}})),e.algorithm){case"lttb":R=function Yoe(n,t,e,i,r){const s=r.samples||i;if(s>=e)return n.slice(t,t+e);const a=[],c=(e-2)/(s-2);let h=0;const p=t+e-1;let b,D,P,R,F,v=t;for(a[h++]=n[v],b=0;b<s-2;b++){let te,V=0,Q=0;const re=Math.floor((b+1)*c)+1+t,de=Math.min(Math.floor((b+2)*c)+1,e)+t,_e=de-re;for(te=re;te<de;te++)V+=n[te].x,Q+=n[te].y;V/=_e,Q/=_e;const ue=Math.floor(b*c)+1+t,pe=Math.min(Math.floor((b+1)*c)+1,e)+t,{x:Le,y:et}=n[v];for(P=R=-1,te=ue;te<pe;te++)R=.5*Math.abs((Le-V)*(n[te].y-et)-(Le-n[te].x)*(Q-et)),R>P&&(P=R,D=n[te],F=te);a[h++]=D,v=F}return a[h++]=n[p],a}(p,b,D,i,e);break;case"min-max":R=function Koe(n,t,e,i){let a,c,h,p,v,b,D,P,R,F,r=0,s=0;const V=[],te=n[t].x,de=n[t+e-1].x-te;for(a=t;a<t+e;++a){c=n[a],h=(c.x-te)/de*i,p=c.y;const _e=0|h;if(_e===v)p<R?(R=p,b=a):p>F&&(F=p,D=a),r=(s*r+c.x)/++s;else{const ue=a-1;if(!zi(b)&&!zi(D)){const pe=Math.min(b,D),Le=Math.max(b,D);pe!==P&&pe!==ue&&V.push({...n[pe],x:r}),Le!==P&&Le!==ue&&V.push({...n[Le],x:r})}a>0&&ue!==P&&V.push(n[ue]),V.push(c),v=_e,s=0,R=F=p,b=D=P=a}}return V}(p,b,D,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=R}})},destroy(n){Qj(n)}};function fU(n,t,e,i){if(i)return;let r=t[n],s=e[n];return"angle"===n&&(r=nu(r),s=nu(s)),{property:n,start:r,end:s}}function pU(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Jj(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Xj(n,t){let e=[],i=!1;return oo(n)?(i=!0,e=n):e=function ese(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:a,end:c})=>{c=pU(a,c,r);const h=r[a],p=r[c];null!==i?(s.push({x:h.x,y:i}),s.push({x:p.x,y:i})):null!==e&&(s.push({x:e,y:h.y}),s.push({x:e,y:p.y}))}),s}(n,t),e.length?new mM({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function eW(n){return n&&!1!==n.fill}function tse(n,t,e){let r=n[t].fill;const s=[t];let a;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!Wo(r))return r;if(a=n[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function nse(n,t,e){const i=function sse(n){const t=n.options,e=t.fill;let i=ci(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(xi(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Wo(r)&&Math.floor(r)===r?function ise(n,t,e,i){return("-"===n||"+"===n)&&(e=t+e),!(e===t||e<0||e>=i)&&e}(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function cse(n,t,e){const i=[];for(let r=0;r<e.length;r++){const s=e[r],{first:a,last:c,point:h}=use(s,t,"x");if(!(!h||a&&c))if(a)i.unshift(h);else if(n.push(h),!c)break}n.push(...i)}function use(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],s=n.segments,a=n.points;let c=!1,h=!1;for(let p=0;p<s.length;p++){const v=s[p],b=a[v.start][e],D=a[v.end][e];if(mp(r,b,D)){c=r===b,h=r===D;break}}return{first:c,last:h,point:i}}class tW{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:s,radius:a}=this;return t.arc(r,s,a,(e=e||{start:0,end:so}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function gU(n,t,e){const i=function dse(n){const{chart:t,fill:e,line:i}=n;if(Wo(e))return function hse(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function ase(n){const{scale:t,index:e,line:i}=n,r=[],s=i.segments,a=i.points,c=function lse(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);c.push(Xj({x:null,y:t.bottom},i));for(let h=0;h<s.length;h++){const p=s[h];for(let v=p.start;v<=p.end;v++)cse(r,a[v],c)}return new mM({points:r,options:{}})}(n);if("shape"===e)return!0;const r=function fse(n){return(n.scale||{}).getPointPositionForValue?function gse(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,a=function ose(n,t,e){let i;return i="start"===n?e:"end"===n?t.options.reverse?t.min:t.max:xi(n)?n.value:t.getBaseValue(),i}(e,t,s),c=[];if(i.grid.circular){const h=t.getPointPositionForValue(0,s);return new tW({x:h.x,y:h.y,radius:t.getDistanceFromCenterForValue(a)})}for(let h=0;h<r;++h)c.push(t.getPointPositionForValue(h,a));return c}(n):function pse(n){const{scale:t={},fill:e}=n,i=function rse(n,t){let e=null;return"start"===n?e=t.bottom:"end"===n?e=t.top:xi(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(Wo(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(n)}(n);return r instanceof tW?r:Xj(r,i)}(t),{line:r,scale:s,axis:a}=t,c=r.options,h=c.fill,p=c.backgroundColor,{above:v=p,below:b=p}=h||{};i&&r.points.length&&(nM(n,e),function mse(n,t){const{line:e,target:i,above:r,below:s,area:a,scale:c}=t,h=e._loop?"angle":t.axis;n.save(),"x"===h&&s!==r&&(nW(n,i,a.top),iW(n,{line:e,target:i,color:r,scale:c,property:h}),n.restore(),n.save(),nW(n,i,a.bottom)),iW(n,{line:e,target:i,color:s,scale:c,property:h}),n.restore()}(n,{line:r,target:i,above:v,below:b,area:e,scale:s,axis:a}),iM(n))}function nW(n,t,e){const{segments:i,points:r}=t;let s=!0,a=!1;n.beginPath();for(const c of i){const{start:h,end:p}=c,v=r[h],b=r[pU(h,p,r)];s?(n.moveTo(v.x,v.y),s=!1):(n.lineTo(v.x,e),n.lineTo(v.x,v.y)),a=!!t.pathSegment(n,c,{move:a}),a?n.closePath():n.lineTo(b.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function iW(n,t){const{line:e,target:i,property:r,color:s,scale:a}=t,c=function Xoe(n,t,e){const i=n.segments,r=n.points,s=t.points,a=[];for(const c of i){let{start:h,end:p}=c;p=pU(h,p,r);const v=fU(e,r[h],r[p],c.loop);if(!t.segments){a.push({source:c,target:v,start:r[h],end:r[p]});continue}const b=Q5(t,v);for(const D of b){const P=fU(e,s[D.start],s[D.end],D.loop),R=K5(c,r,P);for(const F of R)a.push({source:F,target:D,start:{[e]:Jj(v,P,"start",Math.max)},end:{[e]:Jj(v,P,"end",Math.min)}})}}return a}(e,i,r);for(const{source:h,target:p,start:v,end:b}of c){const{style:{backgroundColor:D=s}={}}=h,P=!0!==i;n.save(),n.fillStyle=D,_se(n,a,P&&fU(r,v,b)),n.beginPath();const R=!!e.pathSegment(n,h);let F;if(P){R?n.closePath():rW(n,i,b,r);const V=!!i.pathSegment(n,p,{move:R,reverse:!0});F=R&&V,F||rW(n,i,v,r)}n.closePath(),n.fill(F?"evenodd":"nonzero"),n.restore()}}function _se(n,t,e){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:a,end:c}=e||{};"x"===s&&(n.beginPath(),n.rect(a,i,c-a,r-i),n.clip())}function rW(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var vse={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let s,a,c,h;for(a=0;a<i;++a)s=n.getDatasetMeta(a),c=s.dataset,h=null,c&&c.options&&c instanceof mM&&(h={visible:n.isDatasetVisible(a),index:a,fill:nse(c,a,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:c}),s.$filler=h,r.push(h);for(a=0;a<i;++a)h=r[a],h&&!1!==h.fill&&(h.fill=tse(r,a,e.propagate))},beforeDraw(n,t,e){const i="beforeDraw"===e.drawTime,r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=r.length-1;a>=0;--a){const c=r[a].$filler;c&&(c.line.updateControlPoints(s,c.axis),i&&c.fill&&gU(n.ctx,c,s))}},beforeDatasetsDraw(n,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;eW(s)&&gU(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!eW(i)||"beforeDatasetDraw"!==e.drawTime||gU(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oW=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class sW extends qd{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=qr(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,r=Bs(i.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=oW(i,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(a,s,c,h)+10):(v=this.maxHeight,p=this._fitCols(a,r,c,h)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:a,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+c;let b=t;s.textAlign="left",s.textBaseline="middle";let D=-1,P=-v;return this.legendItems.forEach((R,F)=>{const V=i+e/2+s.measureText(R.text).width;(0===F||p[p.length-1]+V+2*c>a)&&(b+=v,p[p.length-(F>0?0:1)]=0,P+=v,D++),h[F]={left:0,top:P,row:D,width:V,height:r},p[p.length-1]+=V+c}),b}_fitCols(t,e,i,r){const{ctx:s,maxHeight:a,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],p=this.columnSizes=[],v=a-t;let b=c,D=0,P=0,R=0,F=0;return this.legendItems.forEach((V,Q)=>{const{itemWidth:te,itemHeight:re}=function wse(n,t,e,i,r){const s=function bse(n,t,e,i){let r=n.text;return r&&"string"!=typeof r&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),t+e.size/2+i.measureText(r).width}(i,n,t,e),a=function Cse(n,t,e){let i=n;return"string"!=typeof t.text&&(i=aW(t,e)),i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}(i,e,s,V,r);Q>0&&P+re+2*c>v&&(b+=D+c,p.push({width:D,height:P}),R+=D+c,F++,D=P=0),h[Q]={left:R,top:P,col:F,width:te,height:re},D=Math.max(D,te),P+=re+c}),b+=D,p.push({width:D,height:P}),b}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,a=dw(s,this.left,this.width);if(this.isHorizontal()){let c=0,h=Qa(i,this.left+r,this.right-this.lineWidths[c]);for(const p of e)c!==p.row&&(c=p.row,h=Qa(i,this.left+r,this.right-this.lineWidths[c])),p.top+=this.top+t+r,p.left=a.leftForLtr(a.x(h),p.width),h+=p.width+r}else{let c=0,h=Qa(i,this.top+t+r,this.bottom-this.columnSizes[c].height);for(const p of e)p.col!==c&&(c=p.col,h=Qa(i,this.top+t+r,this.bottom-this.columnSizes[c].height)),p.top=h,p.left+=this.left+r,p.left=a.leftForLtr(a.x(p.left),p.width),h+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;nM(t,this),this._draw(),iM(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:a}=t,c=Go.color,h=dw(t.rtl,this.left,this.width),p=Bs(a.font),{padding:v}=a,b=p.size,D=b/2;let P;this.drawTitle(),r.textAlign=h.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:R,boxHeight:F,itemHeight:V}=oW(a,b),re=this.isHorizontal(),de=this._computeTitleHeight();P=re?{x:Qa(s,this.left+v,this.right-i[0]),y:this.top+v+de,line:0}:{x:this.left+v,y:Qa(s,this.top+de+v,this.bottom-e[0].height),line:0},W5(this.ctx,t.textDirection);const _e=V+v;this.legendItems.forEach((ue,pe)=>{r.strokeStyle=ue.fontColor,r.fillStyle=ue.fontColor;const Le=r.measureText(ue.text).width,et=h.textAlign(ue.textAlign||(ue.textAlign=a.textAlign)),bt=R+D+Le;let at=P.x,ot=P.y;h.setWidth(this.width),re?pe>0&&at+bt+v>this.right&&(ot=P.y+=_e,P.line++,at=P.x=Qa(s,this.left+v,this.right-i[P.line])):pe>0&&ot+_e>this.bottom&&(at=P.x=at+e[P.line].width+v,P.line++,ot=P.y=Qa(s,this.top+de+v,this.bottom-e[P.line].height)),function(ue,pe,Le){if(isNaN(R)||R<=0||isNaN(F)||F<0)return;r.save();const et=ci(Le.lineWidth,1);if(r.fillStyle=ci(Le.fillStyle,c),r.lineCap=ci(Le.lineCap,"butt"),r.lineDashOffset=ci(Le.lineDashOffset,0),r.lineJoin=ci(Le.lineJoin,"miter"),r.lineWidth=et,r.strokeStyle=ci(Le.strokeStyle,c),r.setLineDash(ci(Le.lineDash,[])),a.usePointStyle){const bt={radius:F*Math.SQRT2/2,pointStyle:Le.pointStyle,rotation:Le.rotation,borderWidth:et},at=h.xPlus(ue,R/2);O5(r,bt,at,pe+D,a.pointStyleWidth&&R)}else{const bt=pe+Math.max((b-F)/2,0),at=h.leftForLtr(ue,R),ot=_v(Le.borderRadius);r.beginPath(),Object.values(ot).some(Tn=>0!==Tn)?QE(r,{x:at,y:bt,w:R,h:F,radius:ot}):r.rect(at,bt,R,F),r.fill(),0!==et&&r.stroke()}r.restore()}(h.x(at),ot,ue),at=((n,t,e,i)=>n===(i?"left":"right")?e:"center"===n?(t+e)/2:t)(et,at+R+D,re?at+bt:this.right,t.rtl),function(ue,pe,Le){mv(r,Le.text,ue,pe+V/2,p,{strikethrough:Le.hidden,textAlign:h.textAlign(Le.textAlign)})}(h.x(at),ot,ue),re?P.x+=bt+v:P.y+="string"!=typeof ue.text?aW(ue,p.lineHeight):_e}),$5(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Bs(e.font),r=Ja(e.padding);if(!e.display)return;const s=dw(t.rtl,this.left,this.width),a=this.ctx,c=e.position,p=r.top+i.size/2;let v,b=this.left,D=this.width;if(this.isHorizontal())D=Math.max(...this.lineWidths),v=this.top+p,b=Qa(t.align,b,this.right-D);else{const R=this.columnSizes.reduce((F,V)=>Math.max(F,V.height),0);v=p+Qa(t.align,this.top,this.bottom-R-t.labels.padding-this._computeTitleHeight())}const P=Qa(c,b,b+D);a.textAlign=s.textAlign(zF(c)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,mv(a,e.text,P,v,i)}_computeTitleHeight(){const t=this.options.title,e=Bs(t.font),i=Ja(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(mp(t,this.left,this.right)&&mp(e,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],mp(t,r.left,r.left+r.width)&&mp(e,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function Tse(n,t){return!(("mousemove"!==n&&"mouseout"!==n||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==n&&"mouseup"!==n))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((n,t)=>null!==n&&null!==t&&n.datasetIndex===t.datasetIndex&&n.index===t.index)(r,i);r&&!s&&qr(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&qr(e.onHover,[t,i,this],this)}else i&&qr(e.onClick,[t,i,this],this)}}function aW(n,t){return t*(n.text?n.text.length+.5:0)}var Ese={id:"legend",_element:sW,start(n,t,e){const i=n.legend=new sW({ctx:n.ctx,options:e,chart:n});Xa.configure(n,i,e),Xa.addBox(n,i)},stop(n){Xa.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Xa.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(e?0:void 0),v=Ja(p.borderWidth);return{text:t[h.index].label,fillStyle:p.backgroundColor,fontColor:s,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:a&&(c||p.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class mU extends qd{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=oo(i.text)?i.text.length:1;this._padding=Ja(i.padding);const s=r*Bs(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:s,options:a}=this,c=a.align;let p,v,b,h=0;return this.isHorizontal()?(v=Qa(c,i,s),b=e+t,p=s-i):("left"===a.position?(v=i+t,b=Qa(c,r,e),h=-.5*Co):(v=s-t,b=Qa(c,e,r),h=.5*Co),p=r-e),{titleX:v,titleY:b,maxWidth:p,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Bs(e.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:c,maxWidth:h,rotation:p}=this._drawArgs(s);mv(t,e.text,0,0,i,{color:e.color,maxWidth:h,rotation:p,textAlign:zF(e.align),textBaseline:"middle",translation:[a,c]})}}var xse={id:"title",_element:mU,start(n,t,e){!function Dse(n,t){const e=new mU({ctx:n.ctx,options:t,chart:n});Xa.configure(n,e,t),Xa.addBox(n,e),n.titleBlock=e}(n,e)},stop(n){Xa.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Xa.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vM=new WeakMap;var Ase={id:"subtitle",start(n,t,e){const i=new mU({ctx:n.ctx,options:e,chart:n});Xa.configure(n,i,e),Xa.addBox(n,i),vM.set(n,i)},stop(n){Xa.removeBox(n,vM.get(n)),vM.delete(n)},beforeUpdate(n,t,e){const i=vM.get(n);Xa.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const lD={average(n){if(!n.length)return!1;let t,e,i=0,r=0,s=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const c=a.tooltipPosition();i+=c.x,r+=c.y,++s}}return{x:i/s,y:r/s}},nearest(n,t){if(!n.length)return!1;let s,a,c,e=t.x,i=t.y,r=Number.POSITIVE_INFINITY;for(s=0,a=n.length;s<a;++s){const h=n[s].element;if(h&&h.hasValue()){const v=VF(t,h.getCenterPoint());v<r&&(r=v,c=h)}}if(c){const h=c.tooltipPosition();e=h.x,i=h.y}return{x:e,y:i}}};function rf(n,t){return t&&(oo(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function wp(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function Ise(n,t){const{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:a,value:c}=s.getLabelAndValue(r);return{chart:n,label:a,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:c,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function lW(n,t){const e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:a,boxHeight:c}=t,h=Bs(t.bodyFont),p=Bs(t.titleFont),v=Bs(t.footerFont),b=s.length,D=r.length,P=i.length,R=Ja(t.padding);let F=R.height,V=0,Q=i.reduce((de,_e)=>de+_e.before.length+_e.lines.length+_e.after.length,0);Q+=n.beforeBody.length+n.afterBody.length,b&&(F+=b*p.lineHeight+(b-1)*t.titleSpacing+t.titleMarginBottom),Q&&(F+=P*(t.displayColors?Math.max(c,h.lineHeight):h.lineHeight)+(Q-P)*h.lineHeight+(Q-1)*t.bodySpacing),D&&(F+=t.footerMarginTop+D*v.lineHeight+(D-1)*t.footerSpacing);let te=0;const re=function(de){V=Math.max(V,e.measureText(de).width+te)};return e.save(),e.font=p.string,mr(n.title,re),e.font=h.string,mr(n.beforeBody.concat(n.afterBody),re),te=t.displayColors?a+2+t.boxPadding:0,mr(i,de=>{mr(de.before,re),mr(de.lines,re),mr(de.after,re)}),te=0,e.font=v.string,mr(n.footer,re),e.restore(),V+=R.width,{width:V,height:F}}function Pse(n,t,e,i){const{x:r,width:s}=e,{width:a,chartArea:{left:c,right:h}}=n;let p="center";return"center"===i?p=r<=(c+h)/2?"left":"right":r<=s/2?p="left":r>=a-s/2&&(p="right"),function Mse(n,t,e,i){const{x:r,width:s}=i,a=e.caretSize+e.caretPadding;if("left"===n&&r+s+a>t.width||"right"===n&&r-s-a<0)return!0}(p,n,t,e)&&(p="center"),p}function cW(n,t,e){const i=e.yAlign||t.yAlign||function Sse(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}(n,e);return{xAlign:e.xAlign||t.xAlign||Pse(n,t,e,i),yAlign:i}}function uW(n,t,e,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=n,{xAlign:c,yAlign:h}=e,p=r+s,{topLeft:v,topRight:b,bottomLeft:D,bottomRight:P}=_v(a);let R=function kse(n,t){let{x:e,width:i}=n;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,c);const F=function Ose(n,t,e){let{y:i,height:r}=n;return"top"===t?i+=e:i-="bottom"===t?r+e:r/2,i}(t,h,p);return"center"===h?"left"===c?R+=p:"right"===c&&(R-=p):"left"===c?R-=Math.max(v,D)+r:"right"===c&&(R+=Math.max(b,P)+r),{x:aa(R,0,i.width-t.width),y:aa(F,0,i.height-t.height)}}function yM(n,t,e){const i=Ja(e.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-i.right:n.x+i.left}function dW(n){return rf([],wp(n))}function hW(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const fW={beforeTitle:gp,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:gp,beforeBody:gp,beforeLabel:gp,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return zi(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:gp,afterBody:gp,beforeFooter:gp,footer:gp,afterFooter:gp};function _c(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?fW[t].call(e,i):r}let pW=(()=>{class n extends qd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,a=new tj(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=function Rse(n,t,e){return um(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:r}=i,s=_c(r,"beforeTitle",this,e),a=_c(r,"title",this,e),c=_c(r,"afterTitle",this,e);let h=[];return h=rf(h,wp(s)),h=rf(h,wp(a)),h=rf(h,wp(c)),h}getBeforeBody(e,i){return dW(_c(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:r}=i,s=[];return mr(e,a=>{const c={before:[],lines:[],after:[]},h=hW(r,a);rf(c.before,wp(_c(h,"beforeLabel",this,a))),rf(c.lines,_c(h,"label",this,a)),rf(c.after,wp(_c(h,"afterLabel",this,a))),s.push(c)}),s}getAfterBody(e,i){return dW(_c(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:r}=i,s=_c(r,"beforeFooter",this,e),a=_c(r,"footer",this,e),c=_c(r,"afterFooter",this,e);let h=[];return h=rf(h,wp(s)),h=rf(h,wp(a)),h=rf(h,wp(c)),h}_createItems(e){const i=this._active,r=this.chart.data,s=[],a=[],c=[];let p,v,h=[];for(p=0,v=i.length;p<v;++p)h.push(Ise(this.chart,i[p]));return e.filter&&(h=h.filter((b,D,P)=>e.filter(b,D,P,r))),e.itemSort&&(h=h.sort((b,D)=>e.itemSort(b,D,r))),mr(h,b=>{const D=hW(e.callbacks,b);s.push(_c(D,"labelColor",this,b)),a.push(_c(D,"labelPointStyle",this,b)),c.push(_c(D,"labelTextColor",this,b))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=c,this.dataPoints=h,h}update(e,i){const r=this.options.setContext(this.getContext()),s=this._active;let a,c=[];if(s.length){const h=lD[r.position].call(this,s,this._eventPosition);c=this._createItems(r),this.title=this.getTitle(c,r),this.beforeBody=this.getBeforeBody(c,r),this.body=this.getBody(c,r),this.afterBody=this.getAfterBody(c,r),this.footer=this.getFooter(c,r);const p=this._size=lW(this,r),v=Object.assign({},h,p),b=cW(this.chart,r,v),D=uW(r,v,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,a={opacity:1,x:D.x,y:D.y,width:p.width,height:p.height,caretX:h.x,caretY:h.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=c,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){const a=this.getCaretPosition(e,r,s);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)}getCaretPosition(e,i,r){const{xAlign:s,yAlign:a}=this,{caretSize:c,cornerRadius:h}=r,{topLeft:p,topRight:v,bottomLeft:b,bottomRight:D}=_v(h),{x:P,y:R}=e,{width:F,height:V}=i;let Q,te,re,de,_e,ue;return"center"===a?(_e=R+V/2,"left"===s?(Q=P,te=Q-c,de=_e+c,ue=_e-c):(Q=P+F,te=Q+c,de=_e-c,ue=_e+c),re=Q):(te="left"===s?P+Math.max(p,b)+c:"right"===s?P+F-Math.max(v,D)-c:this.caretX,"top"===a?(de=R,_e=de-c,Q=te-c,re=te+c):(de=R+V,_e=de+c,Q=te+c,re=te-c),ue=de),{x1:Q,x2:te,x3:re,y1:de,y2:_e,y3:ue}}drawTitle(e,i,r){const s=this.title,a=s.length;let c,h,p;if(a){const v=dw(r.rtl,this.x,this.width);for(e.x=yM(this,r.titleAlign,r),i.textAlign=v.textAlign(r.titleAlign),i.textBaseline="middle",c=Bs(r.titleFont),h=r.titleSpacing,i.fillStyle=r.titleColor,i.font=c.string,p=0;p<a;++p)i.fillText(s[p],v.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+h,p+1===a&&(e.y+=r.titleMarginBottom-h)}}_drawColorBox(e,i,r,s,a){const c=this.labelColors[r],h=this.labelPointStyles[r],{boxHeight:p,boxWidth:v}=a,b=Bs(a.bodyFont),D=yM(this,"left",a),P=s.x(D),F=i.y+(p<b.lineHeight?(b.lineHeight-p)/2:0);if(a.usePointStyle){const V={radius:Math.min(v,p)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},Q=s.leftForLtr(P,v)+v/2,te=F+p/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,$F(e,V,Q,te),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,$F(e,V,Q,te)}else{e.lineWidth=xi(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const V=s.leftForLtr(P,v),Q=s.leftForLtr(s.xPlus(P,1),v-2),te=_v(c.borderRadius);Object.values(te).some(re=>0!==re)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,QE(e,{x:V,y:F,w:v,h:p,radius:te}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),QE(e,{x:Q,y:F+1,w:v-2,h:p-2,radius:te}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(V,F,v,p),e.strokeRect(V,F,v,p),e.fillStyle=c.backgroundColor,e.fillRect(Q,F+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){const{body:s}=this,{bodySpacing:a,bodyAlign:c,displayColors:h,boxHeight:p,boxWidth:v,boxPadding:b}=r,D=Bs(r.bodyFont);let P=D.lineHeight,R=0;const F=dw(r.rtl,this.x,this.width),V=function(et){i.fillText(et,F.x(e.x+R),e.y+P/2),e.y+=P+a},Q=F.textAlign(c);let te,re,de,_e,ue,pe,Le;for(i.textAlign=c,i.textBaseline="middle",i.font=D.string,e.x=yM(this,Q,r),i.fillStyle=r.bodyColor,mr(this.beforeBody,V),R=h&&"right"!==Q?"center"===c?v/2+b:v+2+b:0,_e=0,pe=s.length;_e<pe;++_e){for(te=s[_e],re=this.labelTextColors[_e],i.fillStyle=re,mr(te.before,V),de=te.lines,h&&de.length&&(this._drawColorBox(i,e,_e,F,r),P=Math.max(D.lineHeight,p)),ue=0,Le=de.length;ue<Le;++ue)V(de[ue]),P=D.lineHeight;mr(te.after,V)}R=0,P=D.lineHeight,mr(this.afterBody,V),e.y-=a}drawFooter(e,i,r){const s=this.footer,a=s.length;let c,h;if(a){const p=dw(r.rtl,this.x,this.width);for(e.x=yM(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=p.textAlign(r.footerAlign),i.textBaseline="middle",c=Bs(r.footerFont),i.fillStyle=r.footerColor,i.font=c.string,h=0;h<a;++h)i.fillText(s[h],p.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){const{xAlign:a,yAlign:c}=this,{x:h,y:p}=e,{width:v,height:b}=r,{topLeft:D,topRight:P,bottomLeft:R,bottomRight:F}=_v(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(h+D,p),"top"===c&&this.drawCaret(e,i,r,s),i.lineTo(h+v-P,p),i.quadraticCurveTo(h+v,p,h+v,p+P),"center"===c&&"right"===a&&this.drawCaret(e,i,r,s),i.lineTo(h+v,p+b-F),i.quadraticCurveTo(h+v,p+b,h+v-F,p+b),"bottom"===c&&this.drawCaret(e,i,r,s),i.lineTo(h+R,p+b),i.quadraticCurveTo(h,p+b,h,p+b-R),"center"===c&&"left"===a&&this.drawCaret(e,i,r,s),i.lineTo(h,p+D),i.quadraticCurveTo(h,p,h+D,p),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,r=this.$animations,s=r&&r.x,a=r&&r.y;if(s||a){const c=lD[e.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=lW(this,e),p=Object.assign({},c,this._size),v=cW(i,e,p),b=uW(e,p,v,i);(s._to!==b.x||a._to!==b.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const c=Ja(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,s,i),W5(e,i.textDirection),a.y+=c.top,this.drawTitle(a,e,i),this.drawBody(a,e,i),this.drawFooter(a,e,i),$5(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const r=this._active,s=e.map(({datasetIndex:h,index:p})=>{const v=this.chart.getDatasetMeta(h);if(!v)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:v.data[p],index:p}}),a=!KS(r,s),c=this._positionChanged(s,i);(a||c)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],c=this._getActiveElements(e,a,i,r),h=this._positionChanged(c,e),p=i||!KS(c,a)||h;return p&&(this._active=c,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),p}_getActiveElements(e,i,r,s){const a=this.options;if("mouseout"===e.type)return[];if(!s)return i;const c=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&c.reverse(),c}_positionChanged(e,i){const{caretX:r,caretY:s,options:a}=this,c=lD[a.position].call(this,e,i);return!1!==c&&(r!==c.x||s!==c.y)}}return Nt(n,"positioners",lD),n})();var Nse={id:"tooltip",_element:pW,positioners:lD,afterInit(n,t,e){e&&(n.tooltip=new pW({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){n.tooltip&&n.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fW},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Lse=Object.freeze({__proto__:null,Colors:Goe,Decimation:Joe,Filler:vse,Legend:Ese,SubTitle:Ase,Title:xse,Tooltip:Nse});function gW(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}let Vse=(()=>{class n extends Cv{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const r=this.getLabels();for(const{index:s,label:a}of i)r[s]===a&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(zi(e))return null;const r=this.getLabels();return i=isFinite(i)&&r[i]===e?i:function Use(n,t,e,i){const r=n.indexOf(t);return-1===r?((n,t,e,i)=>("string"==typeof t?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(n,t,e,i):r!==n.lastIndexOf(t)?e:r}(r,e,ci(i,e),this._addedLabels),((n,t)=>null===n?null:aa(Math.round(n),0,t))(i,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,i=this.max,r=this.options.offset,s=[];let a=this.getLabels();a=0===e&&i===a.length-1?a:a.slice(e,i+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let c=e;c<=i;c++)s.push({value:c});return s}getLabelForValue(e){return gW.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return Nt(n,"id","category"),Nt(n,"defaults",{ticks:{callback:gW}}),n})();function mW(n,t,{horizontal:e,minRotation:i}){const r=Hd(i),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+n).length)}class wM extends Cv{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return zi(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const a=h=>r=e?r:h,c=h=>s=i?s:h;if(t){const h=tf(r),p=tf(s);h<0&&p<0?c(0):h>0&&p>0&&a(0)}if(r===s){let h=0===s?1:Math.abs(.05*s);c(s+h),t||a(r-h)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:i}=t;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a=function Zse(n,t){const e=[],{bounds:r,step:s,min:a,max:c,precision:h,count:p,maxTicks:v,maxDigits:b,includeBounds:D}=n,P=s||1,R=v-1,{min:F,max:V}=t,Q=!zi(a),te=!zi(c),re=!zi(p),de=(V-F)/(b+1);let ue,pe,Le,et,_e=m5((V-F)/R/P)*P;if(_e<1e-14&&!Q&&!te)return[{value:F},{value:V}];et=Math.ceil(V/_e)-Math.floor(F/_e),et>R&&(_e=m5(et*_e/R/P)*P),zi(h)||(ue=Math.pow(10,h),_e=Math.ceil(_e*ue)/ue),"ticks"===r?(pe=Math.floor(F/_e)*_e,Le=Math.ceil(V/_e)*_e):(pe=F,Le=V),Q&&te&&s&&function Mne(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}((c-a)/s,_e/1e3)?(et=Math.round(Math.min((c-a)/_e,v)),_e=(c-a)/et,pe=a,Le=c):re?(pe=Q?a:pe,Le=te?c:Le,et=p-1,_e=(Le-pe)/et):(et=(Le-pe)/_e,et=WE(et,Math.round(et),_e/1e3)?Math.round(et):Math.ceil(et));const bt=Math.max(v5(_e),v5(pe));ue=Math.pow(10,zi(h)?bt:h),pe=Math.round(pe*ue)/ue,Le=Math.round(Le*ue)/ue;let at=0;for(Q&&(D&&pe!==a?(e.push({value:a}),pe<a&&at++,WE(Math.round((pe+at*_e)*ue)/ue,a,mW(a,de,n))&&at++):pe<a&&at++);at<et;++at){const ot=Math.round((pe+at*_e)*ue)/ue;if(te&&ot>c)break;e.push({value:ot})}return te&&D&&Le!==c?e.length&&WE(e[e.length-1].value,c,mW(c,de,n))?e[e.length-1].value=c:e.push({value:c}):(!te||Le===c)&&e.push({value:Le}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&_5(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return YE(t,this.chart.options.locale,this.options.ticks.format)}}class _U extends wM{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Wo(t)?t:0,this.max=Wo(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Hd(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Nt(_U,"id","linear"),Nt(_U,"defaults",{ticks:{callback:eM.formatters.numeric}});const cD=n=>Math.floor(cm(n)),Tv=(n,t)=>Math.pow(10,cD(n)+t);function _W(n){return n/Math.pow(10,cD(n))==1}function vW(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}class vU extends Cv{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=wM.prototype.parse.apply(this,[t,e]);if(0!==i)return Wo(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Wo(t)?Math.max(0,t):null,this.max=Wo(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Wo(this._userMin)&&(this.min=t===Tv(this.min,0)?Tv(this.min,-1):Tv(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=c=>i=t?i:c,a=c=>r=e?r:c;i===r&&(i<=0?(s(1),a(10)):(s(Tv(i,-1)),a(Tv(r,1)))),i<=0&&s(Tv(r,-1)),r<=0&&a(Tv(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,i=function Hse(n,{min:t,max:e}){t=tu(n.min,t);const i=[],r=cD(t);let s=function zse(n,t){let i=cD(t-n);for(;vW(n,t,i)>10;)i++;for(;vW(n,t,i)<10;)i--;return Math.min(i,cD(n))}(t,e),a=s<0?Math.pow(10,Math.abs(s)):1;const c=Math.pow(10,s),h=r>s?Math.pow(10,r):0,p=Math.round((t-h)*a)/a,v=Math.floor((t-h)/c/10)*c*10;let b=Math.floor((p-v)/Math.pow(10,s)),D=tu(n.min,Math.round((h+v+b*Math.pow(10,s))*a)/a);for(;D<e;)i.push({value:D,major:_W(D),significand:b}),b>=10?b=b<15?15:20:b++,b>=20&&(s++,b=2,a=s>=0?1:a),D=Math.round((h+v+b*Math.pow(10,s))*a)/a;const P=tu(n.max,D);return i.push({value:P,major:_W(P),significand:b}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&_5(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":YE(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=cm(t),this._valueRange=cm(this.max)-cm(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(cm(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function yU(n){const t=n.ticks;if(t.display&&n.display){const e=Ja(t.backdropPadding);return ci(t.font&&t.font.size,Go.font.size)+e.height}return 0}function qse(n,t,e){return e=oo(e)?e:[e],{w:$ne(n,t.string,e),h:e.length*t.lineHeight}}function yW(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function Wse(n,t,e,i,r){const s=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let c=0,h=0;i.start<t.l?(c=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-c)):i.end>t.r&&(c=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+c)),r.start<t.t?(h=(t.t-r.start)/a,n.t=Math.min(n.t,t.t-h)):r.end>t.b&&(h=(r.end-t.b)/a,n.b=Math.max(n.b,t.b+h))}function $se(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:a,size:c}=e,h=n.getPointPosition(t,i+r+a,s),p=Math.round(BF(nu(h.angle+$o))),v=function Jse(n,t,e){return 90===e||270===e?n-=t/2:(e>270||e<90)&&(n-=t),n}(h.y,c.h,p),b=function Kse(n){return 0===n||180===n?"center":n<180?"left":"right"}(p),D=function Qse(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}(h.x,c.w,b);return{visible:!0,x:h.x,y:v,textAlign:b,left:D,top:v,right:D+c.w,bottom:v+c.h}}function Gse(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:s}=n;return!(vp({x:e,y:i},t)||vp({x:e,y:s},t)||vp({x:r,y:i},t)||vp({x:r,y:s},t))}function Xse(n,t,e){const{left:i,top:r,right:s,bottom:a}=e,{backdropColor:c}=t;if(!zi(c)){const h=_v(t.borderRadius),p=Ja(t.backdropPadding);n.fillStyle=c;const v=i-p.left,b=r-p.top,D=s-i+p.width,P=a-r+p.height;Object.values(h).some(R=>0!==R)?(n.beginPath(),QE(n,{x:v,y:b,w:D,h:P,radius:h}),n.fill()):n.fillRect(v,b,D,P)}}function wW(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,so);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let a=1;a<i;a++)s=n.getPointPosition(a,t),r.lineTo(s.x,s.y)}}Nt(vU,"id","logarithmic"),Nt(vU,"defaults",{ticks:{callback:eM.formatters.logarithmic,major:{enabled:!0}}});class uD extends wM{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ja(yU(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Wo(t)&&!isNaN(t)?t:0,this.max=Wo(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yU(this.options))}generateTickLabels(t){wM.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=qr(this.options.pointLabels.callback,[e,i],this);return r||0===r?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function jse(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,a=n.options.pointLabels,c=a.centerPointLabels?Co/s:0;for(let h=0;h<s;h++){const p=a.setContext(n.getPointLabelContext(h));r[h]=p.padding;const v=n.getPointPosition(h,n.drawingArea+r[h],c),b=Bs(p.font),D=qse(n.ctx,b,n._pointLabels[h]);i[h]=D;const P=nu(n.getIndexAngle(h)+c),R=Math.round(BF(P));Wse(e,t,P,yW(R,v.x,D.w,0,180),yW(R,v.y,D.h,90,270))}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=function Yse(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:c}=s.pointLabels,h={extra:yU(s)/2,additionalAngle:a?Co/r:0};let p;for(let v=0;v<r;v++){h.padding=e[v],h.size=t[v];const b=$se(n,v,h);i.push(b),"auto"===c&&(b.visible=Gse(b,p),b.visible&&(p=b))}return i}(n,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return nu(t*(so/(this._pointLabels.length||1))+Hd(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(zi(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(zi(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function nae(n,t,e){return um(n,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-$o+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),wW(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,a=this._pointLabels.length;let c,h,p;if(e.pointLabels.display&&function eae(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const a=i.setContext(n.getPointLabelContext(r));Xse(e,a,s);const c=Bs(a.font),{x:h,y:p,textAlign:v}=s;mv(e,n._pointLabels[r],h,p+c.lineHeight/2,c,{color:a.color,textAlign:v,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((v,b)=>{if(0!==b){h=this.getDistanceFromCenterForValue(v.value);const D=this.getContext(b),P=r.setContext(D),R=s.setContext(D);!function tae(n,t,e,i,r){const s=n.ctx,a=t.circular,{color:c,lineWidth:h}=t;!a&&!i||!c||!h||e<0||(s.save(),s.strokeStyle=c,s.lineWidth=h,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),wW(n,e,a,i),s.closePath(),s.stroke(),s.restore())}(this,P,h,a,R)}}),i.display){for(t.save(),c=a-1;c>=0;c--){const v=i.setContext(this.getPointLabelContext(c)),{color:b,lineWidth:D}=v;!D||!b||(t.lineWidth=D,t.strokeStyle=b,t.setLineDash(v.borderDash),t.lineDashOffset=v.borderDashOffset,h=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),p=this.getPointPosition(c,h),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((c,h)=>{if(0===h&&!e.reverse)return;const p=i.setContext(this.getContext(h)),v=Bs(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[h].value),p.showLabelBackdrop){t.font=v.string,a=t.measureText(c.label).width,t.fillStyle=p.backdropColor;const b=Ja(p.backdropPadding);t.fillRect(-a/2-b.left,-s-v.size/2-b.top,a+b.width,v.size+b.height)}mv(t,c.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}Nt(uD,"id","radialLinear"),Nt(uD,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:eM.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}}),Nt(uD,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Nt(uD,"descriptors",{angleLines:{_fallback:"grid"}});const bM={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vc=Object.keys(bM);function iae(n,t){return n-t}function bW(n,t){if(zi(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let a=t;return"function"==typeof i&&(a=i(a)),Wo(a)||(a="string"==typeof i?e.parse(a,i):e.parse(a)),null===a?null:(r&&(a="week"!==r||!lw(s)&&!0!==s?e.startOf(a,r):e.startOf(a,"isoWeek",s)),+a)}function CW(n,t,e,i){const r=vc.length;for(let s=vc.indexOf(n);s<r-1;++s){const a=bM[vc[s]];if(a.common&&Math.ceil((e-t)/((a.steps?a.steps:Number.MAX_SAFE_INTEGER)*a.size))<=i)return vc[s]}return vc[r-1]}function TW(n,t,e){if(e){if(e.length){const{lo:i,hi:r}=ZF(e,t);n[e[i]>=t?e[i]:e[r]]=!0}}else n[t]=!0}function EW(n,t,e){const i=[],r={},s=t.length;let a,c;for(a=0;a<s;++a)c=t[a],r[c]=a,i.push({value:c,major:!1});return 0!==s&&e?function sae(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let c,h;for(c=s;c<=a;c=+r.add(c,1,i))h=e[c],h>=0&&(t[h].major=!0);return t}(n,i,r,e):i}let wU=(()=>{class n extends Cv{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const r=e.time||(e.time={}),s=this._adapter=new hre__date(e.adapters.date);s.init(i),qE(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:bW(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,r=e.time.unit||"day";let{min:s,max:a,minDefined:c,maxDefined:h}=this.getUserBounds();function p(v){!c&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!h&&!isNaN(v.max)&&(a=Math.max(a,v.max))}(!c||!h)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=Wo(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),a=Wo(a)&&!isNaN(a)?a:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){const e=this.options,i=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,h=function Rne(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}(s,a,this.max);return this._unit=i.unit||(r.autoSkip?CW(i.minUnit,this.min,this.max,this._getLabelCapacity(a)):function rae(n,t,e,i,r){for(let s=vc.length-1;s>=vc.indexOf(e);s--){const a=vc[s];if(bM[a].common&&n._adapter.diff(r,i,a)>=t-1)return a}return vc[e?vc.indexOf(e):0]}(this,h.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function oae(n){for(let t=vc.indexOf(n)+1,e=vc.length;t<e;++t)if(bM[vc[t]].common)return vc[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&h.reverse(),EW(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s,a,i=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),i=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),r=1===e.length?a:(a-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;i=aa(i,0,c),r=aa(r,0,c),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,i=this.min,r=this.max,s=this.options,a=s.time,c=a.unit||CW(a.minUnit,i,r,this._getLabelCapacity(i)),h=ci(s.ticks.stepSize,1),p="week"===c&&a.isoWeekday,v=lw(p)||!0===p,b={};let P,R,D=i;if(v&&(D=+e.startOf(D,"isoWeek",p)),D=+e.startOf(D,v?"day":c),e.diff(r,i,c)>1e5*h)throw new Error(i+" and "+r+" are too far apart with stepSize of "+h+" "+c);const F="data"===s.ticks.source&&this.getDataTimestamps();for(P=D,R=0;P<r;P=+e.add(P,h,c),R++)TW(b,P,F);return(P===r||"ticks"===s.bounds||1===R)&&TW(b,P,F),Object.keys(b).sort((V,Q)=>V-Q).map(V=>+V)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}format(e,i){return this._adapter.format(e,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,i,r,s){const a=this.options,c=a.ticks.callback;if(c)return qr(c,[e,i,r],this);const h=a.time.displayFormats,p=this._unit,v=this._majorUnit,D=v&&h[v],P=r[i];return this._adapter.format(e,s||(v&&D&&P&&P.major?D:p&&h[p]))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){const i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,r=this.ctx.measureText(e).width,s=Hd(this.isHorizontal()?i.maxRotation:i.minRotation),a=Math.cos(s),c=Math.sin(s),h=this._resolveTickFontOptions(0).size;return{w:r*a+h*c,h:r*c+h*a}}_getLabelCapacity(e){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,a=this._tickFormatFunction(e,0,EW(this,[e],this._majorUnit),s),c=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let i,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,r;if(e.length)return e;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(bW(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return C5(e.sort(iae))}}return Nt(n,"id","time"),Nt(n,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),n})();function CM(n,t,e){let s,a,c,h,i=0,r=n.length-1;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=_p(n,"pos",t)),({pos:s,time:c}=n[i]),({pos:a,time:h}=n[r])):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=_p(n,"time",t)),({time:s,pos:c}=n[i]),({time:a,pos:h}=n[r]));const p=a-s;return p?c+(h-c)*(t-s)/p:c}class bU extends wU{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=CM(e,this.min),this._tableRange=CM(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let a,c,h,p,v;for(a=0,c=t.length;a<c;++a)p=t[a],p>=e&&p<=i&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(a=0,c=r.length;a<c;++a)v=r[a+1],h=r[a-1],p=r[a],Math.round((v+h)/2)!==p&&s.push({time:p,pos:a/(c-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(CM(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return CM(this._table,i*this._tableRange+this._minPos,!0)}}Nt(bU,"id","timeseries"),Nt(bU,"defaults",wU.defaults);const DW=[dre,zoe,Lse,Object.freeze({__proto__:null,CategoryScale:Vse,LinearScale:_U,LogarithmicScale:vU,RadialLinearScale:uD,TimeScale:wU,TimeSeriesScale:bU})];let CU=(()=>{class n{constructor(e){this.dbService=e}ngOnInit(){}onGetCountTableList(e){var i=this;return(0,be.Z)(function*(){let r=0;return yield i.dbService.getData(e).then(s=>{s.forEach(()=>{r+=1})}),r})()}onGetMoneyData(){var e=this;return(0,be.Z)(function*(){let i=[];return yield e.dbService.getData("moneyDb").then(r=>{r.forEach(s=>{i.push(s.data())})}).catch(r=>{console.log(r)}),i})()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lae=(()=>{class n{constructor(e){this.chartService=e}ngOnInit(){this.chart_1()}chart_1(){var e=this;return(0,be.Z)(function*(){let i=[0,0,0,0],r=["landlordDb","tenantDb","otherDb","propertyDb"];for(let s=1;s<5;s++)yield e.chartService.onGetCountTableList(r[s-1]).then(a=>{i[s-1]=a});new hm("myChart",{type:"bar",data:{labels:[`${i[0]} Landlords`,`${i[1]} Tenants`,`${i[2]} Others`,`${i[3]} Properties`],datasets:[{label:"Company Estate Agent",data:[i[0],i[1],i[2],i[3]],backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(CU))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-chart-ltop"]],decls:2,vars:0,consts:[["id","divChart"],["id","myChart"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"canvas",1),o.qZA())},styles:["#divChart[_ngcontent-%COMP%]{display:block;width:40vw;height:400px}@media only screen and (max-width: 1000px){#divChart[_ngcontent-%COMP%]{display:block;width:60vw;height:400px}}"]}),n})(),sf=(()=>{class n{transform(e){if(e){const i=e.split(" ");for(let r=0;r<i.length;r++)i[r]=i[r].charAt(0).toUpperCase()+i[r].slice(1);return i.join(" ")}return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"upperFirst",type:n,pure:!0}),n})(),cae=(()=>{class n{transform(e){let i=(new Date).getUTCDate(),r=(new Date).getUTCMonth(),s=e.currentDayDate;return i===s&&r===e.currentMonthDate?"Today":i===s+1?"Yesterday":e.date}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"checkNoteDatePipe",type:n,pure:!0}),n})();function uae(n,t){if(1&n&&(o.TgZ(0,"li")(1,"div",15)(2,"div",16)(3,"p"),o._uU(4),o.ALo(5,"checkNoteDatePipe"),o.qZA(),o.TgZ(6,"p"),o._uU(7,"Rent Notification"),o.qZA()(),o.TgZ(8,"p",17),o._uU(9,"Today is the due date for your rent payment for the property located at "),o.TgZ(10,"a",18),o._uU(11),o.qZA(),o._uU(12,". The rent is collected form "),o.TgZ(13,"a",19),o._uU(14),o.ALo(15,"upperFirst"),o.ALo(16,"upperFirst"),o.qZA(),o._uU(17),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(4),o.Oqu(o.lcZ(5,5,e)),o.xp6(7),o.Oqu(e.postcode),o.xp6(3),o.AsE("",o.lcZ(15,7,e.tfn)," ",o.lcZ(16,9,e.tln),""),o.xp6(3),o.hij(" , with amount ",e.rent,"")}}let dae=(()=>{class n{constructor(e,i){this.noteService=e,this.http=i,this.arrs=[],this.count=0,this.noteService.getTenantNote(),this.noteService.fetchData(),this.fatchDataNoFilter()}ngOnInit(){}postDATA(){this.noteService.deleteData()}fetchDATA(){var e=this;return(0,be.Z)(function*(){yield e.noteService.fetchData().then(i=>{}).catch(i=>{})})()}fatchDataNoFilter(){var e=this;return(0,be.Z)(function*(){return yield e.http.get("https://estateagent-2da55-default-rtdb.europe-west1.firebasedatabase.app/posts.json").subscribe(i=>{e.arrs.push(Object.values(i))})})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($te),o.Y36(BE))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-home"]],decls:22,vars:1,consts:[[1,"container"],[1,"row"],[1,"col"],["id","container_1"],[1,"card",2,"width","18rem"],["src","assets/images/home_company_card.png","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"],["id","calender"],["id","container_2"],["id","chart"],["id","notification"],[4,"ngFor","ngForOf"],["id","notificationCard",1,"card"],[1,"card-header"],[2,"font-size","14px"],["routerLink","/properties"],["routerLink","/tenants"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"div",6)(7,"h5",7),o._uU(8,"Company Details"),o.qZA(),o.TgZ(9,"p",8),o._uU(10,"An estate agent company is a professional organization that specializes in facilitating property transactions."),o.qZA(),o.TgZ(11,"a",9),o._uU(12,"More info"),o.qZA()()(),o.TgZ(13,"div",10),o._UZ(14,"app-calendar"),o.qZA()(),o._UZ(15,"hr"),o.TgZ(16,"div",11)(17,"div",12),o._UZ(18,"app-chart-ltop"),o.qZA(),o.TgZ(19,"div",13)(20,"ul"),o.YNc(21,uae,18,11,"li",14),o.qZA()()()()()()),2&e&&(o.xp6(21),o.Q6J("ngForOf",i.arrs[0]))},dependencies:[Li,Hm,Yte,lae,sf,cae],styles:["#container_1[_ngcontent-%COMP%]{display:flex;justify-content:space-around}#calender[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]{text-align:center}#container_2[_ngcontent-%COMP%]{display:flex;margin-top:2rem;padding:0rem}#chart[_ngcontent-%COMP%]{display:flex}#notification[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}#notification[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{height:20rem;overflow:hidden;overflow-y:scroll}.card[_ngcontent-%COMP%]{margin-top:.75vh;font-size:14px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left;padding:.5rem}.card-header[_ngcontent-%COMP%]{font-size:14px;display:flex;justify-content:space-between;font-weight:700}@media only screen and (max-width: 1000px){#container_1[_ngcontent-%COMP%]{display:block;text-align:center;justify-content:center}#container_2[_ngcontent-%COMP%]{display:block}}@media only screen and (max-width:650px){#calender[_ngcontent-%COMP%]{display:none}}"]}),n})(),hae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-not-found"]],inputs:{userStatus:"userStatus"},decls:2,vars:0,template:function(e,i){1&e&&(o.TgZ(0,"p"),o._uU(1,"not-found works!"),o.qZA())}}),n})(),xW=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Ev=(()=>{class n extends xW{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const jd=new o.OlP("NgValueAccessor"),gae={provide:jd,useExisting:(0,o.Gpc)(()=>No),multi:!0},_ae=new o.OlP("CompositionEventMode");let No=(()=>{class n extends xW{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mae(){const n=W()?W().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(_ae,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([gae]),o.qOj]}),n})();const vae=!1;function pm(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const el=new o.OlP("NgValidators"),gm=new o.OlP("NgAsyncValidators"),yae=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function PW(n){return pm(n.value)?{required:!0}:null}function OW(n){return pm(n.value)||yae.test(n.value)?null:{email:!0}}function TM(n){return null}function FW(n){return null!=n}function UW(n){const t=(0,o.QGY)(n)?(0,ai.D)(n):n;if(vae&&!(0,o.CqO)(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new o.vHH(-1101,e)}return t}function BW(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function VW(n,t){return t.map(e=>e(n))}function ZW(n){return n.map(t=>function wae(n){return!n.validate}(t)?t:e=>t.validate(e))}function TU(n){return null!=n?function zW(n){if(!n)return null;const t=n.filter(FW);return 0==t.length?null:function(e){return BW(VW(e,t))}}(ZW(n)):null}function EU(n){return null!=n?function HW(n){if(!n)return null;const t=n.filter(FW);return 0==t.length?null:function(e){return function fae(...n){const t=(0,Qs.jO)(n),{args:e,keys:i}=bh(n),r=new Ti.y(s=>{const{length:a}=e;if(!a)return void s.complete();const c=new Array(a);let h=a,p=a;for(let v=0;v<a;v++){let b=!1;(0,bl.Xf)(e[v]).subscribe((0,fr.x)(s,D=>{b||(b=!0,p--),c[v]=D},()=>h--,void 0,()=>{(!h||!b)&&(p||s.next(i?Ch(i,c):c),s.complete())}))}});return t?r.pipe(gs(t)):r}(VW(e,t).map(UW)).pipe((0,qt.U)(BW))}}(ZW(n)):null}function qW(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function DU(n){return n?Array.isArray(n)?n:[n]:[]}function EM(n,t){return Array.isArray(n)?n.includes(t):n===t}function $W(n,t){const e=DU(t);return DU(n).forEach(r=>{EM(e,r)||e.push(r)}),e}function GW(n,t){return DU(t).filter(e=>!EM(n,e))}class YW{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=TU(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=EU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ol extends YW{get formDirective(){return null}get path(){return null}}class mm extends YW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KW{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let us=(()=>{class n extends KW{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(mm,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),iu=(()=>{class n extends KW{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ol,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();function QW(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const IU=!1,dD="VALID",xM="INVALID",fw="PENDING",hD="DISABLED";function SU(n){return(AM(n)?n.validators:n)||null}function MU(n,t){return(AM(t)?t.asyncValidators:n)||null}function AM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class e${constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===dD}get invalid(){return this.status===xM}get pending(){return this.status==fw}get disabled(){return this.status===hD}get enabled(){return this.status!==hD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators($W(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators($W(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(GW(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(GW(t,this._rawAsyncValidators))}hasValidator(t){return EM(this._rawValidators,t)}hasAsyncValidator(t){return EM(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=fw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=hD,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=dD,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dD||this.status===fw)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hD:dD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=fw,this._hasOwnPendingAsyncValidator=!0;const e=UW(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?hD:this.errors?xM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fw)?fw:this._anyControlsHaveStatus(xM)?xM:dD}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){AM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Aae(n){return Array.isArray(n)?TU(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Iae(n){return Array.isArray(n)?EU(n):n||null}(this._rawAsyncValidators)}}class PU extends e${constructor(t,e,i){super(SU(e),MU(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function XW(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,IU?function xae(n,t){return`Must supply a value for form control ${QW(n,t)}`}(t,r):"")})})(this,!0,t),Object.keys(t).forEach(i=>{(function JW(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,IU?function Eae(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!i[e])throw new o.vHH(1001,IU?function Dae(n,t){return`Cannot find form control ${QW(n,t)}`}(t,e):"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const pw=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>IM}),IM="always";function fD(n,t,e=IM){kU(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function Pae(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&t$(n,t)})}(n,t),function Oae(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function kae(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&t$(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Mae(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function PM(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function kU(n,t){const e=function jW(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(qW(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function WW(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(qW(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();PM(t._rawValidators,r),PM(t._rawAsyncValidators,r)}function t$(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Uae={provide:Ol,useExisting:(0,o.Gpc)(()=>Rl)},pD=(()=>Promise.resolve())();let Rl=(()=>{class n extends Ol{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new PU({},TU(e),EU(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){pD.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),fD(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){pD.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){pD.then(()=>{const i=this._findContainer(e.path),r=new PU({});(function n$(n,t){kU(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){pD.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){pD.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function i$(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(el,10),o.Y36(gm,10),o.Y36(pw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([Uae]),o.qOj]}),n})();function r$(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function o$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const s$=class extends e${constructor(t=null,e,i){super(SU(e),MU(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AM(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=o$(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){r$(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){r$(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){o$(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Zae={provide:mm,useExisting:(0,o.Gpc)(()=>Yo)},c$=(()=>Promise.resolve())();let Yo=(()=>{class n extends mm{constructor(e,i,r,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new s$,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function NU(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===No?e=s:function Lae(n){return Object.getPrototypeOf(n.constructor)===Ev}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function RU(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){c$.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);c$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function SM(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ol,9),o.Y36(el,10),o.Y36(gm,10),o.Y36(jd,10),o.Y36(o.sBO,8),o.Y36(pw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([Zae]),o.qOj,o.TTD]}),n})(),ru=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const zae={provide:jd,useExisting:(0,o.Gpc)(()=>gw),multi:!0};let gw=(()=>{class n extends Ev{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[o._Bn([zae]),o.qOj]}),n})(),u$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Qae={provide:jd,useExisting:(0,o.Gpc)(()=>ou),multi:!0};function _$(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let ou=(()=>{class n extends Ev{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=_$(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function Jae(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Qae]),o.qOj]}),n})(),Wd=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(_$(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(ou,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Xae={provide:jd,useExisting:(0,o.Gpc)(()=>BU),multi:!0};function v$(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let BU=(()=>{class n extends Ev{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const a=s;for(let c=0;c<a.length;c++){const p=this._getOptionValue(a[c].value);r.push(p)}}else{const a=i.options;for(let c=0;c<a.length;c++){const h=a[c];if(h.selected){const p=this._getOptionValue(h.value);r.push(p)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function ele(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Xae]),o.qOj]}),n})(),$d=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(v$(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(v$(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(BU,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Dv=(()=>{class n{constructor(){this._validator=TM}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):TM,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const ile={provide:el,useExisting:(0,o.Gpc)(()=>la),multi:!0};let la=(()=>{class n extends Dv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=e=>PW}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([ile]),o.qOj]}),n})();const ole={provide:el,useExisting:(0,o.Gpc)(()=>OM),multi:!0};let OM=(()=>{class n extends Dv{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=o.D6c,this.createValidator=e=>OW}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[o._Bn([ole]),o.qOj]}),n})();const ale={provide:el,useExisting:(0,o.Gpc)(()=>Gd),multi:!0};let Gd=(()=>{class n extends Dv{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function y$(n){return"number"==typeof n?n:parseInt(n,10)}(e),this.createValidator=e=>function NW(n){return t=>function IW(n){return null!=n&&"number"==typeof n.length}(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([ale]),o.qOj]}),n})();const lle={provide:el,useExisting:(0,o.Gpc)(()=>Yd),multi:!0};let Yd=(()=>{class n extends Dv{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>function LW(n){if(!n)return TM;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(pm(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[o._Bn([lle]),o.qOj]}),n})(),cle=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[u$]}),n})(),dle=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:pw,useValue:e.callSetDisabledState??IM}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[cle]}),n})();var bp=z(8407);let xv=(()=>{class n{constructor(){}landlordData(){return[{id:"0001",firstName:"john",lastName:"smith",address:"123 Main Street",postcode:"B12 3AB",email:"johnsmith@example.com",phone:"0123456789",details:""},{id:"0002",firstName:"sarah",lastName:"johnson",address:"456 High Road",postcode:"B18 6CD",email:"sarahjohnson@example.com",phone:"9876543210",details:""},{id:"0003",firstName:"david",lastName:"thompson",address:"789 Park Avenue",postcode:"B24 9EF",email:"davidthompson@example.com",phone:"4567891230",details:""},{id:"0004",firstName:"emma",lastName:"wilson",address:"321 Oak Street",postcode:"B15 7FG",email:"emmawilson@example.com",phone:"7890123456",details:""},{id:"0005",firstName:"michael",lastName:"davies",address:"987 Elm Court",postcode:"B20 4GH",email:"michaeldavies@example.com",phone:"5678901234",details:""},{id:"0006",firstName:"laura",lastName:"anderson",address:"654 Grove Lane",postcode:"B10 5IJ",email:"lauraanderson@example.com",phone:"9012345678",details:""},{id:"0007",firstName:"mark",lastName:"wilson",address:"321 Maple Road",postcode:"B9 8KL",email:"markwilson@example.com",phone:"3456789012",details:""},{id:"0008",firstName:"rebecca",lastName:"turner",address:"789 Pine Avenue",postcode:"B16 3MN",email:"rebeccaturner@example.com",phone:"6789012345",details:""},{id:"0009",firstName:"daniel",lastName:"harris",address:"456 Cedar Court",postcode:"B23 7OP",email:"danielharris@example.com",phone:"1234567890",details:""},{id:"0010",firstName:"sophie",lastName:"clark",address:"789 Birch Lane",postcode:"B11 9XY",email:"sophieclark@example.com",phone:"2345678901",details:""}]}tenantData(){return[{id:"0001",firstName:"alex",lastName:"johnson",previousAddress:"234 Park Street",previousPostcode:"B12 4CD",email:"alexjohnson@example.com",phone:"0123456789",owner:"John Smith",currentAddress:"123 Main Street",currentPostcode:"B12 3AB",details:""},{id:"0002",firstName:"emily",lastName:"brown",previousAddress:"789 High Road",previousPostcode:"B18 5EF",email:"emilybrown@example.com",phone:"9876543210",owner:"Sarah Johnson",currentAddress:"456 High Road",currentPostcode:"B18 6CD",details:""},{id:"0003",firstName:"daniel",lastName:"taylor",previousAddress:"567 Park Avenue",previousPostcode:"B24 7GH",email:"danieltaylor@example.com",phone:"4567891230",owner:"David Thompson",currentAddress:"789 Park Avenue",currentPostcode:"B24 9EF",details:""},{id:"0004",firstName:"sophia",lastName:"robinson",previousAddress:"987 Oak Street",previousPostcode:"B15 6IJ",email:"sophiarobinson@example.com",phone:"7890123456",owner:"Emma Wilson",currentAddress:"321 Oak Street",currentPostcode:"B15 7FG",details:""},{id:"0005",firstName:"oliver",lastName:"davis",previousAddress:"456 Elm Court",previousPostcode:"B20 3KL",email:"oliverdavis@example.com",phone:"5678901234",owner:"Michael Davies",currentAddress:"987 Elm Court",currentPostcode:"B20 4GH",details:""},{id:"0006",firstName:"amelia",lastName:"lee",previousAddress:"654 Grove Lane",previousPostcode:"B10 4MN",email:"amelialeee@example.com",phone:"9012345678",owner:"Laura Anderson",currentAddress:"654 Grove Lane",currentPostcode:"B10 5IJ",details:""},{id:"0007",firstName:"william",lastName:"walker",previousAddress:"321 Maple Road",previousPostcode:"B9 7OP",email:"williamwalker@example.com",phone:"3456789012",owner:"Mark Wilson",currentAddress:"321 Maple Road",currentPostcode:"B9 8KL",details:""},{id:"0008",firstName:"ava",lastName:"turner",previousAddress:"789 Pine Avenue",previousPostcode:"B16 2XY",email:"avaturner@example.com",phone:"6789012345",owner:"Rebecca Turner",currentAddress:"789 Pine Avenue",currentPostcode:"B16 3MN",details:""}]}propertyData(){return[{Id:"0001",Owner:"john smith",Address:"123 main street",Postcode:"B12 0YL",City:"Birmingham",Date:"2023-1-20",Rent:"\xa31,200",ServiceCharge:"\xa3100",PaymentDate:"1st of every month",Phone:"0123456782",Details:"Spacious two-bedroom apartment with a balcony overlooking thecity center."},{Id:"0002",Owner:"john smith",Address:"126 main street",Postcode:"B18 7DW",City:"Birmingham",Date:"2023-1-20",Rent:"\xa32,200",ServiceCharge:"\xa3150",PaymentDate:"1st of every month",Phone:"0123456782",Details:"Spacious two-bedroom apartment with a balcony overlooking thecity center."},{Id:"0003",Owner:"sarah johnson",Address:"456 high road",Postcode:"B30 2DN",City:"Birmingham",Date:"2023-1-20",Rent:"\xa3900",ServiceCharge:"\xa375",PaymentDate:"5th of every month",Phone:"9876543210",Details:"Cozy one-bedroom flat located in a quiet residential area near local amenities."},{Id:"0004",Owner:"david thompson",Address:"789 park avenue",Postcode:"B13 9YE",City:"Birmingham",Date:"2023-1-20",Rent:"\xa31,500",ServiceCharge:"\xa3120",Payment:"Date: 15th of every month",Phone:"4567891230",Details:"Modern three-bedroom townhouse with a garden, close to parks and schools."},{Id:"0005",Owner:"emma wilson",Address:"321 oak street",Postcode:"B25 8RN",City:"Birmingham",Date:"2023-1-20",Rent:"\xa32,000",ServiceCharge:"\xa3150",PaymentDate:"10th of every month",Phone:"7890123456",Details:"Luxury penthouse apartment with panoramic city views and high-end amenities."},{Id:"0006",Owner:"laura anderson",Address:"654 grove lane",Postcode:"B33 8BJ",City:"Birmingham",Date:"2023-1-20",Rent:"\xa31,100",ServiceCharge:"\xa390",PaymentDate:"20th of every month",Phone:"9012345678",Details:"Well-maintained two-bedroom house with a garden, suitable for a small family."},{Id:"0007",Owner:"mark wilson",Address:"321 maple road",Postcode:"B7 5SA",City:"Birmingham",Date:"2023-1-20",Rent:"\xa31,300",ServiceCharge:"\xa3100",PaymentDate:"5th of every month",Phone:"3456789012",Details:"Spacious three-bedroom semi-detached house with off-street parking."},{Id:"0008",Owner:"rebecca turner",Address:"789 pine avenue",Postcode:"B6 5SU",City:"Birmingham",Date:"2023-1-20",Rent:"\xa3950",ServiceCharge:"\xa380",PaymentDate:"1st of every month",Phone:"6789012345",Details:"Recently refurbished one-bedroom apartment in a modern development."}]}otherData(){return[{id:"0001",name:"smith's handyman services",sector:"residential",services:["plumbing","electrical","carpentry"],phone:"0123456789",email:"smithshandyman@example.com",address:"123 Main Street",postcode:"B12 3AB",details:""},{id:"0002",name:"Johnson's Property Maintenance",sector:"commercial",services:["painting","flooring","general repairs"],phone:"9876543210",email:"johnsonsproperty@example.com",address:"456 High Road",postcode:"B18 6CD",details:""},{id:"0003",name:"taylor's garden maintenance",sector:"landscaping",services:["lawn care","tree pruning","hedge trimming"],phone:"4567891230",email:"taylorsgarden@example.com",address:"789 Park Avenue",postcode:"B24 9EF",details:""},{id:"0004",name:"smith & sons plumbing",sector:"residential",services:["plumbing","heating","boiler repair"],phone:"7890123456",email:"smithandsons@example.com",address:"321 Oak Street",postcode:"B15 7FG",details:""},{id:"0005",name:"greenThumb landscapes",sector:"Landscaping",services:["garden design","turfing","paving"],phone:"5678901234",email:"greenthumblandscapes@example.com",address:"987 Elm Court",postcode:"B20 4GH",details:""},{id:"0006",name:"carpentry experts ltd",sector:"construction",services:["cabinet making","furniture installation","door repair"],phone:"9012345678",email:"carpentryexperts@example.com",address:"654 Grove Lane",postcode:"B10 5IJ",details:""},{id:"0007",name:"electric solutions",sector:"electrical",services:["wiring","lighting installation","appliance repair"],phone:"3456789012",email:"electricsolutions@example.com",address:"321 Maple Road",postcode:"B9 8KL",details:""}]}moneyData(){return[{id:"0001",invoice:"7023CP",position:"Tenant",date:"2022-3-15",name:"john smith",about:"Rent Payment",totalAmount:1200,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"1200"}]},{id:"0002",invoice:"7033CP",position:"Landlord",date:"2022-6-1",name:"sarah johnson",about:"Rent Adjustment",totalAmount:300,paymentType:"Cash",transaction:[{type:"receive",description:"for rent",amount:"300"}]},{id:"0003",invoice:"7055CP",position:"Others",date:"2022-10-10",name:"abc cleaning services",about:"Cleaning Services",totalAmount:-150,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"80"},{type:"pay",description:"adjustment",amount:"-220"},{type:"pay",description:"fix pumbler",amount:"-10"}]},{id:"0004",invoice:"7003CP",position:"Tenant",date:"2023-1-5",name:"Emily Thompson",about:"Rent Payment",totalAmount:800,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"800"}]},{id:"0005",invoice:"5023CP",position:"Landlord",date:"2023-2-20",name:"michael anderson",about:"Rent Adjustment",totalAmount:-200,paymentType:"Cash",transaction:[{type:"receive",description:"for rent",amount:"25"},{type:"pay",description:"adjustment",amount:"-150"},{type:"pay",description:"fix pumbler",amount:"-75"}]},{id:"0006",invoice:"7084CP",position:"Tenant",date:"2023-4-10",name:"jessica lee",about:"Services (Plumbing)",totalAmount:500,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"750"},{type:"pay",description:"adjustment",amount:"-30"},{type:"pay",description:"fix pumbler",amount:"-10.50"}]},{id:"0007",invoice:"7983CP",position:"Others",date:"2023-7-15",name:"xyz construction",about:"Repair Services",totalAmount:-790.5,paymentType:"Cash",transaction:[{type:"pay",description:"for rent",amount:"-750"},{type:"pay",description:"adjustment",amount:"-30"},{type:"pay",description:"fix pumbler",amount:"-10.50"}]},{id:"0008",invoice:"8723CP",position:"Landlord",date:"2023-8-5",name:"thomas collins",about:"Rent Adjustment",totalAmount:-150,paymentType:"Bank Transfer",transaction:[{type:"pay",description:"rent for property",amount:"-150"}]},{id:"0009",invoice:"7080CP",position:"Tenant",date:"2023-11-1",name:"olivia martinez",about:"Rent Payment",totalAmount:1500,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"750"},{type:"pay",description:"adjustment",amount:"-30"},{type:"pay",description:"fix pumbler",amount:"-10.50"}]},{id:"0010",invoice:"7998CP",position:"Others",date:"2023-12-20",name:"green thumb landscapes",about:"Garden Maintenance Services",totalAmount:200,paymentType:"Cash",transaction:[{type:"receive",description:"painting",amount:"250"},{type:"pay",description:"adjustment",amount:"-50"}]},{id:"0011",invoice:"7443CP",position:"Tenant",date:"2023-3-16",name:"john smith",about:"Rent Payment",totalAmount:1400,paymentType:"Bank Transfer",transaction:[{type:"receive",description:"for rent",amount:"1400"}]}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),af=(()=>{class n{constructor(e,i){this.dataService=e,this.dbService=i,this.icon={icon:bp.icon({iconSize:[25,41],iconAnchor:[13,0],iconUrl:"./node_modules/leaflet/dist/images/marker-icon.png",shadowUrl:"./node_modules/leaflet/dist/images/marker-shadow.png"})},this.lat=52.466064,this.lng=-1.891307,this.postcodeArrs=[]}ngOnInit(){this.postcodeArrs=[],this.propertiesPostcodes(),this.map&&(this.map=this.map.remove()),this.mapMain&&(this.mapMain=this.mapMain.remove()),this.initMap("b120yl")}propertiesPostcodes(){var e=this;return(0,be.Z)(function*(){let i=[];yield e.dbService.getData("propertyDb").then(r=>{i=[],r.forEach(s=>{i.push(s.data())})});for(let r of i){let a,s={latFunc:"",lngFunc:"",postcode:"",url:""};r.postcode&&(a=yield e.getLatLng(r.postcode)),s.latFunc=a.latitude,s.lngFunc=a.longitude,s.postcode=r.postcode,r.image?yield e.dbService.getStorageData(r.image).then(c=>{let h=r;h.image=c.toString(),s.url=h.image}).catch(c=>console.log(c)):s.url="assets/images/mohammedAlfadhel.png",e.postcodeArrs.push(s)}})()}initMap(e="B12 0YL"){var i=this;return(0,be.Z)(function*(){e&&(yield i.getLatLng(e)),i.map&&i.map.remove(),i.map=bp.map("map").setView([i.lat,i.lng],15);const r=bp.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,minZoom:10,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(i.map);var s=bp.icon({iconUrl:"assets/images/locationPin.png",iconSize:[14,26],iconAnchor:[2,26],popupAnchor:[-1,-35]});bp.marker([i.lat,i.lng],{icon:s}).addTo(i.map).bindPopup(e).openPopup(),yield r.addTo(i.map)})()}initMainMap(){var e=this;return(0,be.Z)(function*(){yield e.propertiesPostcodes(),e.mapMain&&e.mapMain.remove(),e.mapMain=bp.map("map").setView([e.lat,e.lng],10);const i=bp.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,minZoom:5,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(e.mapMain);var r=bp.icon({iconUrl:"assets/images/locationPin.png",iconSize:[14,26],iconAnchor:[2,26],popupAnchor:[-1,-35]});for(let a of e.postcodeArrs)bp.marker([a.latFunc,a.lngFunc,a.postcode],{icon:r}).addTo(e.mapMain).bindPopup(a.postcode+"<br><img style='width:50px;' src='"+a.url+"'>").openPopup();yield i.addTo(e.mapMain)})()}getLatLng(e){var i=this;return(0,be.Z)(function*(){let r,s=e.split(" ").join("");return yield fetch("https://api.postcodes.io/postcodes/"+s).then(c=>c.json().then(h=>{r=h.result})).catch(c=>console.log("Postcode not exist! "+c)),i.lat=0,i.lng=0,i.lat=r.latitude,i.lng=r.longitude,r})()}checkPostcode(e){return(0,be.Z)(function*(){let i,r=e.split(" ").join("");return yield fetch("https://api.postcodes.io/postcodes/"+r).then(a=>a.json().then(c=>{i=c.result})).catch(a=>console.log("Postcode not exist! "+a)),i})()}ngOnDestroy(){this.map.remove(),this.mapMain.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(xv),o.LFG(Pr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hle=["firstname"],fle=["lastname"],ple=["address"],gle=["postcode"],mle=["email"],_le=["phone"],vle=["details"];function yle(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function wle(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function ble(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Cle(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Tle(n,t){1&n&&(o.TgZ(0,"p",32),o._uU(1,"This postcode is not exist!"),o.qZA())}function Ele(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Dle(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const xle=function(n){return{color:n}};let Ale=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.postcodeNotExist=!1}ngOnInit(){}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.landlord={firstname:i.firstnameRef.nativeElement.value.toLowerCase(),lastname:i.lastnameRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},i.dbService.addData(i.landlord,"landlordDb").then(s=>{console.log(s)}).catch(s=>{console.log(s)}),i.onClose())})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-landlord"]],viewQuery:function(e,i){if(1&e&&(o.Gf(hle,5),o.Gf(fle,5),o.Gf(ple,5),o.Gf(gle,5),o.Gf(mle,5),o.Gf(_le,5),o.Gf(vle,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.firstnameRef=r.first),o.iGM(r=o.CRH())&&(i.lastnameRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:66,vars:11,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"input-group"],[1,"input-group-text"],["type","text","placeholder","First name","name","firstname","ngModel","","id","firstname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control"],["firstname",""],["class","required-warning",4,"ngIf"],["type","text","placeholder","Last name","name","lastname","ngModel","","id","lastname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control"],["lastname",""],["type","text","placeholder","Address","name","address","ngModel","","id","address","pattern","[A-Za-z0-9\\w!@#$%?=*&.- ]{2,}","maxlength","50","required","",1,"form-control"],["address",""],["type","text","placeholder","Postcode","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control"],["postcode",""],["type","email","placeholder","Email","name","email","ngModel","","id","email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","required","",1,"form-control"],["email",""],["type","text","placeholder","Phone","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control"],["phone",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","placeholder","Other details","name","details","ngModel","","id","details",1,"form-control"],["details",""],[1,"btns"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Add landlord"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Landlord details"),o.qZA()(),o.TgZ(15,"div",11)(16,"span",12),o._uU(17,"First name"),o.qZA(),o._UZ(18,"input",13,14),o.YNc(20,yle,3,0,"div",15),o.qZA(),o.TgZ(21,"div",11)(22,"span",12),o._uU(23,"Last name"),o.qZA(),o._UZ(24,"input",16,17),o.YNc(26,wle,3,0,"div",15),o.qZA(),o.TgZ(27,"div",11)(28,"span",12),o._uU(29,"Address"),o.qZA(),o._UZ(30,"input",18,19),o.YNc(32,ble,3,0,"div",15),o.qZA(),o.TgZ(33,"div",11)(34,"span",12),o._uU(35,"Postcode"),o.qZA(),o._UZ(36,"input",20,21),o.YNc(38,Cle,3,0,"div",15),o.qZA(),o.YNc(39,Tle,2,0,"p",15),o.TgZ(40,"div",11)(41,"span",12),o._uU(42,"@"),o.qZA(),o._UZ(43,"input",22,23),o.YNc(45,Ele,3,0,"div",15),o.qZA(),o.TgZ(46,"div",11)(47,"span",12),o._uU(48,"Phone"),o.qZA(),o._UZ(49,"input",24,25),o.YNc(51,Dle,3,0,"div",15),o.qZA(),o.TgZ(52,"div",11)(53,"span",12),o._uU(54,"Upload"),o.qZA(),o._UZ(55,"input",26),o.qZA(),o.TgZ(56,"div",11)(57,"span",12),o._uU(58,"Details"),o.qZA(),o._UZ(59,"textarea",27,28),o.qZA(),o.TgZ(61,"div",29)(62,"button",30),o._uU(63,"Submit"),o.qZA(),o.TgZ(64,"button",31),o.NdJ("click",function(){return i.onClose()}),o._uU(65,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(19),a=o.MAs(25),c=o.MAs(31),h=o.MAs(37),p=o.MAs(44),v=o.MAs(50);o.xp6(20),o.Q6J("ngIf",!s.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!c.value),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(6),o.Q6J("ngIf",!p.value),o.xp6(6),o.Q6J("ngIf",!v.value),o.xp6(11),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(9,xle,r.valid?"":"gray"))}},dependencies:[si,ur,ru,No,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})(),Ile=(()=>{class n{constructor(e){this.elementRef=e,this.close=new o.vpe}ngOnInit(){this.onSelectedClient()}onClose(){this.ngOnDestroy()}onSelectedClient(){this.ClientDetails=this.selectedClient}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-landlord"]],inputs:{selectedClient:"selectedClient"},outputs:{close:"close"},decls:35,vars:7,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_view"],[1,"input-group-text"],["wrap","hard","readonly",""],[1,"button"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"View Landlord"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"label",8),o._uU(11),o.qZA(),o._UZ(12,"br"),o.TgZ(13,"label",8),o._uU(14),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"label",8),o._uU(17),o.qZA(),o._UZ(18,"br"),o.TgZ(19,"label",8),o._uU(20),o.qZA(),o._UZ(21,"br"),o.TgZ(22,"label",8),o._uU(23),o.qZA(),o._UZ(24,"br"),o.TgZ(25,"label",8),o._uU(26),o.qZA(),o._UZ(27,"br")(28,"hr"),o.TgZ(29,"textarea",9),o._uU(30),o.qZA(),o._UZ(31,"br"),o.qZA(),o.TgZ(32,"div",10)(33,"button",11),o.NdJ("click",function(){return i.onClose()}),o._uU(34,"Close"),o.qZA()()()()()),2&e&&(o.xp6(11),o.hij("First name: ",i.ClientDetails.firstname,""),o.xp6(3),o.hij("Last name: ",i.ClientDetails.lastname,""),o.xp6(3),o.hij("Email: ",i.ClientDetails.email,""),o.xp6(3),o.hij("Postcode: ",i.ClientDetails.postcode,""),o.xp6(3),o.hij("Address: ",i.ClientDetails.address,""),o.xp6(3),o.hij("Phone: ",i.ClientDetails.phone,""),o.xp6(4),o.hij("Detail: ",i.ClientDetails.detail,""))},styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:3vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}textarea[_ngcontent-%COMP%]{width:100%}"]}),n})();function Sle(n,t){if(1&n&&(o.TgZ(0,"div"),o._uU(1," Are you sure to delete data for "),o.TgZ(2,"span"),o._uU(3),o.qZA(),o._uU(4,"? "),o.qZA()),2&n){const e=o.oxw();o.xp6(3),o.HOy("",e.ClientDetails.firstname," ",e.ClientDetails.lastname," ",e.ClientDetails.owner," ",e.ClientDetails.name,"")}}function Mle(n,t){if(1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2,"Are you sure to delete invoce to "),o.TgZ(3,"span"),o._uU(4),o.qZA()()()),2&n){const e=o.oxw();o.xp6(4),o.Oqu(e.ClientDetails.name)}}let gD=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.dbService=i,this.ngAuth=r,this.authService=s,this.close=new o.vpe}ngOnInit(){this.onSelectedClient()}onSelectedClient(){this.ClientDetails=this.selectedClient}onDelete(){this.dbService.deleteData(this.ClientDetails,this.dbName),this.dbService.deleteStorageData(this.ClientDetails.image),this.onClose()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr),o.Y36(OE),o.Y36(hv))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-warning-msg"]],inputs:{closeForm:"closeForm",dbName:"dbName",selectedClient:"selectedClient"},outputs:{close:"close"},decls:17,vars:2,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_delete"],[4,"ngIf"],[1,"button"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Delete Client"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7),o.YNc(10,Sle,5,4,"div",8),o.YNc(11,Mle,5,1,"div",8),o.qZA(),o.TgZ(12,"div",9)(13,"button",10),o.NdJ("click",function(){return i.onDelete()}),o._uU(14,"Yes, Delete"),o.qZA(),o.TgZ(15,"button",11),o.NdJ("click",function(){return i.onClose()}),o._uU(16,"Close"),o.qZA()()()()()),2&e&&(o.xp6(10),o.Q6J("ngIf",null==i.ClientDetails.position),o.xp6(1),o.Q6J("ngIf",null!=i.ClientDetails.position))},dependencies:[si],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:10vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#dc3545;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_delete[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin-top:10px}.content_delete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}"]}),n})();const Ple=["firstname"],kle=["lastname"],Ole=["address"],Rle=["postcode"],Nle=["email"],Lle=["phone"],Fle=["details"];function Ule(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Ble(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Vle(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Zle(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function zle(n,t){1&n&&(o.TgZ(0,"p",30),o._uU(1,"This postcode is not exist!"),o.qZA())}function Hle(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function qle(n,t){1&n&&(o.TgZ(0,"div",30)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const jle=function(n){return{color:n}};let Wle=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.postcodeNotExist=!1}ngOnInit(){this.landlord=this.selectedClient}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.newlandlord={id:i.selectedClient.id,firstname:i.firstnameRef.nativeElement.value.toLowerCase(),lastname:i.lastnameRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},console.log(i.newlandlord),console.log(i.landlord),i.dbService.updateData(i.landlord,i.newlandlord,"landlordDb"),i.onClose())})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-landlord"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Ple,5),o.Gf(kle,5),o.Gf(Ole,5),o.Gf(Rle,5),o.Gf(Nle,5),o.Gf(Lle,5),o.Gf(Fle,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.firstnameRef=r.first),o.iGM(r=o.CRH())&&(i.lastnameRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:62,vars:18,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"input-group"],[1,"input-group-text"],["type","text","name","firstname","ngModel","","id","firstname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control",3,"placeholder"],["firstname",""],["class","required-warning",4,"ngIf"],["type","text","name","lastname","ngModel","","id","lastname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control",3,"placeholder"],["lastname",""],["type","text","name","address","ngModel","","id","address","maxlength","50","required","",1,"form-control",3,"placeholder"],["address",""],["type","text","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control",3,"placeholder"],["postcode",""],["type","email","name","email","ngModel","","id","email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",1,"form-control",3,"placeholder"],["email",""],["type","text","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control",3,"placeholder"],["phone",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","name","details","ngModel","","id","details",1,"form-control",3,"placeholder"],["details",""],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Edit landlord"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"span",11),o._uU(14,"First name"),o.qZA(),o._UZ(15,"input",12,13),o.YNc(17,Ule,3,0,"div",14),o.qZA(),o.TgZ(18,"div",10)(19,"span",11),o._uU(20,"Last name"),o.qZA(),o._UZ(21,"input",15,16),o.YNc(23,Ble,3,0,"div",14),o.qZA(),o.TgZ(24,"div",10)(25,"span",11),o._uU(26,"Address"),o.qZA(),o._UZ(27,"input",17,18),o.YNc(29,Vle,3,0,"div",14),o.qZA(),o.TgZ(30,"div",10)(31,"span",11),o._uU(32,"Postcode"),o.qZA(),o._UZ(33,"input",19,20),o.YNc(35,Zle,3,0,"div",14),o.qZA(),o.YNc(36,zle,2,0,"p",14),o.TgZ(37,"div",10)(38,"span",11),o._uU(39,"@"),o.qZA(),o._UZ(40,"input",21,22),o.YNc(42,Hle,3,0,"div",14),o.qZA(),o.TgZ(43,"div",10)(44,"span",11),o._uU(45,"Phone"),o.qZA(),o._UZ(46,"input",23,24),o.YNc(48,qle,3,0,"div",14),o.qZA(),o.TgZ(49,"div",10)(50,"span",11),o._uU(51,"Upload"),o.qZA(),o._UZ(52,"input",25),o.qZA(),o.TgZ(53,"div",10)(54,"span",11),o._uU(55,"Details"),o.qZA(),o._UZ(56,"textarea",26,27),o.qZA(),o.TgZ(58,"button",28),o._uU(59,"Update"),o.qZA(),o.TgZ(60,"button",29),o.NdJ("click",function(){return i.onClose()}),o._uU(61,"Cancel"),o.qZA()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(16),a=o.MAs(22),c=o.MAs(28),h=o.MAs(34),p=o.MAs(41),v=o.MAs(47);o.xp6(15),o.s9C("placeholder",i.selectedClient.firstname),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.lastname),o.xp6(2),o.Q6J("ngIf",!a.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.address),o.xp6(2),o.Q6J("ngIf",!c.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.postcode),o.xp6(2),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(4),o.s9C("placeholder",i.selectedClient.email),o.xp6(2),o.Q6J("ngIf",!p.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.phone),o.xp6(2),o.Q6J("ngIf",!v.value),o.xp6(8),o.s9C("placeholder",i.selectedClient.detail),o.xp6(2),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(16,jle,r.valid?"":"gray"))}},dependencies:[si,ur,ru,No,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:10vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#ffc107;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})(),mD=(()=>{class n{transform(e,i="",r,s,a,c,h,p){if(0===e.length||""===i)return e;const v=[];for(const b of e)(b[r]===i.toLowerCase()||b[s]===i.toLowerCase()||b[p]===i.toLowerCase()||b[a]===i||b[c]===i||b[h]===i.toLowerCase())&&v.push(b);return v}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"filter",type:n,pure:!0}),n})();function $le(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-add-landlord",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.addingLandlordAllowed)}}function Gle(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-view-landlord",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("selectedClient",e.selectdClient)}}function Yle(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-warning-msg",26),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deleteLandlordAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)}}function Kle(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-edit-landlord",27),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.editLandlordAllowed)("selectedClient",e.selectdClient)}}function Qle(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",28),o.qZA())}function Jle(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.on_delete(r))}),o._uU(1,"Delete"),o.qZA()}}function Xle(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",29),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"uppercase"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"uppercase"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td")(14,"button",30),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_view(s))}),o._uU(15,"View"),o.qZA(),o.YNc(16,Jle,2,0,"button",31),o.TgZ(17,"button",32),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_edit(s))}),o._uU(18,"Edit"),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Oqu(e.id),o.xp6(2),o.Oqu(o.lcZ(5,6,e.firstname)),o.xp6(3),o.Oqu(o.lcZ(8,8,e.lastname)),o.xp6(3),o.Oqu(e.postcode),o.xp6(2),o.Oqu(e.phone),o.xp6(4),o.Q6J("ngIf","yes"==i._authri)}}const ece=function(n,t){return[n,t,"firstname","lastname","postcode","phone"]};let tce=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.dbService=i,this.routeService=r,this.landlordListCount=new o.vpe,this.landlordTableList=[],this.addingLandlordAllowed=!1,this.viewLandlordAllowed=!1,this.deleteLandlordAllowed=!1,this.editLandlordAllowed=!1,this.dbName="",this.loading=!1,this.landlordCount=0}ngOnInit(){this.onLandlordTableList(),this._authri=this.routeService.RouteEdit}onLandlordTableList(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("landlordDb").then(i=>{e.landlordTableList=[],i.forEach(r=>{e.landlordTableList.push(r.data()),e.landlordCount+=1}),e.loading=!1}),e.landlordListCount.emit(e.landlordCount)})()}add_landlord(){this.addingLandlordAllowed=!0}on_edit(e){this.editLandlordAllowed=!0,this.selectdClient=e}on_view(e){this.viewLandlordAllowed=!0,this.selectdClient=e}on_delete(e){this.deleteLandlordAllowed=!0,this.selectdClient=e,this.dbName="landlordDb"}onReloadPg(){this.addingLandlordAllowed=!1,this.viewLandlordAllowed=!1,this.deleteLandlordAllowed=!1,this.editLandlordAllowed=!1,this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-landlords"]],outputs:{landlordListCount:"landlordListCount"},decls:44,vars:17,consts:[[3,"closeForm","close",4,"ngIf"],[3,"selectedClient","close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","close",4,"ngIf"],[3,"closeForm","selectedClient","close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","pg_content"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button","id","landlords_add_btn",1,"btn","btn-primary",3,"click"],["id","c3",1,"col-12"],["id","searchInput",1,"input-group","mb-3"],["type","button","id","button-addon1",1,"btn","btn-outline-secondary"],["type","text","placeholder","search ...","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","table_scroll"],["id","pg_table",1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"closeForm","close"],[3,"selectedClient","close"],[3,"closeForm","selectedClient","dbName","close"],[3,"closeForm","selectedClient","close"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","4vw","text-align","center"],["scope","row"],["type","button","id","view_btn",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-danger","id","delete_btn",3,"click",4,"ngIf"],["type","button","id","edit_btn",1,"btn","btn-warning",3,"click"],["type","button","id","delete_btn",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div"),o.YNc(1,$le,1,1,"app-add-landlord",0),o.YNc(2,Gle,1,1,"app-view-landlord",1),o.YNc(3,Yle,1,3,"app-warning-msg",2),o.YNc(4,Kle,1,2,"app-edit-landlord",3),o.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),o._uU(12," Landlords "),o.qZA(),o.TgZ(13,"div",11)(14,"h5",12),o._uU(15,"Landlords Details"),o.qZA(),o.TgZ(16,"p",13),o._uU(17,"This page has data, operations and views about landlords."),o.qZA()()()(),o.TgZ(18,"button",14),o.NdJ("click",function(){return i.add_landlord()}),o._uU(19,"Add New Landlords"),o.qZA()()(),o.TgZ(20,"div",15)(21,"div",16)(22,"button",17),o._uU(23,"Search"),o.qZA(),o.TgZ(24,"input",18),o.NdJ("ngModelChange",function(s){return i.filterString=s}),o.qZA()(),o.YNc(25,Qle,2,0,"div",19),o.TgZ(26,"div",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th",22),o._uU(31,"ID"),o.qZA(),o.TgZ(32,"th",22),o._uU(33,"First name"),o.qZA(),o.TgZ(34,"th",22),o._uU(35,"Last name"),o.qZA(),o.TgZ(36,"th",22),o._uU(37,"Postcode"),o.qZA(),o.TgZ(38,"th",22),o._uU(39,"Phone"),o.qZA(),o._UZ(40,"th",22),o.qZA()(),o.TgZ(41,"tbody"),o.YNc(42,Xle,19,10,"tr",23),o.ALo(43,"filter"),o.qZA()()()()()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.addingLandlordAllowed),o.xp6(1),o.Q6J("ngIf",i.viewLandlordAllowed),o.xp6(1),o.Q6J("ngIf",i.deleteLandlordAllowed),o.xp6(1),o.Q6J("ngIf",i.editLandlordAllowed),o.xp6(20),o.Q6J("ngModel",i.filterString),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(17),o.Q6J("ngForOf",o.G7q(43,7,o.WLB(14,ece,i.landlordTableList,i.filterString))))},dependencies:[Li,si,No,us,Yo,Ale,Ile,gD,Wle,Ii,mD],styles:["#pg_content[_ngcontent-%COMP%]{height:100%}#card_add_content[_ngcontent-%COMP%]{position:relative}#map[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);height:400px}agm-map[_ngcontent-%COMP%]{height:400px}#landlords_add_btn[_ngcontent-%COMP%]{width:100%;margin-top:30%}#pg_table[_ngcontent-%COMP%]{width:100%;max-height:300px}#searchInput[_ngcontent-%COMP%]{margin:10px auto auto}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:250px;overflow:auto;display:inline-block}thead[_ngcontent-%COMP%]{font-size:12px}tbody[_ngcontent-%COMP%]{font-size:13px}#view_btn[_ngcontent-%COMP%], #delete_btn[_ngcontent-%COMP%], #edit_btn[_ngcontent-%COMP%]{margin:auto 1%;font-size:11px}"]}),n})();const nce=["firstname"],ice=["lastname"],rce=["preaddress"],oce=["curaddress"],sce=["prepostcode"],ace=["curpostcode"],lce=["email"],cce=["phone"],uce=["details"];function dce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function hce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function fce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function pce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function gce(n,t){1&n&&(o.TgZ(0,"p",38),o._uU(1,"This postcode is not exist!"),o.qZA())}function mce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function _ce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function vce(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij("",e.postcode," ")}}function yce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function wce(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e)}}function bce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const Cce=function(n){return{color:n}};let Tce=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.dataService=i,this.mapingService=r,this.dbService=s,this.close=new o.vpe,this.postcodeNotExist=!1,this.propertyTableList=[],this.addressList=[],this.dbService.getData("propertyDb").then(c=>{c.forEach(h=>{this.propertyTableList.push(h.data())})})}ngOnInit(){}onSelected(e){this.addressList=[],this.propertyTableList.forEach(i=>{i.postcode===e&&this.addressList.push(i.address)})}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.prepostcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.prepostcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.tenant={firstname:i.firstnameRef.nativeElement.value.toLowerCase(),lastname:i.lastnameRef.nativeElement.value.toLowerCase(),preaddress:i.preaddressRef.nativeElement.value.toLowerCase(),curaddress:i.curaddressRef.nativeElement.value.toLowerCase(),prepostcode:i.prepostcodeRef.nativeElement.value.toUpperCase(),curpostcode:i.curpostcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},i.dbService.addData(i.tenant,"tenantDb").then(s=>{console.log(s)}).catch(s=>{console.log(s)}),i.onClose())})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(xv),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-tenant"]],viewQuery:function(e,i){if(1&e&&(o.Gf(nce,5),o.Gf(ice,5),o.Gf(rce,5),o.Gf(oce,5),o.Gf(sce,5),o.Gf(ace,5),o.Gf(lce,5),o.Gf(cce,5),o.Gf(uce,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.firstnameRef=r.first),o.iGM(r=o.CRH())&&(i.lastnameRef=r.first),o.iGM(r=o.CRH())&&(i.preaddressRef=r.first),o.iGM(r=o.CRH())&&(i.curaddressRef=r.first),o.iGM(r=o.CRH())&&(i.prepostcodeRef=r.first),o.iGM(r=o.CRH())&&(i.curpostcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:89,vars:15,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"input-group"],[1,"input-group-text"],["type","text","placeholder","First name","name","firstname","ngModel","","id","firstname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control"],["firstname",""],["class","required-warning",4,"ngIf"],["type","text","placeholder","Last name","name","lastname","ngModel","","id","lastname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control"],["lastname",""],["type","text","placeholder","Address","name","previousAddress","ngModel","","id","previousAddress","pattern","[A-Za-z0-9\\w!@#$%?=*&.- ]{2,}","maxlength","50","required","",1,"form-control"],["preaddress",""],["type","text","placeholder","Postcode","name","previousPostcode","ngModel","","id","previousPostcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control"],["prepostcode",""],["type","email","placeholder","Email","name","email","ngModel","","id","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",1,"form-control"],["email",""],["type","text","placeholder","Phone","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control"],["phone",""],["name","currentPostcode","id","currentPostcode","ngModel","","required","",1,"comboBoxList",3,"change"],["postcode","","curpostcode",""],[4,"ngFor","ngForOf"],["name","currentAddress","id","currentAddress","ngModel","","required","",1,"comboBoxList"],["curaddress",""],["default",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","placeholder","Other details","name","details","ngModel","","id","details",1,"form-control"],["details",""],[1,"btns"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Add tenant"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Tenent details"),o.qZA()(),o.TgZ(15,"div",11)(16,"span",12),o._uU(17,"First name"),o.qZA(),o._UZ(18,"input",13,14),o.YNc(20,dce,3,0,"div",15),o.qZA(),o.TgZ(21,"div",11)(22,"span",12),o._uU(23,"Last name"),o.qZA(),o._UZ(24,"input",16,17),o.YNc(26,hce,3,0,"div",15),o.qZA(),o.TgZ(27,"div",11)(28,"span",12),o._uU(29,"Previous Address"),o.qZA(),o._UZ(30,"input",18,19),o.YNc(32,fce,3,0,"div",15),o.qZA(),o.TgZ(33,"div",11)(34,"span",12),o._uU(35,"Previous Postcode"),o.qZA(),o._UZ(36,"input",20,21),o.YNc(38,pce,3,0,"div",15),o.qZA(),o.YNc(39,gce,2,0,"p",15),o.TgZ(40,"div",11)(41,"span",12),o._uU(42,"@"),o.qZA(),o._UZ(43,"input",22,23),o.YNc(45,mce,3,0,"div",15),o.qZA(),o.TgZ(46,"div",11)(47,"span",12),o._uU(48,"Phone"),o.qZA(),o._UZ(49,"input",24,25),o.YNc(51,_ce,3,0,"div",15),o.qZA(),o._UZ(52,"hr"),o.TgZ(53,"div",10)(54,"p"),o._uU(55,"Property rented details"),o.qZA()(),o.TgZ(56,"div")(57,"div",11)(58,"span",12),o._uU(59,"Current Postcode"),o.qZA(),o.TgZ(60,"select",26,27),o.NdJ("change",function(){o.CHM(r);const a=o.MAs(61);return o.KtG(i.onSelected(a.value))}),o.YNc(63,vce,2,1,"option",28),o.qZA(),o.YNc(64,yce,3,0,"div",15),o.qZA(),o.TgZ(65,"div",11)(66,"span",12),o._uU(67,"Current Address"),o.qZA(),o.TgZ(68,"select",29,30)(70,"option",31),o._uU(71,"Select postcode ... "),o.qZA(),o.YNc(72,wce,2,1,"option",28),o.qZA(),o.YNc(73,bce,3,0,"div",15),o.qZA()(),o._UZ(74,"hr"),o.TgZ(75,"div",11)(76,"span",12),o._uU(77,"Upload"),o.qZA(),o._UZ(78,"input",32),o.qZA(),o.TgZ(79,"div",11)(80,"span",12),o._uU(81,"Details"),o.qZA(),o._UZ(82,"textarea",33,34),o.qZA(),o.TgZ(84,"div",35)(85,"button",36),o._uU(86,"Submit"),o.qZA(),o.TgZ(87,"button",37),o.NdJ("click",function(){return i.onClose()}),o._uU(88,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(19),a=o.MAs(25),c=o.MAs(31),h=o.MAs(37),p=o.MAs(44),v=o.MAs(50),b=o.MAs(62),D=o.MAs(69);o.xp6(20),o.Q6J("ngIf",!s.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!c.value),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(6),o.Q6J("ngIf",!p.value),o.xp6(6),o.Q6J("ngIf",!v.value),o.xp6(12),o.Q6J("ngForOf",i.propertyTableList),o.xp6(1),o.Q6J("ngIf",!b.value),o.xp6(8),o.Q6J("ngForOf",i.addressList),o.xp6(1),o.Q6J("ngIf",!D.value),o.xp6(12),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(13,Cce,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,ou,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.upperCaseName[_ngcontent-%COMP%]{text-transform:uppercase}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})();const Ece=["firstname"],Dce=["lastname"],xce=["preaddress"],Ace=["curaddress"],Ice=["prepostcode"],Sce=["curpostcode"],Mce=["email"],Pce=["phone"],kce=["details"];function Oce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Rce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Nce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Lce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Fce(n,t){1&n&&(o.TgZ(0,"p",38),o._uU(1,"This postcode is not exist!"),o.qZA())}function Uce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Bce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Vce(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij("",e.Postcode," ")}}function Zce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function zce(n,t){if(1&n&&(o.TgZ(0,"option",28),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.selectedClient.curaddress)}}function Hce(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e)}}function qce(n,t){1&n&&(o.TgZ(0,"div",38)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const jce=function(n){return{color:n}};let Wce=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.dataService=i,this.mapingService=r,this.dbService=s,this.close=new o.vpe,this.addressList=[],this.propertyTableList=[],this.ownerNameList=[],this.showDefault=!0,this.postcodeNotExist=!1,this.propertyTableList=this.dataService.propertyData()}ngOnInit(){this.tenant=this.selectedClient}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.prepostcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.prepostcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.newtenant={id:i.selectedClient.id,firstname:i.firstnameRef.nativeElement.value.toLowerCase(),lastname:i.lastnameRef.nativeElement.value.toLowerCase(),preaddress:i.preaddressRef.nativeElement.value.toLowerCase(),prepostcode:i.prepostcodeRef.nativeElement.value.toUpperCase(),curaddress:i.curaddressRef.nativeElement.value.toLowerCase(),curpostcode:i.curpostcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},console.log(i.newtenant),console.log(i.tenant),i.dbService.updateData(i.tenant,i.newtenant,"tenantDb"),i.onClose())})()}onSelected(e){this.addressList=[],this.propertyTableList.forEach(i=>{i.Postcode===e&&this.addressList.push(i.Address)}),this.showDefault=!1}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(xv),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-tenant"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Ece,5),o.Gf(Dce,5),o.Gf(xce,5),o.Gf(Ace,5),o.Gf(Ice,5),o.Gf(Sce,5),o.Gf(Mce,5),o.Gf(Pce,5),o.Gf(kce,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.firstnameRef=r.first),o.iGM(r=o.CRH())&&(i.lastnameRef=r.first),o.iGM(r=o.CRH())&&(i.preaddressRef=r.first),o.iGM(r=o.CRH())&&(i.curaddressRef=r.first),o.iGM(r=o.CRH())&&(i.prepostcodeRef=r.first),o.iGM(r=o.CRH())&&(i.curpostcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:86,vars:24,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"input-group"],[1,"input-group-text"],["type","text","name","firstname","ngModel","","id","firstname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control",3,"placeholder"],["firstname",""],["class","required-warning",4,"ngIf"],["type","text","name","lastname","ngModel","","id","lastname","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control",3,"placeholder"],["lastname",""],["type","text","name","address","ngModel","","id","address","maxlength","50","required","",1,"form-control",3,"placeholder"],["preaddress",""],["type","text","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control",3,"placeholder"],["prepostcode",""],["type","email","name","email","ngModel","","id","email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",1,"form-control",3,"placeholder"],["email",""],["type","text","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control",3,"placeholder"],["phone",""],["required","","name","curpostcode","ngModel","","id","curpostcode",1,"comboBoxList",3,"change"],["curpostcode",""],["default",""],[4,"ngFor","ngForOf"],["name","curaddress","ngModel","","id","curaddress",1,"comboBoxList"],["curaddress",""],["default","",4,"ngIf"],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","name","details","ngModel","","id","detals",1,"form-control",3,"placeholder"],["details",""],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Edit tenant"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Tenant details"),o.qZA()(),o.TgZ(15,"div",11)(16,"span",12),o._uU(17,"First name"),o.qZA(),o._UZ(18,"input",13,14),o.YNc(20,Oce,3,0,"div",15),o.qZA(),o.TgZ(21,"div",11)(22,"span",12),o._uU(23,"Last name"),o.qZA(),o._UZ(24,"input",16,17),o.YNc(26,Rce,3,0,"div",15),o.qZA(),o.TgZ(27,"div",11)(28,"span",12),o._uU(29,"Previous Address"),o.qZA(),o._UZ(30,"input",18,19),o.YNc(32,Nce,3,0,"div",15),o.qZA(),o.TgZ(33,"div",11)(34,"span",12),o._uU(35,"Previous Postcode"),o.qZA(),o._UZ(36,"input",20,21),o.YNc(38,Lce,3,0,"div",15),o.qZA(),o.YNc(39,Fce,2,0,"p",15),o.TgZ(40,"div",11)(41,"span",12),o._uU(42,"@"),o.qZA(),o._UZ(43,"input",22,23),o.YNc(45,Uce,3,0,"div",15),o.qZA(),o.TgZ(46,"div",11)(47,"span",12),o._uU(48,"Phone"),o.qZA(),o._UZ(49,"input",24,25),o.YNc(51,Bce,3,0,"div",15),o.qZA(),o.TgZ(52,"div",10)(53,"p"),o._uU(54,"Property rented details"),o.qZA()(),o.TgZ(55,"div")(56,"div",11)(57,"span",12),o._uU(58,"Current Postcode"),o.qZA(),o.TgZ(59,"select",26,27),o.NdJ("change",function(){o.CHM(r);const a=o.MAs(60);return o.KtG(i.onSelected(a.value))}),o.TgZ(61,"option",28),o._uU(62),o.qZA(),o.YNc(63,Vce,2,1,"option",29),o.qZA(),o.YNc(64,Zce,3,0,"div",15),o.qZA(),o.TgZ(65,"div",11)(66,"span",12),o._uU(67,"Current Address"),o.qZA(),o.TgZ(68,"select",30,31),o.YNc(70,zce,2,1,"option",32),o.YNc(71,Hce,2,1,"option",29),o.qZA(),o.YNc(72,qce,3,0,"div",15),o.qZA()(),o.TgZ(73,"div",11)(74,"span",12),o._uU(75,"Upload"),o.qZA(),o._UZ(76,"input",33),o.qZA(),o.TgZ(77,"div",11)(78,"span",12),o._uU(79,"Details"),o.qZA(),o._UZ(80,"textarea",34,35),o.qZA(),o.TgZ(82,"button",36),o._uU(83,"Update"),o.qZA(),o.TgZ(84,"button",37),o.NdJ("click",function(){return i.onClose()}),o._uU(85,"Cancel"),o.qZA()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(19),a=o.MAs(25),c=o.MAs(31),h=o.MAs(37),p=o.MAs(44),v=o.MAs(50),b=o.MAs(60),D=o.MAs(69);o.xp6(18),o.s9C("placeholder",i.selectedClient.firstname),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.lastname),o.xp6(2),o.Q6J("ngIf",!a.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.preaddress),o.xp6(2),o.Q6J("ngIf",!c.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.prepostcode),o.xp6(2),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(4),o.s9C("placeholder",i.selectedClient.email),o.xp6(2),o.Q6J("ngIf",!p.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.phone),o.xp6(2),o.Q6J("ngIf",!v.value),o.xp6(11),o.Oqu(i.selectedClient.currentPostcode),o.xp6(1),o.Q6J("ngForOf",i.propertyTableList),o.xp6(1),o.Q6J("ngIf",!b.value),o.xp6(6),o.Q6J("ngIf",i.showDefault),o.xp6(1),o.Q6J("ngForOf",i.addressList),o.xp6(1),o.Q6J("ngIf",!D.value),o.xp6(8),o.s9C("placeholder",i.selectedClient.details),o.xp6(2),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(22,jce,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,ou,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:10vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#ffc107;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})(),$ce=(()=>{class n{constructor(e){this.elementRef=e,this.close=new o.vpe}ngOnInit(){this.onSelectedClient()}onClose(){this.ngOnDestroy()}onSelectedClient(){this.ClientDetails=this.selectedClient}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-tenant"]],inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:46,vars:9,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_view"],[1,"input-group-text"],[1,"ContentDetails"],["wrap","hard","readonly",""],[1,"button"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"View Tenant"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"label",8),o._uU(11),o.qZA(),o._UZ(12,"br"),o.TgZ(13,"label",8),o._uU(14),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"label",8),o._uU(17),o.qZA(),o._UZ(18,"hr"),o.TgZ(19,"div",9)(20,"p"),o._uU(21,"Property previously occupied details"),o.qZA()(),o.TgZ(22,"label",8),o._uU(23),o.qZA(),o._UZ(24,"br"),o.TgZ(25,"label",8),o._uU(26),o.qZA(),o._UZ(27,"hr"),o.TgZ(28,"div",9)(29,"p"),o._uU(30,"Property rented details"),o.qZA()(),o.TgZ(31,"label",8),o._uU(32),o.qZA(),o._UZ(33,"br"),o.TgZ(34,"label",8),o._uU(35),o.qZA(),o._UZ(36,"hr"),o.TgZ(37,"label",8),o._uU(38),o.qZA(),o._UZ(39,"br"),o.TgZ(40,"textarea",10),o._uU(41),o.qZA(),o._UZ(42,"br"),o.qZA(),o.TgZ(43,"div",11)(44,"button",12),o.NdJ("click",function(){return i.onClose()}),o._uU(45,"Close"),o.qZA()()()()()),2&e&&(o.xp6(11),o.hij("First name: ",i.ClientDetails.firstname,""),o.xp6(3),o.hij("Last name: ",i.ClientDetails.lastname,""),o.xp6(3),o.hij("Email: ",i.ClientDetails.email,""),o.xp6(6),o.hij("Previous Postcode: ",i.ClientDetails.prepostcode,""),o.xp6(3),o.hij("Previous Address: ",i.ClientDetails.preaddress,""),o.xp6(6),o.hij("Current Postcode: ",i.ClientDetails.curpostcode,""),o.xp6(3),o.hij("Current Address: ",i.ClientDetails.curaddress,""),o.xp6(3),o.hij("Phone: ",i.ClientDetails.phone,""),o.xp6(3),o.hij("Detail: ",i.ClientDetails.detail,""))},styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:3vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}textarea[_ngcontent-%COMP%]{width:100%}"]}),n})();function Gce(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-add-tenant",23),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.addingTenantAllowed)}}function Yce(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-view-tenant",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.viewTenantAllowed)("selectedClient",e.selectdClient)}}function Kce(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-warning-msg",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deleteTenantAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)}}function Qce(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-edit-tenant",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.editTenantAllowed)("selectedClient",e.selectdClient)}}function Jce(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",26),o.qZA())}function Xce(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",31),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.on_delete(r))}),o._uU(1,"Delete"),o.qZA()}}function eue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",27),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"uppercase"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"uppercase"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"uppercase"),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.qZA(),o.TgZ(14,"td")(15,"button",28),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_view(s))}),o._uU(16,"View"),o.qZA(),o.YNc(17,Xce,2,0,"button",29),o.TgZ(18,"button",30),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_edit(s))}),o._uU(19,"Edit"),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Oqu(e.id),o.xp6(2),o.Oqu(o.lcZ(5,6,e.firstname)),o.xp6(3),o.Oqu(o.lcZ(8,8,e.lastname)),o.xp6(3),o.Oqu(o.lcZ(11,10,e.curpostcode)),o.xp6(3),o.Oqu(e.phone),o.xp6(4),o.Q6J("ngIf","yes"==i._authri)}}const tue=function(n,t){return[n,t,"firstname","lastname","curpostcode","phone"]};let nue=(()=>{class n{constructor(e,i,r,s,a){this.dataService=e,this.router=i,this.elementRef=r,this.dbService=s,this.routeService=a,this.tenantTableList=[],this.addingTenantAllowed=!1,this.viewTenantAllowed=!1,this.deleteTenantAllowed=!1,this.editTenantAllowed=!1,this.dbName="",this.loading=!1}ngOnInit(){this.onTenantTableList(),this._authri=this.routeService.RouteEdit}onTenantTableList(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("tenantDb").then(i=>{e.tenantTableList=[],i.forEach(r=>{e.tenantTableList.push(r.data())}),e.loading=!1})})()}add_tenant(){this.addingTenantAllowed=!0}on_edit(e){this.editTenantAllowed=!0,this.selectdClient=e}on_view(e){this.viewTenantAllowed=!0,this.selectdClient=e}on_delete(e){this.deleteTenantAllowed=!0,this.selectdClient=e,this.dbName="tenantDb"}onReloadPg(){this.addingTenantAllowed=!1,this.viewTenantAllowed=!1,this.deleteTenantAllowed=!1,this.editTenantAllowed=!1,this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xv),o.Y36(rs),o.Y36(o.SBq),o.Y36(Pr),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-tenants"]],decls:44,vars:17,consts:[[3,"closeForm","close",4,"ngIf"],[3,"closeForm","selectedClient","close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","pg_content"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button","id","tenants_add_btn",1,"btn","btn-primary",3,"click"],["id","c3",1,"col-12"],["id","searchInput",1,"input-group","mb-3"],["type","button","id","button-addon1",1,"btn","btn-outline-secondary"],["type","text","placeholder","search ...","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","table_scroll"],["id","pg_table",1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"closeForm","close"],[3,"closeForm","selectedClient","close"],[3,"closeForm","selectedClient","dbName","close"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","4vw","text-align","center"],["scope","row"],["type","button","id","view_btn",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-danger","id","delete_btn",3,"click",4,"ngIf"],["type","button","id","edit_btn",1,"btn","btn-warning",3,"click"],["type","button","id","delete_btn",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div"),o.YNc(1,Gce,1,1,"app-add-tenant",0),o.YNc(2,Yce,1,2,"app-view-tenant",1),o.YNc(3,Kce,1,3,"app-warning-msg",2),o.YNc(4,Qce,1,2,"app-edit-tenant",1),o.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),o._uU(12," Tenants "),o.qZA(),o.TgZ(13,"div",10)(14,"h5",11),o._uU(15,"Tenants Details"),o.qZA(),o.TgZ(16,"p",12),o._uU(17,"This page has data, operations and views about tenants."),o.qZA()()()(),o.TgZ(18,"button",13),o.NdJ("click",function(){return i.add_tenant()}),o._uU(19,"Add New Tenants"),o.qZA()()(),o.TgZ(20,"div",14)(21,"div",15)(22,"button",16),o._uU(23,"Search"),o.qZA(),o.TgZ(24,"input",17),o.NdJ("ngModelChange",function(s){return i.filterString=s}),o.qZA()(),o.YNc(25,Jce,2,0,"div",18),o.TgZ(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th",21),o._uU(31,"ID"),o.qZA(),o.TgZ(32,"th",21),o._uU(33,"First name"),o.qZA(),o.TgZ(34,"th",21),o._uU(35,"Last name"),o.qZA(),o.TgZ(36,"th",21),o._uU(37,"Postcode"),o.qZA(),o.TgZ(38,"th",21),o._uU(39,"Phone"),o.qZA(),o._UZ(40,"th",21),o.qZA()(),o.TgZ(41,"tbody"),o.YNc(42,eue,20,12,"tr",22),o.ALo(43,"filter"),o.qZA()()()()()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.addingTenantAllowed),o.xp6(1),o.Q6J("ngIf",i.viewTenantAllowed),o.xp6(1),o.Q6J("ngIf",i.deleteTenantAllowed),o.xp6(1),o.Q6J("ngIf",i.editTenantAllowed),o.xp6(20),o.Q6J("ngModel",i.filterString),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(17),o.Q6J("ngForOf",o.G7q(43,7,o.WLB(14,tue,i.tenantTableList,i.filterString))))},dependencies:[Li,si,No,us,Yo,Tce,gD,Wce,$ce,Ii,mD],styles:["#pg_content[_ngcontent-%COMP%]{height:100%}#card_add_content[_ngcontent-%COMP%]{position:relative}#map[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);height:400px}agm-map[_ngcontent-%COMP%]{height:400px}#tenants_add_btn[_ngcontent-%COMP%]{width:100%;margin-top:30%}#pg_table[_ngcontent-%COMP%]{width:100%;max-height:300px}#searchInput[_ngcontent-%COMP%]{margin:10px auto auto}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:250px;overflow:auto;display:inline-block}thead[_ngcontent-%COMP%]{font-size:12px}tbody[_ngcontent-%COMP%]{font-size:13px}#view_btn[_ngcontent-%COMP%], #delete_btn[_ngcontent-%COMP%], #edit_btn[_ngcontent-%COMP%]{margin:auto 1%;font-size:11px}"]}),n})();const iue=["comboBoxList"],rue=["address"],oue=["city"],sue=["postcode"],aue=["date"],lue=["rent"],cue=["charge"],uue=["details"];function due(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"uppercase"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstname)," ",o.lcZ(3,4,e.lastname),"")}}function hue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function fue(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",40),o.qZA())}function pue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function gue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function mue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function _ue(n,t){1&n&&(o.TgZ(0,"p",39),o._uU(1,"This postcode is not exist!"),o.qZA())}function vue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function yue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function wue(n,t){1&n&&(o.TgZ(0,"div",39)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const bue=function(n){return{color:n}};let Cue=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.postcodeNotExist=!1,this.loading=!1}ngOnInit(){this.landlordListData()}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.property={owner:i.comboBoxListRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),city:i.cityRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),date:i.dateRef.nativeElement.value.toLowerCase(),rent:i.rentRef.nativeElement.value.toLowerCase(),charge:i.chargeRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase(),image:i.filePath},i.dbService.storageData(i.filePath,i.fileUpload).then(()=>{i.dbService.addData(i.property,"propertyDb").then(s=>{}).catch(s=>{console.log(s)})}).catch(s=>{alert(s+"Image not uploaded.")}),i.onClose())})()}landlordListData(){var e=this;return(0,be.Z)(function*(){e.loading=!0,e.landlordList=[],yield e.dbService.getData("landlordDb").then(i=>{i.forEach(r=>{e.landlordList.push(r.data())}),e.loading=!1})})()}uploadFile(e){this.fileUpload=e.target.files[0];let r=(new Date).toString();this.filePath=`estateImage/${this.postcodeRef.nativeElement.value.replace(/\s/g,"")+r.replace(/\s/g,"")}`}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.close.emit(),this.elementRef.nativeElement.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-property"]],viewQuery:function(e,i){if(1&e&&(o.Gf(iue,5),o.Gf(rue,5),o.Gf(oue,5),o.Gf(sue,5),o.Gf(aue,5),o.Gf(lue,5),o.Gf(cue,5),o.Gf(uue,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.comboBoxListRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.cityRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.dateRef=r.first),o.iGM(r=o.CRH())&&(i.rentRef=r.first),o.iGM(r=o.CRH())&&(i.chargeRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:87,vars:14,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"ownerDiv"],[1,"input-group"],[1,"input-group-text"],["ngModel","","required","","id","propertyOwner","name","propertyOwner",1,"comboBoxList"],["comboBoxList",""],[4,"ngFor","ngForOf"],["class","required-warning",4,"ngIf"],[4,"ngIf"],["type","text","placeholder","Address","name","address","ngModel","","id","address","pattern","[A-Za-z0-9- ]{2,}","maxlength","50","required","",1,"form-control"],["address",""],["type","text","placeholder","City","name","city","ngModel","","id","city","pattern","[A-Za-z]{2,}","maxlength","50","required","",1,"form-control"],["city",""],["type","text","placeholder","Postcode","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control"],["postcode",""],["type","date","placeholder","date","name","date","ngModel","","id","date","required","",1,"form-control"],["date",""],[1,"input-group","mb-3"],["type","number","placeholder","Rent value","name","rent","id","rent","ngModel","","required","","aria-label","BPound amount (with dot and two decimal places)",1,"form-control"],["rent",""],["type","number","placeholder","Service charge value","name","serviceCharge","id","serviceCharge","ngModel","","required","","aria-label","BPound amount (with dot and two decimal places)",1,"form-control"],["charge",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control",3,"change"],["type","textarea","placeholder","Other details","name","details","ngModel","","id","detals",1,"form-control"],["details",""],[1,"btns"],["type","submit","id","submitBtn",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["submitBtn",""],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","3vw","text-align","center"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Add Property"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Property details"),o.qZA()(),o.TgZ(15,"div",11)(16,"div",12)(17,"span",13),o._uU(18,"Property Owner"),o.qZA(),o.TgZ(19,"select",14,15),o.YNc(21,due,4,6,"option",16),o.qZA(),o.YNc(22,hue,3,0,"div",17),o.qZA(),o.YNc(23,fue,2,0,"div",18),o.qZA(),o.TgZ(24,"div",12)(25,"span",13),o._uU(26,"Address"),o.qZA(),o._UZ(27,"input",19,20),o.YNc(29,pue,3,0,"div",17),o.qZA(),o.TgZ(30,"div",12)(31,"span",13),o._uU(32,"City"),o.qZA(),o._UZ(33,"input",21,22),o.YNc(35,gue,3,0,"div",17),o.qZA(),o.TgZ(36,"div",12)(37,"span",13),o._uU(38,"Postcode"),o.qZA(),o._UZ(39,"input",23,24),o.YNc(41,mue,3,0,"div",17),o.qZA(),o.YNc(42,_ue,2,0,"p",17),o.TgZ(43,"div",12)(44,"span",13),o._uU(45,"Date"),o.qZA(),o._UZ(46,"input",25,26),o.YNc(48,vue,3,0,"div",17),o.qZA(),o._UZ(49,"hr"),o.TgZ(50,"div",10)(51,"p"),o._uU(52,"Financial property details"),o.qZA(),o.TgZ(53,"p"),o._uU(54,"All details accourding to monthly baises"),o.qZA()(),o.TgZ(55,"div",27)(56,"span",13),o._uU(57,"Rent \xa3"),o.qZA(),o.TgZ(58,"span",13),o._uU(59,"0.00"),o.qZA(),o._UZ(60,"input",28,29),o.YNc(62,yue,3,0,"div",17),o.qZA(),o.TgZ(63,"div",27)(64,"span",13),o._uU(65,"Basic service charge \xa3"),o.qZA(),o.TgZ(66,"span",13),o._uU(67,"0.00"),o.qZA(),o._UZ(68,"input",30,31),o.YNc(70,wue,3,0,"div",17),o.qZA(),o._UZ(71,"hr"),o.TgZ(72,"div",12)(73,"span",13),o._uU(74,"Upload"),o.qZA(),o.TgZ(75,"input",32),o.NdJ("change",function(a){return i.uploadFile(a)}),o.qZA()(),o.TgZ(76,"div",12)(77,"span",13),o._uU(78,"Details"),o.qZA(),o._UZ(79,"textarea",33,34),o.qZA(),o.TgZ(81,"div",35)(82,"button",36,37),o._uU(84,"Submit"),o.qZA(),o.TgZ(85,"button",38),o.NdJ("click",function(){return i.onClose()}),o._uU(86,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(20),a=o.MAs(28),c=o.MAs(34),h=o.MAs(40),p=o.MAs(61),v=o.MAs(69);o.xp6(21),o.Q6J("ngForOf",i.landlordList),o.xp6(1),o.Q6J("ngIf",!s.value),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!c.value),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(14),o.Q6J("ngIf",!p.value),o.xp6(8),o.Q6J("ngIf",!v.value),o.xp6(12),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(12,bue,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,gw,ou,us,iu,la,Gd,Yd,Yo,Rl,Ii],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.upperCaseName[_ngcontent-%COMP%]{text-transform:uppercase}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.comboBoxList.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.ownerDiv[_ngcontent-%COMP%]{display:flex}"]}),n})();const Tue=["comboBoxList"],Eue=["address"],Due=["city"],xue=["postcode"],Aue=["date"],Iue=["rent"],Sue=["charge"],Mue=["details"];function Pue(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"uppercase"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstname)," ",o.lcZ(3,4,e.lastname)," ")}}function kue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Oue(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",38),o.qZA())}function Rue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Nue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Lue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Fue(n,t){1&n&&(o.TgZ(0,"p",37),o._uU(1,"This postcode is not exist!"),o.qZA())}function Uue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Bue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Vue(n,t){1&n&&(o.TgZ(0,"div",37)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const Zue=function(n){return{color:n}};let zue=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.ownerList=[],this.showDefault=!0,this.postcodeNotExist=!1,this.loading=!1}ngOnInit(){this.landlordListData(),this.property=this.selectedClient}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.newproperty={owner:i.comboBoxListRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),city:i.cityRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),date:i.dateRef.nativeElement.value.toLowerCase(),rent:i.rentRef.nativeElement.value.toLowerCase(),charge:i.chargeRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase(),image:i.filePath},console.log(i.newproperty),i.dbService.updateData(i.property,i.newproperty,"propertyDb"),i.onClose())})()}landlordListData(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("landlordDb").then(i=>{e.ownerList=[],i.forEach(r=>{e.ownerList.push(r.data())}),e.loading=!1})})()}uploadFile(e){const i=e.target.files[0];let r=(new Date).toString();this.filePath=`estateImage/${this.postcodeRef.nativeElement.value.replace(/\s/g,"")+r.replace(/\s/g,"")}`,this.dbService.storageData(this.filePath,i)}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.close.emit(),this.elementRef.nativeElement.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-porperty"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Tue,5),o.Gf(Eue,5),o.Gf(Due,5),o.Gf(xue,5),o.Gf(Aue,5),o.Gf(Iue,5),o.Gf(Sue,5),o.Gf(Mue,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.comboBoxListRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.cityRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.dateRef=r.first),o.iGM(r=o.CRH())&&(i.rentRef=r.first),o.iGM(r=o.CRH())&&(i.chargeRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:89,vars:24,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"ownerDiv"],[1,"input-group"],[1,"input-group-text"],["required","","name","owner","id","owner","ngModel","",1,"comboBoxList"],["comboBoxList",""],[4,"ngFor","ngForOf"],["class","required-warning",4,"ngIf"],[4,"ngIf"],["type","text","name","address","ngModel","","id","address","maxlength","20","required","",1,"form-control",3,"placeholder"],["address",""],["type","text","name","city","ngModel","","id","city","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control",3,"placeholder"],["city",""],["type","text","name","postcode","ngModel","","id","postcode","maxlength","7","required","",1,"form-control",3,"placeholder"],["postcode",""],["type","date","name","date","ngModel","","id","date","required","",1,"form-control",3,"placeholder"],["date",""],[1,"input-group","mb-3"],["type","number","name","rent","id","rent","ngModel","","required","","aria-label","BPound amount (with dot and two decimal places)",1,"form-control",3,"placeholder"],["rent",""],["type","number","name","serviceCharge","id","serviceCharge","ngModel","","required","","aria-label","BPound amount (with dot and two decimal places)",1,"form-control",3,"placeholder"],["charge",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control",3,"change"],["type","textarea","name","details","ngModel","","id","detals",1,"form-control",3,"placeholder"],["details",""],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","3vw","text-align","center"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Edit property"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Property details"),o.qZA()(),o.TgZ(15,"div",11)(16,"div")(17,"div",12)(18,"span",13),o._uU(19,"Owner"),o.qZA(),o.TgZ(20,"select",14,15)(22,"option"),o._uU(23),o.ALo(24,"uppercase"),o.qZA(),o.YNc(25,Pue,4,6,"option",16),o.qZA(),o.YNc(26,kue,3,0,"div",17),o.qZA()(),o.YNc(27,Oue,2,0,"div",18),o.qZA(),o.TgZ(28,"div",12)(29,"span",13),o._uU(30,"Address"),o.qZA(),o._UZ(31,"input",19,20),o.YNc(33,Rue,3,0,"div",17),o.qZA(),o.TgZ(34,"div",12)(35,"span",13),o._uU(36,"City"),o.qZA(),o._UZ(37,"input",21,22),o.YNc(39,Nue,3,0,"div",17),o.qZA(),o.TgZ(40,"div",12)(41,"span",13),o._uU(42,"Postcode"),o.qZA(),o._UZ(43,"input",23,24),o.YNc(45,Lue,3,0,"div",17),o.qZA(),o.YNc(46,Fue,2,0,"p",17),o.TgZ(47,"div",12)(48,"span",13),o._uU(49,"Date"),o.qZA(),o._UZ(50,"input",25,26),o.YNc(52,Uue,3,0,"div",17),o.qZA(),o._UZ(53,"hr"),o.TgZ(54,"div",10)(55,"p"),o._uU(56,"Financial property details"),o.qZA(),o.TgZ(57,"p"),o._uU(58,"All details accourding to monthly baises"),o.qZA()(),o.TgZ(59,"div",27)(60,"span",13),o._uU(61,"Rent \xa3"),o.qZA(),o.TgZ(62,"span",13),o._uU(63,"0.00"),o.qZA(),o._UZ(64,"input",28,29),o.YNc(66,Bue,3,0,"div",17),o.qZA(),o.TgZ(67,"div",27)(68,"span",13),o._uU(69,"Basic service charge \xa3"),o.qZA(),o.TgZ(70,"span",13),o._uU(71,"0.00"),o.qZA(),o._UZ(72,"input",30,31),o.YNc(74,Vue,3,0,"div",17),o.qZA(),o._UZ(75,"hr"),o.TgZ(76,"div",12)(77,"span",13),o._uU(78,"Upload"),o.qZA(),o.TgZ(79,"input",32),o.NdJ("change",function(a){return i.uploadFile(a)}),o.qZA()(),o.TgZ(80,"div",12)(81,"span",13),o._uU(82,"Details"),o.qZA(),o._UZ(83,"textarea",33,34),o.qZA(),o.TgZ(85,"button",35),o._uU(86,"Update"),o.qZA(),o.TgZ(87,"button",36),o.NdJ("click",function(){return i.onClose()}),o._uU(88,"Cancel"),o.qZA()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(21),a=o.MAs(32),c=o.MAs(38),h=o.MAs(44),p=o.MAs(65),v=o.MAs(73);o.xp6(23),o.Oqu(o.lcZ(24,20,i.selectedClient.owner)),o.xp6(2),o.Q6J("ngForOf",i.ownerList),o.xp6(1),o.Q6J("ngIf",!s.value),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(4),o.s9C("placeholder",i.selectedClient.address),o.xp6(2),o.Q6J("ngIf",!a.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.city),o.xp6(2),o.Q6J("ngIf",!c.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.postcode),o.xp6(2),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(4),o.s9C("placeholder",i.selectedClient.date),o.xp6(2),o.Q6J("ngIf",!h.value),o.xp6(12),o.s9C("placeholder",i.selectedClient.rent),o.xp6(2),o.Q6J("ngIf",!p.value),o.xp6(6),o.s9C("placeholder",i.selectedClient.charge),o.xp6(2),o.Q6J("ngIf",!v.value),o.xp6(9),o.s9C("placeholder",i.selectedClient.detail),o.xp6(2),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(22,Zue,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,gw,ou,us,iu,la,Gd,Yd,Yo,Rl,Ii],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:3vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#ffc107;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.ownerDiv[_ngcontent-%COMP%]{display:flex}"]}),n})(),Hue=(()=>{class n{constructor(e,i){this.elementRef=e,this.mapServcie=i,this.close=new o.vpe}ngOnInit(){this.onSelectedClient(),this.mapServcie.initMap(this.selectedClient.postcode)}onSelectedClient(){this.ClientDetails=this.selectedClient}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.close.emit(),this.elementRef.nativeElement.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-property"]],inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:50,vars:12,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_data"],[1,"content_view"],[1,"ContentDetails"],[1,"input-group-text"],["wrap","hard","readonly",""],[1,"content_map"],["id","map","markers","markers","center","osloCenter",1,"col-6","col-sm-6"],["id","image","alt","prooperty image",3,"src"],[1,"button"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"View Property"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"p"),o._uU(13,"Property details"),o.qZA()(),o.TgZ(14,"label",10),o._uU(15),o.ALo(16,"uppercase"),o.qZA(),o._UZ(17,"br"),o.TgZ(18,"label",10),o._uU(19),o.qZA(),o._UZ(20,"br"),o.TgZ(21,"label",10),o._uU(22),o.qZA(),o._UZ(23,"br"),o.TgZ(24,"label",10),o._uU(25),o.ALo(26,"uppercase"),o.qZA(),o._UZ(27,"hr"),o.TgZ(28,"div",9)(29,"p"),o._uU(30,"Financial details"),o.qZA()(),o.TgZ(31,"label",10),o._uU(32),o.qZA(),o._UZ(33,"br"),o.TgZ(34,"label",10),o._uU(35),o.qZA(),o._UZ(36,"hr"),o.TgZ(37,"div",9)(38,"p"),o._uU(39,"Detail"),o.qZA()(),o.TgZ(40,"textarea",11),o._uU(41),o.qZA(),o._UZ(42,"br"),o.qZA(),o.TgZ(43,"div",12),o._UZ(44,"div",13),o.qZA(),o.TgZ(45,"div"),o._UZ(46,"img",14),o.qZA()(),o.TgZ(47,"div",15)(48,"button",16),o.NdJ("click",function(){return i.onClose()}),o._uU(49,"Close"),o.qZA()()()()()),2&e&&(o.xp6(15),o.hij("Owner: ",o.lcZ(16,8,i.ClientDetails.owner),""),o.xp6(4),o.hij("Address: ",i.ClientDetails.address,""),o.xp6(3),o.hij("City: ",i.ClientDetails.city,""),o.xp6(3),o.hij("Postcode: ",o.lcZ(26,10,i.ClientDetails.postcode),""),o.xp6(7),o.hij("Rent: \xa3",i.ClientDetails.rent,""),o.xp6(3),o.hij("Service Charge: \xa3",i.ClientDetails.charge,""),o.xp6(6),o.Oqu(i.ClientDetails.detail),o.xp6(5),o.s9C("src",i.ClientDetails.image,o.LSH))},dependencies:[Ii],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:3vh;left:15vw;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}textarea[_ngcontent-%COMP%]{width:100%}.content_data[_ngcontent-%COMP%]{display:flex}#map[_ngcontent-%COMP%], #image[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);width:25vw;height:50vh}"]}),n})();function que(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-add-property",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.addingPropertyAllowed)}}function jue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-view-property",26),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.viewPropertyAllowed)("selectedClient",e.selectdClient)}}function Wue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-warning-msg",27),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deletePropertyAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)}}function $ue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-edit-porperty",26),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.editPropertyAllowed)("selectedClient",e.selectdClient)}}function Gue(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",28),o.qZA())}function Yue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.on_delete(r))}),o._uU(1,"Delete"),o.qZA()}}function Kue(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",29),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"uppercase"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"uppercase"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"uppercase"),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.qZA(),o.TgZ(16,"td")(17,"button",30),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_view(s))}),o._uU(18,"View"),o.qZA(),o.YNc(19,Yue,2,0,"button",31),o.TgZ(20,"button",32),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_edit(s))}),o._uU(21,"Edit"),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Oqu(e.id),o.xp6(2),o.Oqu(o.lcZ(5,7,e.owner)),o.xp6(3),o.Oqu(o.lcZ(8,9,e.address)),o.xp6(3),o.Oqu(o.lcZ(11,11,e.postcode)),o.xp6(3),o.Oqu(e.date),o.xp6(2),o.hij("\xa3",e.rent,""),o.xp6(4),o.Q6J("ngIf","yes"==i._authri)}}const Que=function(n,t){return[n,t,"firstname","lastname","postcode","phone","owner","address"]};let Jue=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.mapService=i,this.dbService=r,this.routeService=s,this.propertyTableList=[],this.deletePropertyList=[],this.addingPropertyAllowed=!1,this.viewPropertyAllowed=!1,this.deletePropertyAllowed=!1,this.editPropertyAllowed=!1,this.dbName="",this.loading=!1,this.onLandlordTableList()}ngOnInit(){this._authri=this.routeService.RouteEdit}onLandlordTableList(){var e=this;return(0,be.Z)(function*(){e.loading=!0,e.propertyTableList=[],yield e.dbService.getData("propertyDb").then(i=>{i.forEach(r=>{e.deletePropertyList.push(r.data()),e.dbService.getStorageData(r.data().image).then(s=>{let a=r.data();a.image=s.toString(),e.propertyTableList.push(a)}).catch(s=>console.log(s))}),e.mapService.initMainMap(),e.loading=!1})})()}add_property(){this.addingPropertyAllowed=!0}on_edit(e){this.editPropertyAllowed=!0,this.selectdClient=e}on_view(e){this.viewPropertyAllowed=!0,this.selectdClient=e,this.mapService.initMap(this.selectdClient.Postcode)}on_delete(e){this.deletePropertyAllowed=!0,this.deletePropertyList.forEach(i=>{i.postcode===e.postcode&&i.id===e.id&&i.landlordId===e.landlordId&&(this.selectdClient=i)}),this.dbName="propertyDb"}onReloadPg(){this.ngOnInit(),this.addingPropertyAllowed=!1,this.viewPropertyAllowed=!1,this.deletePropertyAllowed=!1,this.editPropertyAllowed=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-properties"]],decls:48,vars:19,consts:[[3,"closeForm","close",4,"ngIf"],[3,"closeForm","selectedClient","close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","pg_content"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button","id","properties_add_btn",1,"btn","btn-primary",3,"click"],["id","map","markers","markers","center","osloCenter",1,"col-6","col-sm-6"],["id","c3",1,"col-12"],["id","searchInput",1,"input-group","mb-3"],["type","button","id","button-addon1",1,"btn","btn-outline-secondary"],["type","text","placeholder","search ...","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"ngModel","ngModelChange"],["src","assets/images/locationIcon.gif"],[4,"ngIf"],["id","table_scroll"],["id","pg_table",1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"closeForm","close"],[3,"closeForm","selectedClient","close"],[3,"closeForm","selectedClient","dbName","close"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","4vw","text-align","center"],["scope","row"],["type","button","id","view_btn",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-danger","id","delete_btn",3,"click",4,"ngIf"],["type","button","id","edit_btn",1,"btn","btn-warning",3,"click"],["type","button","id","delete_btn",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div"),o.YNc(1,que,1,1,"app-add-property",0),o.YNc(2,jue,1,2,"app-view-property",1),o.YNc(3,Wue,1,3,"app-warning-msg",2),o.YNc(4,$ue,1,2,"app-edit-porperty",1),o.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),o._uU(12," Properties "),o.qZA(),o.TgZ(13,"div",10)(14,"h5",11),o._uU(15,"Properties Details"),o.qZA(),o.TgZ(16,"p",12),o._uU(17,"This page has data, operations and views about properties."),o.qZA()()()(),o.TgZ(18,"button",13),o.NdJ("click",function(){return i.add_property()}),o._uU(19,"Add New Property"),o.qZA()()(),o._UZ(20,"div",14),o.TgZ(21,"div",15)(22,"div",16)(23,"button",17),o._uU(24,"Search"),o.qZA(),o.TgZ(25,"input",18),o.NdJ("ngModelChange",function(s){return i.filterString=s}),o.qZA()(),o._UZ(26,"img",19),o.YNc(27,Gue,2,0,"div",20),o.TgZ(28,"div",21)(29,"table",22)(30,"thead")(31,"tr")(32,"th",23),o._uU(33,"ID"),o.qZA(),o.TgZ(34,"th",23),o._uU(35,"Owner"),o.qZA(),o.TgZ(36,"th",23),o._uU(37,"Address"),o.qZA(),o.TgZ(38,"th",23),o._uU(39,"Postcode"),o.qZA(),o.TgZ(40,"th",23),o._uU(41,"Date"),o.qZA(),o.TgZ(42,"th",23),o._uU(43,"Rent"),o.qZA(),o._UZ(44,"th",23),o.qZA()(),o.TgZ(45,"tbody"),o.YNc(46,Kue,22,13,"tr",24),o.ALo(47,"filter"),o.qZA()()()()()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.addingPropertyAllowed),o.xp6(1),o.Q6J("ngIf",i.viewPropertyAllowed),o.xp6(1),o.Q6J("ngIf",i.deletePropertyAllowed),o.xp6(1),o.Q6J("ngIf",i.editPropertyAllowed),o.xp6(21),o.Q6J("ngModel",i.filterString),o.xp6(2),o.Q6J("ngIf",i.loading),o.xp6(19),o.Q6J("ngForOf",o.G7q(47,7,o.WLB(16,Que,i.propertyTableList,i.filterString))))},dependencies:[Li,si,No,us,Yo,Cue,gD,zue,Hue,Ii,mD],styles:["#pg_content[_ngcontent-%COMP%]{height:100%}#card_add_content[_ngcontent-%COMP%]{position:relative}#map[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);height:400px}#properties_add_btn[_ngcontent-%COMP%]{width:100%;margin-top:30%}#pg_table[_ngcontent-%COMP%]{width:100%;max-height:300px}#searchInput[_ngcontent-%COMP%]{margin:10px auto auto}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:250px;overflow:auto;display:inline-block}thead[_ngcontent-%COMP%]{font-size:12px}tbody[_ngcontent-%COMP%]{font-size:13px}#view_btn[_ngcontent-%COMP%], #delete_btn[_ngcontent-%COMP%], #edit_btn[_ngcontent-%COMP%]{margin:auto 1%;font-size:11px}#map[_ngcontent-%COMP%]{height:300px;z-index:0}"]}),n})();const Xue=["name"],ede=["sector"],tde=["services"],nde=["address"],ide=["postcode"],rde=["email"],ode=["phone"],sde=["details"];function ade(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function lde(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function cde(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function ude(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function dde(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function hde(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function fde(n,t){1&n&&(o.TgZ(0,"div",34)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function pde(n,t){1&n&&(o.TgZ(0,"p",34),o._uU(1,"This postcode is not exist!"),o.qZA())}const gde=function(n){return{color:n}};let mde=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.postcodeNotExist=!1}ngOnInit(){}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.other={name:i.nameRef.nativeElement.value.toLowerCase(),sector:i.sectorRef.nativeElement.value.toLowerCase(),services:i.servicesRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},i.dbService.addData(i.other,"otherDb").then(s=>{console.log(s)}).catch(s=>{console.log(s)}),i.onClose())})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-other"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Xue,5),o.Gf(ede,5),o.Gf(tde,5),o.Gf(nde,5),o.Gf(ide,5),o.Gf(rde,5),o.Gf(ode,5),o.Gf(sde,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.nameRef=r.first),o.iGM(r=o.CRH())&&(i.sectorRef=r.first),o.iGM(r=o.CRH())&&(i.servicesRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:72,vars:12,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"input-group"],[1,"input-group-text"],["type","text","placeholder","name","name","name","ngModel","","id","name","maxlength","150","required","",1,"form-control"],["name",""],["class","required-warning",4,"ngIf"],["type","text","placeholder","sector","name","sector","ngModel","","id","sector","pattern","[A-Za-z]{2,}","maxlength","20","required","",1,"form-control"],["sector",""],["type","text","placeholder","services","name","services","ngModel","","id","services","maxlength","150","required","",1,"form-control"],["services",""],["type","text","placeholder","Phone","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control"],["phone",""],["type","email","placeholder","Email","name","email","ngModel","","id","email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","required","",1,"form-control"],["email",""],["type","text","placeholder","Address","name","address","ngModel","","id","address","pattern","[A-Za-z0-9\\w!@#$%?=*&.- ]{2,}","maxlength","50","required","",1,"form-control"],["address",""],["type","text","placeholder","Postcode","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control"],["postcode",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","placeholder","Other details","name","details","ngModel","","id","detals",1,"form-control"],["details",""],[1,"btns"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Add Other"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Other details"),o.qZA()(),o.TgZ(15,"div",11)(16,"span",12),o._uU(17,"Name"),o.qZA(),o._UZ(18,"input",13,14),o.YNc(20,ade,3,0,"div",15),o.qZA(),o.TgZ(21,"div",11)(22,"span",12),o._uU(23,"Sector"),o.qZA(),o._UZ(24,"input",16,17),o.YNc(26,lde,3,0,"div",15),o.qZA(),o.TgZ(27,"div",11)(28,"span",12),o._uU(29,"Services"),o.qZA(),o._UZ(30,"input",18,19),o.YNc(32,cde,3,0,"div",15),o.qZA(),o.TgZ(33,"div",11)(34,"span",12),o._uU(35,"Phone"),o.qZA(),o._UZ(36,"input",20,21),o.YNc(38,ude,3,0,"div",15),o.qZA(),o.TgZ(39,"div",11)(40,"span",12),o._uU(41,"@"),o.qZA(),o._UZ(42,"input",22,23),o.YNc(44,dde,3,0,"div",15),o.qZA(),o.TgZ(45,"div",11)(46,"span",12),o._uU(47,"Address"),o.qZA(),o._UZ(48,"input",24,25),o.YNc(50,hde,3,0,"div",15),o.qZA(),o.TgZ(51,"div",11)(52,"span",12),o._uU(53,"Postcode"),o.qZA(),o._UZ(54,"input",26,27),o.YNc(56,fde,3,0,"div",15),o.qZA(),o.YNc(57,pde,2,0,"p",15),o.TgZ(58,"div",11)(59,"span",12),o._uU(60,"Upload"),o.qZA(),o._UZ(61,"input",28),o.qZA(),o.TgZ(62,"div",11)(63,"span",12),o._uU(64,"Details"),o.qZA(),o._UZ(65,"textarea",29,30),o.qZA(),o.TgZ(67,"div",31)(68,"button",32),o._uU(69,"Submit"),o.qZA(),o.TgZ(70,"button",33),o.NdJ("click",function(){return i.onClose()}),o._uU(71,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(19),a=o.MAs(25),c=o.MAs(31),h=o.MAs(37),p=o.MAs(43),v=o.MAs(49),b=o.MAs(55);o.xp6(20),o.Q6J("ngIf",!s.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!c.value),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(6),o.Q6J("ngIf",!p.value),o.xp6(6),o.Q6J("ngIf",!v.value),o.xp6(6),o.Q6J("ngIf",!b.value),o.xp6(1),o.Q6J("ngIf",i.postcodeNotExist),o.xp6(11),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(10,gde,r.valid?"":"gray"))}},dependencies:[si,ur,ru,No,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})();const _de=["name"],vde=["sector"],yde=["services"],wde=["address"],bde=["postcode"],Cde=["email"],Tde=["phone"],Ede=["details"];function Dde(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function xde(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Ade(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Ide(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Sde(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Mde(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Pde(n,t){1&n&&(o.TgZ(0,"div",32)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const kde=function(n){return{color:n}};let Ode=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.mapingService=i,this.dbService=r,this.close=new o.vpe,this.postcodeNotExist=!1}ngOnInit(){this.other=this.selectedClient}onSubmit(e){var i=this;return(0,be.Z)(function*(){i.postcodeNotExist=!1,void 0===(yield i.mapingService.checkPostcode(i.postcodeRef.nativeElement.value))?(console.log("this is undefined value"),i.postcodeRef.nativeElement.value="",i.postcodeNotExist=!0):(i.newother={name:i.nameRef.nativeElement.value.toLowerCase(),sector:i.sectorRef.nativeElement.value.toLowerCase(),services:i.servicesRef.nativeElement.value.toLowerCase(),address:i.addressRef.nativeElement.value.toLowerCase(),postcode:i.postcodeRef.nativeElement.value.toUpperCase(),email:i.emailRef.nativeElement.value.toLowerCase(),phone:i.phoneRef.nativeElement.value.toLowerCase(),detail:i.detailsRef.nativeElement.value.toLowerCase()},console.log(i.newother),console.log(i.other),i.dbService.updateData(i.other,i.newother,"otherDb"),i.onClose())})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(af),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-other"]],viewQuery:function(e,i){if(1&e&&(o.Gf(_de,5),o.Gf(vde,5),o.Gf(yde,5),o.Gf(wde,5),o.Gf(bde,5),o.Gf(Cde,5),o.Gf(Tde,5),o.Gf(Ede,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.nameRef=r.first),o.iGM(r=o.CRH())&&(i.sectorRef=r.first),o.iGM(r=o.CRH())&&(i.servicesRef=r.first),o.iGM(r=o.CRH())&&(i.addressRef=r.first),o.iGM(r=o.CRH())&&(i.postcodeRef=r.first),o.iGM(r=o.CRH())&&(i.emailRef=r.first),o.iGM(r=o.CRH())&&(i.phoneRef=r.first),o.iGM(r=o.CRH())&&(i.detailsRef=r.first)}},inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:67,vars:19,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"input-group"],[1,"input-group-text"],["type","text","name","name","ngModel","","id","name","maxlength","150","required","",1,"form-control",3,"placeholder"],["name",""],["class","required-warning",4,"ngIf"],["type","text","name","sector","ngModel","","id","sector","maxlength","150","required","",1,"form-control",3,"placeholder"],["sector",""],["type","text","name","services","ngModel","","id","services","maxlength","150","required","",1,"form-control",3,"placeholder"],["services",""],["type","text","name","phone","ngModel","","id","phone","maxlength","11","required","",1,"form-control",3,"placeholder"],["phone",""],["type","email","name","email","ngModel","","id","email","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",1,"form-control",3,"placeholder"],["email",""],["type","text","name","address","ngModel","","id","address","pattern","[A-Za-z0-9\\w!@#$%?=*&.- ]{2,}","maxlength","50","required","",1,"form-control",3,"placeholder"],["address",""],["type","text","name","postcode","ngModel","","id","postcode","pattern","[A-Za-z0-9- ]{2,}","maxlength","8","required","",1,"form-control",3,"placeholder"],["postcode",""],["type","file","placeholder","Choose file","name","upload","ngModel","","id","upload",1,"form-control"],["type","textarea","name","details","ngModel","","id","detals",1,"form-control",3,"placeholder"],["details",""],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Edit others"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"span",11),o._uU(14,"Name"),o.qZA(),o._UZ(15,"input",12,13),o.YNc(17,Dde,3,0,"div",14),o.qZA(),o.TgZ(18,"div",10)(19,"span",11),o._uU(20,"Sector"),o.qZA(),o._UZ(21,"input",15,16),o.YNc(23,xde,3,0,"div",14),o.qZA(),o.TgZ(24,"div",10)(25,"span",11),o._uU(26,"Services"),o.qZA(),o._UZ(27,"input",17,18),o.YNc(29,Ade,3,0,"div",14),o.qZA(),o.TgZ(30,"div",10)(31,"span",11),o._uU(32,"Phone"),o.qZA(),o._UZ(33,"input",19,20),o.YNc(35,Ide,3,0,"div",14),o.qZA(),o.TgZ(36,"div",10)(37,"span",11),o._uU(38,"@"),o.qZA(),o._UZ(39,"input",21,22),o.YNc(41,Sde,3,0,"div",14),o.qZA(),o.TgZ(42,"div",10)(43,"span",11),o._uU(44,"Address"),o.qZA(),o._UZ(45,"input",23,24),o.YNc(47,Mde,3,0,"div",14),o.qZA(),o.TgZ(48,"div",10)(49,"span",11),o._uU(50,"Postcode"),o.qZA(),o._UZ(51,"input",25,26),o.YNc(53,Pde,3,0,"div",14),o.qZA(),o.TgZ(54,"div",10)(55,"span",11),o._uU(56,"Upload"),o.qZA(),o._UZ(57,"input",27),o.qZA(),o.TgZ(58,"div",10)(59,"span",11),o._uU(60,"Details"),o.qZA(),o._UZ(61,"textarea",28,29),o.qZA(),o.TgZ(63,"button",30),o._uU(64,"Update"),o.qZA(),o.TgZ(65,"button",31),o.NdJ("click",function(){return i.onClose()}),o._uU(66,"Cancel"),o.qZA()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(16),a=o.MAs(22),c=o.MAs(28),h=o.MAs(34),p=o.MAs(40),v=o.MAs(46),b=o.MAs(52);o.xp6(15),o.s9C("placeholder",i.selectedClient.name),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.sector),o.xp6(2),o.Q6J("ngIf",!a.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.services),o.xp6(2),o.Q6J("ngIf",!c.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.phone),o.xp6(2),o.Q6J("ngIf",!h.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.email),o.xp6(2),o.Q6J("ngIf",!p.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.address),o.xp6(2),o.Q6J("ngIf",!v.value),o.xp6(4),o.s9C("placeholder",i.selectedClient.postcode),o.xp6(2),o.Q6J("ngIf",!b.value),o.xp6(8),o.s9C("placeholder",i.selectedClient.details),o.xp6(2),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(17,kde,r.valid?"":"gray"))}},dependencies:[si,ur,ru,No,us,iu,la,Gd,Yd,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:10vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#ffc107;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})(),Rde=(()=>{class n{constructor(e){this.elementRef=e,this.close=new o.vpe}ngOnInit(){this.onSelectedClient()}onClose(){this.ngOnDestroy()}onSelectedClient(){this.ClientDetails=this.selectedClient}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-other"]],inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:38,vars:8,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_view"],[1,"input-group-text"],["wrap","hard","readonly",""],[1,"button"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"View Other"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"label",8),o._uU(11),o.qZA(),o._UZ(12,"br"),o.TgZ(13,"label",8),o._uU(14),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"label",8),o._uU(17),o.qZA(),o._UZ(18,"br"),o.TgZ(19,"label",8),o._uU(20),o.qZA(),o._UZ(21,"br"),o.TgZ(22,"label",8),o._uU(23),o.qZA(),o._UZ(24,"br"),o.TgZ(25,"label",8),o._uU(26),o.qZA(),o._UZ(27,"br"),o.TgZ(28,"label",8),o._uU(29),o.qZA(),o._UZ(30,"br")(31,"hr"),o.TgZ(32,"textarea",9),o._uU(33),o.qZA(),o._UZ(34,"br"),o.qZA(),o.TgZ(35,"div",10)(36,"button",11),o.NdJ("click",function(){return i.onClose()}),o._uU(37,"Close"),o.qZA()()()()()),2&e&&(o.xp6(11),o.hij("Name: ",i.ClientDetails.name,""),o.xp6(3),o.hij("Sector: ",i.ClientDetails.sector,""),o.xp6(3),o.hij("Services: ",i.ClientDetails.services,""),o.xp6(3),o.hij("Phone: ",i.ClientDetails.phone,""),o.xp6(3),o.hij("Email: ",i.ClientDetails.email,""),o.xp6(3),o.hij("Address: ",i.ClientDetails.address,""),o.xp6(3),o.hij("Postcode: ",i.ClientDetails.postcode,""),o.xp6(4),o.hij("Detail: ",i.ClientDetails.Details,""))},styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:3vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}textarea[_ngcontent-%COMP%]{width:100%}"]}),n})(),Nde=(()=>{class n{transform(e,i){return e.length>i?e.substring(0,i)+" ...":e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"shorten",type:n,pure:!0}),n})();function Lde(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-add-other",23),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.addingOtherAllowed)}}function Fde(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-view-other",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.viewOtherAllowed)("selectedClient",e.selectdClient)}}function Ude(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-warning-msg",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deleteOtherAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)}}function Bde(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-edit-other",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.editOtherAllowed)("selectedClient",e.selectdClient)}}function Vde(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",26),o.qZA())}function Zde(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",31),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.on_delete(r))}),o._uU(1,"Delete"),o.qZA()}}function zde(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",27),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"upperFirst"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"upperFirst"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"shorten"),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.qZA(),o.TgZ(14,"td")(15,"button",28),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_view(s))}),o._uU(16,"View"),o.qZA(),o.YNc(17,Zde,2,0,"button",29),o.TgZ(18,"button",30),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_edit(s))}),o._uU(19,"Edit"),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Oqu(e.id),o.xp6(2),o.Oqu(o.lcZ(5,6,e.name)),o.xp6(3),o.Oqu(o.lcZ(8,8,e.sector)),o.xp6(3),o.Oqu(o.xi3(11,10,e.services,10)),o.xp6(3),o.Oqu(e.phone),o.xp6(4),o.Q6J("ngIf","yes"==i._authri)}}const Hde=function(n,t){return[n,t,"name","sector","services","phone"]};let qde=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.dbService=i,this.routeService=r,this.otherTableList=[],this.addingOtherAllowed=!1,this.viewOtherAllowed=!1,this.deleteOtherAllowed=!1,this.editOtherAllowed=!1,this.dbName="",this.loading=!1}ngOnInit(){this.onOtherTableList(),this._authri=this.routeService.RouteEdit}onOtherTableList(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("otherDb").then(i=>{e.otherTableList=[],i.forEach(r=>{e.otherTableList.push(r.data())}),e.loading=!1})})()}add_other(){this.addingOtherAllowed=!0}on_edit(e){this.editOtherAllowed=!0,this.selectdClient=e}on_view(e){this.viewOtherAllowed=!0,this.selectdClient=e}on_delete(e){this.deleteOtherAllowed=!0,this.selectdClient=e,this.dbName="otherDb"}onReloadPg(){this.addingOtherAllowed=!1,this.viewOtherAllowed=!1,this.deleteOtherAllowed=!1,this.editOtherAllowed=!1,this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-others"]],decls:44,vars:17,consts:[[3,"closeForm","close",4,"ngIf"],[3,"closeForm","selectedClient","close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","pg_content"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button","id","landlords_add_btn",1,"btn","btn-primary",3,"click"],["id","c3",1,"col-12"],["id","searchInput",1,"input-group","mb-3"],["type","button","id","button-addon1",1,"btn","btn-outline-secondary"],["type","text","placeholder","search ...","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","table_scroll"],["id","pg_table",1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"closeForm","close"],[3,"closeForm","selectedClient","close"],[3,"closeForm","selectedClient","dbName","close"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","4vw","text-align","center"],["scope","row"],["type","button","id","view_btn",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-danger","id","delete_btn",3,"click",4,"ngIf"],["type","button","id","edit_btn",1,"btn","btn-warning",3,"click"],["type","button","id","delete_btn",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div"),o.YNc(1,Lde,1,1,"app-add-other",0),o.YNc(2,Fde,1,2,"app-view-other",1),o.YNc(3,Ude,1,3,"app-warning-msg",2),o.YNc(4,Bde,1,2,"app-edit-other",1),o.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),o._uU(12," Others "),o.qZA(),o.TgZ(13,"div",10)(14,"h5",11),o._uU(15,"Others Details"),o.qZA(),o.TgZ(16,"p",12),o._uU(17,"This page has data, operations and views about others."),o.qZA()()()(),o.TgZ(18,"button",13),o.NdJ("click",function(){return i.add_other()}),o._uU(19,"Add New Other"),o.qZA()()(),o.TgZ(20,"div",14)(21,"div",15)(22,"button",16),o._uU(23,"Search"),o.qZA(),o.TgZ(24,"input",17),o.NdJ("ngModelChange",function(s){return i.filterString=s}),o.qZA()(),o.YNc(25,Vde,2,0,"div",18),o.TgZ(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th",21),o._uU(31,"ID"),o.qZA(),o.TgZ(32,"th",21),o._uU(33,"Name"),o.qZA(),o.TgZ(34,"th",21),o._uU(35,"Sector"),o.qZA(),o.TgZ(36,"th",21),o._uU(37,"Services"),o.qZA(),o.TgZ(38,"th",21),o._uU(39,"Phone"),o.qZA(),o._UZ(40,"th",21),o.qZA()(),o.TgZ(41,"tbody"),o.YNc(42,zde,20,13,"tr",22),o.ALo(43,"filter"),o.qZA()()()()()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.addingOtherAllowed),o.xp6(1),o.Q6J("ngIf",i.viewOtherAllowed),o.xp6(1),o.Q6J("ngIf",i.deleteOtherAllowed),o.xp6(1),o.Q6J("ngIf",i.editOtherAllowed),o.xp6(20),o.Q6J("ngModel",i.filterString),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(17),o.Q6J("ngForOf",o.G7q(43,7,o.WLB(14,Hde,i.otherTableList,i.filterString))))},dependencies:[Li,si,No,us,Yo,mde,gD,Ode,Rde,mD,Nde,sf],styles:["#pg_content[_ngcontent-%COMP%]{height:100%}#card_add_content[_ngcontent-%COMP%]{position:relative}#map[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);height:400px}agm-map[_ngcontent-%COMP%]{height:400px}#landlords_add_btn[_ngcontent-%COMP%]{width:100%;margin-top:30%}#pg_table[_ngcontent-%COMP%]{width:100%;max-height:300px}#searchInput[_ngcontent-%COMP%]{margin:10px auto auto}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:250px;overflow:auto;display:inline-block}thead[_ngcontent-%COMP%]{font-size:12px}tbody[_ngcontent-%COMP%]{font-size:13px}#view_btn[_ngcontent-%COMP%], #delete_btn[_ngcontent-%COMP%], #edit_btn[_ngcontent-%COMP%]{margin:auto 1%;font-size:11px}"]}),n})(),Av=(()=>{class n{transform(e){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"currancy",type:n,pure:!0}),n})();const jde=["position"],Wde=["date"],$de=["name"],Gde=["nameTenant"],Yde=["nameOther"],Kde=["nameLandlord"],Qde=["about"],Jde=["totalAmount"],Xde=["typeOfPayment"];function ehe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function the(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function nhe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.ALo(3,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstname)," ",o.lcZ(3,4,e.lastname),"")}}function ihe(n,t){if(1&n&&(o.TgZ(0,"select",46,47),o.YNc(2,nhe,4,6,"option",41),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.landlordList)}}function rhe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.ALo(3,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstname)," ",o.lcZ(3,4,e.lastname),"")}}function ohe(n,t){if(1&n&&(o.TgZ(0,"select",46,48),o.YNc(2,rhe,4,6,"option",41),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.tenantList)}}function she(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,e.name))}}function ahe(n,t){if(1&n&&(o.TgZ(0,"select",46,49),o.YNc(2,she,3,3,"option",41),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.otherList)}}function lhe(n,t){if(1&n&&(o.TgZ(0,"div",12)(1,"span",13),o._uU(2,"Name"),o.qZA(),o.YNc(3,ihe,3,1,"select",45),o.YNc(4,ohe,3,1,"select",45),o.YNc(5,ahe,3,1,"select",45),o.qZA()),2&n){o.oxw();const e=o.MAs(20);o.xp6(3),o.Q6J("ngIf","Landlord"===e.value),o.xp6(1),o.Q6J("ngIf","Tenant"===e.value),o.xp6(1),o.Q6J("ngIf","Other"===e.value)}}function che(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",50),o.qZA())}function uhe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function dhe(n,t){if(1&n&&(o.TgZ(0,"div",12)(1,"span",13),o._uU(2,"Name"),o.qZA(),o._UZ(3,"input",51,52),o.YNc(5,uhe,3,0,"div",17),o.qZA()),2&n){const e=o.MAs(4);o.xp6(5),o.Q6J("ngIf",!e.value)}}function hhe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function fhe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function phe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function ghe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function mhe(n,t){1&n&&(o.TgZ(0,"div",44)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function _he(n,t){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.ALo(7,"currancy"),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.typeOfTransaction),o.xp6(2),o.Oqu(e.description),o.xp6(2),o.Oqu(o.lcZ(7,3,e.amount))}}const vhe=function(n){return{color:n}};let yhe=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.dataService=i,this.dbService=r,this.close=new o.vpe,this.transactionList=[],this.propertyTableList=[],this.landlordList=[],this.tenantList=[],this.otherList=[],this.addTransaction=!1,this.totalAmountValue=0,this.invoiceNo="",this.loading=!1}ngOnInit(){this.getLandlord(),this.getTenant(),this.getOther()}onAddTransaction(){}onSubmit(e){this.generateInvoiceNo(),this.money={position:this.positionRef.nativeElement.value.toLowerCase(),date:this.dateRef.nativeElement.value.toLowerCase(),name:e.value.name.toLowerCase(),about:this.aboutRef.nativeElement.value.toLowerCase(),totalamount:this.totalamountRef.nativeElement.value.toUpperCase(),typeofpayment:this.typeofpaymentRef.nativeElement.value.toLowerCase(),invoiceno:this.invoiceNo,trans:this.transactionList},this.dbService.addData(this.money,"moneyDb").then(i=>{}).catch(i=>{console.log(i)}),this.onClose()}onSubmitTransaction(e){let i=e.value;"Pay"===i.typeOfTransaction&&(i.amount=-1*i.amount),this.transactionList.push(i);let r=i.amount;if("Pay"===i.typeOfTransaction)this.totalAmountValue=(this.totalAmountValue+r).toFixed(2);else{let s=parseInt(this.totalAmountValue)+r;this.totalAmountValue=s}e.reset()}generateInvoiceNo(){let e=new Date;this.invoiceNo=e.getSeconds()+e.getMinutes()+e.getFullYear()+e.getFullYear()+"CP"}getLandlord(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("landlordDb").then(i=>{e.landlordList=[],i.forEach(r=>{e.landlordList.push(r.data())}),e.loading=!1})})()}getTenant(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("tenantDb").then(i=>{e.tenantList=[],i.forEach(r=>{e.tenantList.push(r.data())}),e.loading=!1})})()}getOther(){var e=this;return(0,be.Z)(function*(){e.loading=!0,yield e.dbService.getData("otherDb").then(i=>{e.otherList=[],i.forEach(r=>{e.otherList.push(r.data())}),e.loading=!1})})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(xv),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-voucher"]],viewQuery:function(e,i){if(1&e&&(o.Gf(jde,7),o.Gf(Wde,7),o.Gf($de,7),o.Gf(Gde,7),o.Gf(Yde,7),o.Gf(Kde,7),o.Gf(Qde,7),o.Gf(Jde,7),o.Gf(Xde,7)),2&e){let r;o.iGM(r=o.CRH())&&(i.positionRef=r.first),o.iGM(r=o.CRH())&&(i.dateRef=r.first),o.iGM(r=o.CRH())&&(i.nameRef=r.first),o.iGM(r=o.CRH())&&(i.nametenantRef=r.first),o.iGM(r=o.CRH())&&(i.nameotherRef=r.first),o.iGM(r=o.CRH())&&(i.namelandlordRef=r.first),o.iGM(r=o.CRH())&&(i.aboutRef=r.first),o.iGM(r=o.CRH())&&(i.totalamountRef=r.first),o.iGM(r=o.CRH())&&(i.typeofpaymentRef=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:125,vars:17,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[3,"ngSubmit"],["f","ngForm"],[1,"input_block"],[1,"ContentDetails"],[1,"v-line-1"],[1,"input-group"],[1,"input-group-text"],["aria-label","Default select example","name","position","id","position","ngModel","","required","",1,"form-select"],["position",""],["default",""],["class","required-warning",4,"ngIf"],["type","date","placeholder","Date","name","date","ngModel","","id","date","required","",1,"form-control"],["date",""],["class","input-group",4,"ngIf"],[4,"ngIf"],["aria-label","Default select example","name","about","id","about","ngModel","","required","",1,"form-select"],["about",""],["type","number","aria-label","Default select example","name","totalAmount","id","totalAmount","ngModel","","readonly","",1,"form-control",3,"value"],["totalAmount",""],["aria-label","Default select example","type","text","name","typeOfPayment","id","typeOfPayment","ngModel","","required","",1,"form-select"],["typeOfPayment",""],["t","ngForm"],[1,"btns"],["id","addTransactionbtn",1,"btn","btn-outline-primary",3,"disabled","click"],["aria-label","Default select example","name","typeOfTransaction","id","typeOfTransaction","ngModel","","required","",1,"form-select"],["typeOfTransaction",""],["type","text","placeholder","Description","name","description","ngModel","","id","description","required","",1,"form-control"],["description",""],["type","number","placeholder","Amount","name","amount","ngModel","","id","amount","required","",1,"form-control"],["amount",""],["id","table_scroll"],[1,"table"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle","click"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"],["class","form-select","aria-label","Default select example","name","name","id","name","ngModel","","required","",4,"ngIf"],["aria-label","Default select example","name","name","id","name","ngModel","","required","",1,"form-select"],["nameLandlord",""],["nameTenant",""],["nameOther",""],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","3vw","text-align","center"],["type","text","placeholder","Name","name","name","ngModel","","id","name","required","",1,"form-control"],["name",""]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Add voucher"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"form",7,8),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o.TgZ(11,"div",9)(12,"div",10)(13,"p"),o._uU(14,"Voucher details"),o.qZA()(),o.TgZ(15,"div",11)(16,"div",12)(17,"span",13),o._uU(18,"To"),o.qZA(),o.TgZ(19,"select",14,15),o._UZ(21,"option",16),o.TgZ(22,"option"),o._uU(23,"Landlord"),o.qZA(),o.TgZ(24,"option"),o._uU(25,"Other"),o.qZA(),o.TgZ(26,"option"),o._uU(27,"Tenant"),o.qZA()(),o.YNc(28,ehe,3,0,"div",17),o.qZA(),o.TgZ(29,"div",12)(30,"span",13),o._uU(31,"Date"),o.qZA(),o._UZ(32,"input",18,19),o.YNc(34,the,3,0,"div",17),o.qZA()(),o.TgZ(35,"div",11),o.YNc(36,lhe,6,3,"div",20),o.YNc(37,che,2,0,"div",21),o.YNc(38,dhe,6,1,"div",20),o.TgZ(39,"div",12)(40,"span",13),o._uU(41,"About"),o.qZA(),o.TgZ(42,"select",22,23)(44,"option"),o._uU(45,"Adjustment"),o.qZA(),o.TgZ(46,"option"),o._uU(47,"Receive Rent"),o.qZA(),o.TgZ(48,"option"),o._uU(49,"Pay Rent"),o.qZA(),o.TgZ(50,"option"),o._uU(51,"Services"),o.qZA(),o.TgZ(52,"option"),o._uU(53,"Other"),o.qZA()(),o.YNc(54,hhe,3,0,"div",17),o.qZA()(),o.TgZ(55,"div",11)(56,"div",12)(57,"span",13),o._uU(58,"Total amount \xa3"),o.qZA(),o.TgZ(59,"span",13),o._uU(60,"0.00"),o.qZA(),o._UZ(61,"input",24,25),o.qZA(),o.TgZ(63,"div",12)(64,"span",13),o._uU(65,"Type of payment"),o.qZA(),o.TgZ(66,"select",26,27)(68,"option"),o._uU(69,"Cash"),o.qZA(),o.TgZ(70,"option"),o._uU(71,"Bank"),o.qZA()(),o.YNc(72,fhe,3,0,"div",17),o.qZA()(),o.TgZ(73,"div"),o._UZ(74,"hr"),o.TgZ(75,"div",10)(76,"p"),o._uU(77,"Transactions"),o.qZA()(),o.TgZ(78,"form",7,28),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(79);return o.KtG(i.onSubmitTransaction(a))}),o.TgZ(80,"div",29)(81,"button",30),o.NdJ("click",function(){return i.onAddTransaction()}),o._uU(82,"Add transaction"),o.qZA()(),o.TgZ(83,"div",11)(84,"div",12)(85,"span",13),o._uU(86,"Type"),o.qZA(),o.TgZ(87,"select",31,32)(89,"option"),o._uU(90,"Pay"),o.qZA(),o.TgZ(91,"option"),o._uU(92,"Receive"),o.qZA()(),o.YNc(93,phe,3,0,"div",17),o.qZA(),o.TgZ(94,"div",12)(95,"span",13),o._uU(96,"Description"),o.qZA(),o._UZ(97,"input",33,34),o.YNc(99,ghe,3,0,"div",17),o.qZA(),o.TgZ(100,"div",12)(101,"span",13),o._uU(102,"Amount"),o.qZA(),o._UZ(103,"input",35,36),o.YNc(105,mhe,3,0,"div",17),o.qZA()()()(),o._UZ(106,"hr"),o.TgZ(107,"div",37)(108,"table",38)(109,"thead")(110,"tr")(111,"th",39),o._uU(112,"Type of transaction"),o.qZA(),o.TgZ(113,"th",39),o._uU(114,"Description"),o.qZA(),o.TgZ(115,"th",39),o._uU(116,"Amount \xa3"),o.qZA()()(),o.TgZ(117,"tbody",40),o.YNc(118,_he,8,5,"tr",41),o.qZA()()(),o._UZ(119,"hr"),o.TgZ(120,"div",29)(121,"button",42),o.NdJ("click",function(){o.CHM(r);const a=o.MAs(10);return o.KtG(i.onSubmit(a))}),o._uU(122,"Submit"),o.qZA(),o.TgZ(123,"button",43),o.NdJ("click",function(){return i.onClose()}),o._uU(124,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(10),s=o.MAs(20),a=o.MAs(33),c=o.MAs(43),h=o.MAs(67),p=o.MAs(79),v=o.MAs(88),b=o.MAs(98),D=o.MAs(104);o.xp6(28),o.Q6J("ngIf",!s.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(2),o.Q6J("ngIf",""!=s.value),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(1),o.Q6J("ngIf",""==s.value),o.xp6(16),o.Q6J("ngIf",!c.value),o.xp6(7),o.s9C("value",i.totalAmountValue),o.xp6(11),o.Q6J("ngIf",!h.value),o.xp6(9),o.Q6J("disabled",!p.valid),o.xp6(12),o.Q6J("ngIf",!v.value),o.xp6(6),o.Q6J("ngIf",!b.value),o.xp6(6),o.Q6J("ngIf",!D.value),o.xp6(13),o.Q6J("ngForOf",i.transactionList),o.xp6(3),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(15,vhe,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,gw,ou,us,iu,la,Yo,Rl,Av,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:17vw;width:70vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px;margin-left:3vw}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.upperCaseName[_ngcontent-%COMP%]{text-transform:uppercase}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.v-line-1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:0rem;height:3 vh}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-items:center}#addTransactionbtn[_ngcontent-%COMP%]{width:15vw;margin-bottom:1rem}.table[_ngcontent-%COMP%]{font-size:.9rem;width:50vw}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:200px;overflow:auto;display:flex;justify-content:center}"]}),n})();function whe(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",22),o.qZA())}function bhe(n,t){if(1&n&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.hij("( ",e.amount," )")}}function Che(n,t){if(1&n&&(o.TgZ(0,"td"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.amount)}}function The(n,t){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.YNc(5,bhe,2,1,"td",10),o.YNc(6,Che,2,1,"td",10),o.qZA()),2&n){const e=t.$implicit,i=t.index;o.xp6(2),o.Oqu(i+1),o.xp6(2),o.Oqu(e.description),o.xp6(1),o.Q6J("ngIf","Pay"==e.typeOfTransaction),o.xp6(1),o.Q6J("ngIf","Receive"==e.typeOfTransaction)}}let Ehe=(()=>{class n{constructor(e){this.elementRef=e,this.close=new o.vpe,this.totalAmount=0}ngOnInit(){this.ClientDetails=this.selectedClient}onPrint(e){let i=document.getElementById(e).innerHTML;document.body.innerHTML=i,window.print()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-money"]],inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:66,vars:16,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],["id","InvoicePrint"],[1,"invoice-logo"],[1,"invoice-title"],[4,"ngIf"],[1,"invoice-title-info"],["date",""],[1,"invoice-company-address"],[1,"content_view"],[2,"width","10%"],[2,"width","30%"],[4,"ngFor","ngForOf"],[1,"totalTable"],[1,"button"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","3vw","text-align","center"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"View Invoice"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"div",8)(11,"p"),o._uU(12,"Company Name"),o.qZA()(),o.TgZ(13,"div",9)(14,"p"),o._uU(15,"INVOICE"),o.qZA()(),o.YNc(16,whe,2,0,"div",10),o.TgZ(17,"div",11)(18,"p",null,12),o._uU(20),o.ALo(21,"date"),o.qZA(),o.TgZ(22,"p"),o._uU(23),o.qZA()(),o.TgZ(24,"div",11)(25,"p"),o._uU(26),o.ALo(27,"upperFirst"),o.qZA(),o.TgZ(28,"p"),o._uU(29),o.ALo(30,"upperFirst"),o.qZA()(),o.TgZ(31,"div",13),o._UZ(32,"hr"),o.TgZ(33,"span"),o._uU(34,"From: Company Name"),o.qZA(),o._UZ(35,"br"),o.TgZ(36,"span"),o._uU(37,"Address: Street Name,"),o.qZA(),o._UZ(38,"br"),o.TgZ(39,"span"),o._uU(40,"Postcode: B00 0XX"),o.qZA()(),o.TgZ(41,"div",14)(42,"table")(43,"tr")(44,"th",15),o._uU(45,"Item"),o.qZA(),o.TgZ(46,"th"),o._uU(47,"Description"),o.qZA(),o.TgZ(48,"th",16),o._uU(49,"\xa3Amount"),o.qZA()(),o.YNc(50,The,7,4,"tr",17),o.TgZ(51,"tr",18),o._UZ(52,"td"),o.TgZ(53,"td"),o._uU(54,"Total amount"),o.qZA(),o.TgZ(55,"td"),o._uU(56),o.ALo(57,"currancy"),o.qZA()()()(),o.TgZ(58,"div",14)(59,"p"),o._uU(60),o.qZA()()(),o.TgZ(61,"div",19)(62,"button",20),o.NdJ("click",function(){return i.onPrint("InvoicePrint")}),o._uU(63,"Print"),o.qZA(),o.TgZ(64,"button",21),o.NdJ("click",function(){return i.onClose()}),o._uU(65,"Close"),o.qZA()()()()()),2&e){const r=o.MAs(19);o.xp6(16),o.Q6J("ngIf",null==r||void 0),o.xp6(4),o.hij("Date: ",o.lcZ(21,8,i.ClientDetails.date),""),o.xp6(3),o.hij("Invoice No: ",i.ClientDetails.invoiceno,""),o.xp6(3),o.hij("To : ",o.lcZ(27,10,i.ClientDetails.name),""),o.xp6(3),o.Oqu(o.lcZ(30,12,i.ClientDetails.position)),o.xp6(21),o.Q6J("ngForOf",i.ClientDetails.trans),o.xp6(6),o.Oqu(o.lcZ(57,14,i.ClientDetails.totalamount)),o.xp6(4),o.hij("Description: ",i.ClientDetails.about,"")}},dependencies:[Li,si,Qr,Av,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:.9vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042;font-size:.8rem}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.content_view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%;border:solid 1px black}.content_view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-right:solid 1px black}.totalTable[_ngcontent-%COMP%]{border-top:solid 1px black}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.7rem;width:80%}textarea[_ngcontent-%COMP%]{width:100%}.invoice-logo[_ngcontent-%COMP%]{margin:auto;height:4vh;display:flex;text-align:center}.invoice-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.1rem auto}.invoice-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;font-weight:700}.invoice-title-info[_ngcontent-%COMP%]{margin:auto .75rem;display:flex;justify-content:space-between}.invoice-company-address[_ngcontent-%COMP%]{margin:auto .75rem}"]}),n})();const Dhe=["amount"],xhe=["description"],Ahe=["typeOfTransaction"],Ihe=["about"];function She(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Mhe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"uppercase"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstName)," ",o.lcZ(3,4,e.lastName),"")}}function Phe(n,t){if(1&n&&(o.TgZ(0,"select",47,48),o.YNc(2,Mhe,4,6,"option",42),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.landlordList)}}function khe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"uppercase"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstName)," ",o.lcZ(3,4,e.lastName),"")}}function Ohe(n,t){if(1&n&&(o.TgZ(0,"select",47,49),o.YNc(2,khe,4,6,"option",42),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.tenantsList)}}function Rhe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"uppercase"),o.ALo(3,"uppercase"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.AsE("",o.lcZ(2,2,e.firstName)," ",o.lcZ(3,4,e.lastName),"")}}function Nhe(n,t){if(1&n&&(o.TgZ(0,"select",47,50),o.YNc(2,Rhe,4,6,"option",42),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.otherList)}}function Lhe(n,t){if(1&n&&(o.TgZ(0,"div",12)(1,"span",13),o._uU(2,"Name"),o.qZA(),o.YNc(3,Phe,3,1,"select",46),o.YNc(4,Ohe,3,1,"select",46),o.YNc(5,Nhe,3,1,"select",46),o.qZA()),2&n){o.oxw();const e=o.MAs(20);o.xp6(3),o.Q6J("ngIf","Landlord"===e.value),o.xp6(1),o.Q6J("ngIf","Tenant"===e.value),o.xp6(1),o.Q6J("ngIf","Other"===e.value)}}function Fhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Uhe(n,t){if(1&n&&(o.TgZ(0,"div",12)(1,"span",13),o._uU(2,"Name"),o.qZA(),o._UZ(3,"input",51,52),o.YNc(5,Fhe,3,0,"div",19),o.qZA()),2&n){const e=o.MAs(4),i=o.oxw();o.xp6(3),o.s9C("defaultValue",i.selectedClient.name),o.xp6(2),o.Q6J("ngIf",!e.value)}}function Bhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Vhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Zhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function zhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Hhe(n,t){1&n&&(o.TgZ(0,"div",45)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function qhe(n,t){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.ALo(7,"currancy"),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e.typeOfTransaction),o.xp6(2),o.Oqu(e.description),o.xp6(2),o.Oqu(o.lcZ(7,3,e.amount))}}const jhe=function(n){return{color:n}};let Whe=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.dataService=i,this.dbService=r,this.close=new o.vpe,this.transactionList=[],this.propertyTableList=[],this.landlordList=[],this.tenantsList=[],this.otherList=[],this.addressList=[],this.addTransaction=!1,this.totalAmountValue=0,this.invoiceNo="",this.propertyTableList=this.dataService.moneyData(),this.landlordList=this.dataService.landlordData(),this.tenantsList=this.dataService.tenantData()}ngOnInit(){}onSubmit(e){console.log(e.valid),this.onClose()}onAddTransaction(){}onSubmitTransaction(e){this.transactionList.push(e.value);let i=e.value.amount;if("Pay"===e.value.typeOfTransaction)this.totalAmountValue=(this.totalAmountValue-i).toFixed(2);else{let r=parseInt(this.totalAmountValue)+i;this.totalAmountValue=r}e.reset()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(xv),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-edit-voucher"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Dhe,7),o.Gf(xhe,7),o.Gf(Ahe,7),o.Gf(Ihe,7)),2&e){let r;o.iGM(r=o.CRH())&&(i.transactionAmount=r.first),o.iGM(r=o.CRH())&&(i.transactionDescription=r.first),o.iGM(r=o.CRH())&&(i.transactionType=r.first),o.iGM(r=o.CRH())&&(i.aboutRef=r.first)}},inputs:{closeForm:"closeForm",selectedClient:"selectedClient"},outputs:{close:"close"},decls:134,vars:25,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"input_block"],[3,"ngSubmit"],["f","ngForm"],[1,"ContentDetails"],[1,"v-line-1"],[1,"input-group"],[1,"input-group-text"],["aria-label","Default select example","name","position","id","position","ngModel","",1,"form-select"],["position",""],["selected","","hidden","hidden","value",""],["type","date","name","date","ngModel","","id","date","required","",1,"form-control",3,"value"],["date",""],["class","required-warning",4,"ngIf"],["class","input-group",4,"ngIf"],["aria-label","Default select example","name","about","id","about","ngModel","","required","",1,"form-select"],["about",""],["defaultabout",""],["type","number","aria-label","Default select example","name","totalAmount","id","totalAmount","ngModel","","readonly","",1,"form-control",3,"value"],["totalAmount",""],["aria-label","Default select example","type","text","name","typeOfPayment","id","typeOfPayment","ngModel","","required","",1,"form-select"],["typeOfPayment",""],["defaultypeOfPayment",""],["t","ngForm"],[1,"btns"],["id","addTransactionbtn",1,"btn","btn-outline-primary",3,"disabled","click"],["aria-label","Default select example","name","typeOfTransaction","id","typeOfTransaction","ngModel","","required","",1,"form-select"],["typeOfTransaction",""],["type","text","placeholder","Description","name","description","ngModel","","id","description","required","",1,"form-control"],["description",""],["type","number","placeholder","Amount","name","amount","ngModel","","id","amount","required","",1,"form-control"],["amount",""],["id","table_scroll"],[1,"table"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"],["class","form-select","aria-label","Default select example","name","name","id","name","ngModel","","required","",4,"ngIf"],["aria-label","Default select example","name","name","id","name","ngModel","","required","",1,"form-select"],["nameLandlord",""],["nameTenant",""],["nameOther",""],["type","text","name","name","id","name","ngModel","","required","",1,"form-control",3,"defaultValue"],["name",""]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Edit Invoice"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"form",8,9),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(11);return o.KtG(i.onSubmit(a))}),o.TgZ(12,"div",10)(13,"p"),o._uU(14,"Invoice details"),o.qZA()(),o.TgZ(15,"div",11)(16,"div",12)(17,"span",13),o._uU(18,"To"),o.qZA(),o.TgZ(19,"select",14,15)(21,"option",16),o._uU(22),o.ALo(23,"upperFirst"),o.qZA(),o._UZ(24,"option"),o.TgZ(25,"option"),o._uU(26,"Landlord"),o.qZA(),o.TgZ(27,"option"),o._uU(28,"Other"),o.qZA(),o.TgZ(29,"option"),o._uU(30,"Tenant"),o.qZA()()(),o.TgZ(31,"div",12)(32,"span",13),o._uU(33,"Date"),o.qZA(),o._UZ(34,"input",17,18),o.YNc(36,She,3,0,"div",19),o.qZA()(),o.TgZ(37,"div",11),o.YNc(38,Lhe,6,3,"div",20),o.YNc(39,Uhe,6,2,"div",20),o.TgZ(40,"div",12)(41,"span",13),o._uU(42,"About"),o.qZA(),o.TgZ(43,"select",21,22)(45,"option",16,23),o._uU(47),o.ALo(48,"upperFirst"),o.qZA(),o.TgZ(49,"option"),o._uU(50,"Adjustment"),o.qZA(),o.TgZ(51,"option"),o._uU(52,"Receive Rent"),o.qZA(),o.TgZ(53,"option"),o._uU(54,"Pay Rent"),o.qZA(),o.TgZ(55,"option"),o._uU(56,"Services"),o.qZA(),o.TgZ(57,"option"),o._uU(58,"Other"),o.qZA()(),o.YNc(59,Bhe,3,0,"div",19),o.qZA()(),o.TgZ(60,"div",11)(61,"div",12)(62,"span",13),o._uU(63,"Total amount \xa3"),o.qZA(),o.TgZ(64,"span",13),o._uU(65,"0.00"),o.qZA(),o._UZ(66,"input",24,25),o.qZA(),o.TgZ(68,"div",12)(69,"span",13),o._uU(70,"Type of payment"),o.qZA(),o.TgZ(71,"select",26,27)(73,"option",16,28),o._uU(75),o.ALo(76,"upperFirst"),o.qZA(),o.TgZ(77,"option"),o._uU(78,"Cash"),o.qZA(),o.TgZ(79,"option"),o._uU(80,"Bank"),o.qZA()(),o.YNc(81,Vhe,3,0,"div",19),o.qZA()(),o.TgZ(82,"div"),o._UZ(83,"hr"),o.TgZ(84,"div",10)(85,"p"),o._uU(86,"Transactions"),o.qZA()(),o.TgZ(87,"form",8,29),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(88);return o.KtG(i.onSubmitTransaction(a))}),o.TgZ(89,"div",30)(90,"button",31),o.NdJ("click",function(){return i.onAddTransaction()}),o._uU(91,"Add transaction"),o.qZA()(),o.TgZ(92,"div",11)(93,"div",12)(94,"span",13),o._uU(95,"Type"),o.qZA(),o.TgZ(96,"select",32,33)(98,"option"),o._uU(99,"Pay"),o.qZA(),o.TgZ(100,"option"),o._uU(101,"Receive"),o.qZA()(),o.YNc(102,Zhe,3,0,"div",19),o.qZA(),o.TgZ(103,"div",12)(104,"span",13),o._uU(105,"Description"),o.qZA(),o._UZ(106,"input",34,35),o.YNc(108,zhe,3,0,"div",19),o.qZA(),o.TgZ(109,"div",12)(110,"span",13),o._uU(111,"Amount"),o.qZA(),o._UZ(112,"input",36,37),o.YNc(114,Hhe,3,0,"div",19),o.qZA()()()(),o._UZ(115,"hr"),o.TgZ(116,"div",38)(117,"table",39)(118,"thead")(119,"tr")(120,"th",40),o._uU(121,"Type of transaction"),o.qZA(),o.TgZ(122,"th",40),o._uU(123,"Description"),o.qZA(),o.TgZ(124,"th",40),o._uU(125,"Amount \xa3"),o.qZA()()(),o.TgZ(126,"tbody",41),o.YNc(127,qhe,8,5,"tr",42),o.qZA()()(),o._UZ(128,"hr"),o.TgZ(129,"div",30)(130,"button",43),o._uU(131,"Update"),o.qZA(),o.TgZ(132,"button",44),o.NdJ("click",function(){return i.onClose()}),o._uU(133,"Cancel"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(11),s=o.MAs(20),a=o.MAs(35),c=o.MAs(44),h=o.MAs(46),p=o.MAs(72),v=o.MAs(74),b=o.MAs(88),D=o.MAs(97),P=o.MAs(107),R=o.MAs(113);o.xp6(22),o.Oqu(o.lcZ(23,17,i.selectedClient.position)),o.xp6(12),o.s9C("value",i.selectedClient.date),o.xp6(2),o.Q6J("ngIf",!a.value),o.xp6(2),o.Q6J("ngIf",""!=s.value),o.xp6(1),o.Q6J("ngIf",!s.value),o.xp6(8),o.Oqu(o.lcZ(48,19,i.selectedClient.about)),o.xp6(12),o.Q6J("ngIf",!c.value&&h.value),o.xp6(7),o.s9C("value",i.totalAmountValue),o.xp6(9),o.Oqu(o.lcZ(76,21,i.selectedClient.typeofpayment)),o.xp6(6),o.Q6J("ngIf",!p.value&&v.value),o.xp6(9),o.Q6J("disabled",!b.valid),o.xp6(12),o.Q6J("ngIf",!D.value),o.xp6(6),o.Q6J("ngIf",!P.value),o.xp6(6),o.Q6J("ngIf",!R.value),o.xp6(13),o.Q6J("ngForOf",i.selectedClient.trans),o.xp6(3),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(23,jhe,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,gw,ou,us,iu,la,Yo,Rl,Ii,Av,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:17vw;width:70vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#ffc107;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.input_block[_ngcontent-%COMP%]{width:100%;padding:10px}.input-group[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px;margin-left:3vw}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.ContentDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;color:#a1a1a1}.input_block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.comboBoxList[_ngcontent-%COMP%]{border:1px solid #dadada;font-size:15px;background-color:#fff;border-radius:5px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.v-line-1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:0rem;height:3 vh}"]}),n})();hm.register(...DW);let $he=(()=>{class n{constructor(e){this.chartService=e,this.date=(new Date).getFullYear()}ngOnInit(){this.chart_2()}chart_2(){var e=this;return(0,be.Z)(function*(){let i={1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[]},r=[0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0,0,0,0];e.chartService.onGetMoneyData().then(c=>{c.forEach(h=>{let p=new Date(h.date);if(e.date==p.getFullYear())switch(p.getMonth()+1){case 1:i[1].push(h),r[0]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[0]+=ue.amount:a[0]+=ue.amount});break;case 2:i[2].push(h),r[1]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[1]+=ue.amount:a[1]+=ue.amount});break;case 3:i[3].push(h),r[2]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[2]+=ue.amount:a[2]+=ue.amount});break;case 4:i[4].push(h),r[3]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[3]+=ue.amount:a[3]+=ue.amount});break;case 5:i[5].push(h),r[4]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[4]+=ue.amount:a[4]+=ue.amount});break;case 6:i[6].push(h),r[5]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[5]+=ue.amount:a[5]+=ue.amount});break;case 7:i[7].push(h),r[6]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[6]+=ue.amount:a[6]+=ue.amount});break;case 8:i[8].push(h),r[7]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[7]+=ue.amount:a[7]+=ue.amount});break;case 9:i[9].push(h),r[8]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[8]+=ue.amount:a[8]+=ue.amount});break;case 10:i[10].push(h),r[9]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[9]+=ue.amount:a[9]+=ue.amount});break;case 11:i[11].push(h),r[10]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[10]+=ue.amount:a[10]+=ue.amount});break;case 12:i[12].push(h),r[11]+=parseInt(h.totalamount),h.trans.forEach(ue=>{ue.amount<=0?s[11]+=ue.amount:a[11]+=ue.amount})}}),new hm("LineChart",{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Income",data:r,backgroundColor:"blue"},{label:"Payment",data:s,backgroundColor:"red"},{label:"Receive",data:a,backgroundColor:"limegreen"}]},options:{aspectRatio:1.75}})})})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(CU))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-chart-money"]],decls:2,vars:0,consts:[["id","divLineChart"],["id","LineChart"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"canvas",1),o.qZA())},styles:["#divLineChart[_ngcontent-%COMP%]{display:block;width:35vw;height:100%;text-align:center;padding-left:5rem}#LineChart[_ngcontent-%COMP%]{display:block;width:60vw;height:300px}@media only screen and (max-width: 1500px){#divLineChart[_ngcontent-%COMP%]{width:50vw}}@media only screen and (max-width: 900px){#divLineChart[_ngcontent-%COMP%]{display:none}}"]}),n})();function Ghe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-add-voucher",24),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.addingVoucherAllowed)}}function Yhe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-view-money",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.viewVoucherAllowed)("selectedClient",e.selectdClient)}}function Khe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-warning-msg",26),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deleteVoucherAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)}}function Qhe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-edit-voucher",25),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.editVoucherAllowed)("selectedClient",e.selectdClient)}}function Jhe(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",27),o.qZA())}function Xhe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",31),o.NdJ("click",function(){o.CHM(e);const r=o.oxw().$implicit,s=o.oxw();return o.KtG(s.on_delete(r))}),o._uU(1,"Delete"),o.qZA()}}function efe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",28),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.ALo(5,"upperFirst"),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"upperFirst"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.ALo(13,"upperFirst"),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.ALo(16,"upperFirst"),o.qZA(),o.TgZ(17,"td"),o._uU(18),o.ALo(19,"currancy"),o.qZA(),o.TgZ(20,"td")(21,"button",29),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.on_view(s))}),o._uU(22,"View"),o.qZA(),o.YNc(23,Xhe,2,0,"button",30),o.qZA()()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Oqu(e.id),o.xp6(2),o.Oqu(o.lcZ(5,8,e.name)),o.xp6(3),o.Oqu(o.lcZ(8,10,e.position)),o.xp6(3),o.Oqu(e.date),o.xp6(2),o.Oqu(o.lcZ(13,12,e.about)),o.xp6(3),o.Oqu(o.lcZ(16,14,e.typeofpayment)),o.xp6(3),o.Oqu(o.lcZ(19,16,e.totalamount)),o.xp6(5),o.Q6J("ngIf","yes"==i._authri)}}const tfe=function(n,t){return[n,t,"name","position","date","about","typeofpayment"]};let nfe=(()=>{class n{constructor(e,i,r,s){this.dataService=e,this.elementRef=i,this.dbService=r,this.routeService=s,this.moneyTableList=[],this.addingVoucherAllowed=!1,this.viewVoucherAllowed=!1,this.deleteVoucherAllowed=!1,this.editVoucherAllowed=!1,this.dbName="",this.loading=!1}ngOnInit(){this.onMoneyTableList(),this.dbService.addFieldData(),this._authri=this.routeService.RouteEdit}onMoneyTableList(){var e=this;return(0,be.Z)(function*(){e.moneyTableList=e.dataService.moneyData(),e.loading=!0,yield e.dbService.getData("moneyDb").then(i=>{e.moneyTableList=[],i.forEach(r=>{e.moneyTableList.push(r.data())}),e.loading=!1})})()}add_landlord(){this.addingVoucherAllowed=!0}on_edit(e){this.editVoucherAllowed=!0,this.selectdClient=e}on_view(e){this.viewVoucherAllowed=!0,this.selectdClient=e}on_delete(e){this.deleteVoucherAllowed=!0,this.selectdClient=e,this.dbName="moneyDb"}onReloadPg(){this.addingVoucherAllowed=!1,this.viewVoucherAllowed=!1,this.deleteVoucherAllowed=!1,this.editVoucherAllowed=!1,this.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(xv),o.Y36(o.SBq),o.Y36(Pr),o.Y36(rw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-money"]],inputs:{selectedClient:"selectedClient"},decls:50,vars:18,consts:[[3,"closeForm","close",4,"ngIf"],[3,"closeForm","selectedClient","close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","pg_content"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button","id","landlords_add_btn",1,"btn","btn-primary",3,"click"],["id","chart"],["id","c3",1,"col-12"],["id","searchInput",1,"input-group","mb-3"],["type","button","id","button-addon1",1,"btn","btn-outline-secondary"],["type","text","placeholder","search ...","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","table_scroll"],["id","pg_table",1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[3,"closeForm","close"],[3,"closeForm","selectedClient","close"],[3,"closeForm","selectedClient","dbName","close"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","4vw","text-align","center"],["scope","row"],["type","button","id","view_btn",1,"btn","btn-success",3,"click"],["type","button","class","btn btn-danger","id","delete_btn",3,"click",4,"ngIf"],["type","button","id","delete_btn",1,"btn","btn-danger",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div"),o.YNc(1,Ghe,1,1,"app-add-voucher",0),o.YNc(2,Yhe,1,2,"app-view-money",1),o.YNc(3,Khe,1,3,"app-warning-msg",2),o.YNc(4,Qhe,1,2,"app-edit-voucher",1),o.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),o._uU(12," Money "),o.qZA(),o.TgZ(13,"div",10)(14,"h5",11),o._uU(15,"Money Details"),o.qZA(),o.TgZ(16,"p",12),o._uU(17,"This page has data, operations and views about money."),o.qZA()()()(),o.TgZ(18,"button",13),o.NdJ("click",function(){return i.add_landlord()}),o._uU(19,"Add New Voucher"),o.qZA()(),o.TgZ(20,"div",14),o._UZ(21,"app-chart-money"),o.qZA()(),o.TgZ(22,"div",15)(23,"div",16)(24,"button",17),o._uU(25,"Search"),o.qZA(),o.TgZ(26,"input",18),o.NdJ("ngModelChange",function(s){return i.filterString=s}),o.qZA()(),o.YNc(27,Jhe,2,0,"div",19),o.TgZ(28,"div",20)(29,"table",21)(30,"thead")(31,"tr")(32,"th",22),o._uU(33,"ID"),o.qZA(),o.TgZ(34,"th",22),o._uU(35,"Name"),o.qZA(),o.TgZ(36,"th",22),o._uU(37,"Position"),o.qZA(),o.TgZ(38,"th",22),o._uU(39,"Date"),o.qZA(),o.TgZ(40,"th",22),o._uU(41,"About"),o.qZA(),o.TgZ(42,"th",22),o._uU(43,"Payment Type"),o.qZA(),o.TgZ(44,"th",22),o._uU(45,"Total Amount"),o.qZA(),o._UZ(46,"th",22),o.qZA()(),o.TgZ(47,"tbody"),o.YNc(48,efe,24,18,"tr",23),o.ALo(49,"filter"),o.qZA()()()()()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.addingVoucherAllowed),o.xp6(1),o.Q6J("ngIf",i.viewVoucherAllowed),o.xp6(1),o.Q6J("ngIf",i.deleteVoucherAllowed),o.xp6(1),o.Q6J("ngIf",i.editVoucherAllowed),o.xp6(22),o.Q6J("ngModel",i.filterString),o.xp6(1),o.Q6J("ngIf",i.loading),o.xp6(21),o.Q6J("ngForOf",o.G7q(49,7,o.WLB(15,tfe,i.moneyTableList,i.filterString))))},dependencies:[Li,si,No,us,Yo,gD,yhe,Ehe,Whe,$he,mD,Av,sf],styles:["#pg_content[_ngcontent-%COMP%]{height:100%;width:500px}#card_add_content[_ngcontent-%COMP%]{width:100%;position:relative;display:flex}#map[_ngcontent-%COMP%]{border:.5px solid rgb(0,181,42);height:400px}agm-map[_ngcontent-%COMP%]{height:400px}#landlords_add_btn[_ngcontent-%COMP%]{width:100%;margin-top:30%}#pg_table[_ngcontent-%COMP%]{width:100%;max-height:300px}#searchInput[_ngcontent-%COMP%]{margin:10px auto auto}#table_scroll[_ngcontent-%COMP%]{width:100%;max-height:250px;overflow:auto;display:inline-block}thead[_ngcontent-%COMP%]{font-size:12px}tbody[_ngcontent-%COMP%]{font-size:13px}#view_btn[_ngcontent-%COMP%], #delete_btn[_ngcontent-%COMP%], #edit_btn[_ngcontent-%COMP%]{margin:auto 1%;font-size:11px}"]}),n})(),VU=(()=>{class n{transform(e,i,r,s){if(null==i||null==r||null==s)return e;let a=[];i=i.toLowerCase();for(let c of e){let h=this.getDate(r),p=this.getDate(s),b=this.getDate(c.date);("* all clients"===i&&b<=p&&b>=h||c.name===i&&b<=p&&b>=h)&&a.push(c)}return a}getDate(e){return Date.parse(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"filterFRPipe",type:n,pure:!0}),n})(),ZU=(()=>{class n{transform(e,i,r,s,a){let c=0;if(null==r||null==s||null==a)return c;r=r.toLowerCase();for(let h of i){let p=this.getDate(s),v=this.getDate(a),D=this.getDate(h.date);("* all clients"===r&&D<=v&&D>=p||h.name===r&&D<=v&&D>=p)&&(c+=parseInt(h.totalamount,10))}return c}getDate(e){return Date.parse(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=o.Yjl({name:"filterTFRPipe",type:n,pure:!0}),n})();function ife(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function rfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function ofe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,e))}}function sfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function afe(n,t){if(1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2),o._UZ(3,"span",41),o._uU(4),o._UZ(5,"span",41),o._uU(6),o.ALo(7,"currancy"),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("Type: ",e.typeOfTransaction," "),o.xp6(2),o.hij(" Description: ",e.description," "),o.xp6(2),o.hij(" Amount: ",o.lcZ(7,3,e.amount),"")}}function lfe(n,t){if(1&n&&(o.TgZ(0,"div",34)(1,"table")(2,"tr")(3,"th",35),o._uU(4,"Id"),o.qZA(),o.TgZ(5,"th",36),o._uU(6,"Invoice No."),o.qZA(),o.TgZ(7,"th",36),o._uU(8,"Date"),o.qZA(),o.TgZ(9,"th",37),o._uU(10,"To"),o.qZA(),o.TgZ(11,"th",36),o._uU(12,"About"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Payment type"),o.qZA()(),o.TgZ(15,"tr",38)(16,"td"),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.qZA(),o.TgZ(20,"td"),o._uU(21),o.qZA(),o.TgZ(22,"td"),o._uU(23),o.qZA(),o.TgZ(24,"td"),o._uU(25),o.qZA(),o.TgZ(26,"td"),o._uU(27),o.qZA()()(),o.TgZ(28,"p",39),o._uU(29,"Transaction"),o.qZA(),o.YNc(30,afe,8,5,"div",21),o._UZ(31,"hr"),o.TgZ(32,"p",40),o._uU(33," Total amount: "),o.TgZ(34,"span"),o._uU(35),o.ALo(36,"currancy"),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(17),o.Oqu(e.id),o.xp6(2),o.Oqu(e.invoiceno),o.xp6(2),o.Oqu(e.date),o.xp6(2),o.Oqu(e.name),o.xp6(2),o.Oqu(e.about),o.xp6(2),o.Oqu(e.typeofpayment),o.xp6(3),o.Q6J("ngForOf",e.trans),o.xp6(5),o.Oqu(o.lcZ(36,8,e.totalamount))}}const cfe=function(n,t,e,i){return[0,n,t,e,i]};function ufe(n,t){if(1&n&&(o.TgZ(0,"p",42),o._uU(1),o.ALo(2,"currancy"),o.ALo(3,"filterTFRPipe"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("Total amount in the report: ",o.lcZ(2,1,o.G7q(3,3,o.l5B(9,cfe,e.landlordData,e.name,e.fromDATE,e.toDATE))),"")}}let dfe=(()=>{class n{constructor(e,i){this.elementRef=e,this.dbService=i,this.close=new o.vpe,this.landlordData=[],this.ReportTotalAmont=0,this.loading=!1,this.landlordList=[]}ngOnInit(){this.getLandlord()}onPrint(e){let i=document.getElementById(e).innerHTML;document.body.innerHTML=i,window.print()}resetReport(){this.fromDATE=null,this.toDATE=null,this.name=null}getLandlord(){var e=this;return(0,be.Z)(function*(){e.loading=!0,e.landlordData=[],yield e.dbService.getData("moneyDb").then(i=>{i.forEach(r=>{if("landlord"===r.data().position){if(e.landlordData.push(r.data()),e.landlordList.includes(r.data().name))return;e.landlordList.push(r.data().name)}})})})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-frlandlord"]],inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:64,vars:20,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],["id","ReportPrint"],[1,"filter"],[1,"report_filter"],[1,"v-line-2"],[1,"input-group"],[1,"input-group-text"],["type","date","placeholder","Date","name","fromDate","id","fromDate","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["fromDate",""],["class","required-warning",4,"ngIf"],["type","date","placeholder","Date","name","toDate","id","toDate","required","",1,"form-control",3,"ngModel","min","disabled","ngModelChange"],["toDate",""],[1,"v-line-1"],["aria-label","Default select example","name","name","id","name",1,"form-select",3,"ngModel","ngModelChange"],["nameLandlord",""],[4,"ngFor","ngForOf"],[1,"button"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["id","scroll-report",1,"scroll-report"],[1,"report-logo"],["orf",""],[1,"report-title"],[1,"report-company-address"],["class","content_view",4,"ngFor","ngForOf"],["class","reportTotalAmount",4,"ngIf"],[1,"required-warning"],[1,"content_view"],[2,"width","10%"],[2,"width","15%"],[2,"width","20%"],[1,"totalTable"],[1,"transactionTitle"],[1,"totalAmountTitle"],[2,"margin-left","8rem"],[1,"reportTotalAmount"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div")(1,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"p"),o._uU(7,"FINANCIAL REPORT FOR LANDLORD"),o.qZA(),o.TgZ(8,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(9,"img",6),o.qZA()(),o.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"span",12),o._uU(16,"From Date"),o.qZA(),o.TgZ(17,"input",13,14),o.NdJ("ngModelChange",function(s){return i.fromDATE=s}),o.qZA(),o.YNc(19,ife,3,0,"div",15),o.qZA(),o.TgZ(20,"div",11)(21,"span",12),o._uU(22,"To Date"),o.qZA(),o.TgZ(23,"input",16,17),o.NdJ("ngModelChange",function(s){return i.toDATE=s}),o.qZA(),o.YNc(25,rfe,3,0,"div",15),o.qZA()(),o.TgZ(26,"div",18)(27,"div",11)(28,"span",12),o._uU(29,"Landlord name"),o.qZA(),o.TgZ(30,"select",19,20),o.NdJ("ngModelChange",function(s){return i.name=s}),o.TgZ(32,"option"),o._uU(33,"* All Clients"),o.qZA(),o.YNc(34,ofe,3,3,"option",21),o.qZA()(),o.YNc(35,sfe,3,0,"div",15),o.qZA(),o.TgZ(36,"div",22)(37,"button",23),o.NdJ("click",function(){return i.onPrint("scroll-report")}),o._uU(38,"Print"),o.qZA(),o.TgZ(39,"button",24),o.NdJ("click",function(){return i.resetReport()}),o._uU(40,"Reset"),o.qZA(),o.TgZ(41,"button",25),o.NdJ("click",function(){return i.onClose()}),o._uU(42,"Close"),o.qZA()()(),o.TgZ(43,"div",26)(44,"div",27)(45,"p",null,28),o._uU(47,"Company Name"),o.qZA()(),o.TgZ(48,"div",29)(49,"p"),o._uU(50,"FINANCIAL REPORT FOR LANDLORD"),o.qZA()(),o.TgZ(51,"div",30)(52,"div",18)(53,"p"),o._uU(54),o.qZA(),o.TgZ(55,"p"),o._uU(56),o.qZA(),o.TgZ(57,"span"),o._uU(58),o.qZA()()(),o.YNc(59,lfe,37,10,"div",31),o.ALo(60,"filterFRPipe"),o._UZ(61,"hr"),o.YNc(62,ufe,4,14,"p",32),o._UZ(63,"hr"),o.qZA()()()()()()()),2&e){const r=o.MAs(18),s=o.MAs(24),a=o.MAs(31);o.xp6(17),o.Q6J("ngModel",i.fromDATE)("disabled",i.fromDATE),o.xp6(2),o.Q6J("ngIf",!r.value),o.xp6(4),o.s9C("min",i.fromDATE),o.Q6J("ngModel",i.toDATE)("disabled",!i.fromDATE),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(5),o.Q6J("ngModel",i.name),o.xp6(4),o.Q6J("ngForOf",i.landlordList),o.xp6(1),o.Q6J("ngIf",!a.value),o.xp6(19),o.hij("From Date:",i.fromDATE,""),o.xp6(2),o.hij("To Date: ",i.toDATE,""),o.xp6(2),o.hij("To:",i.name,""),o.xp6(1),o.Q6J("ngForOf",o.gM2(60,15,i.landlordData,i.name,i.fromDATE,i.toDATE)),o.xp6(3),o.Q6J("ngIf",void 0!==i.name)}},dependencies:[Li,si,Wd,$d,No,ou,us,la,Yo,Av,VU,ZU,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:.9vh;left:14vw;width:70vw;overflow:scroll;height:90%;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042;font-size:.8rem}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.content_view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%;border:solid 1px black}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.7rem;width:80%}textarea[_ngcontent-%COMP%]{width:100%}.report-logo[_ngcontent-%COMP%]{margin:auto;height:4vh;display:flex;text-align:center}.report-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.1rem auto}.report-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;font-weight:700}.scroll-report[_ngcontent-%COMP%]   .report-title-info[_ngcontent-%COMP%]{margin:auto .75rem;display:flex;justify-content:space-between}.report-company-address[_ngcontent-%COMP%]{margin:auto .75rem}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:35% auto}.report_filter[_ngcontent-%COMP%]{width:100%;margin:0rem;border-right:solid .1rem gray}.v-line-1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:.7rem auto;padding:0rem;height:3 vh}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{align-items:center;margin:auto .7rem}.input-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-items:center}.v-line-2[_ngcontent-%COMP%]{display:block;margin:.7rem .5rem;padding:0rem;height:3 vh}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-top:.5rem}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:.9vw}.reportTotalAmount[_ngcontent-%COMP%]{text-align:center;font-weight:700}.transactionTitle[_ngcontent-%COMP%]{margin:.2rem;background-color:#dcdcdc}.totalAmountTitle[_ngcontent-%COMP%]{margin-left:70%;text-decoration:underline}@media only screen and (max-width: 1600px){.filter[_ngcontent-%COMP%]{font-size:.6rem}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.container[_ngcontent-%COMP%]{width:100%;left:5vw}}@media only screen and (max-width: 1500px){.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin:.2rem}}"]}),n})();function hfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function ffe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function pfe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,e))}}function gfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function mfe(n,t){if(1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2),o._UZ(3,"span",41),o._uU(4),o._UZ(5,"span",41),o._uU(6),o.ALo(7,"currancy"),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("Type: ",e.typeOfTransaction," "),o.xp6(2),o.hij(" Description: ",e.description," "),o.xp6(2),o.hij(" Amount: ",o.lcZ(7,3,e.amount),"")}}function _fe(n,t){if(1&n&&(o.TgZ(0,"div",34)(1,"table")(2,"tr")(3,"th",35),o._uU(4,"Id"),o.qZA(),o.TgZ(5,"th",36),o._uU(6,"Invoice No."),o.qZA(),o.TgZ(7,"th",36),o._uU(8,"Date"),o.qZA(),o.TgZ(9,"th",37),o._uU(10,"To"),o.qZA(),o.TgZ(11,"th",36),o._uU(12,"About"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Payment type"),o.qZA()(),o.TgZ(15,"tr",38)(16,"td"),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.qZA(),o.TgZ(20,"td"),o._uU(21),o.qZA(),o.TgZ(22,"td"),o._uU(23),o.ALo(24,"upperFirst"),o.qZA(),o.TgZ(25,"td"),o._uU(26),o.qZA(),o.TgZ(27,"td"),o._uU(28),o.qZA()()(),o.TgZ(29,"p",39),o._uU(30,"Transaction"),o.qZA(),o.YNc(31,mfe,8,5,"div",21),o._UZ(32,"hr"),o.TgZ(33,"p",40),o._uU(34," Total amount: "),o.TgZ(35,"span"),o._uU(36),o.ALo(37,"currancy"),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(17),o.Oqu(e.id),o.xp6(2),o.Oqu(e.invoiceno),o.xp6(2),o.Oqu(e.date),o.xp6(2),o.Oqu(o.lcZ(24,8,e.name)),o.xp6(3),o.Oqu(e.about),o.xp6(2),o.Oqu(e.typeofpayment),o.xp6(3),o.Q6J("ngForOf",e.trans),o.xp6(5),o.Oqu(o.lcZ(37,10,e.totalamount))}}const vfe=function(n,t,e,i){return[0,n,t,e,i]};function yfe(n,t){if(1&n&&(o.TgZ(0,"p",42),o._uU(1),o.ALo(2,"currancy"),o.ALo(3,"filterTFRPipe"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("Total amount in the report: ",o.lcZ(2,1,o.G7q(3,3,o.l5B(9,vfe,e.tenantData,e.name,e.fromDATE,e.toDATE))),"")}}let wfe=(()=>{class n{constructor(e,i){this.elementRef=e,this.dbService=i,this.close=new o.vpe,this.tenantData=[],this.ReportTotalAmont=0,this.loading=!1,this.tenantList=[]}ngOnInit(){this.getTenant()}onPrint(e){let i=document.getElementById(e).innerHTML;document.body.innerHTML=i,window.print()}resetReport(){this.fromDATE=null,this.toDATE=null,this.name=null}getTenant(){var e=this;return(0,be.Z)(function*(){e.loading=!0,e.tenantData=[],yield e.dbService.getData("moneyDb").then(i=>{i.forEach(r=>{if("tenant"===r.data().position){if(e.tenantData.push(r.data()),e.tenantList.includes(r.data().name))return;e.tenantList.push(r.data().name)}})})})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-frtenant"]],inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:64,vars:20,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],["id","ReportPrint"],[1,"filter"],[1,"report_filter"],[1,"v-line-2"],[1,"input-group"],[1,"input-group-text"],["type","date","placeholder","Date","name","fromDate","id","fromDate","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["fromDate",""],["class","required-warning",4,"ngIf"],["type","date","placeholder","Date","name","toDate","id","toDate","required","",1,"form-control",3,"ngModel","min","disabled","ngModelChange"],["toDate",""],[1,"v-line-1"],["aria-label","Default select example","name","name","id","name",1,"form-select",3,"ngModel","ngModelChange"],["nameLandlord",""],[4,"ngFor","ngForOf"],[1,"button"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["id","scroll-report",1,"scroll-report"],[1,"report-logo"],["orf",""],[1,"report-title"],[1,"report-company-address"],["class","content_view",4,"ngFor","ngForOf"],["class","reportTotalAmount",4,"ngIf"],[1,"required-warning"],[1,"content_view"],[2,"width","10%"],[2,"width","15%"],[2,"width","20%"],[1,"totalTable"],[1,"transactionTitle"],[1,"totalAmountTitle"],[2,"margin-left","8rem"],[1,"reportTotalAmount"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div")(1,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"p"),o._uU(7,"FINANCIAL REPORT FOR TENANT"),o.qZA(),o.TgZ(8,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(9,"img",6),o.qZA()(),o.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"span",12),o._uU(16,"From Date"),o.qZA(),o.TgZ(17,"input",13,14),o.NdJ("ngModelChange",function(s){return i.fromDATE=s}),o.qZA(),o.YNc(19,hfe,3,0,"div",15),o.qZA(),o.TgZ(20,"div",11)(21,"span",12),o._uU(22,"To Date"),o.qZA(),o.TgZ(23,"input",16,17),o.NdJ("ngModelChange",function(s){return i.toDATE=s}),o.qZA(),o.YNc(25,ffe,3,0,"div",15),o.qZA()(),o.TgZ(26,"div",18)(27,"div",11)(28,"span",12),o._uU(29,"Tenant name"),o.qZA(),o.TgZ(30,"select",19,20),o.NdJ("ngModelChange",function(s){return i.name=s}),o.TgZ(32,"option"),o._uU(33,"* All Clients"),o.qZA(),o.YNc(34,pfe,3,3,"option",21),o.qZA()(),o.YNc(35,gfe,3,0,"div",15),o.qZA(),o.TgZ(36,"div",22)(37,"button",23),o.NdJ("click",function(){return i.onPrint("scroll-report")}),o._uU(38,"Print"),o.qZA(),o.TgZ(39,"button",24),o.NdJ("click",function(){return i.resetReport()}),o._uU(40,"Reset"),o.qZA(),o.TgZ(41,"button",25),o.NdJ("click",function(){return i.onClose()}),o._uU(42,"Close"),o.qZA()()(),o.TgZ(43,"div",26)(44,"div",27)(45,"p",null,28),o._uU(47,"Company Name"),o.qZA()(),o.TgZ(48,"div",29)(49,"p"),o._uU(50,"FINANCIAL REPORT FOR TENANT"),o.qZA()(),o.TgZ(51,"div",30)(52,"div",18)(53,"p"),o._uU(54),o.qZA(),o.TgZ(55,"p"),o._uU(56),o.qZA(),o.TgZ(57,"span"),o._uU(58),o.qZA()()(),o.YNc(59,_fe,38,12,"div",31),o.ALo(60,"filterFRPipe"),o._UZ(61,"hr"),o.YNc(62,yfe,4,14,"p",32),o._UZ(63,"hr"),o.qZA()()()()()()()),2&e){const r=o.MAs(18),s=o.MAs(24),a=o.MAs(31);o.xp6(17),o.Q6J("ngModel",i.fromDATE)("disabled",i.fromDATE),o.xp6(2),o.Q6J("ngIf",!r.value),o.xp6(4),o.s9C("min",i.fromDATE),o.Q6J("ngModel",i.toDATE)("disabled",!i.fromDATE),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(5),o.Q6J("ngModel",i.name),o.xp6(4),o.Q6J("ngForOf",i.tenantList),o.xp6(1),o.Q6J("ngIf",!a.value),o.xp6(19),o.hij("From Date:",i.fromDATE,""),o.xp6(2),o.hij("To Date: ",i.toDATE,""),o.xp6(2),o.hij("To:",i.name,""),o.xp6(1),o.Q6J("ngForOf",o.gM2(60,15,i.tenantData,i.name,i.fromDATE,i.toDATE)),o.xp6(3),o.Q6J("ngIf",void 0!==i.name)}},dependencies:[Li,si,Wd,$d,No,ou,us,la,Yo,Av,VU,ZU,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:.9vh;left:14vw;width:70vw;overflow:scroll;height:90%;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042;font-size:.8rem}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.content_view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%;border:solid 1px black}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.7rem;width:80%}textarea[_ngcontent-%COMP%]{width:100%}.report-logo[_ngcontent-%COMP%]{margin:auto;height:4vh;display:flex;text-align:center}.report-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.1rem auto}.report-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;font-weight:700}.scroll-report[_ngcontent-%COMP%]   .report-title-info[_ngcontent-%COMP%]{margin:auto .75rem;display:flex;justify-content:space-between}.report-company-address[_ngcontent-%COMP%]{margin:auto .75rem}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:35% auto}.report_filter[_ngcontent-%COMP%]{width:100%;margin:0rem;border-right:solid .1rem gray}.v-line-1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:.7rem auto;padding:0rem;height:3 vh}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{align-items:center;margin:auto .7rem}.input-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-items:center}.v-line-2[_ngcontent-%COMP%]{display:block;margin:.7rem .5rem;padding:0rem;height:3 vh}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-top:.5rem}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:.9vw}.reportTotalAmount[_ngcontent-%COMP%]{text-align:center;font-weight:700}.transactionTitle[_ngcontent-%COMP%]{margin:.2rem;background-color:#dcdcdc}.totalAmountTitle[_ngcontent-%COMP%]{margin-left:70%;text-decoration:underline}@media only screen and (max-width: 1600px){.filter[_ngcontent-%COMP%]{font-size:.6rem}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.container[_ngcontent-%COMP%]{width:100%;left:5vw}}@media only screen and (max-width: 1500px){.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin:.2rem}}"]}),n})();function bfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Cfe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Tfe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.ALo(2,"upperFirst"),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(o.lcZ(2,1,e))}}function Efe(n,t){1&n&&(o.TgZ(0,"div",33)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Dfe(n,t){if(1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2),o._UZ(3,"span",41),o._uU(4),o._UZ(5,"span",41),o._uU(6),o.ALo(7,"currancy"),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("Type: ",e.typeOfTransaction," "),o.xp6(2),o.hij(" Description: ",e.description," "),o.xp6(2),o.hij(" Amount: ",o.lcZ(7,3,e.amount),"")}}function xfe(n,t){if(1&n&&(o.TgZ(0,"div",34)(1,"table")(2,"tr")(3,"th",35),o._uU(4,"Id"),o.qZA(),o.TgZ(5,"th",36),o._uU(6,"Invoice No."),o.qZA(),o.TgZ(7,"th",36),o._uU(8,"Date"),o.qZA(),o.TgZ(9,"th",37),o._uU(10,"To"),o.qZA(),o.TgZ(11,"th",36),o._uU(12,"About"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"Payment type"),o.qZA()(),o.TgZ(15,"tr",38)(16,"td"),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.qZA(),o.TgZ(20,"td"),o._uU(21),o.qZA(),o.TgZ(22,"td"),o._uU(23),o.qZA(),o.TgZ(24,"td"),o._uU(25),o.qZA(),o.TgZ(26,"td"),o._uU(27),o.qZA()()(),o.TgZ(28,"p",39),o._uU(29,"Transaction"),o.qZA(),o.YNc(30,Dfe,8,5,"div",21),o._UZ(31,"hr"),o.TgZ(32,"p",40),o._uU(33," Total amount: "),o.TgZ(34,"span"),o._uU(35),o.ALo(36,"currancy"),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(17),o.Oqu(e.id),o.xp6(2),o.Oqu(e.invoiceno),o.xp6(2),o.Oqu(e.date),o.xp6(2),o.Oqu(e.name),o.xp6(2),o.Oqu(e.about),o.xp6(2),o.Oqu(e.typeofpayment),o.xp6(3),o.Q6J("ngForOf",e.trans),o.xp6(5),o.Oqu(o.lcZ(36,8,e.totalamount))}}const Afe=function(n,t,e,i){return[0,n,t,e,i]};function Ife(n,t){if(1&n&&(o.TgZ(0,"p",42),o._uU(1),o.ALo(2,"currancy"),o.ALo(3,"filterTFRPipe"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("Total amount in the report: ",o.lcZ(2,1,o.G7q(3,3,o.l5B(9,Afe,e.otherData,e.name,e.fromDATE,e.toDATE))),"")}}let Sfe=(()=>{class n{constructor(e,i){this.elementRef=e,this.dbService=i,this.close=new o.vpe,this.otherData=[],this.ReportTotalAmont=0,this.loading=!1,this.otherList=[]}ngOnInit(){this.getOther()}onPrint(e){let i=document.getElementById(e).innerHTML;document.body.innerHTML=i,window.print()}resetReport(){this.fromDATE=null,this.toDATE=null,this.name=null}getOther(){var e=this;return(0,be.Z)(function*(){e.loading=!0,e.otherData=[],yield e.dbService.getData("moneyDb").then(i=>{i.forEach(r=>{if("other"===r.data().position){if(e.otherData.push(r.data()),e.otherList.includes(r.data().name))return;e.otherList.push(r.data().name)}})})})()}onClose(){this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-frother"]],inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:64,vars:20,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],["id","ReportPrint"],[1,"filter"],[1,"report_filter"],[1,"v-line-2"],[1,"input-group"],[1,"input-group-text"],["type","date","placeholder","Date","name","fromDate","id","fromDate","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["fromDate",""],["class","required-warning",4,"ngIf"],["type","date","placeholder","Date","name","toDate","id","toDate","required","",1,"form-control",3,"ngModel","min","disabled","ngModelChange"],["toDate",""],[1,"v-line-1"],["aria-label","Default select example","name","name","id","name",1,"form-select",3,"ngModel","ngModelChange"],["nameOther",""],[4,"ngFor","ngForOf"],[1,"button"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["id","scroll-report",1,"scroll-report"],[1,"report-logo"],["orf",""],[1,"report-title"],[1,"report-company-address"],["class","content_view",4,"ngFor","ngForOf"],["class","reportTotalAmount",4,"ngIf"],[1,"required-warning"],[1,"content_view"],[2,"width","10%"],[2,"width","15%"],[2,"width","20%"],[1,"totalTable"],[1,"transactionTitle"],[1,"totalAmountTitle"],[2,"margin-left","8rem"],[1,"reportTotalAmount"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div")(1,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"p"),o._uU(7,"FINANCIAL REPORT FOR OTHER"),o.qZA(),o.TgZ(8,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(9,"img",6),o.qZA()(),o.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"span",12),o._uU(16,"From Date"),o.qZA(),o.TgZ(17,"input",13,14),o.NdJ("ngModelChange",function(s){return i.fromDATE=s}),o.qZA(),o.YNc(19,bfe,3,0,"div",15),o.qZA(),o.TgZ(20,"div",11)(21,"span",12),o._uU(22,"To Date"),o.qZA(),o.TgZ(23,"input",16,17),o.NdJ("ngModelChange",function(s){return i.toDATE=s}),o.qZA(),o.YNc(25,Cfe,3,0,"div",15),o.qZA()(),o.TgZ(26,"div",18)(27,"div",11)(28,"span",12),o._uU(29,"Other name"),o.qZA(),o.TgZ(30,"select",19,20),o.NdJ("ngModelChange",function(s){return i.name=s}),o.TgZ(32,"option"),o._uU(33,"* All Clients"),o.qZA(),o.YNc(34,Tfe,3,3,"option",21),o.qZA()(),o.YNc(35,Efe,3,0,"div",15),o.qZA(),o.TgZ(36,"div",22)(37,"button",23),o.NdJ("click",function(){return i.onPrint("scroll-report")}),o._uU(38,"Print"),o.qZA(),o.TgZ(39,"button",24),o.NdJ("click",function(){return i.resetReport()}),o._uU(40,"Reset"),o.qZA(),o.TgZ(41,"button",25),o.NdJ("click",function(){return i.onClose()}),o._uU(42,"Close"),o.qZA()()(),o.TgZ(43,"div",26)(44,"div",27)(45,"p",null,28),o._uU(47,"Company Name"),o.qZA()(),o.TgZ(48,"div",29)(49,"p"),o._uU(50,"FINANCIAL REPORT FOR OTHER"),o.qZA()(),o.TgZ(51,"div",30)(52,"div",18)(53,"p"),o._uU(54),o.qZA(),o.TgZ(55,"p"),o._uU(56),o.qZA(),o.TgZ(57,"span"),o._uU(58),o.qZA()()(),o.YNc(59,xfe,37,10,"div",31),o.ALo(60,"filterFRPipe"),o._UZ(61,"hr"),o.YNc(62,Ife,4,14,"p",32),o._UZ(63,"hr"),o.qZA()()()()()()()),2&e){const r=o.MAs(18),s=o.MAs(24),a=o.MAs(31);o.xp6(17),o.Q6J("ngModel",i.fromDATE)("disabled",i.fromDATE),o.xp6(2),o.Q6J("ngIf",!r.value),o.xp6(4),o.s9C("min",i.fromDATE),o.Q6J("ngModel",i.toDATE)("disabled",!i.fromDATE),o.xp6(2),o.Q6J("ngIf",!s.value),o.xp6(5),o.Q6J("ngModel",i.name),o.xp6(4),o.Q6J("ngForOf",i.otherList),o.xp6(1),o.Q6J("ngIf",!a.value),o.xp6(19),o.hij("From Date:",i.fromDATE,""),o.xp6(2),o.hij("To Date: ",i.toDATE,""),o.xp6(2),o.hij("To:",i.name,""),o.xp6(1),o.Q6J("ngForOf",o.gM2(60,15,i.otherData,i.name,i.fromDATE,i.toDATE)),o.xp6(3),o.Q6J("ngIf",void 0!==i.name)}},dependencies:[Li,si,Wd,$d,No,ou,us,la,Yo,Av,VU,ZU,sf],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:.9vh;left:14vw;width:70vw;overflow:scroll;height:90%;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042;font-size:.8rem}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_view[_ngcontent-%COMP%]{width:100%;padding:10px}.content_view[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%;border:solid 1px black}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.7rem;width:80%}textarea[_ngcontent-%COMP%]{width:100%}.report-logo[_ngcontent-%COMP%]{margin:auto;height:4vh;display:flex;text-align:center}.report-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.1rem auto}.report-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;font-weight:700}.scroll-report[_ngcontent-%COMP%]   .report-title-info[_ngcontent-%COMP%]{margin:auto .75rem;display:flex;justify-content:space-between}.report-company-address[_ngcontent-%COMP%]{margin:auto .75rem}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}.filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:35% auto}.report_filter[_ngcontent-%COMP%]{width:100%;margin:0rem;border-right:solid .1rem gray}.v-line-1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:.7rem auto;padding:0rem;height:3 vh}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{align-items:center;margin:auto .7rem}.input-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{align-items:center}.v-line-2[_ngcontent-%COMP%]{display:block;margin:.7rem .5rem;padding:0rem;height:3 vh}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-top:.5rem}.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:.9vw}.reportTotalAmount[_ngcontent-%COMP%]{text-align:center;font-weight:700}.transactionTitle[_ngcontent-%COMP%]{margin:.2rem;background-color:#dcdcdc}.totalAmountTitle[_ngcontent-%COMP%]{margin-left:70%;text-decoration:underline}@media only screen and (max-width: 1600px){.filter[_ngcontent-%COMP%]{font-size:.6rem}.v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .v-line-2[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.container[_ngcontent-%COMP%]{width:100%;left:5vw}}@media only screen and (max-width: 1500px){.v-line-1[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin:.2rem}}"]}),n})();function Mfe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-frlandlord",17),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}}function Pfe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-frtenant",17),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}}function kfe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-frother",17),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}}function Ofe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report display presenting a list of landlords organized by either name, date, or property postcode. "),o.qZA())}function Rfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report showcasing financial transactions with landlords, organized based on their name, date, or property postcode. "),o.qZA())}function Nfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report display presenting a list of tenants organized by either name, date, or property postcode. "),o.qZA())}function Lfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report showcasing financial transactions with tenants, organized based on their name, date, or property postcode. "),o.qZA())}function Ffe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report showcasing financial transactions with others, organized based on their name, date. "),o.qZA())}function Ufe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report presenting a list of properties categorized by owner name or property postcode. "),o.qZA())}function Bfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"A report displaying the financial status of properties based on owner name or property postcode. "),o.qZA())}function Vfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"This report presents the income statement of the company based on a specific time period."),o.qZA())}function Zfe(n,t){1&n&&(o.TgZ(0,"p"),o._uU(1,"This report presents the expenses statement of the company based on a specific time period."),o.qZA())}let zfe=(()=>{class n{constructor(){this.landlordListDetail=!1,this.landlordFinanceDetail=!1,this.tenantListDetail=!1,this.tenantFinanceDetail=!1,this.propertyListDetail=!1,this.propertyDetail=!1,this.incomeStatement=!1,this.expensesStatement=!1,this.otherFinanceDetail=!1,this.frlandlordAllow=!1,this.frtenantAllow=!1,this.frotherAllow=!1}ngOnInit(){}leaveLandlordList(){this.landlordListDetail=!1}overLandlordList(){this.landlordListDetail=!0}leaveFinanceLandlord(){this.landlordFinanceDetail=!1}overFinanceLandlord(){this.landlordFinanceDetail=!0}leaveFinanceTenant(){this.tenantFinanceDetail=!1}overFinanceTenant(){this.tenantFinanceDetail=!0}leaveTenantList(){this.tenantFinanceDetail=!1}overTenantList(){this.tenantFinanceDetail=!0}leaveFinanceOther(){this.otherFinanceDetail=!1}overFinanceOther(){this.otherFinanceDetail=!0}leavePropertyStatus(){this.propertyDetail=!1}overPropertyStatus(){this.propertyDetail=!0}leavePropertyList(){this.propertyListDetail=!1}overPropertyList(){this.propertyListDetail=!0}leaveIncomeStatement(){this.incomeStatement=!1}overIncomeStatement(){this.incomeStatement=!0}leaveExpensesStatement(){this.expensesStatement=!1}overExpensesStatement(){this.expensesStatement=!0}openFrlandlord(){this.frlandlordAllow=!0}openFrtenant(){this.frtenantAllow=!0}openFrother(){this.frotherAllow=!0}onReloadPg(){this.frlandlordAllow=!1,this.frtenantAllow=!1,this.frotherAllow=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-reports"]],decls:53,vars:12,consts:[[3,"close",4,"ngIf"],[1,"container-sm"],[1,"row"],["id","card_add_content",1,"col-6"],["id","card"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"report-pg"],[1,"reports-list"],[1,"btn","btn-outline-success",3,"mouseover","mouseleave","click"],[1,"btn","btn-outline-success",3,"mouseover","mouseleave"],[1,"report-detail"],[1,"content-detail"],[4,"ngIf"],[3,"close"]],template:function(e,i){1&e&&(o.YNc(0,Mfe,1,0,"app-frlandlord",0),o.YNc(1,Pfe,1,0,"app-frtenant",0),o.YNc(2,kfe,1,0,"app-frother",0),o.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),o._uU(9," Reports "),o.qZA(),o.TgZ(10,"div",7)(11,"h5",8),o._uU(12,"Reports Details"),o.qZA(),o.TgZ(13,"p",9),o._uU(14,"This page has number of reports"),o.qZA()()(),o.TgZ(15,"div",10)(16,"div",11),o._UZ(17,"hr"),o.TgZ(18,"button",12),o.NdJ("mouseover",function(){return i.overFinanceLandlord()})("mouseleave",function(){return i.leaveFinanceLandlord()})("click",function(){return i.openFrlandlord()}),o._uU(19,"Finance Report - landlord"),o.qZA(),o.TgZ(20,"button",13),o.NdJ("mouseover",function(){return i.overLandlordList()})("mouseleave",function(){return i.leaveLandlordList()}),o._uU(21,"Landlord List"),o.qZA(),o._UZ(22,"hr"),o.TgZ(23,"button",12),o.NdJ("mouseover",function(){return i.overFinanceTenant()})("mouseleave",function(){return i.leaveFinanceTenant()})("click",function(){return i.openFrtenant()}),o._uU(24,"Finance Report - tenant"),o.qZA(),o.TgZ(25,"button",13),o.NdJ("mouseover",function(){return i.overTenantList()})("mouseleave",function(){return i.leaveTenantList()}),o._uU(26,"Tenant List"),o.qZA(),o._UZ(27,"hr"),o.TgZ(28,"button",12),o.NdJ("mouseover",function(){return i.overFinanceOther()})("mouseleave",function(){return i.leaveFinanceOther()})("click",function(){return i.openFrother()}),o._uU(29,"Finance Report - Other"),o.qZA(),o._UZ(30,"hr"),o.TgZ(31,"button",13),o.NdJ("mouseover",function(){return i.overPropertyStatus()})("mouseleave",function(){return i.leavePropertyStatus()}),o._uU(32,"Property Status"),o.qZA(),o.TgZ(33,"button",13),o.NdJ("mouseover",function(){return i.overPropertyList()})("mouseleave",function(){return i.leavePropertyList()}),o._uU(34,"Property List"),o.qZA(),o._UZ(35,"hr"),o.TgZ(36,"button",13),o.NdJ("mouseover",function(){return i.overIncomeStatement()})("mouseleave",function(){return i.leaveIncomeStatement()}),o._uU(37,"Income Statement"),o.qZA(),o.TgZ(38,"button",13),o.NdJ("mouseover",function(){return i.overExpensesStatement()})("mouseleave",function(){return i.leaveExpensesStatement()}),o._uU(39,"Other Expenses"),o.qZA()(),o.TgZ(40,"div",14)(41,"div",15)(42,"h5"),o._uU(43,"Report About: "),o.qZA(),o.YNc(44,Ofe,2,0,"p",16),o.YNc(45,Rfe,2,0,"p",16),o.YNc(46,Nfe,2,0,"p",16),o.YNc(47,Lfe,2,0,"p",16),o.YNc(48,Ffe,2,0,"p",16),o.YNc(49,Ufe,2,0,"p",16),o.YNc(50,Bfe,2,0,"p",16),o.YNc(51,Vfe,2,0,"p",16),o.YNc(52,Zfe,2,0,"p",16),o.qZA()()()()()()()),2&e&&(o.Q6J("ngIf",i.frlandlordAllow),o.xp6(1),o.Q6J("ngIf",i.frtenantAllow),o.xp6(1),o.Q6J("ngIf",i.frotherAllow),o.xp6(42),o.Q6J("ngIf",i.landlordListDetail),o.xp6(1),o.Q6J("ngIf",i.landlordFinanceDetail),o.xp6(1),o.Q6J("ngIf",i.tenantListDetail),o.xp6(1),o.Q6J("ngIf",i.tenantFinanceDetail),o.xp6(1),o.Q6J("ngIf",i.otherFinanceDetail),o.xp6(1),o.Q6J("ngIf",i.propertyListDetail),o.xp6(1),o.Q6J("ngIf",i.propertyDetail),o.xp6(1),o.Q6J("ngIf",i.incomeStatement),o.xp6(1),o.Q6J("ngIf",i.expensesStatement))},dependencies:[si,dfe,wfe,Sfe],styles:[".report-pg[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:200%}.reports-list[_ngcontent-%COMP%]{display:block;width:100%;text-align:center}.reports-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.8rem .2rem;width:100%}.report-detail[_ngcontent-%COMP%]{width:100%}.content-detail[_ngcontent-%COMP%]{margin:4rem 4rem 3rem}.content-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-decoration:underline}"]}),n})(),Hfe=(()=>{class n{constructor(e){this.authriService=e,this.userDetail={}}ngOnInit(){this.userDetails()}userDetails(){this.authriService.userDetails().then(i=>{this.userDetail&&(this.userDetail=i)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(kF))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-profile"]],decls:23,vars:4,consts:[[1,"container"],[1,"row"],[1,"cor-sm-6"],[1,"card"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div")(5,"div",3)(6,"div",4)(7,"div",5)(8,"p"),o._uU(9,"User Details"),o.qZA()(),o.TgZ(10,"div",6)(11,"h4",7),o._uU(12),o.qZA(),o.TgZ(13,"p",8),o._uU(14),o.qZA(),o.TgZ(15,"p",8),o._uU(16),o.qZA(),o.TgZ(17,"p",8),o._uU(18),o.qZA()()()()(),o._UZ(19,"div")(20,"hr")(21,"div")(22,"div"),o.qZA()()()()),2&e&&(o.xp6(12),o.Oqu(i.userDetail.username),o.xp6(2),o.Oqu(i.userDetail.phonenumber),o.xp6(2),o.Oqu(i.userDetail.email),o.xp6(2),o.Oqu(i.userDetail.status))}}),n})(),qfe=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-auth"]],decls:0,vars:0,template:function(e,i){}}),n})();const jfe=["year"],Wfe=["lineChart"],$fe=["divLineChartCanvas"];hm.register(...DW);let Gfe=(()=>{class n{constructor(e){this.chartService=e,this.landlordCounts=0,this.date=(new Date).getFullYear()}ngOnInit(){this.chart_1(),this.chart_2()}chart_1(){var e=this;return(0,be.Z)(function*(){let i=0,r=0,s=0,a=0;yield e.chartService.onGetCountTableList("landlordDb").then(c=>{i=c}),yield e.chartService.onGetCountTableList("tenantDb").then(c=>{r=c}),yield e.chartService.onGetCountTableList("otherDb").then(c=>{s=c}),yield e.chartService.onGetCountTableList("propertyDb").then(c=>{a=c}),new hm("myChart",{type:"bar",data:{labels:[`${i} Landlords`,`${r} Tenants`,`${s} Others`,`${a} Properties`],datasets:[{label:"Company Estate Agent",data:[i,r,s,a],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})})()}chart_2(e){var i=this;return(0,be.Z)(function*(){let r={1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[]},s=[0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0,0,0,0];i.chartService.onGetMoneyData().then(h=>{h.forEach(p=>{let v=new Date(p.date);if(e){if(e==v.getFullYear())switch(v.getMonth()+1){case 1:r[1].push(p),s[0]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[0]+=pe.amount:c[0]+=pe.amount});break;case 2:r[2].push(p),s[1]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[1]+=pe.amount:c[1]+=pe.amount});break;case 3:r[3].push(p),s[2]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[2]+=pe.amount:c[2]+=pe.amount});break;case 4:r[4].push(p),s[3]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[3]+=pe.amount:c[3]+=pe.amount});break;case 5:r[5].push(p),s[4]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[4]+=pe.amount:c[4]+=pe.amount});break;case 6:r[6].push(p),s[5]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[5]+=pe.amount:c[5]+=pe.amount});break;case 7:r[7].push(p),s[6]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[6]+=pe.amount:c[6]+=pe.amount});break;case 8:r[8].push(p),s[7]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[7]+=pe.amount:c[7]+=pe.amount});break;case 9:r[9].push(p),s[8]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[8]+=pe.amount:c[8]+=pe.amount});break;case 10:r[10].push(p),s[9]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[9]+=pe.amount:c[9]+=pe.amount});break;case 11:r[11].push(p),s[10]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[10]+=pe.amount:c[10]+=pe.amount});break;case 12:r[12].push(p),s[11]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[11]+=pe.amount:c[11]+=pe.amount})}}else if(i.date==v.getFullYear())switch(v.getMonth()+1){case 1:r[1].push(p),s[0]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[0]+=pe.amount:c[0]+=pe.amount});break;case 2:r[2].push(p),s[1]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[1]+=pe.amount:c[1]+=pe.amount});break;case 3:r[3].push(p),s[2]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[2]+=pe.amount:c[2]+=pe.amount});break;case 4:r[4].push(p),s[3]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[3]+=pe.amount:c[3]+=pe.amount});break;case 5:r[5].push(p),s[4]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[4]+=pe.amount:c[4]+=pe.amount});break;case 6:r[6].push(p),s[5]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[5]+=pe.amount:c[5]+=pe.amount});break;case 7:r[7].push(p),s[6]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[6]+=pe.amount:c[6]+=pe.amount});break;case 8:r[8].push(p),s[7]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[7]+=pe.amount:c[7]+=pe.amount});break;case 9:r[9].push(p),s[8]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[8]+=pe.amount:c[8]+=pe.amount});break;case 10:r[10].push(p),s[9]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[9]+=pe.amount:c[9]+=pe.amount});break;case 11:r[11].push(p),s[10]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[10]+=pe.amount:c[10]+=pe.amount});break;case 12:r[12].push(p),s[11]+=parseInt(p.totalamount),p.trans.forEach(pe=>{pe.amount<=0?a[11]+=pe.amount:c[11]+=pe.amount})}}),new hm("LineChart",{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Income",data:s,backgroundColor:"blue"},{label:"Payment",data:a,backgroundColor:"red"},{label:"Receive",data:c,backgroundColor:"limegreen"}]},options:{aspectRatio:1.75}})})})()}chart_3(){var e=this;return(0,be.Z)(function*(){let i={1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[]},r=[0,0,0,0,0,0,0,0,0,0,0,0];e.chartService.onGetMoneyData().then(s=>{s.forEach(a=>{switch(new Date(a.date).getMonth()+1){case 1:i[1].push(a),r[0]+=parseInt(a.totalamount);break;case 2:i[2].push(a),r[1]+=parseInt(a.totalamount);break;case 3:i[3].push(a),r[2]+=parseInt(a.totalamount);break;case 4:i[4].push(a),r[3]+=parseInt(a.totalamount);break;case 5:i[5].push(a),r[4]+=parseInt(a.totalamount);break;case 6:i[6].push(a),r[5]+=parseInt(a.totalamount);break;case 7:i[7].push(a),r[6]+=parseInt(a.totalamount);break;case 8:i[8].push(a),r[7]+=parseInt(a.totalamount);break;case 9:i[9].push(a),r[8]+=parseInt(a.totalamount);break;case 10:i[10].push(a),r[9]+=parseInt(a.totalamount);break;case 11:i[11].push(a),r[10]+=parseInt(a.totalamount);break;case 12:i[12].push(a),r[11]+=parseInt(a.totalamount)}}),new hm("LineChart_1",{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Income",data:r,backgroundColor:"blue"}]},options:{aspectRatio:1.75}})})})()}onChart_2(){this.divLineChartCanvas.nativeElement.innerHTML="<canvas id='LineChart' #lineChart></canvas>",this.chart_2(this.inputYear.nativeElement.value)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(CU))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-charts"]],viewQuery:function(e,i){if(1&e&&(o.Gf(jfe,7),o.Gf(Wfe,7),o.Gf($fe,7)),2&e){let r;o.iGM(r=o.CRH())&&(i.inputYear=r.first),o.iGM(r=o.CRH())&&(i.lineChart=r.first),o.iGM(r=o.CRH())&&(i.divLineChartCanvas=r.first)}},decls:12,vars:0,consts:[["id","divChart"],["id","myChart"],["id","divLineChart"],["divLineChart",""],["divLineChartCanvas",""],["id","LineChart"],["lineChart",""],["type","text","id","year","pattern","[0-9]","maxlength","4","minlength","4","placeholder","Please enter selected year.",1,"form-control"],["year",""],["id","lineChartBtn",1,"btn","btn-outline-success",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"canvas",1),o.qZA(),o.TgZ(2,"div",2,3)(4,"div",null,4),o._UZ(6,"canvas",5,6),o.qZA(),o._UZ(8,"input",7,8),o.TgZ(10,"button",9),o.NdJ("click",function(){return i.onChart_2()}),o._uU(11,"Choose Year"),o.qZA()())},styles:["#divChart[_ngcontent-%COMP%]{display:block;width:400px;height:400px}#divLineChart[_ngcontent-%COMP%]{display:block;width:1000px;height:400px}#divLineChart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;width:1000px;height:300px}#year[_ngcontent-%COMP%], #lineChartBtn[_ngcontent-%COMP%]{width:20vw}"]}),n})();const Yfe=["password"],Kfe=["confirmPassword"];function Qfe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Jfe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function Xfe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function epe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function tpe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}function npe(n,t){1&n&&(o.TgZ(0,"div",35),o._uU(1,"The password did not match."),o.qZA())}function ipe(n,t){if(1&n&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e)}}function rpe(n,t){1&n&&(o.TgZ(0,"div",35)(1,"p"),o._uU(2,"*Required"),o.qZA()())}const ope=function(n){return{color:n}};let spe=(()=>{class n{constructor(e,i,r){this.elementRef=e,this.authService=i,this.userDbService=r,this.close=new o.vpe,this.passwordNotMatch=!1,this.displayName=["Admin","User"]}onSubmit(e){var i=this;return(0,be.Z)(function*(){if(e.valid){if(i.password.nativeElement.value===i.confirmPassword.nativeElement.value){const r=e.value.email,s=e.value.password,a=e.value.userPosition,c=e.value.username,h=e.value.phonenumber;yield i.authService.signupAuth(r,s).then(p=>{let v=p.user.uid;p.user.getIdToken().then(b=>{let D="";D="Admin"==a?"yes":"none",i.user={email:r,password:s,username:c,phonenumber:h,position:a,idToken:b,uid:v,status:"active",authori:D},i.userDbService.addData(i.user,"usersDb")})}),i.onClose()}else i.passwordNotMatch=!0;e.reset(),i.onClose()}})()}onClose(){this.user=null,this.ngOnDestroy()}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(hv),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-newuser"]],viewQuery:function(e,i){if(1&e&&(o.Gf(Yfe,7),o.Gf(Kfe,7)),2&e){let r;o.iGM(r=o.CRH())&&(i.password=r.first),o.iGM(r=o.CRH())&&(i.confirmPassword=r.first)}},inputs:{closeForm:"closeForm"},outputs:{close:"close"},decls:55,vars:12,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"panel-body"],["accept-charset","UTF-8","role","form",3,"ngSubmit"],["form","ngForm"],[1,"form-floating"],["type","text","id","username","name","username","username","","ngModel","","pattern","[A-Za-z]{2,}","maxlength","20","placeholder","User name","required","",1,"form-control"],["username",""],["for","fullname"],["class","required-warning",4,"ngIf"],["type","text","id","phonenumber","name","phonenumber","phonenumber","","ngModel","","placeholder","Phone number","id","phone","maxlength","11","required","",1,"form-control"],["phonenumber",""],["for","phonenumber"],["type","email","id","email","name","email","email","","ngModel","","placeholder","name@example.com","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","required","",1,"form-control"],["email",""],["for","email"],["type","password","id","password","name","password","password","","ngModel","","placeholder","Password","required","",1,"form-control"],["password",""],["for","password"],["type","password","id","confirmPassword","name","confirmPassword","password","","ngModel","","placeholder","Confirm Password","required","",1,"form-control"],["confirmPassword",""],["for","confirmPassword"],[1,"input-group"],[1,"input-group-text"],["aria-label","Default select example","ngModel","","required","","id","userPosition","name","userPosition","displayName","",1,"form-select"],["comboBoxList",""],[4,"ngFor","ngForOf"],[1,"btns"],["type","submit",1,"btn","btn-outline-success",3,"disabled","ngStyle"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"required-warning"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Sign in"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"form",8,9),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(11);return o.KtG(i.onSubmit(a))}),o.TgZ(12,"div",10),o._UZ(13,"input",11,12),o.TgZ(15,"label",13),o._uU(16,"User name"),o.qZA(),o.YNc(17,Qfe,3,0,"div",14),o.qZA(),o.TgZ(18,"div",10),o._UZ(19,"input",15,16),o.TgZ(21,"label",17),o._uU(22,"Phone number"),o.qZA(),o.YNc(23,Jfe,3,0,"div",14),o.qZA(),o.TgZ(24,"div",10),o._UZ(25,"input",18,19),o.TgZ(27,"label",20),o._uU(28,"Email address"),o.qZA(),o.YNc(29,Xfe,3,0,"div",14),o.qZA(),o.TgZ(30,"div",10),o._UZ(31,"input",21,22),o.TgZ(33,"label",23),o._uU(34,"Password"),o.qZA(),o.YNc(35,epe,3,0,"div",14),o.qZA(),o.TgZ(36,"div",10),o._UZ(37,"input",24,25),o.TgZ(39,"label",26),o._uU(40,"Confirm Password"),o.qZA(),o.YNc(41,tpe,3,0,"div",14),o.YNc(42,npe,2,0,"div",14),o.qZA(),o.TgZ(43,"div",27)(44,"span",28),o._uU(45,"User Position"),o.qZA(),o.TgZ(46,"select",29,30),o.YNc(48,ipe,2,1,"option",31),o.qZA(),o.YNc(49,rpe,3,0,"div",14),o.qZA(),o.TgZ(50,"div",32)(51,"button",33),o._uU(52,"Sign in new user"),o.qZA(),o.TgZ(53,"button",34),o.NdJ("click",function(){return i.onClose()}),o._uU(54,"Close"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(11),s=o.MAs(14),a=o.MAs(26),c=o.MAs(32),h=o.MAs(38),p=o.MAs(47);o.xp6(17),o.Q6J("ngIf",!s.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!a.value),o.xp6(6),o.Q6J("ngIf",!c.value),o.xp6(6),o.Q6J("ngIf",!h.value),o.xp6(1),o.Q6J("ngIf",i.passwordNotMatch),o.xp6(6),o.Q6J("ngForOf",i.displayName),o.xp6(1),o.Q6J("ngIf",!p.value),o.xp6(2),o.Q6J("disabled",!r.valid)("ngStyle",o.VKq(10,ope,r.valid?"":"gray"))}},dependencies:[Li,si,ur,ru,Wd,$d,No,ou,us,iu,la,Gd,Yd,OM,Yo,Rl],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:5vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:green;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.panel-body[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px;padding:10px}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btns[_ngcontent-%COMP%]{width:30vw;text-align:center;margin-left:auto;margin-right:auto}.btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:10px}input[_ngcontent-%COMP%]{margin-top:10px}.required-warning[_ngcontent-%COMP%]{color:red;font-size:.7rem;padding-inline:.7vw}"]}),n})();function ape(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpdateActivation())}),o._uU(1,"Yes, Update Activate"),o.qZA()}}function lpe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpdateAuthorization())}),o._uU(1,"Yes, Update Authorization"),o.qZA()}}let cpe=(()=>{class n{constructor(e,i){this.elementRef=e,this.dbService=i,this.close=new o.vpe,this.activeStatus="",this.activeAuthori="",this._email=""}ngOnInit(){this.onSelectedClient(),this.activeStatus=this.ClientDetails.status,this._email=this.ClientDetails.email}onSelectedClient(){this.ClientDetails=this.selectedClient}onUpdateActivation(){setTimeout(()=>{this.userActivation(),this.onClose()},250)}onUpdateAuthorization(){setTimeout(()=>{this.userAuthorization(),this.onClose()},250)}onClose(){setTimeout(()=>{this.ngOnDestroy()},250)}ngOnDestroy(){this.elementRef.nativeElement.remove(),this.close.emit(),window.location.reload()}userActivation(){var e=this;return(0,be.Z)(function*(){"active"==e.ClientDetails.status&&(e.activeStatus="unactive"),"unactive"==e.ClientDetails.status&&(e.activeStatus="active"),yield e.dbService.updateFieldStatus("usersDb",e._email,e.activeStatus)})()}userAuthorization(){var e=this;return(0,be.Z)(function*(){""==e.ClientDetails.authori&&(e.activeAuthori="none"),"yes"==e.ClientDetails.authori&&(e.activeAuthori="none"),"none"==e.ClientDetails.authori&&(e.activeAuthori="yes"),yield e.dbService.updateFieldAuthorization("usersDb",e._email,e.activeAuthori)})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-update-user"]],inputs:{closeForm:"closeForm",dbName:"dbName",selectedClient:"selectedClient",btn:"btn"},outputs:{close:"close"},decls:20,vars:3,consts:[[1,"dropback",3,"click"],[1,"container"],[1,"row"],[1,"col"],[1,"title_pg"],[3,"click"],["alt","closeIcon","src","assets/images/closeIcon.png",2,"width","25px"],[1,"content_delete"],[1,"button"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClose()}),o.qZA(),o.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p"),o._uU(6,"Update User"),o.qZA(),o.TgZ(7,"a",5),o.NdJ("click",function(){return i.onClose()}),o._UZ(8,"img",6),o.qZA()(),o.TgZ(9,"div",7)(10,"div")(11,"p"),o._uU(12,"Are you sure to update User to "),o.TgZ(13,"span"),o._uU(14),o.qZA()()()(),o.TgZ(15,"div",8),o.YNc(16,ape,2,0,"button",9),o.YNc(17,lpe,2,0,"button",9),o.TgZ(18,"button",10),o.NdJ("click",function(){return i.onClose()}),o._uU(19,"Close"),o.qZA()()()()()),2&e&&(o.xp6(14),o.Oqu(i.ClientDetails.username),o.xp6(2),o.Q6J("ngIf",i.btn),o.xp6(1),o.Q6J("ngIf",!i.btn))},dependencies:[si],styles:[".dropback[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000000bf;z-index:50}.container[_ngcontent-%COMP%]{position:fixed;top:10vh;left:30vw;width:40vw;height:-moz-fit-content;height:fit-content;padding:0;border-radius:10px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.title_pg[_ngcontent-%COMP%]{height:50px;width:100%;background-color:#dc3545;border-radius:10px 10px 0 0;color:#fff;padding:10px;display:flex;justify-content:space-between}.title_pg[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.content_delete[_ngcontent-%COMP%]{width:100%;padding:10px}.button[_ngcontent-%COMP%]{width:100%;margin:10px;text-align:center}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin-top:10px}.content_delete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase}"]}),n})();function upe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-newuser",13),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}}function dpe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-update-user",14),o.NdJ("close",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onReloadPg())}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("closeForm",e.deleteUserAllowed)("selectedClient",e.selectdClient)("dbName",e.dbName)("btn",e.btnClick)}}const RM=function(n){return{color:n}},D$=function(n){return{backgroundColor:n}};function hpe(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr")(1,"td",15),o._uU(2),o.ALo(3,"upperFirst"),o.qZA(),o.TgZ(4,"td",15),o._uU(5),o.qZA(),o.TgZ(6,"td",15),o._uU(7),o.qZA(),o.TgZ(8,"td",15),o._uU(9),o.qZA(),o.TgZ(10,"td")(11,"button",16),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.onUpdateActivation(s))}),o._uU(12),o.ALo(13,"upperFirst"),o.qZA()(),o.TgZ(14,"td")(15,"button",16),o.NdJ("click",function(){const s=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.onUpdateAuthorization(s))}),o._uU(16),o.ALo(17,"upperFirst"),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngStyle",o.VKq(18,RM,"Admin"==e.position?"red":null)),o.xp6(1),o.Oqu(o.lcZ(3,12,e.username)),o.xp6(2),o.Q6J("ngStyle",o.VKq(20,RM,"Admin"==e.position?"red":null)),o.xp6(1),o.Oqu(e.phonenumber),o.xp6(1),o.Q6J("ngStyle",o.VKq(22,RM,"Admin"==e.position?"red":null)),o.xp6(1),o.Oqu(e.email),o.xp6(1),o.Q6J("ngStyle",o.VKq(24,RM,"Admin"==e.position?"red":null)),o.xp6(1),o.Oqu(e.position),o.xp6(2),o.Q6J("ngStyle",o.VKq(26,D$,"active"==e.status?"green":"gray")),o.xp6(1),o.Oqu(o.lcZ(13,14,e.status)),o.xp6(3),o.Q6J("ngStyle",o.VKq(28,D$,"yes"==e.authori?"green":"gray")),o.xp6(1),o.Oqu(o.lcZ(17,16,e.authori))}}let fpe=(()=>{class n{constructor(e){this.authriService=e,this.authAllowed=!1,this.usersArr=[],this.deleteUserAllowed=!1,this.dbName=""}ngOnInit(){this.usersList()}onReloadPg(){this.deleteUserAllowed=!1,this.authAllowed=!1,this.ngOnInit()}usersList(){var e=this;return(0,be.Z)(function*(){e.usersArr=yield e.authriService.usersList()})()}onUpdateActivation(e){this.deleteUserAllowed=!0,this.selectdClient=e,this.dbName="usersDb",this.btnClick=!0}onUpdateAuthorization(e){this.deleteUserAllowed=!0,this.selectdClient=e,this.dbName="usersDb",this.btnClick=!1}onAddNewUser(){this.ngOnInit(),this.authAllowed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(kF))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-setting"]],decls:31,vars:3,consts:[[3,"close",4,"ngIf"],[3,"closeForm","selectedClient","dbName","btn","close",4,"ngIf"],[1,"container"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"btn","btn-outline-success",3,"click"],[1,"userlist"],["id","pg_table",1,"table","table","table-striped"],[4,"ngFor","ngForOf"],[3,"close"],[3,"closeForm","selectedClient","dbName","btn","close"],[3,"ngStyle"],["type","button","id","view_btn",1,"btn","btn-outline-success",2,"color","white",3,"ngStyle","click"]],template:function(e,i){1&e&&(o.YNc(0,upe,1,0,"app-newuser",0),o.YNc(1,dpe,1,4,"app-update-user",1),o.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"div",5)(7,"div",6)(8,"h6",7),o._uU(9,"Users"),o.qZA()(),o.TgZ(10,"div",8)(11,"div")(12,"button",9),o.NdJ("click",function(){return i.onAddNewUser()}),o._uU(13,"Add New User"),o.qZA()(),o.TgZ(14,"div",10)(15,"table",11)(16,"thead")(17,"th"),o._uU(18,"User name"),o.qZA(),o.TgZ(19,"th"),o._uU(20,"Phone number"),o.qZA(),o.TgZ(21,"th"),o._uU(22,"Email"),o.qZA(),o.TgZ(23,"th"),o._uU(24,"Position"),o.qZA(),o.TgZ(25,"th"),o._uU(26,"Status"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"Authorization"),o.qZA()(),o.TgZ(29,"tbody"),o.YNc(30,hpe,18,30,"tr",12),o.qZA()()()()()()()()()),2&e&&(o.Q6J("ngIf",i.authAllowed),o.xp6(1),o.Q6J("ngIf",i.deleteUserAllowed),o.xp6(29),o.Q6J("ngForOf",i.usersArr))},dependencies:[Li,si,ur,spe,cpe,sf],styles:[".userlist[_ngcontent-%COMP%]{margin-top:30px;margin-left:auto;margin-right:auto}"]}),n})();function ppe(n,t){if(1&n&&(o.TgZ(0,"div",17)(1,"p"),o._uU(2),o.qZA()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.errorText)}}function gpe(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"img",18),o.qZA())}let mpe=(()=>{class n{constructor(e,i,r){this.authService=e,this.dbService=i,this.router=r,this.emailSignIn="",this.loading=!1,this.errorText=null}onLogin(e){var i=this;return(0,be.Z)(function*(){if(e){{const r=e.value.email,s=e.value.password;i.loading=!0;let a="";yield i.dbService.getData("usersDb").then(c=>{c.forEach(h=>{h.data().email==e.value.email&&h.data().password==e.value.password&&"active"==h.data().status?i.authService.signin(r,s).subscribe(p=>{i.emailSignIn=p.email,a=p.email,i.loading=!1},p=>{i.errorText=p,i.loading=!1}):(i.errorText="This account is unactivated.",i.loading=!1)})})}e.reset()}})()}ngOnDestroy(){setTimeout(()=>{window.location.reload()},100)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hv),o.Y36(Pr),o.Y36(rs))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login-auth"]],decls:25,vars:3,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"backgroundImg"],["class","alert alert-danger","id","errorText",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["accept-charset","UTF-8","role","form",3,"ngSubmit"],["authform","ngForm"],[1,"form-group"],["placeholder","E-mail","name","email","type","email","ngModel","","email","","required","",1,"form-control"],["placeholder","Password","name","password","type","password","id","password","password","","ngModel","","required","",1,"form-control"],[1,"checkbox"],["name","remember","type","checkbox","value","Remember Me"],["type","submit","id","login_btn",1,"btn","btn-lg","btn-success","btn-block",3,"disabled"],["id","errorText",1,"alert","alert-danger"],["alt","spinner loading","src","assets/images/Rolling.gif",2,"width","30px","text-align","center"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),o._UZ(4,"img",3),o.qZA(),o.YNc(5,ppe,3,1,"div",4),o.TgZ(6,"div",5)(7,"div",6)(8,"p"),o._uU(9,"Please sign in"),o.qZA()(),o.TgZ(10,"div",7),o.YNc(11,gpe,2,0,"div",8),o.TgZ(12,"form",9,10),o.NdJ("ngSubmit",function(){o.CHM(r);const a=o.MAs(13);return o.KtG(i.onLogin(a))}),o.TgZ(14,"fieldset")(15,"div",11),o._UZ(16,"input",12),o.qZA(),o.TgZ(17,"div",11),o._UZ(18,"input",13),o.qZA(),o.TgZ(19,"div",14)(20,"label"),o._UZ(21,"input",15),o._uU(22," Remember Me "),o.qZA()()(),o.TgZ(23,"button",16),o._uU(24,"Login"),o.qZA()()()()()()()}if(2&e){const r=o.MAs(13);o.xp6(5),o.Q6J("ngIf",i.errorText),o.xp6(6),o.Q6J("ngIf",i.loading),o.xp6(12),o.Q6J("disabled",!r.valid)}},dependencies:[si,ru,No,us,iu,la,OM,Yo,Rl],styles:[".container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#4e4e6a}#login_row[_ngcontent-%COMP%]{display:flex;position:absolute}.card[_ngcontent-%COMP%]{position:fixed;width:300px;top:200px;left:40%}#errorText[_ngcontent-%COMP%]{top:30px;left:40%;width:300px;position:fixed}.form-control[_ngcontent-%COMP%]{margin-top:.8vh}#login_btn[_ngcontent-%COMP%]{margin-top:1rem;width:100%;padding:.4rem;font-size:16px}.backgroundImg[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;background-color:#4e4e6a}@media only screen and (max-width:950px){.card[_ngcontent-%COMP%], #errorText[_ngcontent-%COMP%]{left:20%}}"]}),n})(),Gu=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return!!localStorage.getItem("userData")||this.router.createUrlTree(["/loginAuth"])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(hv),o.LFG(rs))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _pe=[{path:"",redirectTo:"/loginAuth",pathMatch:"full"},{path:"loginAuth",component:mpe},{path:"home",component:dae,canActivate:[Gu]},{path:"landlords",component:tce,canActivate:[Gu]},{path:"tenants",component:nue,canActivate:[Gu]},{path:"properties",component:Jue,canActivate:[Gu]},{path:"others",component:qde,canActivate:[Gu]},{path:"money",component:nfe,canActivate:[Gu]},{path:"reports",component:zfe,canActivate:[Gu]},{path:"charts",component:Gfe,canActivate:[Gu]},{path:"setting",component:fpe,canActivate:[Gu]},{path:"profile",component:Hfe,canActivate:[Gu]},{path:"auth",component:qfe,canActivate:[Gu]},{path:"not-found",component:hae},{path:"**",redirectTo:"/not-found"}];let vpe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Yv.forRoot(_pe),Yv]}),n})();class x${}class ype{}const Cp="*";function A$(n,t=null){return{type:4,styles:t,timings:n}}function I$(n,t=null){return{type:2,steps:n,options:t}}function NM(n){return{type:6,styles:n,offset:null}}function S$(n,t,e){return{type:0,name:n,styles:t,options:e}}function M$(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function P$(n){Promise.resolve().then(n)}class _D{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){P$(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class k${constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?P$(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++e==s&&this._onFinish()}),a.onDestroy(()=>{++i==s&&this._onDestroy()}),a.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const zU="!";function O$(n){return new o.vHH(3e3,!1)}function tge(){return typeof window<"u"&&typeof window.document<"u"}function HU(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function _m(n){switch(n.length){case 0:return new _D;case 1:return n[0];default:return new k$(n)}}function R$(n,t,e,i,r=new Map,s=new Map){const a=[],c=[];let h=-1,p=null;if(i.forEach(v=>{const b=v.get("offset"),D=b==h,P=D&&p||new Map;v.forEach((R,F)=>{let V=F,Q=R;if("offset"!==F)switch(V=t.normalizePropertyName(V,a),Q){case zU:Q=r.get(F);break;case Cp:Q=s.get(F);break;default:Q=t.normalizeStyleValue(F,V,Q,a)}P.set(V,Q)}),D||c.push(P),p=P,h=b}),a.length)throw function Hpe(n){return new o.vHH(3502,!1)}();return c}function qU(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&jU(e,"start",n)));break;case"done":n.onDone(()=>i(e&&jU(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&jU(e,"destroy",n)))}}function jU(n,t,e){const s=WU(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),a=n._data;return null!=a&&(s._data=a),s}function WU(n,t,e,i,r="",s=0,a){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!a}}function su(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function N$(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let $U=(n,t)=>!1,L$=(n,t,e)=>[],F$=null;function GU(n){const t=n.parentNode||n.host;return t===F$?null:t}(HU()||typeof Element<"u")&&(tge()?(F$=(()=>document.documentElement)(),$U=(n,t)=>{for(;t;){if(t===n)return!0;t=GU(t)}return!1}):$U=(n,t)=>n.contains(t),L$=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Iv=null,U$=!1;const B$=$U,V$=L$;let Z$=(()=>{class n{validateStyleProperty(e){return function ige(n){Iv||(Iv=function rge(){return typeof document<"u"?document.body:null}()||{},U$=!!Iv.style&&"WebkitAppearance"in Iv.style);let t=!0;return Iv.style&&!function nge(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Iv.style,!t&&U$&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Iv.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return B$(e,i)}getParentElement(e){return GU(e)}query(e,i,r){return V$(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,a,c=[],h){return new _D(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),YU=(()=>{class n{}return n.NOOP=new Z$,n})();const oge=1e3,KU="ng-enter",LM="ng-leave",FM="ng-trigger",UM=".ng-trigger",H$="ng-animating",QU=".ng-animating";function Tp(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:JU(parseFloat(t[1]),t[2])}function JU(n,t){return"s"===t?n*oge:n}function BM(n,t,e){return n.hasOwnProperty("duration")?n:function age(n,t,e){let r,s=0,a="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return t.push(O$()),{duration:0,delay:0,easing:""};r=JU(parseFloat(c[1]),c[2]);const h=c[3];null!=h&&(s=JU(parseFloat(h),c[4]));const p=c[5];p&&(a=p)}else r=n;if(!e){let c=!1,h=t.length;r<0&&(t.push(function bpe(){return new o.vHH(3100,!1)}()),c=!0),s<0&&(t.push(function Cpe(){return new o.vHH(3101,!1)}()),c=!0),c&&t.splice(h,0,O$())}return{duration:r,delay:s,easing:a}}(n,t,e)}function vD(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function q$(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function vm(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function W$(n,t,e){return e?t+":"+e+";":""}function $$(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=W$(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=W$(0,dge(e),n.style[e]));n.setAttribute("style",t)}function lf(n,t,e){n.style&&(t.forEach((i,r)=>{const s=e3(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),HU()&&$$(n))}function Sv(n,t){n.style&&(t.forEach((e,i)=>{const r=e3(i);n.style[r]=""}),HU()&&$$(n))}function yD(n){return Array.isArray(n)?1==n.length?n[0]:I$(n):n}const XU=new RegExp("{{\\s*(.+?)\\s*}}","g");function G$(n){let t=[];if("string"==typeof n){let e;for(;e=XU.exec(n);)t.push(e[1]);XU.lastIndex=0}return t}function wD(n,t,e){const i=n.toString(),r=i.replace(XU,(s,a)=>{let c=t[a];return null==c&&(e.push(function Epe(n){return new o.vHH(3003,!1)}()),c=""),c.toString()});return r==i?n:r}function VM(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const uge=/-+([a-z0-9])/g;function e3(n){return n.replace(uge,(...t)=>t[1].toUpperCase())}function dge(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function au(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Dpe(n){return new o.vHH(3004,!1)}()}}function Y$(n,t){return window.getComputedStyle(n)[t]}const HM="*";function _ge(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function vge(n,t,e){if(":"==n[0]){const h=function yge(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Bpe(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof h)return void t.push(h);n=h}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Upe(n){return new o.vHH(3015,!1)}()),t;const r=i[1],s=i[2],a=i[3];t.push(K$(r,a));"<"==s[0]&&!(r==HM&&a==HM)&&t.push(K$(a,r))}(i,e,t)):e.push(n),e}const qM=new Set(["true","1"]),jM=new Set(["false","0"]);function K$(n,t){const e=qM.has(n)||jM.has(n),i=qM.has(t)||jM.has(t);return(r,s)=>{let a=n==HM||n==r,c=t==HM||t==s;return!a&&e&&"boolean"==typeof r&&(a=r?qM.has(n):jM.has(n)),!c&&i&&"boolean"==typeof s&&(c=s?qM.has(t):jM.has(t)),a&&c}}const wge=new RegExp("s*:selfs*,?","g");function t3(n,t,e,i){return new bge(n).build(t,e,i)}class bge{constructor(t){this._driver=t}build(t,e,i){const r=new Ege(e);return this._resetContextStyleTimingState(r),au(this,yD(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push(function Ape(){return new o.vHH(3006,!1)}()),t.definitions.forEach(c=>{if(this._resetContextStyleTimingState(e),0==c.type){const h=c,p=h.name;p.toString().split(/\s*,\s*/).forEach(v=>{h.name=v,s.push(this.visitState(h,e))}),h.name=p}else if(1==c.type){const h=this.visitTransition(c,e);i+=h.queryCount,r+=h.depCount,a.push(h)}else e.errors.push(function Ipe(){return new o.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:a,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,a=r||{};i.styles.forEach(c=>{c instanceof Map&&c.forEach(h=>{G$(h).forEach(p=>{a.hasOwnProperty(p)||s.add(p)})})}),s.size&&(VM(s.values()),e.errors.push(function Spe(n,t){return new o.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=au(this,yD(t.animation),e);return{type:1,matchers:_ge(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Mv(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>au(this,i,e)),options:Mv(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(a=>{e.currentTime=i;const c=au(this,a,e);return r=Math.max(r,e.currentTime),c});return e.currentTime=r,{type:3,steps:s,options:Mv(t.options)}}visitAnimate(t,e){const i=function xge(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return n3(BM(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=n3(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=BM(e,t);return n3(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:NM({});if(5==s.type)r=this.visitKeyframes(s,e);else{let a=t.styles,c=!1;if(!a){c=!0;const p={};i.easing&&(p.easing=i.easing),a=NM(p)}e.currentTime+=i.duration+i.delay;const h=this.visitStyle(a,e);h.isEmptyStep=c,r=h}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let c of r)"string"==typeof c?c===Cp?i.push(c):e.errors.push(new o.vHH(3002,!1)):i.push(q$(c));let s=!1,a=null;return i.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(a=c.get("easing"),c.delete("easing")),!s))for(let h of c.values())if(h.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:a,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,h)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(h);let b=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function Ppe(n,t,e,i,r){return new o.vHH(3010,!1)}()),b=!1),s=v.startTime),b&&p.set(h,{startTime:s,endTime:r}),e.options&&function cge(n,t,e){const i=t.params||{},r=G$(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Tpe(n){return new o.vHH(3001,!1)}())})}(c,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function kpe(){return new o.vHH(3011,!1)}()),i;let s=0;const a=[];let c=!1,h=!1,p=0;const v=t.steps.map(Q=>{const te=this._makeStyleAst(Q,e);let re=null!=te.offset?te.offset:function Dge(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(te.styles),de=0;return null!=re&&(s++,de=te.offset=re),h=h||de<0||de>1,c=c||de<p,p=de,a.push(de),te});h&&e.errors.push(function Ope(){return new o.vHH(3012,!1)}()),c&&e.errors.push(function Rpe(){return new o.vHH(3200,!1)}());const b=t.steps.length;let D=0;s>0&&s<b?e.errors.push(function Npe(){return new o.vHH(3202,!1)}()):0==s&&(D=1/(b-1));const P=b-1,R=e.currentTime,F=e.currentAnimateTimings,V=F.duration;return v.forEach((Q,te)=>{const re=D>0?te==P?1:D*te:a[te],de=re*V;e.currentTime=R+F.delay+de,F.duration=de,this._validateStyleAst(Q,e),Q.offset=re,i.styles.push(Q)}),i}visitReference(t,e){return{type:8,animation:au(this,yD(t.animation),e),options:Mv(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Mv(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Mv(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,a]=function Cge(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(wge,"")),n=n.replace(/@\*/g,UM).replace(/@\w+/g,e=>UM+"-"+e.slice(1)).replace(/:animating/g,QU),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,su(e.collectedStyles,e.currentQuerySelector,new Map);const c=au(this,yD(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:c,originalSelector:t.selector,options:Mv(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Lpe(){return new o.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:BM(t.timings,e.errors,!0);return{type:12,animation:au(this,yD(t.animation),e),timings:i,options:null}}}class Ege{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Mv(n){return n?(n=vD(n)).params&&(n.params=function Tge(n){return n?vD(n):null}(n.params)):n={},n}function n3(n,t,e){return{duration:n,delay:t,easing:e}}function i3(n,t,e,i,r,s,a=null,c=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:c}}class WM{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Sge=new RegExp(":enter","g"),Pge=new RegExp(":leave","g");function r3(n,t,e,i,r,s=new Map,a=new Map,c,h,p=[]){return(new kge).buildKeyframes(n,t,e,i,r,s,a,c,h,p)}class kge{buildKeyframes(t,e,i,r,s,a,c,h,p,v=[]){p=p||new WM;const b=new o3(t,e,p,r,s,v,[]);b.options=h;const D=h.delay?Tp(h.delay):0;b.currentTimeline.delayNextStep(D),b.currentTimeline.setStyles([a],null,b.errors,h),au(this,i,b);const P=b.timelines.filter(R=>R.containsAnimation());if(P.length&&c.size){let R;for(let F=P.length-1;F>=0;F--){const V=P[F];if(V.element===e){R=V;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([c],null,b.errors,h)}return P.length?P.map(R=>R.buildKeyframes()):[i3(e,[],[],[],0,D,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,a=this._visitSubInstructions(i,r,r.options);s!=a&&e.transformIntoNewTimeline(a)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const a="number"==typeof s?s:Tp(wD(s,r?.params??{},e.errors));i.delayNextStep(a)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const a=null!=i.duration?Tp(i.duration):null,c=null!=i.delay?Tp(i.delay):null;return 0!==a&&t.forEach(h=>{const p=e.appendInstructionToTimeline(h,a,c);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),au(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=$M);const a=Tp(s.delay);r.delayNextStep(a)}t.steps.length&&(t.steps.forEach(a=>au(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Tp(t.options.delay):0;t.steps.forEach(a=>{const c=e.createSubContext(t.options);s&&c.delayNextStep(s),au(this,a,c),r=Math.max(r,c.currentTimeline.currentTime),i.push(c.currentTimeline)}),i.forEach(a=>e.currentTimeline.mergeTimelineCollectedStyles(a)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return BM(e.params?wD(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,c=e.createSubContext().currentTimeline;c.easing=i.easing,t.styles.forEach(h=>{c.forwardTime((h.offset||0)*s),c.setStyles(h.styles,h.easing,e.errors,e.options),c.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(c),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Tp(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=$M);let a=i;const c=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=c.length;let h=null;c.forEach((p,v)=>{e.currentQueryIndex=v;const b=e.createSubContext(t.options,p);s&&b.delayNextStep(s),p===e.element&&(h=b.currentTimeline),au(this,t.animation,b),b.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,b.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),h&&(e.currentTimeline.mergeTimelineCollectedStyles(h),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,a=Math.abs(s.duration),c=a*(e.currentQueryTotal-1);let h=a*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=c-h;break;case"full":h=i.currentStaggerTime}const v=e.currentTimeline;h&&v.delayNextStep(h);const b=v.currentTime;au(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-b+(r.startTime-i.currentTimeline.startTime)}}const $M={};class o3{constructor(t,e,i,r,s,a,c,h){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$M,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new GM(this._driver,e,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Tp(i.duration)),null!=i.delay&&(r.delay=Tp(i.delay));const s=i.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(c=>{(!e||!a.hasOwnProperty(c))&&(a[c]=wD(s[c],a,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new o3(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=$M,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Oge(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,a){let c=[];if(r&&c.push(this.element),t.length>0){t=(t=t.replace(Sge,"."+this._enterClassName)).replace(Pge,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=i);0!==i&&(p=i<0?p.slice(p.length+i,p.length):p.slice(0,i)),c.push(...p)}return!s&&0==c.length&&a.push(function Fpe(n){return new o.vHH(3014,!1)}()),c}}class GM{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new GM(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Cp),this._currentKeyframe.set(e,Cp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},a=function Rge(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Cp)}else vm(r,e)}),e}(t,this._globalTimelineStyles);for(let[c,h]of a){const p=wD(h,s,i);this._pendingStyles.set(c,p),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??Cp),this._updateStyle(c,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((c,h)=>{const p=vm(c,new Map,this._backFill);p.forEach((v,b)=>{v===zU?t.add(b):v===Cp&&e.add(b)}),i||p.set("offset",h/this.duration),r.push(p)});const s=t.size?VM(t.values()):[],a=e.size?VM(e.values()):[];if(i){const c=r[0],h=new Map(c);c.set("offset",0),h.set("offset",1),r=[c,h]}return i3(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}}class Oge extends GM{constructor(t,e,i,r,s,a,c=!1){super(t,e,a.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],a=i+e,c=e/a,h=vm(t[0]);h.set("offset",0),s.push(h);const p=vm(t[0]);p.set("offset",X$(c)),s.push(p);const v=t.length-1;for(let b=1;b<=v;b++){let D=vm(t[b]);const P=D.get("offset");D.set("offset",X$((e+P*i)/a)),s.push(D)}i=a,e=0,r="",t=s}return i3(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function X$(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class s3{}const Nge=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Lge extends s3{normalizePropertyName(t,e){return e3(t)}normalizeStyleValue(t,e,i,r){let s="";const a=i.toString().trim();if(Nge.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const c=i.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&r.push(function xpe(n,t){return new o.vHH(3005,!1)}())}return a+s}}function e7(n,t,e,i,r,s,a,c,h,p,v,b,D){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:a,timelines:c,queriedElements:h,preStyleProps:p,postStyleProps:v,totalTime:b,errors:D}}const a3={};class t7{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Fge(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,a,c,h,p,v){const b=[],D=this.ast.options&&this.ast.options.params||a3,R=this.buildStyles(i,c&&c.params||a3,b),F=h&&h.params||a3,V=this.buildStyles(r,F,b),Q=new Set,te=new Map,re=new Map,de="void"===r,_e={params:Uge(F,D),delay:this.ast.options?.delay},ue=v?[]:r3(t,e,this.ast.animation,s,a,R,V,_e,p,b);let pe=0;if(ue.forEach(et=>{pe=Math.max(et.duration+et.delay,pe)}),b.length)return e7(e,this._triggerName,i,r,de,R,V,[],[],te,re,pe,b);ue.forEach(et=>{const bt=et.element,at=su(te,bt,new Set);et.preStyleProps.forEach(Tn=>at.add(Tn));const ot=su(re,bt,new Set);et.postStyleProps.forEach(Tn=>ot.add(Tn)),bt!==e&&Q.add(bt)});const Le=VM(Q.values());return e7(e,this._triggerName,i,r,de,R,V,ue,Le,te,re,pe)}}function Uge(n,t){const e=vD(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class Bge{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=vD(this.defaultParams);return Object.keys(t).forEach(s=>{const a=t[s];null!==a&&(r[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{a&&(a=wD(a,r,e));const h=this.normalizer.normalizePropertyName(c,e);a=this.normalizer.normalizeStyleValue(c,h,a,e),i.set(c,a)})}),i}}class Zge{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Bge(r.style,r.options&&r.options.params||{},i))}),n7(this.states,"true","1"),n7(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new t7(t,r,this.states))}),this.fallbackTransition=function zge(n,t,e){return new t7(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,c)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(a=>a.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function n7(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Hge=new WM;class qge{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],r=[],s=t3(this._driver,e,i,r);if(i.length)throw function qpe(n){return new o.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=R$(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let a;const c=new Map;if(s?(a=r3(this._driver,e,s,KU,LM,new Map,new Map,i,Hge,r),a.forEach(v=>{const b=su(c,v.element,new Map);v.postStyleProps.forEach(D=>b.set(D,null))})):(r.push(function jpe(){return new o.vHH(3300,!1)}()),a=[]),r.length)throw function Wpe(n){return new o.vHH(3504,!1)}();c.forEach((v,b)=>{v.forEach((D,P)=>{v.set(P,this._driver.computeStyle(b,P,Cp))})});const p=_m(a.map(v=>{const b=c.get(v.element);return this._buildPlayer(v,new Map,b)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function $pe(n){return new o.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=WU(e,"","","");return qU(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const i7="ng-animate-queued",l3="ng-animate-disabled",Yge=[],r7={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kge={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yu="__ng_removed";class c3{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function eme(n){return n??null}(i?t.value:t),i){const s=vD(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const bD="void",u3=new c3(bD);class Qge{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ku(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Gpe(n,t){return new o.vHH(3302,!1)}();if(null==i||0==i.length)throw function Ype(n){return new o.vHH(3303,!1)}();if(!function tme(n){return"start"==n||"done"==n}(i))throw function Kpe(n,t){return new o.vHH(3400,!1)}();const s=su(this._elementListeners,t,[]),a={name:e,phase:i,callback:r};s.push(a);const c=su(this._engine.statesByElement,t,new Map);return c.has(e)||(Ku(t,FM),Ku(t,FM+"-"+e),c.set(e,u3)),()=>{this._engine.afterFlush(()=>{const h=s.indexOf(a);h>=0&&s.splice(h,1),this._triggers.has(e)||c.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Qpe(n){return new o.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),a=new d3(this.id,e,t);let c=this._engine.statesByElement.get(t);c||(Ku(t,FM),Ku(t,FM+"-"+e),this._engine.statesByElement.set(t,c=new Map));let h=c.get(e);const p=new c3(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&h&&p.absorbOptions(h.options),c.set(e,p),h||(h=u3),p.value!==bD&&h.value===p.value){if(!function rme(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(h.params,p.params)){const F=[],V=s.matchStyles(h.value,h.params,F),Q=s.matchStyles(p.value,p.params,F);F.length?this._engine.reportError(F):this._engine.afterFlush(()=>{Sv(t,V),lf(t,Q)})}return}const D=su(this._engine.playersByElement,t,[]);D.forEach(F=>{F.namespaceId==this.id&&F.triggerName==e&&F.queued&&F.destroy()});let P=s.matchTransition(h.value,p.value,t,p.params),R=!1;if(!P){if(!r)return;P=s.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:h,toState:p,player:a,isFallbackTransition:R}),R||(Ku(t,i7),a.onStart(()=>{mw(t,i7)})),a.onDone(()=>{let F=this.players.indexOf(a);F>=0&&this.players.splice(F,1);const V=this._engine.playersByElement.get(t);if(V){let Q=V.indexOf(a);Q>=0&&V.splice(Q,1)}}),this.players.push(a),D.push(a),a}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,UM,!0);i.forEach(r=>{if(r[Yu])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),a=new Map;if(s){const c=[];if(s.forEach((h,p)=>{if(a.set(p,h.value),this._triggers.has(p)){const v=this.trigger(t,p,bD,r);v&&c.push(v)}}),c.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,a),i&&_m(c).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const a=s.name;if(r.has(a))return;r.add(a);const h=this._triggers.get(a).fallbackTransition,p=i.get(a)||u3,v=new c3(bD),b=new d3(this.id,a,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:a,transition:h,fromState:p,toState:v,player:b,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let a=t;for(;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Yu];(!s||s===r7)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Ku(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,a=this._elementListeners.get(s);a&&a.forEach(c=>{if(c.name==i.triggerName){const h=WU(s,i.triggerName,i.fromState.value,i.toState.value);h._data=t,qU(i.player,c.phase,h,c.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,a=r.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class Jge{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Qge(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,c=this.driver.getParentElement(e);for(;c;){const h=r.get(c);if(h){const p=i.indexOf(h);i.splice(p+1,0,t),a=!0;break}c=this.driver.getParentElement(c)}a||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(YM(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!YM(e))return;const s=e[Yu];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(e);a>=0&&this.collectedLeaveElements.splice(a,1)}if(t){const a=this._fetchNamespace(t);a&&a.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ku(t,l3)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),mw(t,l3))}removeNode(t,e,i,r){if(YM(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const a=this.namespacesByHostElement.get(e);a&&a.id!==t&&a.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Yu]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return YM(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,UM,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,QU,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return _m(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Yu];if(e&&e.setForRemoval){if(t[Yu]=r7,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(l3)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ku(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?_m(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function Jpe(n){return new o.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new WM,r=[],s=new Map,a=[],c=new Map,h=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(Ct=>{v.add(Ct);const St=this.driver.query(Ct,".ng-animate-queued",!0);for(let nn=0;nn<St.length;nn++)v.add(St[nn])});const b=this.bodyNode,D=Array.from(this.statesByElement.keys()),P=a7(D,this.collectedEnterElements),R=new Map;let F=0;P.forEach((Ct,St)=>{const nn=KU+F++;R.set(St,nn),Ct.forEach($t=>Ku($t,nn))});const V=[],Q=new Set,te=new Set;for(let Ct=0;Ct<this.collectedLeaveElements.length;Ct++){const St=this.collectedLeaveElements[Ct],nn=St[Yu];nn&&nn.setForRemoval&&(V.push(St),Q.add(St),nn.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach($t=>Q.add($t)):te.add(St))}const re=new Map,de=a7(D,Array.from(Q));de.forEach((Ct,St)=>{const nn=LM+F++;re.set(St,nn),Ct.forEach($t=>Ku($t,nn))}),t.push(()=>{P.forEach((Ct,St)=>{const nn=R.get(St);Ct.forEach($t=>mw($t,nn))}),de.forEach((Ct,St)=>{const nn=re.get(St);Ct.forEach($t=>mw($t,nn))}),V.forEach(Ct=>{this.processLeaveNode(Ct)})});const _e=[],ue=[];for(let Ct=this._namespaceList.length-1;Ct>=0;Ct--)this._namespaceList[Ct].drainQueuedTransitions(e).forEach(nn=>{const $t=nn.player,Ni=nn.element;if(_e.push($t),this.collectedEnterElements.length){const ds=Ni[Yu];if(ds&&ds.setForMove){if(ds.previousTriggersValues&&ds.previousTriggersValues.has(nn.triggerName)){const Ll=ds.previousTriggersValues.get(nn.triggerName),Pa=this.statesByElement.get(nn.element);if(Pa&&Pa.has(nn.triggerName)){const Cw=Pa.get(nn.triggerName);Cw.value=Ll,Pa.set(nn.triggerName,Cw)}}return void $t.destroy()}}const nr=!b||!this.driver.containsElement(b,Ni),jr=re.get(Ni),ca=R.get(Ni),ki=this._buildInstruction(nn,i,ca,jr,nr);if(ki.errors&&ki.errors.length)return void ue.push(ki);if(nr)return $t.onStart(()=>Sv(Ni,ki.fromStyles)),$t.onDestroy(()=>lf(Ni,ki.toStyles)),void r.push($t);if(nn.isFallbackTransition)return $t.onStart(()=>Sv(Ni,ki.fromStyles)),$t.onDestroy(()=>lf(Ni,ki.toStyles)),void r.push($t);const Ma=[];ki.timelines.forEach(ds=>{ds.stretchStartingKeyframe=!0,this.disabledNodes.has(ds.element)||Ma.push(ds)}),ki.timelines=Ma,i.append(Ni,ki.timelines),a.push({instruction:ki,player:$t,element:Ni}),ki.queriedElements.forEach(ds=>su(c,ds,[]).push($t)),ki.preStyleProps.forEach((ds,Ll)=>{if(ds.size){let Pa=h.get(Ll);Pa||h.set(Ll,Pa=new Set),ds.forEach((Cw,Tw)=>Pa.add(Tw))}}),ki.postStyleProps.forEach((ds,Ll)=>{let Pa=p.get(Ll);Pa||p.set(Ll,Pa=new Set),ds.forEach((Cw,Tw)=>Pa.add(Tw))})});if(ue.length){const Ct=[];ue.forEach(St=>{Ct.push(function Xpe(n,t){return new o.vHH(3505,!1)}())}),_e.forEach(St=>St.destroy()),this.reportError(Ct)}const pe=new Map,Le=new Map;a.forEach(Ct=>{const St=Ct.element;i.has(St)&&(Le.set(St,St),this._beforeAnimationBuild(Ct.player.namespaceId,Ct.instruction,pe))}),r.forEach(Ct=>{const St=Ct.element;this._getPreviousPlayers(St,!1,Ct.namespaceId,Ct.triggerName,null).forEach($t=>{su(pe,St,[]).push($t),$t.destroy()})});const et=V.filter(Ct=>c7(Ct,h,p)),bt=new Map;s7(bt,this.driver,te,p,Cp).forEach(Ct=>{c7(Ct,h,p)&&et.push(Ct)});const ot=new Map;P.forEach((Ct,St)=>{s7(ot,this.driver,new Set(Ct),h,zU)}),et.forEach(Ct=>{const St=bt.get(Ct),nn=ot.get(Ct);bt.set(Ct,new Map([...Array.from(St?.entries()??[]),...Array.from(nn?.entries()??[])]))});const Tn=[],Jn=[],wi={};a.forEach(Ct=>{const{element:St,player:nn,instruction:$t}=Ct;if(i.has(St)){if(v.has(St))return nn.onDestroy(()=>lf(St,$t.toStyles)),nn.disabled=!0,nn.overrideTotalTime($t.totalTime),void r.push(nn);let Ni=wi;if(Le.size>1){let jr=St;const ca=[];for(;jr=jr.parentNode;){const ki=Le.get(jr);if(ki){Ni=ki;break}ca.push(jr)}ca.forEach(ki=>Le.set(ki,Ni))}const nr=this._buildAnimation(nn.namespaceId,$t,pe,s,ot,bt);if(nn.setRealPlayer(nr),Ni===wi)Tn.push(nn);else{const jr=this.playersByElement.get(Ni);jr&&jr.length&&(nn.parentPlayer=_m(jr)),r.push(nn)}}else Sv(St,$t.fromStyles),nn.onDestroy(()=>lf(St,$t.toStyles)),Jn.push(nn),v.has(St)&&r.push(nn)}),Jn.forEach(Ct=>{const St=s.get(Ct.element);if(St&&St.length){const nn=_m(St);Ct.setRealPlayer(nn)}}),r.forEach(Ct=>{Ct.parentPlayer?Ct.syncPlayerEvents(Ct.parentPlayer):Ct.destroy()});for(let Ct=0;Ct<V.length;Ct++){const St=V[Ct],nn=St[Yu];if(mw(St,LM),nn&&nn.hasAnimation)continue;let $t=[];if(c.size){let nr=c.get(St);nr&&nr.length&&$t.push(...nr);let jr=this.driver.query(St,QU,!0);for(let ca=0;ca<jr.length;ca++){let ki=c.get(jr[ca]);ki&&ki.length&&$t.push(...ki)}}const Ni=$t.filter(nr=>!nr.destroyed);Ni.length?nme(this,St,Ni):this.processLeaveNode(St)}return V.length=0,Tn.forEach(Ct=>{this.players.push(Ct),Ct.onDone(()=>{Ct.destroy();const St=this.players.indexOf(Ct);this.players.splice(St,1)}),Ct.play()}),Tn}elementContainsData(t,e){let i=!1;const r=e[Yu];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let a=[];if(e){const c=this.playersByQueriedElement.get(t);c&&(a=c)}else{const c=this.playersByElement.get(t);if(c){const h=!s||s==bD;c.forEach(p=>{p.queued||!h&&p.triggerName!=r||a.push(p)})}}return(i||r)&&(a=a.filter(c=>!(i&&i!=c.namespaceId||r&&r!=c.triggerName))),a}_beforeAnimationBuild(t,e,i){const s=e.element,a=e.isRemovalTransition?void 0:t,c=e.isRemovalTransition?void 0:e.triggerName;for(const h of e.timelines){const p=h.element,v=p!==s,b=su(i,p,[]);this._getPreviousPlayers(p,v,a,c,e.toState).forEach(P=>{const R=P.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),P.destroy(),b.push(P)})}Sv(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,a){const c=e.triggerName,h=e.element,p=[],v=new Set,b=new Set,D=e.timelines.map(R=>{const F=R.element;v.add(F);const V=F[Yu];if(V&&V.removedBeforeQueried)return new _D(R.duration,R.delay);const Q=F!==h,te=function ime(n){const t=[];return l7(n,t),t}((i.get(F)||Yge).map(pe=>pe.getRealPlayer())).filter(pe=>!!pe.element&&pe.element===F),re=s.get(F),de=a.get(F),_e=R$(0,this._normalizer,0,R.keyframes,re,de),ue=this._buildPlayer(R,_e,te);if(R.subTimeline&&r&&b.add(F),Q){const pe=new d3(t,c,F);pe.setRealPlayer(ue),p.push(pe)}return ue});p.forEach(R=>{su(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>function Xge(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,R.element,R))}),v.forEach(R=>Ku(R,H$));const P=_m(D);return P.onDestroy(()=>{v.forEach(R=>mw(R,H$)),lf(h,e.toStyles)}),b.forEach(R=>{su(r,R,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new _D(t.duration,t.delay)}}class d3{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new _D,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>qU(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){su(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function YM(n){return n&&1===n.nodeType}function o7(n,t){const e=n.style.display;return n.style.display=t??"none",e}function s7(n,t,e,i,r){const s=[];e.forEach(h=>s.push(o7(h)));const a=[];i.forEach((h,p)=>{const v=new Map;h.forEach(b=>{const D=t.computeStyle(p,b,r);v.set(b,D),(!D||0==D.length)&&(p[Yu]=Kge,a.push(p))}),n.set(p,v)});let c=0;return e.forEach(h=>o7(h,s[c++])),a}function a7(n,t){const e=new Map;if(n.forEach(c=>e.set(c,[])),0==t.length)return e;const i=1,r=new Set(t),s=new Map;function a(c){if(!c)return i;let h=s.get(c);if(h)return h;const p=c.parentNode;return h=e.has(p)?p:r.has(p)?i:a(p),s.set(c,h),h}return t.forEach(c=>{const h=a(c);h!==i&&e.get(h).push(c)}),e}function Ku(n,t){n.classList?.add(t)}function mw(n,t){n.classList?.remove(t)}function nme(n,t,e){_m(e).onDone(()=>n.processLeaveNode(t))}function l7(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof k$?l7(i.players,t):t.push(i)}}function c7(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class KM{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Jge(t,e,i),this._timelineEngine=new qge(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const a=t+"-"+r;let c=this._triggerCache[a];if(!c){const h=[],p=[],v=t3(this._driver,s,h,p);if(h.length)throw function zpe(n,t){return new o.vHH(3404,!1)}();c=function Vge(n,t,e){return new Zge(n,t,e)}(r,v,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(e,r,c)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,a]=N$(i);this._timelineEngine.command(s,e,a,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[a,c]=N$(i);return this._timelineEngine.listen(a,e,c,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let sme=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&lf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lf(this._element,this._initialStyles),this._endStyles&&(lf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sv(this._element,this._endStyles),this._endStyles=null),lf(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function h3(n){let t=null;return n.forEach((e,i)=>{(function ame(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class u7{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:Y$(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class lme{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return B$(t,e)}getParentElement(t){return GU(t)}query(t,e,i){return V$(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,a=[]){const h={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(h.easing=s);const p=new Map,v=a.filter(P=>P instanceof u7);(function hge(n,t){return 0===n||0===t})(i,r)&&v.forEach(P=>{P.currentSnapshot.forEach((R,F)=>p.set(F,R))});let b=function lge(n){return n.length?n[0]instanceof Map?n:n.map(t=>q$(t)):[]}(e).map(P=>vm(P));b=function fge(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,a)=>{i.has(a)||r.push(a),i.set(a,s)}),r.length)for(let s=1;s<t.length;s++){let a=t[s];r.forEach(c=>a.set(c,Y$(n,c)))}}return t}(t,b,p);const D=function ome(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=h3(t[0]),t.length>1&&(i=h3(t[t.length-1]))):t instanceof Map&&(e=h3(t)),e||i?new sme(n,e,i):null}(t,b);return new u7(t,b,h,D)}}let cme=(()=>{class n extends x${constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?I$(e):e;return d7(this._renderer,null,i,"register",[r]),new ume(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(Ee))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ume extends ype{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new dme(this._id,t,e||{},this._renderer)}}class dme{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return d7(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function d7(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const h7="@.disabled";let hme=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,a)=>{const c=a?.parentNode(s);c&&a.removeChild(c,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let v=this._rendererCache.get(s);return v||(v=new f7("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,v)),v}const a=i.id,c=i.id+"-"+this._currentId;this._currentId++,this.engine.register(c,e);const h=v=>{Array.isArray(v)?v.forEach(h):this.engine.registerTrigger(a,c,e,v.name,v)};return i.data.animation.forEach(h),new fme(this,c,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,c]=s;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(KM),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class f7{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==h7?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class fme extends f7{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==h7?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function pme(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function gme(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,a,c=>{this.factory.scheduleListenerCallback(c._data||-1,i,c)})}return this.delegate.listen(t,e,i)}}let mme=(()=>{class n extends KM{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ee),o.LFG(YU),o.LFG(s3),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const p7=[{provide:x$,useClass:cme},{provide:s3,useFactory:function _me(){return new Lge}},{provide:KM,useClass:mme},{provide:o.FYo,useFactory:function vme(n,t,e){return new hme(n,t,e)},deps:[ke,KM,o.R0b]}],f3=[{provide:YU,useFactory:()=>new lme},{provide:o.QbO,useValue:"BrowserAnimations"},...p7],g7=[{provide:YU,useClass:Z$},{provide:o.QbO,useValue:"NoopAnimations"},...p7];let yme=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?g7:f3}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:f3,imports:[kc]}),n})();var p3=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],_w={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},g3={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const m3=g3;var yc=function(n,t){return void 0===t&&(t=2),("000"+n).slice(-1*t)},Qu=function(n){return!0===n?1:0};function m7(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var _3=function(n){return n instanceof Array?n:[n]};function Nl(n,t,e){if(!0===e)return n.classList.add(t);n.classList.remove(t)}function tr(n,t,e){var i=window.document.createElement(n);return e=e||"",i.className=t=t||"",void 0!==e&&(i.textContent=e),i}function JM(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function _7(n,t){return t(n)?n:n.parentNode?_7(n.parentNode,t):void 0}function XM(n,t){var e=tr("div","numInputWrapper"),i=tr("input","numInput "+n),r=tr("span","arrowUp"),s=tr("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var a in t)i.setAttribute(a,t[a]);return e.appendChild(i),e.appendChild(r),e.appendChild(s),e}function lu(n){try{return"function"==typeof n.composedPath?n.composedPath()[0]:n.target}catch{return n.target}}var v3=function(){},eP=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},wme={D:v3,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*Qu(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(1e3*parseFloat(t))},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+7*(i-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:v3,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:v3,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},Pv={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},CD={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[CD.w(n,t,e)]},F:function(n,t,e){return eP(CD.n(n,t,e)-1,!1,t)},G:function(n,t,e){return yc(CD.h(n,t,e))},H:function(n){return yc(n.getHours())},J:function(n,t){return void 0!==t.ordinal?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[Qu(n.getHours()>11)]},M:function(n,t){return eP(n.getMonth(),!0,t)},S:function(n){return yc(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return yc(n.getFullYear(),4)},d:function(n){return yc(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return yc(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return yc(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},v7=function(n){var t=n.config,e=void 0===t?_w:t,i=n.l10n,r=void 0===i?g3:i,s=n.isMobile,a=void 0!==s&&s;return function(c,h,p){var v=p||r;return void 0===e.formatDate||a?h.split("").map(function(b,D,P){return CD[b]&&"\\"!==P[D-1]?CD[b](c,v,e):"\\"!==b?b:""}).join(""):e.formatDate(c,h,v)}},y3=function(n){var t=n.config,e=void 0===t?_w:t,i=n.l10n,r=void 0===i?g3:i;return function(s,a,c,h){if(0===s||s){var v,p=h||r,b=s;if(s instanceof Date)v=new Date(s.getTime());else if("string"!=typeof s&&void 0!==s.toFixed)v=new Date(s);else if("string"==typeof s){var D=a||(e||_w).dateFormat,P=String(s).trim();if("today"===P)v=new Date,c=!0;else if(e&&e.parseDate)v=e.parseDate(s,D);else if(/Z$/.test(P)||/GMT$/.test(P))v=new Date(s);else{for(var R=void 0,F=[],V=0,Q=0,te="";V<D.length;V++){var re=D[V],de="\\"===re;if(Pv[re]&&"\\"!==D[V-1]&&!de){te+=Pv[re];var ue=new RegExp(te).exec(s);ue&&(R=!0)&&F["Y"!==re?"push":"unshift"]({fn:wme[re],val:ue[++Q]})}else de||(te+=".")}v=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),F.forEach(function(pe){return v=(0,pe.fn)(v,pe.val,p)||v}),v=R?v:void 0}}return v instanceof Date&&!isNaN(v.getTime())?(!0===c&&v.setHours(0,0,0,0),v):void e.errorHandler(new Error("Invalid date provided: "+b))}}};function cu(n,t,e){return void 0===e&&(e=!0),!1!==e?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var bme=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},w3=function(n,t,e){return 3600*n+60*t+e},Cme=function(n){var t=Math.floor(n/3600),e=(n-3600*t)/60;return[t,e,n-3600*t-60*e]},Tme={DAY:864e5};function b3(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(void 0!==n.minDate){var r=n.minDate.getHours(),s=n.minDate.getMinutes(),a=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<s&&(e=s),t===r&&e===s&&i<a&&(i=n.minDate.getSeconds())}if(void 0!==n.maxDate){var c=n.maxDate.getHours(),h=n.maxDate.getMinutes();(t=Math.min(t,c))===c&&(e=Math.min(h,e)),t===c&&e===h&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}z(8323);var tl=function(){return tl=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},tl.apply(this,arguments)},y7=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var i=Array(n),r=0;for(t=0;t<e;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,r++)i[r]=s[a];return i},Eme=300;function Dme(n,t){var e={config:tl(tl({},_w),Ts.defaultConfig),l10n:m3};function s(){var J;return(null===(J=e.calendarContainer)||void 0===J?void 0:J.getRootNode()).activeElement||document.activeElement}function a(J){return J.bind(e)}function c(){var J=e.config;!1===J.weekNumbers&&1===J.showMonths||!0!==J.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var ie=(e.days.offsetWidth+1)*J.showMonths;e.daysContainer.style.width=ie+"px",e.calendarContainer.style.width=ie+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function h(J){if(0===e.selectedDates.length){var ie=void 0===e.config.minDate||cu(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),Ae=b3(e.config);ie.setHours(Ae.hours,Ae.minutes,Ae.seconds,ie.getMilliseconds()),e.selectedDates=[ie],e.latestSelectedDateObj=ie}void 0!==J&&"blur"!==J.type&&function rye(J){J.preventDefault();var ie="keydown"===J.type,Ae=lu(J),Ge=Ae;void 0!==e.amPM&&Ae===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Qu(e.amPM.textContent===e.l10n.amPM[0])]);var At=parseFloat(Ge.getAttribute("min")),Gt=parseFloat(Ge.getAttribute("max")),hi=parseFloat(Ge.getAttribute("step")),mn=parseInt(Ge.value,10),un=mn+hi*(J.delta||(ie?38===J.which?1:-1:0));if(typeof Ge.value<"u"&&2===Ge.value.length){var Gn=Ge===e.hourElement,kr=Ge===e.minuteElement;un<At?(un=Gt+un+Qu(!Gn)+(Qu(Gn)&&Qu(!e.amPM)),kr&&de(void 0,-1,e.hourElement)):un>Gt&&(un=Ge===e.hourElement?un-Gt-Qu(!e.amPM):At,kr&&de(void 0,1,e.hourElement)),e.amPM&&Gn&&(1===hi?un+mn===23:Math.abs(un-mn)>hi)&&(e.amPM.textContent=e.l10n.amPM[Qu(e.amPM.textContent===e.l10n.amPM[0])]),Ge.value=yc(un)}}(J);var Ge=e._input.value;b(),Ep(),e._input.value!==Ge&&e._debouncedChange()}function b(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var J=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,ie=(parseInt(e.minuteElement.value,10)||0)%60,Ae=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(J=function p(J,ie){return J%12+12*Qu(ie===e.l10n.amPM[1])}(J,e.amPM.textContent));var Ge=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===cu(e.latestSelectedDateObj,e.config.minDate,!0),At=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===cu(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var Gt=w3(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),hi=w3(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),mn=w3(J,ie,Ae);if(mn>hi&&mn<Gt){var bi=Cme(Gt);J=bi[0],ie=bi[1],Ae=bi[2]}}else{if(At){var un=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(J=Math.min(J,un.getHours()))===un.getHours()&&(ie=Math.min(ie,un.getMinutes())),ie===un.getMinutes()&&(Ae=Math.min(Ae,un.getSeconds()))}if(Ge){var Gn=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(J=Math.max(J,Gn.getHours()))===Gn.getHours()&&ie<Gn.getMinutes()&&(ie=Gn.getMinutes()),ie===Gn.getMinutes()&&(Ae=Math.max(Ae,Gn.getSeconds()))}}P(J,ie,Ae)}}function D(J){var ie=J||e.latestSelectedDateObj;ie&&ie instanceof Date&&P(ie.getHours(),ie.getMinutes(),ie.getSeconds())}function P(J,ie,Ae){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(J%24,ie,Ae||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=yc(e.config.time_24hr?J:(12+J)%12+12*Qu(J%12==0)),e.minuteElement.value=yc(ie),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[Qu(J>=12)]),void 0!==e.secondElement&&(e.secondElement.value=yc(Ae)))}function R(J){var ie=lu(J),Ae=parseInt(ie.value)+(J.delta||0);(Ae/1e3>1||"Enter"===J.key&&!/[^\d]/.test(Ae.toString()))&&ds(Ae)}function F(J,ie,Ae,Ge){return ie instanceof Array?ie.forEach(function(At){return F(J,At,Ae,Ge)}):J instanceof Array?J.forEach(function(At){return F(At,ie,Ae,Ge)}):(J.addEventListener(ie,Ae,Ge),void e._handlers.push({remove:function(){return J.removeEventListener(ie,Ae,Ge)}}))}function V(){Lo("onChange")}function te(J,ie){var Ae=void 0!==J?e.parseDate(J):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Ge=e.currentYear,At=e.currentMonth;try{void 0!==Ae&&(e.currentYear=Ae.getFullYear(),e.currentMonth=Ae.getMonth())}catch(Gt){Gt.message="Invalid date supplied: "+Ae,e.config.errorHandler(Gt)}ie&&e.currentYear!==Ge&&(Lo("onYearChange"),Tn()),ie&&(e.currentYear!==Ge||e.currentMonth!==At)&&Lo("onMonthChange"),e.redraw()}function re(J){var ie=lu(J);~ie.className.indexOf("arrow")&&de(J,ie.classList.contains("arrowUp")?1:-1)}function de(J,ie,Ae){var Ge=J&&lu(J),At=Ae||Ge&&Ge.parentNode&&Ge.parentNode.firstChild,Gt=B3("increment");Gt.delta=ie,At&&At.dispatchEvent(Gt)}function ue(J,ie,Ae,Ge){var At=Ll(ie,!0),Gt=tr("span",J,ie.getDate().toString());return Gt.dateObj=ie,Gt.$i=Ge,Gt.setAttribute("aria-label",e.formatDate(ie,e.config.ariaDateFormat)),-1===J.indexOf("hidden")&&0===cu(ie,e.now)&&(e.todayDateElem=Gt,Gt.classList.add("today"),Gt.setAttribute("aria-current","date")),At?(Gt.tabIndex=-1,V3(ie)&&(Gt.classList.add("selected"),e.selectedDateElem=Gt,"range"===e.config.mode&&(Nl(Gt,"startRange",e.selectedDates[0]&&0===cu(ie,e.selectedDates[0],!0)),Nl(Gt,"endRange",e.selectedDates[1]&&0===cu(ie,e.selectedDates[1],!0)),"nextMonthDay"===J&&Gt.classList.add("inRange")))):Gt.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function nye(J){return!("range"!==e.config.mode||e.selectedDates.length<2)&&cu(J,e.selectedDates[0])>=0&&cu(J,e.selectedDates[1])<=0}(ie)&&!V3(ie)&&Gt.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==J&&Ge%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(ie)+"</span>"),Lo("onDayCreate",Gt),Gt}function pe(J){J.focus(),"range"===e.config.mode&&cP(J)}function Le(J){for(var Ae=J>0?e.config.showMonths:-1,Ge=J>0?0:e.config.showMonths-1;Ge!=Ae;Ge+=J)for(var At=e.daysContainer.children[Ge],hi=J>0?At.children.length:-1,mn=J>0?0:At.children.length-1;mn!=hi;mn+=J){var bi=At.children[mn];if(-1===bi.className.indexOf("hidden")&&Ll(bi.dateObj))return bi}}function bt(J,ie){var Ae=s(),Ge=Pa(Ae||document.body),At=void 0!==J?J:Ge?Ae:void 0!==e.selectedDateElem&&Pa(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&Pa(e.todayDateElem)?e.todayDateElem:Le(ie>0?1:-1);void 0===At?e._input.focus():Ge?function et(J,ie){for(var Ae=-1===J.className.indexOf("Month")?J.dateObj.getMonth():e.currentMonth,Ge=ie>0?e.config.showMonths:-1,At=ie>0?1:-1,Gt=Ae-e.currentMonth;Gt!=Ge;Gt+=At)for(var hi=e.daysContainer.children[Gt],bi=hi.children.length,un=Ae-e.currentMonth===Gt?J.$i+ie:ie<0?hi.children.length-1:0;un>=0&&un<bi&&un!=(ie>0?bi:-1);un+=At){var Gn=hi.children[un];if(-1===Gn.className.indexOf("hidden")&&Ll(Gn.dateObj)&&Math.abs(J.$i-un)>=Math.abs(ie))return pe(Gn)}e.changeMonth(At),bt(Le(At),0)}(At,ie):pe(At)}function at(J,ie){for(var Ae=(new Date(J,ie,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Ge=e.utils.getDaysInMonth((ie-1+12)%12,J),At=e.utils.getDaysInMonth(ie,J),Gt=window.document.createDocumentFragment(),hi=e.config.showMonths>1,mn=hi?"prevMonthDay hidden":"prevMonthDay",bi=hi?"nextMonthDay hidden":"nextMonthDay",un=Ge+1-Ae,Gn=0;un<=Ge;un++,Gn++)Gt.appendChild(ue("flatpickr-day "+mn,new Date(J,ie-1,un),0,Gn));for(un=1;un<=At;un++,Gn++)Gt.appendChild(ue("flatpickr-day",new Date(J,ie,un),0,Gn));for(var kr=At+1;kr<=42-Ae&&(1===e.config.showMonths||Gn%7!=0);kr++,Gn++)Gt.appendChild(ue("flatpickr-day "+bi,new Date(J,ie+1,kr%At),0,Gn));var cf=tr("div","dayContainer");return cf.appendChild(Gt),cf}function ot(){if(void 0!==e.daysContainer){JM(e.daysContainer),e.weekNumbers&&JM(e.weekNumbers);for(var J=document.createDocumentFragment(),ie=0;ie<e.config.showMonths;ie++){var Ae=new Date(e.currentYear,e.currentMonth,1);Ae.setMonth(e.currentMonth+ie),J.appendChild(at(Ae.getFullYear(),Ae.getMonth()))}e.daysContainer.appendChild(J),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&cP()}}function Tn(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var ie=0;ie<12;ie++)if(Ge=ie,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&Ge<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&Ge>e.config.maxDate.getMonth())){var Ae=tr("option","flatpickr-monthDropdown-month");Ae.value=new Date(e.currentYear,ie).getMonth().toString(),Ae.textContent=eP(ie,e.config.shorthandCurrentMonth,e.l10n),Ae.tabIndex=-1,e.currentMonth===ie&&(Ae.selected=!0),e.monthsDropdownContainer.appendChild(Ae)}}var Ge}function Jn(){var Ae,J=tr("div","flatpickr-month"),ie=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?Ae=tr("span","cur-month"):(e.monthsDropdownContainer=tr("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),F(e.monthsDropdownContainer,"change",function(hi){var mn=lu(hi),bi=parseInt(mn.value,10);e.changeMonth(bi-e.currentMonth),Lo("onMonthChange")}),Tn(),Ae=e.monthsDropdownContainer);var Ge=XM("cur-year",{tabindex:"-1"}),At=Ge.getElementsByTagName("input")[0];At.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&At.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(At.setAttribute("max",e.config.maxDate.getFullYear().toString()),At.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Gt=tr("div","flatpickr-current-month");return Gt.appendChild(Ae),Gt.appendChild(Ge),ie.appendChild(Gt),J.appendChild(ie),{container:J,yearElement:At,monthElement:Ae}}function wi(){JM(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var J=e.config.showMonths;J--;){var ie=Jn();e.yearElements.push(ie.yearElement),e.monthElements.push(ie.monthElement),e.monthNav.appendChild(ie.container)}e.monthNav.appendChild(e.nextMonthNav)}function nn(){e.weekdayContainer?JM(e.weekdayContainer):e.weekdayContainer=tr("div","flatpickr-weekdays");for(var J=e.config.showMonths;J--;){var ie=tr("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(ie)}return $t(),e.weekdayContainer}function $t(){if(e.weekdayContainer){var J=e.l10n.firstDayOfWeek,ie=y7(e.l10n.weekdays.shorthand);J>0&&J<ie.length&&(ie=y7(ie.splice(J,ie.length),ie.splice(0,J)));for(var Ae=e.config.showMonths;Ae--;)e.weekdayContainer.children[Ae].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+ie.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function nr(J,ie){void 0===ie&&(ie=!0);var Ae=ie?J:J-e.currentMonth;Ae<0&&!0===e._hidePrevMonthArrow||Ae>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=Ae,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Lo("onYearChange"),Tn()),ot(),Lo("onMonthChange"),hP())}function Ma(J){return e.calendarContainer.contains(J)}function uu(J){if(e.isOpen&&!e.config.inline){var ie=lu(J),Ae=Ma(ie),At=!(ie===e.input||ie===e.altInput||e.element.contains(ie)||J.path&&J.path.indexOf&&(~J.path.indexOf(e.input)||~J.path.indexOf(e.altInput))||Ae||Ma(J.relatedTarget)),Gt=!e.config.ignoredFocusElements.some(function(hi){return hi.contains(ie)});At&&Gt&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&h(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function ds(J){if(!(!J||e.config.minDate&&J<e.config.minDate.getFullYear()||e.config.maxDate&&J>e.config.maxDate.getFullYear())){var Ae=e.currentYear!==J;e.currentYear=J||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),Ae&&(e.redraw(),Lo("onYearChange"),Tn())}}function Ll(J,ie){var Ae;void 0===ie&&(ie=!0);var Ge=e.parseDate(J,void 0,ie);if(e.config.minDate&&Ge&&cu(Ge,e.config.minDate,void 0!==ie?ie:!e.minDateHasTime)<0||e.config.maxDate&&Ge&&cu(Ge,e.config.maxDate,void 0!==ie?ie:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===Ge)return!1;for(var At=!!e.config.enable,Gt=null!==(Ae=e.config.enable)&&void 0!==Ae?Ae:e.config.disable,hi=0,mn=void 0;hi<Gt.length;hi++){if("function"==typeof(mn=Gt[hi])&&mn(Ge))return At;if(mn instanceof Date&&void 0!==Ge&&mn.getTime()===Ge.getTime())return At;if("string"==typeof mn){var bi=e.parseDate(mn,void 0,!0);return bi&&bi.getTime()===Ge.getTime()?At:!At}if("object"==typeof mn&&void 0!==Ge&&mn.from&&mn.to&&Ge.getTime()>=mn.from.getTime()&&Ge.getTime()<=mn.to.getTime())return At}return!At}function Pa(J){return void 0!==e.daysContainer&&-1===J.className.indexOf("hidden")&&-1===J.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(J)}function Cw(J){var ie=J.target===e._input,Ae=e._input.value.trimEnd()!==Z3();ie&&Ae&&(!J.relatedTarget||!Ma(J.relatedTarget))&&e.setDate(e._input.value,!0,J.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Tw(J){var ie=lu(J),Ae=e.config.wrap?n.contains(ie):ie===e._input,Ge=e.config.allowInput,At=e.isOpen&&(!Ge||!Ae),Gt=e.config.inline&&Ae&&!Ge;if(13===J.keyCode&&Ae){if(Ge)return e.setDate(e._input.value,!0,ie===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),ie.blur();e.open()}else if(Ma(ie)||At||Gt){var hi=!!e.timeContainer&&e.timeContainer.contains(ie);switch(J.keyCode){case 13:hi?(J.preventDefault(),h(),U3()):sG(J);break;case 27:J.preventDefault(),U3();break;case 8:case 46:Ae&&!e.config.allowInput&&(J.preventDefault(),e.clear());break;case 37:case 39:if(hi||Ae)e.hourElement&&e.hourElement.focus();else{J.preventDefault();var mn=s();if(void 0!==e.daysContainer&&(!1===Ge||mn&&Pa(mn))){var bi=39===J.keyCode?1:-1;J.ctrlKey?(J.stopPropagation(),nr(bi),bt(Le(1),0)):bt(void 0,bi)}}break;case 38:case 40:J.preventDefault();var un=40===J.keyCode?1:-1;e.daysContainer&&void 0!==ie.$i||ie===e.input||ie===e.altInput?J.ctrlKey?(J.stopPropagation(),ds(e.currentYear-un),bt(Le(1),0)):hi||bt(void 0,7*un):ie===e.currentYearElement?ds(e.currentYear-un):e.config.enableTime&&(!hi&&e.hourElement&&e.hourElement.focus(),h(J),e._debouncedChange());break;case 9:if(hi){var Gn=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(du){return du}),kr=Gn.indexOf(ie);if(-1!==kr){var cf=Gn[kr+(J.shiftKey?-1:1)];J.preventDefault(),(cf||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(ie)&&J.shiftKey&&(J.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&ie===e.amPM)switch(J.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],b(),Ep();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],b(),Ep()}(Ae||Ma(ie))&&Lo("onKeyDown",J)}function cP(J,ie){if(void 0===ie&&(ie="flatpickr-day"),1===e.selectedDates.length&&(!J||J.classList.contains(ie)&&!J.classList.contains("flatpickr-disabled"))){for(var Ae=J?J.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Ge=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),At=Math.min(Ae,e.selectedDates[0].getTime()),Gt=Math.max(Ae,e.selectedDates[0].getTime()),hi=!1,mn=0,bi=0,un=At;un<Gt;un+=Tme.DAY)Ll(new Date(un),!0)||(hi=hi||un>At&&un<Gt,un<Ge&&(!mn||un>mn)?mn=un:un>Ge&&(!bi||un<bi)&&(bi=un));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+ie)).forEach(function(kr){var du=kr.dateObj.getTime(),kD=mn>0&&du<mn||bi>0&&du>bi;if(kD)return kr.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(Ew){kr.classList.remove(Ew)});hi&&!kD||(["startRange","inRange","endRange","notAllowed"].forEach(function(Ew){kr.classList.remove(Ew)}),void 0!==J&&(J.classList.add(Ae<=e.selectedDates[0].getTime()?"startRange":"endRange"),Ge<Ae&&du===Ge?kr.classList.add("startRange"):Ge>Ae&&du===Ge&&kr.classList.add("endRange"),du>=mn&&(0===bi||du<=bi)&&bme(du,Ge,Ae)&&kr.classList.add("inRange")))})}}function jve(){e.isOpen&&!e.config.static&&!e.config.inline&&uP()}function nG(J){return function(ie){var Ae=e.config["_"+J+"Date"]=e.parseDate(ie,e.config.dateFormat),Ge=e.config["_"+("min"===J?"max":"min")+"Date"];void 0!==Ae&&(e["min"===J?"minDateHasTime":"maxDateHasTime"]=Ae.getHours()>0||Ae.getMinutes()>0||Ae.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(At){return Ll(At)}),!e.selectedDates.length&&"min"===J&&D(Ae),Ep()),e.daysContainer&&(oG(),void 0!==Ae?e.currentYearElement[J]=Ae.getFullYear().toString():e.currentYearElement.removeAttribute(J),e.currentYearElement.disabled=!!Ge&&void 0!==Ae&&Ge.getFullYear()===Ae.getFullYear())}}function iG(){return e.config.wrap?n.querySelector("[data-input]"):n}function rG(){"object"!=typeof e.config.locale&&typeof Ts.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=tl(tl({},Ts.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?Ts.l10ns[e.config.locale]:void 0),Pv.D="("+e.l10n.weekdays.shorthand.join("|")+")",Pv.l="("+e.l10n.weekdays.longhand.join("|")+")",Pv.M="("+e.l10n.months.shorthand.join("|")+")",Pv.F="("+e.l10n.months.longhand.join("|")+")",Pv.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===tl(tl({},t),JSON.parse(JSON.stringify(n.dataset||{}))).time_24hr&&void 0===Ts.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=v7(e),e.parseDate=y3({config:e.config,l10n:e.l10n})}function uP(J){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){Lo("onPreCalendarPosition");var ie=J||e._positionElement,Ae=Array.prototype.reduce.call(e.calendarContainer.children,function(hye,fye){return hye+fye.offsetHeight},0),Ge=e.calendarContainer.offsetWidth,At=e.config.position.split(" "),Gt=At[0],hi=At.length>1?At[1]:null,mn=ie.getBoundingClientRect(),bi=window.innerHeight-mn.bottom,un="above"===Gt||"below"!==Gt&&bi<Ae&&mn.top>Ae,Gn=window.pageYOffset+mn.top+(un?-Ae-2:ie.offsetHeight+2);if(Nl(e.calendarContainer,"arrowTop",!un),Nl(e.calendarContainer,"arrowBottom",un),!e.config.inline){var kr=window.pageXOffset+mn.left,cf=!1,du=!1;"center"===hi?(kr-=(Ge-mn.width)/2,cf=!0):"right"===hi&&(kr-=Ge-mn.width,du=!0),Nl(e.calendarContainer,"arrowLeft",!cf&&!du),Nl(e.calendarContainer,"arrowCenter",cf),Nl(e.calendarContainer,"arrowRight",du);var kD=window.document.body.offsetWidth-(window.pageXOffset+mn.right),Ew=kr+Ge>window.document.body.offsetWidth,oye=kD+Ge>window.document.body.offsetWidth;if(Nl(e.calendarContainer,"rightMost",Ew),!e.config.static)if(e.calendarContainer.style.top=Gn+"px",Ew)if(oye){var z3=function Gve(){for(var J=null,ie=0;ie<document.styleSheets.length;ie++){var Ae=document.styleSheets[ie];if(Ae.cssRules){J=Ae;break}}return J??function Yve(){var J=document.createElement("style");return document.head.appendChild(J),J.sheet}()}();if(void 0===z3)return;var sye=window.document.body.offsetWidth,aye=Math.max(0,sye/2-Ge/2),uye=z3.cssRules.length,dye="{left:"+mn.left+"px;right:auto;}";Nl(e.calendarContainer,"rightMost",!1),Nl(e.calendarContainer,"centerMost",!0),z3.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+dye,uye),e.calendarContainer.style.left=aye+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=kD+"px";else e.calendarContainer.style.left=kr+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,J)}function oG(){e.config.noCalendar||e.isMobile||(Tn(),hP(),ot())}function U3(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function sG(J){J.preventDefault(),J.stopPropagation();var Ae=_7(lu(J),function(Gn){return Gn.classList&&Gn.classList.contains("flatpickr-day")&&!Gn.classList.contains("flatpickr-disabled")&&!Gn.classList.contains("notAllowed")});if(void 0!==Ae){var Ge=Ae,At=e.latestSelectedDateObj=new Date(Ge.dateObj.getTime()),Gt=(At.getMonth()<e.currentMonth||At.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=Ge,"single"===e.config.mode)e.selectedDates=[At];else if("multiple"===e.config.mode){var hi=V3(At);hi?e.selectedDates.splice(parseInt(hi),1):e.selectedDates.push(At)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=At,e.selectedDates.push(At),0!==cu(At,e.selectedDates[0],!0)&&e.selectedDates.sort(function(Gn,kr){return Gn.getTime()-kr.getTime()}));if(b(),Gt){var mn=e.currentYear!==At.getFullYear();e.currentYear=At.getFullYear(),e.currentMonth=At.getMonth(),mn&&(Lo("onYearChange"),Tn()),Lo("onMonthChange")}hP(),ot(),Ep(),Gt||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():pe(Ge),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&U3(),V()}}e.parseDate=y3({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=F,e._setHoursFromDate=D,e._positionCalendar=uP,e.changeMonth=nr,e.changeYear=ds,e.clear=function jr(J,ie){if(void 0===J&&(J=!0),void 0===ie&&(ie=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===ie&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var Ae=b3(e.config);P(Ae.hours,Ae.minutes,Ae.seconds)}e.redraw(),J&&Lo("onChange")},e.close=function ca(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),Lo("onClose")},e.onMouseOver=cP,e._createElement=tr,e.createDay=ue,e.destroy=function ki(){void 0!==e.config&&Lo("onDestroy");for(var J=e._handlers.length;J--;)e._handlers[J].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var ie=e.calendarContainer.parentNode;if(ie.lastChild&&ie.removeChild(ie.lastChild),ie.parentNode){for(;ie.firstChild;)ie.parentNode.insertBefore(ie.firstChild,ie);ie.parentNode.removeChild(ie)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(Ae){try{delete e[Ae]}catch{}})},e.isEnabled=Ll,e.jumpToDate=te,e.updateValue=Ep,e.open=function Wve(J,ie){if(void 0===ie&&(ie=e._positionElement),!0===e.isMobile){if(J){J.preventDefault();var Ae=lu(J);Ae&&Ae.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void Lo("onOpen")}if(!e._input.disabled&&!e.config.inline){var Ge=e.isOpen;e.isOpen=!0,Ge||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Lo("onOpen"),uP(ie)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===J||!e.timeContainer.contains(J.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=oG,e.set=function Kve(J,ie){if(null!==J&&"object"==typeof J)for(var Ae in Object.assign(e.config,J),J)void 0!==dP[Ae]&&dP[Ae].forEach(function(Ge){return Ge()});else e.config[J]=ie,void 0!==dP[J]?dP[J].forEach(function(Ge){return Ge()}):p3.indexOf(J)>-1&&(e.config[J]=_3(ie));e.redraw(),Ep(!0)},e.setDate=function Qve(J,ie,Ae){if(void 0===ie&&(ie=!1),void 0===Ae&&(Ae=e.config.dateFormat),0!==J&&!J||J instanceof Array&&0===J.length)return e.clear(ie);aG(J,Ae),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),te(void 0,ie),D(),0===e.selectedDates.length&&e.clear(!1),Ep(ie),ie&&Lo("onChange")},e.toggle=function tye(J){if(!0===e.isOpen)return e.close();e.open(J)};var dP={locale:[rG,$t],showMonths:[wi,c,nn],minDate:[te],maxDate:[te],positionElement:[cG],clickOpens:[function(){!0===e.config.clickOpens?(F(e._input,"focus",e.open),F(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function aG(J,ie){var Ae=[];if(J instanceof Array)Ae=J.map(function(Ge){return e.parseDate(Ge,ie)});else if(J instanceof Date||"number"==typeof J)Ae=[e.parseDate(J,ie)];else if("string"==typeof J)switch(e.config.mode){case"single":case"time":Ae=[e.parseDate(J,ie)];break;case"multiple":Ae=J.split(e.config.conjunction).map(function(Ge){return e.parseDate(Ge,ie)});break;case"range":Ae=J.split(e.l10n.rangeSeparator).map(function(Ge){return e.parseDate(Ge,ie)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(J)));e.selectedDates=e.config.allowInvalidPreload?Ae:Ae.filter(function(Ge){return Ge instanceof Date&&Ll(Ge,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(Ge,At){return Ge.getTime()-At.getTime()})}function lG(J){return J.slice().map(function(ie){return"string"==typeof ie||"number"==typeof ie||ie instanceof Date?e.parseDate(ie,void 0,!0):ie&&"object"==typeof ie&&ie.from&&ie.to?{from:e.parseDate(ie.from,void 0),to:e.parseDate(ie.to,void 0)}:ie}).filter(function(ie){return ie})}function cG(){e._positionElement=e.config.positionElement||e._input}function Lo(J,ie){if(void 0!==e.config){var Ae=e.config[J];if(void 0!==Ae&&Ae.length>0)for(var Ge=0;Ae[Ge]&&Ge<Ae.length;Ge++)Ae[Ge](e.selectedDates,e.input.value,e,ie);"onChange"===J&&(e.input.dispatchEvent(B3("change")),e.input.dispatchEvent(B3("input")))}}function B3(J){var ie=document.createEvent("Event");return ie.initEvent(J,!0,!0),ie}function V3(J){for(var ie=0;ie<e.selectedDates.length;ie++){var Ae=e.selectedDates[ie];if(Ae instanceof Date&&0===cu(Ae,J))return""+ie}return!1}function hP(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(J,ie){var Ae=new Date(e.currentYear,e.currentMonth,1);Ae.setMonth(e.currentMonth+ie),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[ie].textContent=eP(Ae.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=Ae.getMonth().toString(),J.value=Ae.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Z3(J){var ie=J||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(Ae){return e.formatDate(Ae,ie)}).filter(function(Ae,Ge,At){return"range"!==e.config.mode||e.config.enableTime||At.indexOf(Ae)===Ge}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function Ep(J){void 0===J&&(J=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Z3(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=Z3(e.config.altFormat)),!1!==J&&Lo("onValueUpdate")}function iye(J){var ie=lu(J),Ae=e.prevMonthNav.contains(ie),Ge=e.nextMonthNav.contains(ie);Ae||Ge?nr(Ae?-1:1):e.yearElements.indexOf(ie)>=0?ie.select():ie.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):ie.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function r(){e.element=e.input=n,e.isOpen=!1,function $ve(){var J=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],ie=tl(tl({},JSON.parse(JSON.stringify(n.dataset||{}))),t),Ae={};e.config.parseDate=ie.parseDate,e.config.formatDate=ie.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(Gn){e.config._enable=lG(Gn)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(Gn){e.config._disable=lG(Gn)}});var Ge="time"===ie.mode;ie.dateFormat||!ie.enableTime&&!Ge||(Ae.dateFormat=ie.noCalendar||Ge?"H:i"+(ie.enableSeconds?":S":""):(Ts.defaultConfig.dateFormat||_w.dateFormat)+" H:i"+(ie.enableSeconds?":S":"")),ie.altInput&&(ie.enableTime||Ge)&&!ie.altFormat&&(Ae.altFormat=ie.noCalendar||Ge?"h:i"+(ie.enableSeconds?":S K":" K"):(Ts.defaultConfig.altFormat||_w.altFormat)+" h:i"+(ie.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:nG("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:nG("max")});var hi=function(Gn){return function(kr){e.config["min"===Gn?"_minTime":"_maxTime"]=e.parseDate(kr,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:hi("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:hi("max")}),"time"===ie.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,Ae,ie);for(var mn=0;mn<J.length;mn++)e.config[J[mn]]=!0===e.config[J[mn]]||"true"===e.config[J[mn]];for(p3.filter(function(Gn){return void 0!==e.config[Gn]}).forEach(function(Gn){e.config[Gn]=_3(e.config[Gn]||[]).map(a)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),mn=0;mn<e.config.plugins.length;mn++){var bi=e.config.plugins[mn](e)||{};for(var un in bi)p3.indexOf(un)>-1?e.config[un]=_3(bi[un]).map(a).concat(e.config[un]):typeof ie[un]>"u"&&(e.config[un]=bi[un])}ie.altInputClass||(e.config.altInputClass=iG().className+" "+e.config.altInputClass),Lo("onParseConfig")}(),rG(),function Xve(){e.input=iG(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=tr(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),cG()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function Jve(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var J=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);J&&aG(J,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function i(){e.utils={getDaysInMonth:function(J,ie){return void 0===J&&(J=e.currentMonth),void 0===ie&&(ie=e.currentYear),1===J&&(ie%4==0&&ie%100!=0||ie%400==0)?29:e.l10n.daysInMonth[J]}}}(),e.isMobile||function _e(){var J=window.document.createDocumentFragment();if(e.calendarContainer=tr("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(J.appendChild(function Ct(){return e.monthNav=tr("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=tr("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=tr("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,wi(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(J){e.__hidePrevMonthArrow!==J&&(Nl(e.prevMonthNav,"flatpickr-disabled",J),e.__hidePrevMonthArrow=J)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(J){e.__hideNextMonthArrow!==J&&(Nl(e.nextMonthNav,"flatpickr-disabled",J),e.__hideNextMonthArrow=J)}}),e.currentYearElement=e.yearElements[0],hP(),e.monthNav}()),e.innerContainer=tr("div","flatpickr-innerContainer"),e.config.weekNumbers){var ie=function Ni(){e.calendarContainer.classList.add("hasWeeks");var J=tr("div","flatpickr-weekwrapper");J.appendChild(tr("span","flatpickr-weekday",e.l10n.weekAbbreviation));var ie=tr("div","flatpickr-weeks");return J.appendChild(ie),{weekWrapper:J,weekNumbers:ie}}(),Ae=ie.weekWrapper,Ge=ie.weekNumbers;e.innerContainer.appendChild(Ae),e.weekNumbers=Ge,e.weekWrapper=Ae}e.rContainer=tr("div","flatpickr-rContainer"),e.rContainer.appendChild(nn()),e.daysContainer||(e.daysContainer=tr("div","flatpickr-days"),e.daysContainer.tabIndex=-1),ot(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),J.appendChild(e.innerContainer)}e.config.enableTime&&J.appendChild(function St(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var J=b3(e.config);e.timeContainer=tr("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var ie=tr("span","flatpickr-time-separator",":"),Ae=XM("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=Ae.getElementsByTagName("input")[0];var Ge=XM("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Ge.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=yc(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?J.hours:function v(J){switch(J%24){case 0:case 12:return 12;default:return J%12}}(J.hours)),e.minuteElement.value=yc(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():J.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Ae),e.timeContainer.appendChild(ie),e.timeContainer.appendChild(Ge),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var At=XM("flatpickr-second");e.secondElement=At.getElementsByTagName("input")[0],e.secondElement.value=yc(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():J.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(tr("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(At)}return e.config.time_24hr||(e.amPM=tr("span","flatpickr-am-pm",e.l10n.amPM[Qu((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),Nl(e.calendarContainer,"rangeMode","range"===e.config.mode),Nl(e.calendarContainer,"animate",!0===e.config.animate),Nl(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(J);var At=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!At&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Gt=tr("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Gt,e.element),Gt.appendChild(e.element),e.altInput&&Gt.appendChild(e.altInput),Gt.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function Q(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(Ae){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+Ae+"]"),function(Ge){return F(Ge,"click",e[Ae])})}),e.isMobile)!function eye(){var J=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=tr("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=J,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===J?"Y-m-d\\TH:i:S":"date"===J?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}F(e.mobileInput,"change",function(ie){e.setDate(lu(ie).value,!1,e.mobileFormatStr),Lo("onChange"),Lo("onClose")})}();else{var J=m7(jve,50);if(e._debouncedChange=m7(V,Eme),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&F(e.daysContainer,"mouseover",function(Ae){"range"===e.config.mode&&cP(lu(Ae))}),F(e._input,"keydown",Tw),void 0!==e.calendarContainer&&F(e.calendarContainer,"keydown",Tw),!e.config.inline&&!e.config.static&&F(window,"resize",J),void 0!==window.ontouchstart?F(window.document,"touchstart",uu):F(window.document,"mousedown",uu),F(window.document,"focus",uu,{capture:!0}),!0===e.config.clickOpens&&(F(e._input,"focus",e.open),F(e._input,"click",e.open)),void 0!==e.daysContainer&&(F(e.monthNav,"click",iye),F(e.monthNav,["keyup","increment"],R),F(e.daysContainer,"click",sG)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){F(e.timeContainer,["increment"],h),F(e.timeContainer,"blur",h,{capture:!0}),F(e.timeContainer,"click",re),F([e.hourElement,e.minuteElement],["focus","click"],function(Ae){return lu(Ae).select()}),void 0!==e.secondElement&&F(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&F(e.amPM,"click",function(Ae){h(Ae)})}e.config.allowInput&&F(e._input,"blur",Cw)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&D(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ep(!1)),c();var J=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&J&&uP(),Lo("onReady")}(),e}function vw(n,t){for(var e=Array.prototype.slice.call(n).filter(function(a){return a instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var s=e[r];try{if(null!==s.getAttribute("data-fp-omit"))continue;void 0!==s._flatpickr&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=Dme(s,t||{}),i.push(s._flatpickr)}catch(a){console.error(a)}}return 1===i.length?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return vw(this,n)},HTMLElement.prototype.flatpickr=function(n){return vw([this],n)});var Ts=function(n,t){return"string"==typeof n?vw(window.document.querySelectorAll(n),t):n instanceof Node?vw([n],t):vw(n,t)};Ts.defaultConfig={},Ts.l10ns={en:tl({},m3),default:tl({},m3)},Ts.localize=function(n){Ts.l10ns.default=tl(tl({},Ts.l10ns.default),n)},Ts.setDefaults=function(n){Ts.defaultConfig=tl(tl({},Ts.defaultConfig),n)},Ts.parseDate=y3({}),Ts.formatDate=v7({}),Ts.compareDates=cu,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return vw(this,n)}),Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof n?parseInt(n,10):n))},typeof window<"u"&&(window.flatpickr=Ts);const xme=Ts;let C3=(()=>{class n{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ame={provide:jd,useExisting:(0,o.Gpc)(()=>Ime),multi:!0};let Ime=(()=>{class n{constructor(e,i,r){this.elm=e,this.defaults=i,this.renderer=r,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new o.vpe,this.flatpickrChange=new o.vpe,this.flatpickrValueUpdate=new o.vpe,this.flatpickrOpen=new o.vpe,this.flatpickrClose=new o.vpe,this.flatpickrMonthChange=new o.vpe,this.flatpickrYearChange=new o.vpe,this.flatpickrDayCreate=new o.vpe,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(i,r,s)=>{this.flatpickrChange.emit({selectedDates:i,dateString:r,instance:s})},onOpen:(i,r,s)=>{this.flatpickrOpen.emit({selectedDates:i,dateString:r,instance:s})},onClose:(i,r,s)=>{this.flatpickrClose.emit({selectedDates:i,dateString:r,instance:s})},onMonthChange:(i,r,s)=>{this.flatpickrMonthChange.emit({selectedDates:i,dateString:r,instance:s})},onYearChange:(i,r,s)=>{this.flatpickrYearChange.emit({selectedDates:i,dateString:r,instance:s})},onReady:(i,r,s)=>{this.flatpickrReady.emit({selectedDates:i,dateString:r,instance:s})},onValueUpdate:(i,r,s)=>{this.flatpickrValueUpdate.emit({selectedDates:i,dateString:r,instance:s})},onDayCreate:(i,r,s,a)=>{this.flatpickrDayCreate.emit({selectedDates:i,dateString:r,instance:s,dayElement:a})}};Object.keys(e).forEach(i=>{typeof e[i]>"u"&&(e[i]=typeof this.options[i]<"u"?this.options[i]:this.defaults[i])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=xme(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(i=>{this.instance.set(i,this[i])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let i=e;this.convertModelValue&&"range"===this.mode&&e&&(i=[e.from,e.to]),this.instance?this.instance.setDate(i):this.initialValue=i}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const i=e.split("; ").map(a=>this.instance.parseDate(a,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(i);break;case"range":const[r,s]=e.split(this.instance.l10n.rangeSeparator).map(a=>this.instance.parseDate(a,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:r,to:s});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(C3),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,i){1&e&&o.NdJ("blur",function(){return i.onTouchedFn()})("input",function(){return i.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[o._Bn([Ame]),o.TTD]}),n})();const w7=new o.OlP("flatpickr defaults");function Sme(n){const t=new C3;return Object.assign(t,n),t}let Mme=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:w7,useValue:e},{provide:C3,useFactory:Sme,deps:[w7]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Pme=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){void 0===e&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))i={top:(i=t.getBoundingClientRect()).top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var s=this.offsetParent(t);i=this.offset(t,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){void 0===e&&(e=!0);var i=t.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft,s={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s},n.prototype.positionElements=function(t,e,i,r){var s=i.split("-"),a=s[0],c=void 0===a?"top":a,h=s[1],p=void 0===h?"center":h,v=r?this.offset(t,!1):this.position(t,!1),b=this.getAllStyles(e),D=parseFloat(b.marginTop),P=parseFloat(b.marginBottom),R=parseFloat(b.marginLeft),F=parseFloat(b.marginRight),V=0,Q=0;switch(c){case"top":V=v.top-(e.offsetHeight+D+P);break;case"bottom":V=v.top+v.height;break;case"left":Q=v.left-(e.offsetWidth+R+F);break;case"right":Q=v.left+v.width}switch(p){case"top":V=v.top;break;case"bottom":V=v.top+v.height-e.offsetHeight;break;case"left":Q=v.left;break;case"right":Q=v.left+v.width-e.offsetWidth;break;case"center":"top"===c||"bottom"===c?Q=v.left+v.width/2-e.offsetWidth/2:V=v.top+v.height/2-e.offsetHeight/2}e.style.transform="translate("+Math.round(Q)+"px, "+Math.round(V)+"px)";var te=e.getBoundingClientRect(),re=document.documentElement,de=window.innerHeight||re.clientHeight,_e=window.innerWidth||re.clientWidth;return te.left>=0&&te.top>=0&&te.right<=_e&&te.bottom<=de},n}();new Pme;var Kd=function(){return Kd=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Kd.apply(this,arguments)},T3=function(n,t,e){if(e||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))},TD=(()=>(function(n){n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY"}(TD||(TD={})),TD))(),Ome=[TD.SUNDAY,TD.SATURDAY],E3=7,D3=24,tP=60,ym=86400;function C7(n,t){var e=t.startDate,r=t.excluded,s=t.precision;if(r.length<1)return 0;for(var c=n.getDay,h=n.addDays,p=(0,n.addSeconds)(e,t.seconds-1),v=c(e),b=c(p),D=0,P=e,R=function(){var F=c(P);r.some(function(V){return V===F})&&(D+=function Rme(n,t){var i=t.day,s=t.dayEnd,a=t.startDate,c=t.endDate,h=n.differenceInSeconds,v=n.startOfDay;if("minutes"===t.precision){if(i===t.dayStart)return h((0,n.endOfDay)(a),a)+1;if(i===s)return h(c,v(c))+1}return ym}(n,{dayStart:v,dayEnd:b,day:F,precision:s,startDate:e,endDate:p})),P=h(P,1)};P<p;)R();return D}function ED(n,t){var i=t.periodStart,r=t.periodEnd;return t.events.filter(function(s){return function Fme(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,s=n.isSameSecond,a=e.start,c=e.end||e.start;return!!(a>i&&a<r||c>i&&c<r||a<i&&c>r||s(a,i)||s(a,r)||s(c,i)||s(c,r))}(n,{event:s,periodStart:i,periodEnd:r})})}function T7(n,t){var e=t.date,i=t.weekendDays,r=void 0===i?Ome:i,a=n.isSameDay,c=n.getDay,h=(0,n.startOfDay)(new Date),p=c(e);return{date:e,day:p,isPast:e<h,isToday:a(e,h),isFuture:e>h,isWeekend:r.indexOf(p)>-1}}function x3(n,t){for(var r=t.excluded,s=void 0===r?[]:r,a=t.weekendDays,c=t.viewStart,h=void 0===c?n.startOfWeek(t.viewDate,{weekStartsOn:t.weekStartsOn}):c,p=t.viewEnd,v=void 0===p?n.addDays(h,E3):p,b=n.addDays,D=n.getDay,P=[],R=h;R<v;)s.some(function(F){return D(R)===F})||P.push(T7(n,{date:R,weekendDays:a})),R=b(R,1);return P}function Bme(n,t){var e=t.events,i=void 0===e?[]:e,r=t.excluded,s=void 0===r?[]:r,a=t.precision,c=void 0===a?"days":a,h=t.absolutePositionedEvents,p=void 0!==h&&h,v=t.viewStart,b=t.viewEnd;v=n.startOfDay(v),b=n.endOfDay(b);var D=n.differenceInSeconds,P=n.differenceInDays,R=function Ume(n,t){for(var i=t.date2,r=t.excluded,s=t.date1,a=0;s<i;)-1===r.indexOf(n.getDay(s))&&a++,s=n.addDays(s,1);return a}(n,{date1:v,date2:b,excluded:s}),F=P(b,v)+1,V=i.filter(function(re){return re.allDay}).map(function(re){var de=function Lme(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,s=t.precision,a=n.differenceInDays,c=n.startOfDay,h=n.differenceInSeconds;if(e.start<i)return 0;var p=0;switch(s){case"days":p=a(c(e.start),i)*ym;break;case"minutes":p=h(e.start,i)}return p-=C7(n,{startDate:i,seconds:p,excluded:r,precision:s}),Math.abs(p/ym)}(n,{event:re,startOfWeek:v,excluded:s,precision:c}),_e=function Nme(n,t){var e=t.event,i=t.offset,s=t.excluded,a=t.precision,c=t.totalDaysInView,p=n.differenceInSeconds,v=n.addDays,b=n.endOfDay,D=n.differenceInDays,P=ym,R=(0,n.max)([e.start,t.startOfWeekDate]);e.end&&(P="minutes"===a?p(e.end,R):D(v(b(e.end),1),R)*ym);var F=i*ym,Q=c*ym;return F+P>Q&&(P=Q-F),(P-=C7(n,{startDate:R,seconds:P,excluded:s,precision:a}))/ym}(n,{event:re,offset:de,startOfWeekDate:v,excluded:s,precision:c,totalDaysInView:F});return{event:re,offset:de,span:_e}}).filter(function(re){return re.offset<R}).filter(function(re){return re.span>0}).map(function(re){return{event:re.event,offset:re.offset,span:re.span,startsBeforeWeek:re.event.start<v,endsAfterWeek:(re.event.end||re.event.start)>b}}).sort(function(re,de){var _e=D(re.event.start,de.event.start);return 0===_e?D(de.event.end||de.event.start,re.event.end||re.event.start):_e}),Q=[],te=[];return V.forEach(function(re,de){if(-1===te.indexOf(re)){te.push(re);var _e=re.span+re.offset,ue=V.slice(de+1).filter(function(et){if(et.offset>=_e&&_e+et.span<=F&&-1===te.indexOf(et)){var bt=et.offset-_e;return p||(et.offset=bt),_e+=et.span+bt,te.push(et),!0}}),pe=T3([re],ue,!0),Le=pe.filter(function(et){return et.event.id}).map(function(et){return et.event.id}).join("-");Q.push(Kd({row:pe},Le?{id:Le}:{}))}}),Q}function Vme(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.hourDuration,a=t.dayStart,c=t.dayEnd,h=t.weekStartsOn,p=t.excluded,v=t.weekendDays,b=t.segmentHeight,D=t.viewStart,P=t.viewEnd,R=t.minimumEventHeight,F=function qme(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,s=t.dayStart,a=t.dayEnd,c=n.setMinutes,h=n.setHours,p=n.startOfDay,v=n.startOfMinute,b=n.endOfDay,D=n.addMinutes,P=n.addDays,R=[],F=c(h(p(e),iP(s.hour)),rP(s.minute)),V=c(h(v(b(e)),iP(a.hour)),rP(a.minute)),Q=(r||tP)/i,te=p(e),re=b(e),de=function(bt){return bt};n.getTimezoneOffset(te)!==n.getTimezoneOffset(re)&&(te=P(te,1),F=P(F,1),V=P(V,1),de=function(bt){return P(bt,-1)});for(var _e=r?60*D3/r:tP,ue=0;ue<_e;ue++){for(var pe=[],Le=0;Le<i;Le++){var et=D(D(F,ue*(r||tP)),Le*Q);et>=F&&et<V&&pe.push({date:de(et),displayDate:et,isStart:0===Le})}pe.length>0&&R.push({segments:pe})}return R}(n,{viewDate:i,hourSegments:r,hourDuration:s,dayStart:a,dayEnd:c}),V=x3(n,{viewDate:i,weekStartsOn:h,excluded:p,weekendDays:v,viewStart:D,viewEnd:P}),Q=n.setHours,te=n.setMinutes,re=n.getHours,de=n.getMinutes;return V.map(function(_e){var ue=function Hme(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,s=t.dayStart,a=t.dayEnd,c=t.eventWidth,h=t.segmentHeight,p=t.hourDuration,v=t.minimumEventHeight,b=n.setMinutes,D=n.setHours,P=n.startOfDay,R=n.startOfMinute,F=n.endOfDay,V=n.differenceInMinutes,Q=b(D(P(i),iP(s.hour)),rP(s.minute)),te=b(D(R(F(i)),iP(a.hour)),rP(a.minute));te.setSeconds(59,999);var re=[],de=ED(n,{events:e.filter(function(Le){return!Le.allDay}),periodStart:Q,periodEnd:te}),_e=de.sort(function(Le,et){return Le.start.valueOf()-et.start.valueOf()}).map(function(Le){var et=Le.start,bt=Le.end||et,at=et<Q,ot=bt>te,Tn=r*h/(p||tP),Jn=0;if(et>Q){var wi=n.getTimezoneOffset(et),St=n.getTimezoneOffset(Q)-wi;Jn+=V(et,Q)+St}Jn*=Tn,Jn=Math.floor(Jn);var nn=at?Q:et,$t=ot?te:bt,Ni=n.getTimezoneOffset(nn)-n.getTimezoneOffset($t),nr=V($t,nn)+Ni;Le.end?nr*=Tn:nr=h,v&&nr<v&&(nr=v),nr=Math.floor(nr);for(var ca=nP(re,Jn,Jn+nr),ki=0;ca.some(function(uu){return uu.left===ki});)ki+=c;var Ma={event:Le,height:nr,width:c,top:Jn,left:ki,startsBeforeDay:at,endsAfterDay:ot};return re.push(Ma),Ma}),ue=Math.max.apply(Math,_e.map(function(Le){return Le.left+Le.width})),pe=ED(n,{events:e.filter(function(Le){return Le.allDay}),periodStart:P(Q),periodEnd:F(te)});return{events:_e,width:ue,allDayEvents:pe,period:{events:de,start:Q,end:te}}}(n,{events:e,viewDate:_e.date,hourSegments:r,dayStart:a,dayEnd:c,segmentHeight:b,eventWidth:1,hourDuration:s,minimumEventHeight:R}),pe=F.map(function(bt){var at=bt.segments.map(function(ot){var Tn=te(Q(_e.date,re(ot.date)),de(ot.date));return Kd(Kd({},ot),{date:Tn})});return Kd(Kd({},bt),{segments:at})});function Le(bt,at){var ot=Math.max.apply(Math,at.map(function(Jn){return Jn.left+1})),Tn=bt.filter(function(Jn){return Jn.left>=ot}).filter(function(Jn){return nP(at,Jn.top,Jn.top+Jn.height).length>0});return Tn.length>0?Le(bt,Tn):ot}var et=ue.events.map(function(bt){var ot=100/Le(ue.events,nP(ue.events,bt.top,bt.top+bt.height));return Kd(Kd({},bt),{left:bt.left*ot,width:ot})});return{hours:pe,date:_e.date,events:et.map(function(bt){var at=nP(et.filter(function(ot){return ot.left>bt.left}),bt.top,bt.top+bt.height);return at.length>0?Kd(Kd({},bt),{width:Math.min.apply(Math,at.map(function(ot){return ot.left}))-bt.left}):bt})}})}function nP(n,t,e){return n.filter(function(i){var r=i.top,s=i.top+i.height;return t<s&&s<e||t<r&&r<e||r<=t&&e<=s})}function iP(n){return Math.max(Math.min(23,n),0)}function rP(n){return Math.max(Math.min(59,n),0)}"function"==typeof Symbol&&Symbol;var xD=["webkit","moz","ms","o"];(function(){if(typeof window>"u")return function(){};for(var n=0,t=xD.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[xD[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-e),a=window.setTimeout(function(){return i(r+s)},s);return e=r+s,a}}window.requestAnimationFrame.bind(window)})(),function(){if(typeof window>"u")return function(){};for(var n=0,t=xD.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[xD[n]+"CancelAnimationFrame"]||window[xD[n]+"CancelRequestAnimationFrame"];window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();let oP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator),Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});let k7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),L7=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`\n        ${Zn(e.date,"EEEE MMMM d",i)},\n        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},\n         click to expand\n      `:`${Zn(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`\n      Beginning of expanded view for ${Zn(e,"EEEE MMMM dd",i)}\n    `}openDayEventsAlert({date:e,locale:i}){return`${Zn(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(!0===e.allDay)return this.allDayEventDescription({event:e,locale:i});const r=`\n      ${Zn(e.start,"EEEE MMMM dd",i)},\n      ${e.title}, from ${Zn(e.start,"hh:mm a",i)}\n    `;return e.end?r+` to ${Zn(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){const r=`\n      ${e.title}, event spans multiple days:\n      start time ${Zn(e.start,"MMMM dd hh:mm a",i)}\n    `;return e.end?r+`, stop time ${Zn(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class F7{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}}class R3{}let G_e=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return Zn(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return Zn(e,"d",i)}monthViewTitle({date:e,locale:i}){return Zn(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return Zn(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return Zn(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:s,daysInWeek:a}){const{viewStart:c,viewEnd:h}=function W_e(n,t,e,i=[],r){let s=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e});const a=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(s))>-1&&s<a;)s=n.addDays(s,1);if(r){const c=n.endOfDay(function j_e(n,t,e,i){let r=0,s=0;const a=e<0?n.subDays:n.addDays;let c=t;for(;s<=Math.abs(e);){c=a(t,r);const h=n.getDay(c);-1===i.indexOf(h)&&s++,r++}return c}(n,s,r-1,i));return{viewStart:s,viewEnd:c}}{let c=a;for(;i.indexOf(n.getDay(c))>-1&&c>s;)c=n.subDays(c,1);return{viewStart:s,viewEnd:c}}}(this.dateAdapter,e,r,s,a),p=(v,b)=>Zn(v,"MMM d"+(b?", yyyy":""),i);return`${p(c,c.getUTCFullYear()!==h.getUTCFullYear())} - ${p(h,!0)}`}weekViewHour({date:e,locale:i}){return Zn(e,"h a",i)}dayViewHour({date:e,locale:i}){return Zn(e,"h a",i)}dayViewTitle({date:e,locale:i}){return Zn(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(R3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),B7=(()=>{class n extends G_e{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),V7=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return function zme(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,a=t.excluded,c=void 0===a?[]:a,h=t.viewStart,p=void 0===h?n.startOfMonth(r):h,v=t.viewEnd,b=void 0===v?n.endOfMonth(r):v,D=t.weekendDays;i||(i=[]);for(var et,R=n.endOfWeek,F=n.differenceInDays,V=n.startOfDay,Q=n.addHours,te=n.endOfDay,re=n.isSameMonth,de=n.getDay,_e=(0,n.startOfWeek)(p,{weekStartsOn:s}),ue=R(b,{weekStartsOn:s}),pe=ED(n,{events:i,periodStart:_e,periodEnd:ue}),Le=[],bt=function(nn){var $t;if(et?($t=V(Q(et,D3)),et.getTime()===$t.getTime()&&($t=V(Q(et,D3+1))),et=$t):$t=et=_e,!c.some(function(jr){return de($t)===jr})){var Ni=T7(n,{date:$t,weekendDays:D}),nr=ED(n,{events:pe,periodStart:V($t),periodEnd:te($t)});Ni.inMonth=re($t,r),Ni.events=nr,Ni.badgeTotal=nr.length,Le.push(Ni)}},at=0;at<F(ue,_e)+1;at++)bt();var ot=[],Tn=E3-c.length;if(Tn<E3)for(at=0;at<Le.length;at+=Tn){var Jn=Le.slice(at,at+Tn);Jn.some(function($t){return p<=$t.date&&$t.date<b})&&(ot=T3(T3([],ot,!0),Jn,!0))}else ot=Le;var Ct=Math.floor(ot.length/Tn),St=[];for(at=0;at<Ct;at++)St.push(at*Tn);return{rowOffsets:St,totalDaysVisibleInWeek:Tn,days:ot,period:{start:ot[0].date,end:te(ot[ot.length-1].date),events:pe}}}(this.dateAdapter,e)}getWeekViewHeader(e){return x3(this.dateAdapter,e)}getWeekView(e){return function Zme(n,t){var e=t.events,i=void 0===e?[]:e,r=t.viewDate,s=t.weekStartsOn,a=t.excluded,c=void 0===a?[]:a,h=t.precision,p=void 0===h?"days":h,v=t.absolutePositionedEvents,b=void 0!==v&&v,D=t.hourSegments,P=t.hourDuration,R=t.dayStart,F=t.dayEnd,V=t.weekendDays,Q=t.segmentHeight,te=t.minimumEventHeight,re=t.viewStart,de=void 0===re?n.startOfWeek(r,{weekStartsOn:s}):re,_e=t.viewEnd,ue=void 0===_e?n.endOfWeek(r,{weekStartsOn:s}):_e;i||(i=[]);var Le=n.endOfDay,et=ED(n,{events:i,periodStart:de=(0,n.startOfDay)(de),periodEnd:ue=Le(ue)}),bt=x3(n,{viewDate:r,weekStartsOn:s,excluded:c,weekendDays:V,viewStart:de,viewEnd:ue});return{allDayEventRows:Bme(n,{events:et,excluded:c,precision:p,absolutePositionedEvents:b,viewStart:de,viewEnd:ue}),period:{events:et,start:bt[0].date,end:Le(bt[bt.length-1].date)},hourColumns:Vme(n,{events:i,viewDate:r,hourSegments:D,hourDuration:P,dayStart:R,dayEnd:F,weekStartsOn:s,excluded:c,weekendDays:V,segmentHeight:Q,viewStart:de,viewEnd:ue,minimumEventHeight:te})}}(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(R3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();new o.OlP("Moment");let MD=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||F7,i.dateFormatter||B7,i.utils||V7,i.a11y||L7]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Xo],imports:[As]}),n})();S$("void",NM({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),S$("*",NM({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),M$("* => void",A$("150ms ease-out")),M$("void => *",A$("150ms ease-in"));let Z7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[As,oP,MD,oP]}),n})(),N3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[As,k7,oP,MD,k7,oP]}),n})(),z7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[As,MD,N3]}),n})(),Y_e=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||F7,i.dateFormatter||B7,i.utils||V7,i.a11y||L7]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[MD,Z7,N3,z7,MD,Z7,N3,z7]}),n})();var H7=z(7582);function Sa(n){if(null===n||!0===n||!1===n)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function aP(n){return aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aP(n)}function ei(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function Gi(n){ei(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||"object"===aP(n)&&"[object Date]"===t?new Date(n.getTime()):"number"==typeof n||"[object Number]"===t?new Date(n):(("string"==typeof n||"[object String]"===t)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function L3(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);return isNaN(i)?new Date(NaN):(i&&e.setDate(e.getDate()+i),e)}function F3(n,t){ei(2,arguments);var e=Gi(n).getTime(),i=Sa(t);return new Date(e+i)}var K_e=36e5;function Q_e(n,t){return ei(2,arguments),F3(n,Sa(t)*K_e)}var J_e=6e4;function X_e(n,t){return ei(2,arguments),F3(n,Sa(t)*J_e)}function eve(n,t){return ei(2,arguments),F3(n,1e3*Sa(t))}function q7(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}function PD(n){ei(1,arguments);var t=Gi(n);return t.setHours(0,0,0,0),t}var tve=864e5;function j7(n,t){var e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function ive(n,t){ei(2,arguments);var e=Gi(n),i=Gi(t),r=j7(e,i),s=Math.abs(function nve(n,t){ei(2,arguments);var e=PD(n),i=PD(t),r=e.getTime()-q7(e),s=i.getTime()-q7(i);return Math.round((r-s)/tve)}(e,i));e.setDate(e.getDate()-r*s);var c=r*(s-Number(j7(e,i)===-r));return 0===c?0:c}Math.pow(10,8);var sve=6e4;function $7(n,t){return ei(2,arguments),Gi(n).getTime()-Gi(t).getTime()}var G7={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},uve="trunc";function Y7(n){return n?G7[n]:G7[uve]}function dve(n,t,e){ei(2,arguments);var i=$7(n,t)/sve;return Y7(e?.roundingMethod)(i)}function hve(n,t,e){ei(2,arguments);var i=$7(n,t)/1e3;return Y7(e?.roundingMethod)(i)}function fve(n){ei(1,arguments);var t=Gi(n);return t.setHours(23,59,59,999),t}function pve(n){ei(1,arguments);var t=Gi(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}var K7={};function Q7(){return K7}function gve(n,t){var e,i,r,s,a,c,h,p;ei(1,arguments);var v=Q7(),b=Sa(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(a=t.locale)||void 0===a||null===(c=a.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:v.weekStartsOn)&&void 0!==i?i:null===(h=v.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==e?e:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=Gi(n),P=D.getDay(),R=6+(P<b?-7:0)-(P-b);return D.setDate(D.getDate()+R),D.setHours(23,59,59,999),D}function mve(n){return ei(1,arguments),Gi(n).getDay()}function _ve(n){return ei(1,arguments),Gi(n).getMonth()}function vve(n,t){ei(2,arguments);var e=PD(n),i=PD(t);return e.getTime()===i.getTime()}function yve(n,t){ei(2,arguments);var e=Gi(n),i=Gi(t);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function J7(n){ei(1,arguments);var t=Gi(n);return t.setMilliseconds(0),t}function wve(n,t){ei(2,arguments);var e=J7(n),i=J7(t);return e.getTime()===i.getTime()}function bve(n){var t,e;if(ei(1,arguments),n&&"function"==typeof n.forEach)t=n;else{if("object"!==aP(n)||null===n)return new Date(NaN);t=Array.prototype.slice.call(n)}return t.forEach(function(i){var r=Gi(i);(void 0===e||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Cve(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);return e.setHours(i),e}function Tve(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);return e.setMinutes(i),e}function Eve(n){ei(1,arguments);var t=Gi(n);return t.setSeconds(0,0),t}function Dve(n){ei(1,arguments);var t=Gi(n);return t.setDate(1),t.setHours(0,0,0,0),t}function X7(n,t){var e,i,r,s,a,c,h,p;ei(1,arguments);var v=Q7(),b=Sa(null!==(e=null!==(i=null!==(r=null!==(s=t?.weekStartsOn)&&void 0!==s?s:null==t||null===(a=t.locale)||void 0===a||null===(c=a.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:v.weekStartsOn)&&void 0!==i?i:null===(h=v.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==e?e:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var D=Gi(n),P=D.getDay(),R=(P<b?7:0)+P-b;return D.setDate(D.getDate()-R),D.setHours(0,0,0,0),D}function xve(n){return ei(1,arguments),Gi(n).getHours()}function Ave(n){return ei(1,arguments),Gi(n).getMinutes()}function Ive(n){return new Date(n).getTimezoneOffset()}function eG(n,t){return ei(2,arguments),L3(n,7*Sa(t))}function tG(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);if(isNaN(i))return new Date(NaN);if(!i)return e;var r=e.getDate(),s=new Date(e.getTime());return s.setMonth(e.getMonth()+i+1,0),r>=s.getDate()?s:(e.setFullYear(s.getFullYear(),s.getMonth(),r),e)}function Mve(n,t){return ei(2,arguments),L3(n,-Sa(t))}function Pve(n,t){return ei(2,arguments),eG(n,-Sa(t))}function kve(n,t){return ei(2,arguments),tG(n,-Sa(t))}function lP(n){return ei(1,arguments),X7(n,{weekStartsOn:1})}var Nve=6048e5;function Lve(n){ei(1,arguments);var t=Gi(n),e=lP(t).getTime()-function Rve(n){ei(1,arguments);var t=function Ove(n){ei(1,arguments);var t=Gi(n),e=t.getFullYear(),i=new Date(0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);var r=lP(i),s=new Date(0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);var a=lP(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=a.getTime()?e:e-1}(n),e=new Date(0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),lP(e)}(t).getTime();return Math.round(e/Nve)+1}function Fve(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);return e.setDate(i),e}function Bve(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t),r=e.getFullYear(),s=e.getDate(),a=new Date(0);a.setFullYear(r,i,15),a.setHours(0,0,0,0);var c=function Uve(n){ei(1,arguments);var t=Gi(n),e=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(e,i+1,0),r.setHours(0,0,0,0),r.getDate()}(a);return e.setMonth(i,Math.min(s,c)),e}function Vve(n,t){ei(2,arguments);var e=Gi(n),i=Sa(t);return isNaN(e.getTime())?new Date(NaN):(e.setFullYear(i),e)}function Zve(n){return ei(1,arguments),Gi(n).getDate()}function zve(n){return ei(1,arguments),Gi(n).getFullYear()}function Hve(){return(0,H7.pi)((0,H7.pi)({},function Sve(){return{addDays:L3,addHours:Q_e,addMinutes:X_e,addSeconds:eve,differenceInDays:ive,differenceInMinutes:dve,differenceInSeconds:hve,endOfDay:fve,endOfMonth:pve,endOfWeek:gve,getDay:mve,getMonth:_ve,isSameDay:vve,isSameMonth:yve,isSameSecond:wve,max:bve,setHours:Cve,setMinutes:Tve,startOfDay:PD,startOfMinute:Eve,startOfMonth:Dve,startOfWeek:X7,getHours:xve,getMinutes:Ave,getTimezoneOffset:Ive}}()),{addWeeks:eG,addMonths:tG,subDays:Mve,subWeeks:Pve,subMonths:kve,getISOWeek:Lve,setDate:Fve,setMonth:Bve,setYear:Vve,getDate:Zve,getYear:zve})}let qve=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[Wte]}),n.\u0275inj=o.cJS({providers:[hv,Gu],imports:[As,dle,Mme,kc,Vte,vpe,Yv,yme,Ute,Po.hO.initializeApp(zq_firebase),Jee,gte,kC,BK(()=>VK()),Rb(()=>Fb(zq_firebase)),Y_e.forRoot({provide:R3,useFactory:Hve}),Ff.forRoot({apiKey:"AIzaSyBWDl4DyscEGeARJgm1MQmaxCj0WwB_cYM"})]}),n})();fh().bootstrapModule(qve).catch(n=>console.error(n))},8323:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(Yt){for(var Xe=[],z=1;z<arguments.length;z++)Xe[z-1]=arguments[z];if(!Yt)throw TypeError("Cannot convert undefined or null to object");for(var o=function(Oe){Oe&&Object.keys(Oe).forEach(function(Ee){return Yt[Ee]=Oe[Ee]})},ee=0,W=Xe;ee<W.length;ee++)o(W[ee]);return Yt})},8407:function(Yt,Xe){!function(z){"use strict";function ee(f){var m,T,M,N;for(T=1,M=arguments.length;T<M;T++)for(m in N=arguments[T])f[m]=N[m];return f}var W=Object.create||function(){function f(){}return function(m){return f.prototype=m,new f}}();function Te(f,m){var T=Array.prototype.slice;if(f.bind)return f.bind.apply(f,T.call(arguments,1));var M=T.call(arguments,2);return function(){return f.apply(m,M.length?M.concat(T.call(arguments)):arguments)}}var Oe=0;function Ee(f){return"_leaflet_id"in f||(f._leaflet_id=++Oe),f._leaflet_id}function $e(f,m,T){var M,N,H,ce;return ce=function(){M=!1,N&&(H.apply(T,N),N=!1)},H=function(){M?N=arguments:(f.apply(T,arguments),setTimeout(ce,m),M=!0)},H}function je(f,m,T){var M=m[1],N=m[0],H=M-N;return f===M&&T?f:((f-N)%H+H)%H+N}function Ne(){return!1}function he(f,m){if(!1===m)return f;var T=Math.pow(10,void 0===m?6:m);return Math.round(f*T)/T}function fe(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function Ce(f){return fe(f).split(/\s+/)}function tt(f,m){for(var T in Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?W(f.options):{}),m)f.options[T]=m[T];return f.options}function it(f,m,T){var M=[];for(var N in f)M.push(encodeURIComponent(T?N.toUpperCase():N)+"="+encodeURIComponent(f[N]));return(m&&-1!==m.indexOf("?")?"&":"?")+M.join("&")}var Et=/\{ *([\w_ -]+) *\}/g;function Vt(f,m){return f.replace(Et,function(T,M){var N=m[M];if(void 0===N)throw new Error("No value provided for variable "+T);return"function"==typeof N&&(N=N(m)),N})}var Be=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)};function st(f,m){for(var T=0;T<f.length;T++)if(f[T]===m)return T;return-1}var ut="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function mt(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var nt=0;function Qe(f){var m=+new Date,T=Math.max(0,16-(m-nt));return nt=m+T,window.setTimeout(f,T)}var lt=window.requestAnimationFrame||mt("RequestAnimationFrame")||Qe,vt=window.cancelAnimationFrame||mt("CancelAnimationFrame")||mt("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function rt(f,m,T){if(!T||lt!==Qe)return lt.call(window,Te(f,m));f.call(m)}function Se(f){f&&vt.call(window,f)}var Lt={__proto__:null,extend:ee,create:W,bind:Te,get lastId(){return Oe},stamp:Ee,throttle:$e,wrapNum:je,falseFn:Ne,formatNum:he,trim:fe,splitWords:Ce,setOptions:tt,getParamString:it,template:Vt,isArray:Be,indexOf:st,emptyImageUrl:ut,requestFn:lt,cancelFn:vt,requestAnimFrame:rt,cancelAnimFrame:Se};function tn(){}tn.extend=function(f){var m=function(){tt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=m.__super__=this.prototype,M=W(T);for(var N in M.constructor=m,m.prototype=M,this)Object.prototype.hasOwnProperty.call(this,N)&&"prototype"!==N&&"__super__"!==N&&(m[N]=this[N]);return f.statics&&ee(m,f.statics),f.includes&&(function Zt(f){if(!(typeof L>"u")&&L&&L.Mixin){f=Be(f)?f:[f];for(var m=0;m<f.length;m++)f[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(f.includes),ee.apply(null,[M].concat(f.includes))),ee(M,f),delete M.statics,delete M.includes,M.options&&(M.options=T.options?W(T.options):{},ee(M.options,f.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var H=0,ce=M._initHooks.length;H<ce;H++)M._initHooks[H].call(this)}},m},tn.include=function(f){var m=this.prototype.options;return ee(this.prototype,f),f.options&&(this.prototype.options=m,this.mergeOptions(f.options)),this},tn.mergeOptions=function(f){return ee(this.prototype.options,f),this},tn.addInitHook=function(f){var m=Array.prototype.slice.call(arguments,1),T="function"==typeof f?f:function(){this[f].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};var dn={on:function(f,m,T){if("object"==typeof f)for(var M in f)this._on(M,f[M],m);else for(var N=0,H=(f=Ce(f)).length;N<H;N++)this._on(f[N],m,T);return this},off:function(f,m,T){if(arguments.length)if("object"==typeof f)for(var M in f)this._off(M,f[M],m);else{f=Ce(f);for(var N=1===arguments.length,H=0,ce=f.length;H<ce;H++)N?this._off(f[H]):this._off(f[H],m,T)}else delete this._events;return this},_on:function(f,m,T,M){if("function"==typeof m){if(!1===this._listens(f,m,T)){T===this&&(T=void 0);var N={fn:m,ctx:T};M&&(N.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(N)}}else console.warn("wrong listener type: "+typeof m)},_off:function(f,m,T){var M,N,H;if(this._events&&(M=this._events[f])){if(1===arguments.length){if(this._firingCount)for(N=0,H=M.length;N<H;N++)M[N].fn=Ne;return void delete this._events[f]}if("function"!=typeof m)return void console.warn("wrong listener type: "+typeof m);var ce=this._listens(f,m,T);!1!==ce&&(this._firingCount&&(M[ce].fn=Ne,this._events[f]=M=M.slice()),M.splice(ce,1))}},fire:function(f,m,T){if(!this.listens(f,T))return this;var M=ee({},m,{type:f,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var N=this._events[f];if(N){this._firingCount=this._firingCount+1||1;for(var H=0,ce=N.length;H<ce;H++){var Ie=N[H],ke=Ie.fn;Ie.once&&this.off(f,ke,Ie.ctx),ke.call(Ie.ctx||this,M)}this._firingCount--}}return T&&this._propagateEvent(M),this},listens:function(f,m,T,M){"string"!=typeof f&&console.warn('"string" type argument expected');var N=m;"function"!=typeof m&&(M=!!m,N=void 0,T=void 0);var H=this._events&&this._events[f];if(H&&H.length&&!1!==this._listens(f,N,T))return!0;if(M)for(var ce in this._eventParents)if(this._eventParents[ce].listens(f,m,T,M))return!0;return!1},_listens:function(f,m,T){if(!this._events)return!1;var M=this._events[f]||[];if(!m)return!!M.length;T===this&&(T=void 0);for(var N=0,H=M.length;N<H;N++)if(M[N].fn===m&&M[N].ctx===T)return N;return!1},once:function(f,m,T){if("object"==typeof f)for(var M in f)this._on(M,f[M],m,!0);else for(var N=0,H=(f=Ce(f)).length;N<H;N++)this._on(f[N],m,T,!0);return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[Ee(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[Ee(f)],this},_propagateEvent:function(f){for(var m in this._eventParents)this._eventParents[m].fire(f.type,ee({layer:f.target,propagatedFrom:f.target},f),!0)}};dn.addEventListener=dn.on,dn.removeEventListener=dn.clearAllEventListeners=dn.off,dn.addOneTimeEventListener=dn.once,dn.fireEvent=dn.fire,dn.hasEventListeners=dn.listens;var zt=tn.extend(dn);function Cn(f,m,T){this.x=T?Math.round(f):f,this.y=T?Math.round(m):m}var Fe=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};function xe(f,m,T){return f instanceof Cn?f:Be(f)?new Cn(f[0],f[1]):null==f?f:"object"==typeof f&&"x"in f&&"y"in f?new Cn(f.x,f.y):new Cn(f,m,T)}function ze(f,m){if(f)for(var T=m?[f,m]:f,M=0,N=T.length;M<N;M++)this.extend(T[M])}function Ke(f,m){return!f||f instanceof ze?f:new ze(f,m)}function pt(f,m){if(f)for(var T=m?[f,m]:f,M=0,N=T.length;M<N;M++)this.extend(T[M])}function Je(f,m){return f instanceof pt?f:new pt(f,m)}function We(f,m,T){if(isNaN(f)||isNaN(m))throw new Error("Invalid LatLng object: ("+f+", "+m+")");this.lat=+f,this.lng=+m,void 0!==T&&(this.alt=+T)}function gt(f,m,T){return f instanceof We?f:Be(f)&&"object"!=typeof f[0]?3===f.length?new We(f[0],f[1],f[2]):2===f.length?new We(f[0],f[1]):null:null==f?f:"object"==typeof f&&"lat"in f?new We(f.lat,"lng"in f?f.lng:f.lon,f.alt):void 0===m?null:new We(f,m,T)}Cn.prototype={clone:function(){return new Cn(this.x,this.y)},add:function(f){return this.clone()._add(xe(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(xe(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new Cn(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new Cn(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this},distanceTo:function(f){var m=(f=xe(f)).x-this.x,T=f.y-this.y;return Math.sqrt(m*m+T*T)},equals:function(f){return(f=xe(f)).x===this.x&&f.y===this.y},contains:function(f){return f=xe(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+he(this.x)+", "+he(this.y)+")"}},ze.prototype={extend:function(f){var m,T;if(!f)return this;if(f instanceof Cn||"number"==typeof f[0]||"x"in f)m=T=xe(f);else if(T=(f=Ke(f)).max,!(m=f.min)||!T)return this;return this.min||this.max?(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)):(this.min=m.clone(),this.max=T.clone()),this},getCenter:function(f){return xe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return xe(this.min.x,this.max.y)},getTopRight:function(){return xe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var m,T;return(f="number"==typeof f[0]||f instanceof Cn?xe(f):Ke(f))instanceof ze?(m=f.min,T=f.max):m=T=f,m.x>=this.min.x&&T.x<=this.max.x&&m.y>=this.min.y&&T.y<=this.max.y},intersects:function(f){f=Ke(f);var m=this.min,T=this.max,M=f.min,N=f.max;return N.x>=m.x&&M.x<=T.x&&N.y>=m.y&&M.y<=T.y},overlaps:function(f){f=Ke(f);var m=this.min,T=this.max,M=f.min,N=f.max;return N.x>m.x&&M.x<T.x&&N.y>m.y&&M.y<T.y},isValid:function(){return!(!this.min||!this.max)},pad:function(f){var m=this.min,T=this.max,M=Math.abs(m.x-T.x)*f,N=Math.abs(m.y-T.y)*f;return Ke(xe(m.x-M,m.y-N),xe(T.x+M,T.y+N))},equals:function(f){return!!f&&(f=Ke(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight()))}},pt.prototype={extend:function(f){var M,N,m=this._southWest,T=this._northEast;if(f instanceof We)M=f,N=f;else{if(!(f instanceof pt))return f?this.extend(gt(f)||Je(f)):this;if(N=f._northEast,!(M=f._southWest)||!N)return this}return m||T?(m.lat=Math.min(M.lat,m.lat),m.lng=Math.min(M.lng,m.lng),T.lat=Math.max(N.lat,T.lat),T.lng=Math.max(N.lng,T.lng)):(this._southWest=new We(M.lat,M.lng),this._northEast=new We(N.lat,N.lng)),this},pad:function(f){var m=this._southWest,T=this._northEast,M=Math.abs(m.lat-T.lat)*f,N=Math.abs(m.lng-T.lng)*f;return new pt(new We(m.lat-M,m.lng-N),new We(T.lat+M,T.lng+N))},getCenter:function(){return new We((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new We(this.getNorth(),this.getWest())},getSouthEast:function(){return new We(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){f="number"==typeof f[0]||f instanceof We||"lat"in f?gt(f):Je(f);var M,N,m=this._southWest,T=this._northEast;return f instanceof pt?(M=f.getSouthWest(),N=f.getNorthEast()):M=N=f,M.lat>=m.lat&&N.lat<=T.lat&&M.lng>=m.lng&&N.lng<=T.lng},intersects:function(f){f=Je(f);var m=this._southWest,T=this._northEast,M=f.getSouthWest(),N=f.getNorthEast();return N.lat>=m.lat&&M.lat<=T.lat&&N.lng>=m.lng&&M.lng<=T.lng},overlaps:function(f){f=Je(f);var m=this._southWest,T=this._northEast,M=f.getSouthWest(),N=f.getNorthEast();return N.lat>m.lat&&M.lat<T.lat&&N.lng>m.lng&&M.lng<T.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,m){return!!f&&(f=Je(f),this._southWest.equals(f.getSouthWest(),m)&&this._northEast.equals(f.getNorthEast(),m))},isValid:function(){return!(!this._southWest||!this._northEast)}},We.prototype={equals:function(f,m){return!!f&&(f=gt(f),Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng))<=(void 0===m?1e-9:m))},toString:function(f){return"LatLng("+he(this.lat,f)+", "+he(this.lng,f)+")"},distanceTo:function(f){return Pt.distance(this,gt(f))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(f){var m=180*f/40075017,T=m/Math.cos(Math.PI/180*this.lat);return Je([this.lat-m,this.lng-T],[this.lat+m,this.lng+T])},clone:function(){return new We(this.lat,this.lng,this.alt)}};var f,ui={latLngToPoint:function(f,m){var T=this.projection.project(f),M=this.scale(m);return this.transformation._transform(T,M)},pointToLatLng:function(f,m){var T=this.scale(m),M=this.transformation.untransform(f,T);return this.projection.unproject(M)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var m=this.projection.bounds,T=this.scale(f);return new ze(this.transformation.transform(m.min,T),this.transformation.transform(m.max,T))},infinite:!1,wrapLatLng:function(f){var m=this.wrapLng?je(f.lng,this.wrapLng,!0):f.lng;return new We(this.wrapLat?je(f.lat,this.wrapLat,!0):f.lat,m,f.alt)},wrapLatLngBounds:function(f){var m=f.getCenter(),T=this.wrapLatLng(m),M=m.lat-T.lat,N=m.lng-T.lng;if(0===M&&0===N)return f;var H=f.getSouthWest(),ce=f.getNorthEast();return new pt(new We(H.lat-M,H.lng-N),new We(ce.lat-M,ce.lng-N))}},Pt=ee({},ui,{wrapLng:[-180,180],R:6371e3,distance:function(f,m){var T=Math.PI/180,M=f.lat*T,N=m.lat*T,H=Math.sin((m.lat-f.lat)*T/2),ce=Math.sin((m.lng-f.lng)*T/2),Ie=H*H+Math.cos(M)*Math.cos(N)*ce*ce,ke=2*Math.atan2(Math.sqrt(Ie),Math.sqrt(1-Ie));return this.R*ke}}),Vn={R:6378137,MAX_LATITUDE:85.0511287798,project:function(f){var m=Math.PI/180,T=this.MAX_LATITUDE,M=Math.max(Math.min(T,f.lat),-T),N=Math.sin(M*m);return new Cn(this.R*f.lng*m,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(f){var m=180/Math.PI;return new We((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*m,f.x*m/this.R)},bounds:(f=6378137*Math.PI,new ze([-f,-f],[f,f]))};function ri(f,m,T,M){if(Be(f))return this._a=f[0],this._b=f[1],this._c=f[2],void(this._d=f[3]);this._a=f,this._b=m,this._c=T,this._d=M}function _i(f,m,T,M){return new ri(f,m,T,M)}ri.prototype={transform:function(f,m){return this._transform(f.clone(),m)},_transform:function(f,m){return f.x=(m=m||1)*(this._a*f.x+this._b),f.y=m*(this._c*f.y+this._d),f},untransform:function(f,m){return new Cn((f.x/(m=m||1)-this._b)/this._a,(f.y/m-this._d)/this._c)}};var Or=ee({},Pt,{code:"EPSG:3857",projection:Vn,transformation:function(){var f=.5/(Math.PI*Vn.R);return _i(f,.5,-f,.5)}()}),ar=ee({},Or,{code:"EPSG:900913"});function Rr(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function ir(f,m){var M,N,H,ce,Ie,ke,T="";for(M=0,H=f.length;M<H;M++){for(N=0,ce=(Ie=f[M]).length;N<ce;N++)T+=(N?"L":"M")+(ke=Ie[N]).x+" "+ke.y;T+=m?De.svg?"z":"x":""}return T||"M0 0"}var ao=document.documentElement.style,To="ActiveXObject"in window,nl=To&&!document.addEventListener,Yi="msLaunchUri"in navigator&&!("documentMode"in document),jt=ge("webkit"),Ki=ge("android"),Es=ge("android 2")||ge("android 3"),lr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lo=Ki&&ge("Google")&&lr<537&&!("AudioNode"in window),Wr=!!window.opera,ti=!Yi&&ge("chrome"),Ln=ge("gecko")&&!jt&&!Wr&&!To,Wt=!ti&&ge("safari"),xn=ge("phantom"),Zn="OTransition"in ao,$r=0===navigator.platform.indexOf("Win"),Hi=To&&"transition"in ao,Gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Es,Qi="MozPerspective"in ao,Tr=!window.L_DISABLE_3D&&(Hi||Gr||Qi)&&!Zn&&!xn,kn=typeof orientation<"u"||ge("mobile"),Ko=kn&&jt,zn=kn&&Gr,Eo=!window.PointerEvent&&window.MSPointerEvent,Rn=!(!window.PointerEvent&&!Eo),rr="ontouchstart"in window||!!window.TouchEvent,Ji=!window.L_NO_TOUCH&&(rr||Rn),Yr=kn&&Wr,cr=kn&&Ln,Do=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,co=function(){var f=!1;try{var m=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",Ne,m),window.removeEventListener("testPassiveEventSupport",Ne,m)}catch{}return f}(),xo=!!document.createElement("canvas").getContext,le=!(!document.createElementNS||!Rr("svg").createSVGRect),oe=!!le&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(f.firstChild&&f.firstChild.namespaceURI)}(),G=!le&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var m=f.firstChild;return m.style.behavior="url(#default#VML)",m&&"object"==typeof m.adj}catch{return!1}}();function ge(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var De={ie:To,ielt9:nl,edge:Yi,webkit:jt,android:Ki,android23:Es,androidStock:lo,opera:Wr,chrome:ti,gecko:Ln,safari:Wt,phantom:xn,opera12:Zn,win:$r,ie3d:Hi,webkit3d:Gr,gecko3d:Qi,any3d:Tr,mobile:kn,mobileWebkit:Ko,mobileWebkit3d:zn,msPointer:Eo,pointer:Rn,touch:Ji,touchNative:rr,mobileOpera:Yr,mobileGecko:cr,retina:Do,passiveEvents:co,canvas:xo,svg:le,vml:G,inlineSvg:oe,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},kt=De.msPointer?"MSPointerDown":"pointerdown",pn=De.msPointer?"MSPointerMove":"pointermove",cn=De.msPointer?"MSPointerUp":"pointerup",Fn=De.msPointer?"MSPointerCancel":"pointercancel",_n={touchstart:kt,touchmove:pn,touchend:cn,touchcancel:Fn},Ai={touchstart:function on(f,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&ho(m),Nn(f,m)},touchmove:Nn,touchend:Nn,touchcancel:Nn},En={},Er=!1;function ua(f,m,T){return"touchstart"===m&&function wn(){Er||(document.addEventListener(kt,Me,!0),document.addEventListener(pn,ht,!0),document.addEventListener(cn,Kt,!0),document.addEventListener(Fn,Kt,!0),Er=!0)}(),Ai[m]?(T=Ai[m].bind(this,T),f.addEventListener(_n[m],T,!1),T):(console.warn("wrong event specified:",m),Ne)}function Me(f){En[f.pointerId]=f}function ht(f){En[f.pointerId]&&(En[f.pointerId]=f)}function Kt(f){delete En[f.pointerId]}function Nn(f,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){for(var T in m.touches=[],En)m.touches.push(En[T]);m.changedTouches=[m],f(m)}}var Xn=200;var Ds,Kr,ur,Ul,il,Fl=ka(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wc=ka(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),da="webkitTransition"===wc||"OTransition"===wc?wc+"End":"transitionend";function Dr(f){return"string"==typeof f?document.getElementById(f):f}function xt(f,m){var T=f.style[m]||f.currentStyle&&f.currentStyle[m];if((!T||"auto"===T)&&document.defaultView){var M=document.defaultView.getComputedStyle(f,null);T=M?M[m]:null}return"auto"===T?null:T}function Ot(f,m,T){var M=document.createElement(f);return M.className=m||"",T&&T.appendChild(M),M}function In(f){var m=f.parentNode;m&&m.removeChild(f)}function oi(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Qo(f){var m=f.parentNode;m&&m.lastChild!==f&&m.appendChild(f)}function Xi(f){var m=f.parentNode;m&&m.firstChild!==f&&m.insertBefore(f,m.firstChild)}function Li(f,m){if(void 0!==f.classList)return f.classList.contains(m);var T=On(f);return T.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(T)}function Qt(f,m){if(void 0!==f.classList)for(var T=Ce(m),M=0,N=T.length;M<N;M++)f.classList.add(T[M]);else if(!Li(f,m)){var H=On(f);si(f,(H?H+" ":"")+m)}}function Fi(f,m){void 0!==f.classList?f.classList.remove(m):si(f,fe((" "+On(f)+" ").replace(" "+m+" "," ")))}function si(f,m){void 0===f.className.baseVal?f.className=m:f.className.baseVal=m}function On(f){return f.correspondingElement&&(f=f.correspondingElement),void 0===f.className.baseVal?f.className:f.className.baseVal}function Ao(f,m){"opacity"in f.style?f.style.opacity=m:"filter"in f.style&&function hs(f,m){var T=!1,M="DXImageTransform.Microsoft.Alpha";try{T=f.filters.item(M)}catch{if(1===m)return}m=Math.round(100*m),T?(T.Enabled=100!==m,T.Opacity=m):f.style.filter+=" progid:"+M+"(opacity="+m+")"}(f,m)}function ka(f){for(var m=document.documentElement.style,T=0;T<f.length;T++)if(f[T]in m)return f[T];return!1}function Fo(f,m,T){var M=m||new Cn(0,0);f.style[Fl]=(De.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(T?" scale("+T+")":"")}function Yn(f,m){f._leaflet_pos=m,De.any3d?Fo(f,m):(f.style.left=m.x+"px",f.style.top=m.y+"px")}function Jo(f){return f._leaflet_pos||new Cn(0,0)}if("onselectstart"in document)Ds=function(){an(window,"selectstart",ho)},Kr=function(){fi(window,"selectstart",ho)};else{var _r=ka(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ds=function(){if(_r){var f=document.documentElement.style;ur=f[_r],f[_r]="none"}},Kr=function(){_r&&(document.documentElement.style[_r]=ur,ur=void 0)}}function Ci(){an(window,"dragstart",ho)}function Uo(){fi(window,"dragstart",ho)}function Oa(f){for(;-1===f.tabIndex;)f=f.parentNode;f.style&&(xs(),Ul=f,il=f.style.outlineStyle,f.style.outlineStyle="none",an(window,"keydown",xs))}function xs(){Ul&&(Ul.style.outlineStyle=il,Ul=void 0,il=void 0,fi(window,"keydown",xs))}function Ra(f){do{f=f.parentNode}while(!(f.offsetWidth&&f.offsetHeight||f===document.body));return f}function xr(f){var m=f.getBoundingClientRect();return{x:m.width/f.offsetWidth||1,y:m.height/f.offsetHeight||1,boundingClientRect:m}}var Qd={__proto__:null,TRANSFORM:Fl,TRANSITION:wc,TRANSITION_END:da,get:Dr,getStyle:xt,create:Ot,remove:In,empty:oi,toFront:Qo,toBack:Xi,hasClass:Li,addClass:Qt,removeClass:Fi,setClass:si,getClass:On,setOpacity:Ao,testProp:ka,setTransform:Fo,setPosition:Yn,getPosition:Jo,get disableTextSelection(){return Ds},get enableTextSelection(){return Kr},disableImageDrag:Ci,enableImageDrag:Uo,preventOutline:Oa,restoreOutline:xs,getSizedParentNode:Ra,getScale:xr};function an(f,m,T,M){if(m&&"object"==typeof m)for(var N in m)Qr(f,N,m[N],T);else for(var H=0,ce=(m=Ce(m)).length;H<ce;H++)Qr(f,m[H],T,M);return this}var Ii="_leaflet_events";function fi(f,m,T,M){if(1===arguments.length)bc(f),delete f[Ii];else if(m&&"object"==typeof m)for(var N in m)Vs(f,N,m[N],T);else if(m=Ce(m),2===arguments.length)bc(f,function(Ie){return-1!==st(m,Ie)});else for(var H=0,ce=m.length;H<ce;H++)Vs(f,m[H],T,M);return this}function bc(f,m){for(var T in f[Ii]){var M=T.split(/\d/)[0];(!m||m(M))&&Vs(f,M,null,null,T)}}var rl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qr(f,m,T,M){var N=m+Ee(T)+(M?"_"+Ee(M):"");if(f[Ii]&&f[Ii][N])return this;var H=function(Ie){return T.call(M||f,Ie||window.event)},ce=H;!De.touchNative&&De.pointer&&0===m.indexOf("touch")?H=ua(f,m,H):De.touch&&"dblclick"===m?H=function uo(f,m){f.addEventListener("dblclick",m);var M,T=0;function N(H){if(1===H.detail){if("mouse"!==H.pointerType&&(!H.sourceCapabilities||H.sourceCapabilities.firesTouchEvents)){var ce=Xd(H);if(!ce.some(function(ke){return ke instanceof HTMLLabelElement&&ke.attributes.for})||ce.some(function(ke){return ke instanceof HTMLInputElement||ke instanceof HTMLSelectElement})){var Ie=Date.now();Ie-T<=Xn?2==++M&&m(function pi(f){var T,M,m={};for(M in f)m[M]=(T=f[M])&&T.bind?T.bind(f):T;return f=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}(H)):M=1,T=Ie}}}else M=H.detail}return f.addEventListener("click",N),{dblclick:m,simDblclick:N}}(f,H):"addEventListener"in f?"touchstart"===m||"touchmove"===m||"wheel"===m||"mousewheel"===m?f.addEventListener(rl[m]||m,H,!!De.passiveEvents&&{passive:!1}):"mouseenter"===m||"mouseleave"===m?f.addEventListener(rl[m],H=function(Ie){Ie=Ie||window.event,hu(f,Ie)&&ce(Ie)},!1):f.addEventListener(m,ce,!1):f.attachEvent("on"+m,H),f[Ii]=f[Ii]||{},f[Ii][N]=H}function Vs(f,m,T,M,N){N=N||m+Ee(T)+(M?"_"+Ee(M):"");var H=f[Ii]&&f[Ii][N];if(!H)return this;!De.touchNative&&De.pointer&&0===m.indexOf("touch")?function He(f,m,T){_n[m]?f.removeEventListener(_n[m],T,!1):console.warn("wrong event specified:",m)}(f,m,H):De.touch&&"dblclick"===m?function Nr(f,m){f.removeEventListener("dblclick",m.dblclick),f.removeEventListener("click",m.simDblclick)}(f,H):"removeEventListener"in f?f.removeEventListener(rl[m]||m,H,!1):f.detachEvent("on"+m,H),f[Ii][N]=null}function Xo(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Jd(f){return Qr(f,"wheel",Xo),this}function Bo(f){return an(f,"mousedown touchstart dblclick contextmenu",Xo),f._leaflet_disable_click=!0,this}function ho(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Na(f){return ho(f),Xo(f),this}function Xd(f){if(f.composedPath)return f.composedPath();for(var m=[],T=f.target;T;)m.push(T),T=T.parentNode;return m}function Ju(f,m){if(!m)return new Cn(f.clientX,f.clientY);var T=xr(m),M=T.boundingClientRect;return new Cn((f.clientX-M.left)/T.x-m.clientLeft,(f.clientY-M.top)/T.y-m.clientTop)}var Dp=De.linux&&De.chrome?window.devicePixelRatio:De.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xu(f){return De.edge?f.wheelDeltaY/2:f.deltaY&&0===f.deltaMode?-f.deltaY/Dp:f.deltaY&&1===f.deltaMode?20*-f.deltaY:f.deltaY&&2===f.deltaMode?60*-f.deltaY:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?20*-f.detail:f.detail?f.detail/-32765*60:0}function hu(f,m){var T=m.relatedTarget;if(!T)return!0;try{for(;T&&T!==f;)T=T.parentNode}catch{return!1}return T!==f}var eh={__proto__:null,on:an,off:fi,stopPropagation:Xo,disableScrollPropagation:Jd,disableClickPropagation:Bo,preventDefault:ho,stop:Na,getPropagationPath:Xd,getMousePosition:Ju,getWheelDelta:Xu,isExternalTarget:hu,addListener:an,removeListener:fi},th=zt.extend({run:function(f,m,T,M){this.stop(),this._el=f,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=Jo(f),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=rt(this._animate,this),this._step()},_step:function(f){var m=+new Date-this._startTime,T=1e3*this._duration;m<T?this._runFrame(this._easeOut(m/T),f):(this._runFrame(1),this._complete())},_runFrame:function(f,m){var T=this._startPos.add(this._offset.multiplyBy(f));m&&T._round(),Yn(this._el,T),this.fire("step")},_complete:function(){Se(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Un=zt.extend({options:{crs:Or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,m){m=tt(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=Te(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),void 0!==m.zoom&&(this._zoom=this._limitZoom(m.zoom)),m.center&&void 0!==m.zoom&&this.setView(gt(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wc&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),an(this._proxy,da,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,m,T){return m=void 0===m?this._zoom:this._limitZoom(m),f=this._limitCenter(gt(f),m,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&!0!==T&&(void 0!==T.animate&&(T.zoom=ee({animate:T.animate},T.zoom),T.pan=ee({animate:T.animate,duration:T.duration},T.pan)),this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,m,T.zoom):this._tryAnimatedPan(f,T.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(f,m,T.pan&&T.pan.noMoveStart),this)},setZoom:function(f,m){return this._loaded?this.setView(this.getCenter(),f,{zoom:m}):(this._zoom=f,this)},zoomIn:function(f,m){return this.setZoom(this._zoom+(f=f||(De.any3d?this.options.zoomDelta:1)),m)},zoomOut:function(f,m){return this.setZoom(this._zoom-(f=f||(De.any3d?this.options.zoomDelta:1)),m)},setZoomAround:function(f,m,T){var M=this.getZoomScale(m),N=this.getSize().divideBy(2),ce=(f instanceof Cn?f:this.latLngToContainerPoint(f)).subtract(N).multiplyBy(1-1/M),Ie=this.containerPointToLatLng(N.add(ce));return this.setView(Ie,m,{zoom:T})},_getBoundsCenterZoom:function(f,m){m=m||{},f=f.getBounds?f.getBounds():Je(f);var T=xe(m.paddingTopLeft||m.padding||[0,0]),M=xe(m.paddingBottomRight||m.padding||[0,0]),N=this.getBoundsZoom(f,!1,T.add(M));if((N="number"==typeof m.maxZoom?Math.min(m.maxZoom,N):N)===1/0)return{center:f.getCenter(),zoom:N};var H=M.subtract(T).divideBy(2),ce=this.project(f.getSouthWest(),N),Ie=this.project(f.getNorthEast(),N);return{center:this.unproject(ce.add(Ie).divideBy(2).add(H),N),zoom:N}},fitBounds:function(f,m){if(!(f=Je(f)).isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(f,m);return this.setView(T.center,T.zoom,m)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,m){return this.setView(f,this._zoom,{pan:m})},panBy:function(f,m){if(m=m||{},!(f=xe(f).round()).x&&!f.y)return this.fire("moveend");if(!0!==m.animate&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new th,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),!1!==m.animate){Qt(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,T,m.duration||.25,m.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,m,T){if(!1===(T=T||{}).animate||!De.any3d)return this.setView(f,m,T);this._stop();var M=this.project(this.getCenter()),N=this.project(f),H=this.getSize(),ce=this._zoom;f=gt(f),m=void 0===m?ce:m;var Ie=Math.max(H.x,H.y),ke=Ie*this.getZoomScale(ce,m),ct=N.distanceTo(M)||1,Rt=1.42,sn=Rt*Rt;function jn(Si){var Ys=(ke*ke-Ie*Ie+(Si?-1:1)*sn*sn*ct*ct)/(2*(Si?ke:Ie)*sn*ct),fh=Math.sqrt(Ys*Ys+1)-Ys;return fh<1e-9?-18:Math.log(fh)}function ni(Si){return(Math.exp(Si)-Math.exp(-Si))/2}function Vi(Si){return(Math.exp(Si)+Math.exp(-Si))/2}var Mo=jn(0);function dh(Si){return Ie*(Vi(Mo)*function So(Si){return ni(Si)/Vi(Si)}(Mo+Rt*Si)-ni(Mo))/sn}var Ir=Date.now(),vl=(jn(1)-Mo)/Rt,er=T.duration?1e3*T.duration:1e3*vl*.8;return this._moveStart(!0,T.noMoveStart),function hh(){var Si=(Date.now()-Ir)/er,yl=function wu(Si){return 1-Math.pow(1-Si,1.5)}(Si)*vl;Si<=1?(this._flyToFrame=rt(hh,this),this._move(this.unproject(M.add(N.subtract(M).multiplyBy(dh(yl)/ct)),ce),this.getScaleZoom(Ie/function Gs(Si){return Ie*(Vi(Mo)/Vi(Mo+Rt*Si))}(yl),ce),{flyTo:!0})):this._move(f,m)._moveEnd(!0)}.call(this),this},flyToBounds:function(f,m){var T=this._getBoundsCenterZoom(f,m);return this.flyTo(T.center,T.zoom,m)},setMaxBounds:function(f){return f=Je(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var m=this.options.minZoom;return this.options.minZoom=f,this._loaded&&m!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var m=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&m!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,m){this._enforcingBounds=!0;var T=this.getCenter(),M=this._limitCenter(T,this._zoom,Je(f));return T.equals(M)||this.panTo(M,m),this._enforcingBounds=!1,this},panInside:function(f,m){var T=xe((m=m||{}).paddingTopLeft||m.padding||[0,0]),M=xe(m.paddingBottomRight||m.padding||[0,0]),N=this.project(this.getCenter()),H=this.project(f),ce=this.getPixelBounds(),Ie=Ke([ce.min.add(T),ce.max.subtract(M)]),ke=Ie.getSize();if(!Ie.contains(H)){this._enforcingBounds=!0;var ct=H.subtract(Ie.getCenter()),Rt=Ie.extend(H).getSize().subtract(ke);N.x+=ct.x<0?-Rt.x:Rt.x,N.y+=ct.y<0?-Rt.y:Rt.y,this.panTo(this.unproject(N),m),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=ee({animate:!1,pan:!0},!0===f?{animate:!0}:f);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),M=m.divideBy(2).round(),N=T.divideBy(2).round(),H=M.subtract(N);return H.x||H.y?(f.animate&&f.pan?this.panBy(H):(f.pan&&this._rawPanBy(H),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Te(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:T})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=ee({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=Te(this._handleGeolocationResponse,this),T=Te(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,T,f):navigator.geolocation.getCurrentPosition(m,T,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var m=f.code,T=f.message||(1===m?"permission denied":2===m?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var M=new We(f.coords.latitude,f.coords.longitude),N=M.toBounds(2*f.coords.accuracy),H=this._locateOptions;if(H.setView){var ce=this.getBoundsZoom(N);this.setView(M,H.maxZoom?Math.min(ce,H.maxZoom):ce)}var Ie={latlng:M,bounds:N,timestamp:f.timestamp};for(var ke in f.coords)"number"==typeof f.coords[ke]&&(Ie[ke]=f.coords[ke]);this.fire("locationfound",Ie)}},addHandler:function(f,m){if(!m)return this;var T=this[f]=new m(this);return this._handlers.push(T),this.options[f]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var f;for(f in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),In(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Se(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[f].remove();for(f in this._panes)In(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,m){var M=Ot("div","leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),m||this._mapPane);return f&&(this._panes[f]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds();return new pt(this.unproject(f.getBottomLeft()),this.unproject(f.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,m,T){f=Je(f),T=xe(T||[0,0]);var M=this.getZoom()||0,N=this.getMinZoom(),H=this.getMaxZoom(),ce=f.getNorthWest(),Ie=f.getSouthEast(),ke=this.getSize().subtract(T),ct=Ke(this.project(Ie,M),this.project(ce,M)).getSize(),Rt=De.any3d?this.options.zoomSnap:1,sn=ke.x/ct.x,jn=ke.y/ct.y,ni=m?Math.max(sn,jn):Math.min(sn,jn);return M=this.getScaleZoom(ni,M),Rt&&(M=Math.round(M/(Rt/100))*(Rt/100),M=m?Math.ceil(M/Rt)*Rt:Math.floor(M/Rt)*Rt),Math.max(N,Math.min(H,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Cn(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,m){var T=this._getTopLeftPoint(f,m);return new ze(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(void 0===f?this.getZoom():f)},getPane:function(f){return"string"==typeof f?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,m){var T=this.options.crs;return m=void 0===m?this._zoom:m,T.scale(f)/T.scale(m)},getScaleZoom:function(f,m){var T=this.options.crs,M=T.zoom(f*T.scale(m=void 0===m?this._zoom:m));return isNaN(M)?1/0:M},project:function(f,m){return m=void 0===m?this._zoom:m,this.options.crs.latLngToPoint(gt(f),m)},unproject:function(f,m){return m=void 0===m?this._zoom:m,this.options.crs.pointToLatLng(xe(f),m)},layerPointToLatLng:function(f){var m=xe(f).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(f){return this.project(gt(f))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(gt(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(Je(f))},distance:function(f,m){return this.options.crs.distance(gt(f),gt(m))},containerPointToLayerPoint:function(f){return xe(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return xe(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var m=this.containerPointToLayerPoint(xe(f));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(gt(f)))},mouseEventToContainerPoint:function(f){return Ju(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var m=this._container=Dr(f);if(!m)throw new Error("Map container not found.");if(m._leaflet_id)throw new Error("Map container is already initialized.");an(m,"scroll",this._onScroll,this),this._containerId=Ee(m)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,Qt(f,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=xt(f,"position");"absolute"!==m&&"relative"!==m&&"fixed"!==m&&"sticky"!==m&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Yn(this._mapPane,new Cn(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qt(f.markerPane,"leaflet-zoom-hide"),Qt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,m,T){Yn(this._mapPane,new Cn(0,0));var M=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var N=this._zoom!==m;this._moveStart(N,T)._move(f,m)._moveEnd(N),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(f,m){return f&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(f,m,T,M){void 0===m&&(m=this._zoom);var N=this._zoom!==m;return this._zoom=m,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),M?T&&T.pinch&&this.fire("zoom",T):((N||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Se(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Yn(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[Ee(this._container)]=this;var m=f?fi:an;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Se(this._resizeRequest),this._resizeRequest=rt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,m){for(var M,T=[],N="mouseout"===m||"mouseover"===m,H=f.target||f.srcElement,ce=!1;H;){if((M=this._targets[Ee(H)])&&("click"===m||"preclick"===m)&&this._draggableMoved(M)){ce=!0;break}if(M&&M.listens(m,!0)&&(N&&!hu(H,f)||(T.push(M),N))||H===this._container)break;H=H.parentNode}return!T.length&&!ce&&!N&&this.listens(m,!0)&&(T=[this]),T},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var m=f.target||f.srcElement;if(!(!this._loaded||m._leaflet_disable_events||"click"===f.type&&this._isClickDisabled(m))){var T=f.type;"mousedown"===T&&Oa(m),this._fireDOMEvent(f,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,m,T){if("click"===f.type){var M=ee({},f);M.type="preclick",this._fireDOMEvent(M,M.type,T)}var N=this._findEventTargets(f,m);if(T){for(var H=[],ce=0;ce<T.length;ce++)T[ce].listens(m,!0)&&H.push(T[ce]);N=H.concat(N)}if(N.length){"contextmenu"===m&&ho(f);var Ie=N[0],ke={originalEvent:f};if("keypress"!==f.type&&"keydown"!==f.type&&"keyup"!==f.type){var ct=Ie.getLatLng&&(!Ie._radius||Ie._radius<=10);ke.containerPoint=ct?this.latLngToContainerPoint(Ie.getLatLng()):this.mouseEventToContainerPoint(f),ke.layerPoint=this.containerPointToLayerPoint(ke.containerPoint),ke.latlng=ct?Ie.getLatLng():this.layerPointToLatLng(ke.layerPoint)}for(ce=0;ce<N.length;ce++)if(N[ce].fire(m,ke,!0),ke.originalEvent._stopped||!1===N[ce].options.bubblingMouseEvents&&-1!==st(this._mouseEvents,m))return}},_draggableMoved:function(f){return(f=f.dragging&&f.dragging.enabled()?f:this).dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,m=this._handlers.length;f<m;f++)this._handlers[f].disable()},whenReady:function(f,m){return this._loaded?f.call(m||this,{target:this}):this.on("load",f,m),this},_getMapPanePos:function(){return Jo(this._mapPane)||new Cn(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,m){return(f&&void 0!==m?this._getNewPixelOrigin(f,m):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,m){var T=this.getSize()._divideBy(2);return this.project(f,m)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,m,T){var M=this._getNewPixelOrigin(T,m);return this.project(f,m)._subtract(M)},_latLngBoundsToNewLayerBounds:function(f,m,T){var M=this._getNewPixelOrigin(T,m);return Ke([this.project(f.getSouthWest(),m)._subtract(M),this.project(f.getNorthWest(),m)._subtract(M),this.project(f.getSouthEast(),m)._subtract(M),this.project(f.getNorthEast(),m)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,m,T){if(!T)return f;var M=this.project(f,m),N=this.getSize().divideBy(2),H=new ze(M.subtract(N),M.add(N)),ce=this._getBoundsOffset(H,T,m);return Math.abs(ce.x)<=1&&Math.abs(ce.y)<=1?f:this.unproject(M.add(ce),m)},_limitOffset:function(f,m){if(!m)return f;var T=this.getPixelBounds(),M=new ze(T.min.add(f),T.max.add(f));return f.add(this._getBoundsOffset(M,m))},_getBoundsOffset:function(f,m,T){var M=Ke(this.project(m.getNorthEast(),T),this.project(m.getSouthWest(),T)),N=M.min.subtract(f.min),H=M.max.subtract(f.max);return new Cn(this._rebound(N.x,-H.x),this._rebound(N.y,-H.y))},_rebound:function(f,m){return f+m>0?Math.round(f-m)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(m))},_limitZoom:function(f){var m=this.getMinZoom(),T=this.getMaxZoom(),M=De.any3d?this.options.zoomSnap:1;return M&&(f=Math.round(f/M)*M),Math.max(m,Math.min(T,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Fi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,m){var T=this._getCenterOffset(f)._trunc();return!(!0!==(m&&m.animate)&&!this.getSize().contains(T)||(this.panBy(T,m),0))},_createAnimProxy:function(){var f=this._proxy=Ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(m){var T=Fl,M=this._proxy.style[T];Fo(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),M===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){In(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),m=this.getZoom();Fo(this._proxy,this.project(f,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,m,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||!1===T.animate||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(m),N=this._getCenterOffset(f)._divideBy(1-1/M);return!(!0!==T.animate&&!this.getSize().contains(N)||(rt(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(f,m,!0)},this),0))},_animateZoom:function(f,m,T,M){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=m,Qt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:m,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Te(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Fi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Is=tn.extend({options:{position:"topright"},initialize:function(f){tt(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var m=this._map;return m&&m.removeControl(this),this.options.position=f,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var m=this._container=this.onAdd(f),T=this.getPosition(),M=f._controlCorners[T];return Qt(m,"leaflet-control"),-1!==T.indexOf("bottom")?M.insertBefore(m,M.firstChild):M.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(In(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Zs=function(f){return new Is(f)};Un.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},m="leaflet-",T=this._controlContainer=Ot("div",m+"control-container",this._container);function M(N,H){f[N+H]=Ot("div",m+N+" "+m+H,T)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)In(this._controlCorners[f]);In(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nh=Is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,m,T,M){return T<M?-1:M<T?1:0}},initialize:function(f,m,T){for(var M in tt(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,f)this._addLayer(f[M],M);for(M in m)this._addLayer(m[M],M,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Is.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,m){return this._addLayer(f,m),this._map?this._update():this},addOverlay:function(f,m){return this._addLayer(f,m,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var m=this._getLayer(Ee(f));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){Qt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(Qt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Fi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Fi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",m=this._container=Ot("div",f),T=this.options.collapsed;m.setAttribute("aria-haspopup",!0),Bo(m),Jd(m);var M=this._section=Ot("section",f+"-list");T&&(this._map.on("click",this.collapse,this),an(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=Ot("a",f+"-toggle",m);N.href="#",N.title="Layers",N.setAttribute("role","button"),an(N,{keydown:function(H){13===H.keyCode&&this._expandSafely()},click:function(H){ho(H),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=Ot("div",f+"-base",M),this._separator=Ot("div",f+"-separator",M),this._overlaysList=Ot("div",f+"-overlays",M),m.appendChild(M)},_getLayer:function(f){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&Ee(this._layers[m].layer)===f)return this._layers[m]},_addLayer:function(f,m,T){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:m,overlay:T}),this.options.sortLayers&&this._layers.sort(Te(function(M,N){return this.options.sortFunction(M.layer,N.layer,M.name,N.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oi(this._baseLayersList),oi(this._overlaysList),this._layerControlInputs=[];var f,m,T,M,N=0;for(T=0;T<this._layers.length;T++)this._addItem(M=this._layers[T]),m=m||M.overlay,f=f||!M.overlay,N+=M.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(f=f&&N>1)?"":"none"),this._separator.style.display=m&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var m=this._getLayer(Ee(f.target)),T=m.overlay?"add"===f.type?"overlayadd":"overlayremove":"add"===f.type?"baselayerchange":null;T&&this._map.fire(T,m)},_createRadioElement:function(f,m){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(m?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=T,M.firstChild},_addItem:function(f){var M,m=document.createElement("label"),T=this._map.hasLayer(f.layer);f.overlay?((M=document.createElement("input")).type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=T):M=this._createRadioElement("leaflet-base-layers_"+Ee(this),T),this._layerControlInputs.push(M),M.layerId=Ee(f.layer),an(M,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+f.name;var H=document.createElement("span");return m.appendChild(H),H.appendChild(M),H.appendChild(N),(f.overlay?this._overlaysList:this._baseLayersList).appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var m,T,f=this._layerControlInputs,M=[],N=[];this._handlingClick=!0;for(var H=f.length-1;H>=0;H--)T=this._getLayer((m=f[H]).layerId).layer,m.checked?M.push(T):m.checked||N.push(T);for(H=0;H<N.length;H++)this._map.hasLayer(N[H])&&this._map.removeLayer(N[H]);for(H=0;H<M.length;H++)this._map.hasLayer(M[H])||this._map.addLayer(M[H]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var m,T,f=this._layerControlInputs,M=this._map.getZoom(),N=f.length-1;N>=0;N--)T=this._getLayer((m=f[N]).layerId).layer,m.disabled=void 0!==T.options.minZoom&&M<T.options.minZoom||void 0!==T.options.maxZoom&&M>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,an(f,"click",ho),this.expand();var m=this;setTimeout(function(){fi(f,"click",ho),m._preventClick=!1})}}),ha=Is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var m="leaflet-control-zoom",T=Ot("div",m+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,m+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,m+"-out",T,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,m,T,M,N){var H=Ot("a",T,M);return H.innerHTML=f,H.href="#",H.title=m,H.setAttribute("role","button"),H.setAttribute("aria-label",m),Bo(H),an(H,"click",Na),an(H,"click",N,this),an(H,"click",this._refocusOnMap,this),H},_updateDisabled:function(){var f=this._map,m="leaflet-disabled";Fi(this._zoomInButton,m),Fi(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(Qt(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(Qt(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});Un.mergeOptions({zoomControl:!0}),Un.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ha,this.addControl(this.zoomControl))});var zs=Is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var m="leaflet-control-scale",T=Ot("div",m),M=this.options;return this._addScales(M,m+"-line",T),f.on(M.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),T},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,m,T){f.metric&&(this._mScale=Ot("div",m,T)),f.imperial&&(this._iScale=Ot("div",m,T))},_update:function(){var f=this._map,m=f.getSize().y/2,T=f.distance(f.containerPointToLatLng([0,m]),f.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(T)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var m=this._getRoundNum(f);this._updateScale(this._mScale,m<1e3?m+" m":m/1e3+" km",m/f)},_updateImperial:function(f){var T,M,N,m=3.2808399*f;m>5280?(M=this._getRoundNum(T=m/5280),this._updateScale(this._iScale,M+" mi",M/T)):(N=this._getRoundNum(m),this._updateScale(this._iScale,N+" ft",N/m))},_updateScale:function(f,m,T){f.style.width=Math.round(this.options.maxWidth*T)+"px",f.innerHTML=m},_getRoundNum:function(f){var m=Math.pow(10,(Math.floor(f)+"").length-1),T=f/m;return m*(T>=10?10:T>=5?5:T>=3?3:T>=2?2:1)}}),Bl=Is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(f){tt(this,f),this._attributions={}},onAdd:function(f){for(var m in f.attributionControl=this,this._container=Ot("div","leaflet-control-attribution"),Bo(this._container),f._layers)f._layers[m].getAttribution&&this.addAttribution(f._layers[m].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var m in this._attributions)this._attributions[m]&&f.push(m);var T=[];this.options.prefix&&T.push(this.options.prefix),f.length&&T.push(f.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});Un.mergeOptions({attributionControl:!0}),Un.addInitHook(function(){this.options.attributionControl&&(new Bl).addTo(this)});Is.Layers=nh,Is.Zoom=ha,Is.Scale=zs,Is.Attribution=Bl,Zs.layers=function(f,m,T){return new nh(f,m,T)},Zs.zoom=function(f){return new ha(f)},Zs.scale=function(f){return new zs(f)},Zs.attribution=function(f){return new Bl(f)};var Jr=tn.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jr.addTo=function(f,m){return f.addHandler(m,this),this};var ed={Events:dn},Cc=De.touch?"touchstart mousedown":"mousedown",fa=zt.extend({options:{clickTolerance:3},initialize:function(f,m,T,M){tt(this,M),this._element=f,this._dragStartTarget=m||f,this._preventOutline=T},enable:function(){this._enabled||(an(this._dragStartTarget,Cc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fa._dragging===this&&this.finishDrag(!0),fi(this._dragStartTarget,Cc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Li(this._element,"leaflet-zoom-anim"))){if(f.touches&&1!==f.touches.length)return void(fa._dragging===this&&this.finishDrag());if(!(fa._dragging||f.shiftKey||1!==f.which&&1!==f.button&&!f.touches||(fa._dragging=this,this._preventOutline&&Oa(this._element),Ci(),Ds(),this._moving))){this.fire("down");var m=f.touches?f.touches[0]:f,T=Ra(this._element);this._startPoint=new Cn(m.clientX,m.clientY),this._startPos=Jo(this._element),this._parentScale=xr(T);var M="mousedown"===f.type;an(document,M?"mousemove":"touchmove",this._onMove,this),an(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1)return void(this._moved=!0);var m=f.touches&&1===f.touches.length?f.touches[0]:f,T=new Cn(m.clientX,m.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,ho(f),this._moved||(this.fire("dragstart"),this._moved=!0,Qt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Yn(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Fi(document.body,"leaflet-dragging"),this._lastTarget&&(Fi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),fi(document,"mousemove touchmove",this._onMove,this),fi(document,"mouseup touchend touchcancel",this._onUp,this),Uo(),Kr();var m=this._moved&&this._moving;this._moving=!1,fa._dragging=!1,m&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function sl(f,m,T){var M,H,ce,Ie,ke,ct,Rt,sn,jn,N=[1,4,2,8];for(H=0,Rt=f.length;H<Rt;H++)f[H]._code=Ss(f[H],m);for(Ie=0;Ie<4;Ie++){for(sn=N[Ie],M=[],H=0,ce=(Rt=f.length)-1;H<Rt;ce=H++)ct=f[ce],(ke=f[H])._code&sn?ct._code&sn||((jn=dr(ct,ke,sn,m,T))._code=Ss(jn,m),M.push(jn)):(ct._code&sn&&((jn=dr(ct,ke,sn,m,T))._code=Ss(jn,m),M.push(jn)),M.push(ke));f=M}return f}function La(f,m){var T,M,N,H,ce,Ie,ke,ct;if(!f||0===f.length)throw new Error("latlngs not passed");yr(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var sn=gt([0,0]),jn=Je(f);jn.getNorthWest().distanceTo(jn.getSouthWest())*jn.getNorthEast().distanceTo(jn.getNorthWest())<1700&&(sn=Ui(f));var Vi=f.length,So=[];for(T=0;T<Vi;T++){var Mo=gt(f[T]);So.push(m.project(gt([Mo.lat-sn.lat,Mo.lng-sn.lng])))}for(Ie=ke=ct=0,T=0,M=Vi-1;T<Vi;M=T++)ke+=((N=So[T]).x+(H=So[M]).x)*(ce=N.y*H.x-H.y*N.x),ct+=(N.y+H.y)*ce,Ie+=3*ce;var Gs=m.unproject(xe(0===Ie?So[0]:[ke/Ie,ct/Ie]));return gt([Gs.lat+sn.lat,Gs.lng+sn.lng])}function Ui(f){for(var m=0,T=0,M=0,N=0;N<f.length;N++){var H=gt(f[N]);m+=H.lat,T+=H.lng,M++}return gt([m/M,T/M])}var Dc,Tc={__proto__:null,clipPolygon:sl,polygonCenter:La,centroid:Ui};function Ec(f,m){if(!m||!f.length)return f.slice();var T=m*m;return function ll(f,m){var T=f.length,N=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(T);N[0]=N[T-1]=1,Ar(f,N,m,0,T-1);var H,ce=[];for(H=0;H<T;H++)N[H]&&ce.push(f[H]);return ce}(f=function df(f,m){for(var T=[f[0]],M=1,N=0,H=f.length;M<H;M++)Fa(f[M],f[N])>m&&(T.push(f[M]),N=M);return N<H-1&&T.push(f[H-1]),T}(f,T),T)}function vr(f,m,T){return Math.sqrt(Vl(f,m,T,!0))}function Ar(f,m,T,M,N){var ce,Ie,ke,H=0;for(Ie=M+1;Ie<=N-1;Ie++)(ke=Vl(f[Ie],f[M],f[N],!0))>H&&(ce=Ie,H=ke);H>T&&(m[ce]=1,Ar(f,m,T,M,ce),Ar(f,m,T,ce,N))}function fo(f,m,T,M,N){var Ie,ke,ct,H=M?Dc:Ss(f,T),ce=Ss(m,T);for(Dc=ce;;){if(!(H|ce))return[f,m];if(H&ce)return!1;ct=Ss(ke=dr(f,m,Ie=H||ce,T,N),T),Ie===H?(f=ke,H=ct):(m=ke,ce=ct)}}function dr(f,m,T,M,N){var ct,Rt,H=m.x-f.x,ce=m.y-f.y,Ie=M.min,ke=M.max;return 8&T?(ct=f.x+H*(ke.y-f.y)/ce,Rt=ke.y):4&T?(ct=f.x+H*(Ie.y-f.y)/ce,Rt=Ie.y):2&T?(ct=ke.x,Rt=f.y+ce*(ke.x-f.x)/H):1&T&&(ct=Ie.x,Rt=f.y+ce*(Ie.x-f.x)/H),new Cn(ct,Rt,N)}function Ss(f,m){var T=0;return f.x<m.min.x?T|=1:f.x>m.max.x&&(T|=2),f.y<m.min.y?T|=4:f.y>m.max.y&&(T|=8),T}function Fa(f,m){var T=m.x-f.x,M=m.y-f.y;return T*T+M*M}function Vl(f,m,T,M){var ct,N=m.x,H=m.y,ce=T.x-N,Ie=T.y-H,ke=ce*ce+Ie*Ie;return ke>0&&((ct=((f.x-N)*ce+(f.y-H)*Ie)/ke)>1?(N=T.x,H=T.y):ct>0&&(N+=ce*ct,H+=Ie*ct)),ce=f.x-N,Ie=f.y-H,M?ce*ce+Ie*Ie:new Cn(N,H)}function yr(f){return!Be(f[0])||"object"!=typeof f[0][0]&&typeof f[0][0]<"u"}function Zl(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yr(f)}function cl(f,m){var T,M,N,H,ce,Ie,ke,ct;if(!f||0===f.length)throw new Error("latlngs not passed");yr(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Rt=gt([0,0]),sn=Je(f);sn.getNorthWest().distanceTo(sn.getSouthWest())*sn.getNorthEast().distanceTo(sn.getNorthWest())<1700&&(Rt=Ui(f));var ni=f.length,Vi=[];for(T=0;T<ni;T++){var So=gt(f[T]);Vi.push(m.project(gt([So.lat-Rt.lat,So.lng-Rt.lng])))}for(T=0,M=0;T<ni-1;T++)M+=Vi[T].distanceTo(Vi[T+1])/2;if(0===M)ct=Vi[0];else for(T=0,H=0;T<ni-1;T++)if((H+=N=(ce=Vi[T]).distanceTo(Ie=Vi[T+1]))>M){ct=[Ie.x-(ke=(H-M)/N)*(Ie.x-ce.x),Ie.y-ke*(Ie.y-ce.y)];break}var Mo=m.unproject(xe(ct));return gt([Mo.lat+Rt.lat,Mo.lng+Rt.lng])}var An={__proto__:null,simplify:Ec,pointToSegmentDistance:vr,closestPointOnSegment:function al(f,m,T){return Vl(f,m,T)},clipSegment:fo,_getEdgeIntersection:dr,_getBitCode:Ss,_sqClosestPointOnSegment:Vl,isFlat:yr,_flat:Zl,polylineCenter:cl},zl={project:function(f){return new Cn(f.lng,f.lat)},unproject:function(f){return new We(f.y,f.x)},bounds:new ze([-180,-90],[180,90])},td={R:6378137,R_MINOR:6356752.314245179,bounds:new ze([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(f){var m=Math.PI/180,T=this.R,M=f.lat*m,N=this.R_MINOR/T,H=Math.sqrt(1-N*N),ce=H*Math.sin(M),Ie=Math.tan(Math.PI/4-M/2)/Math.pow((1-ce)/(1+ce),H/2);return M=-T*Math.log(Math.max(Ie,1e-10)),new Cn(f.lng*m*T,M)},unproject:function(f){for(var ct,m=180/Math.PI,T=this.R,M=this.R_MINOR/T,N=Math.sqrt(1-M*M),H=Math.exp(-f.y/T),ce=Math.PI/2-2*Math.atan(H),Ie=0,ke=.1;Ie<15&&Math.abs(ke)>1e-7;Ie++)ct=N*Math.sin(ce),ct=Math.pow((1-ct)/(1+ct),N/2),ce+=ke=Math.PI/2-2*Math.atan(H*ct)-ce;return new We(ce*m,f.x*m/T)}},nd={__proto__:null,LonLat:zl,Mercator:td,SphericalMercator:Vn},id=ee({},Pt,{code:"EPSG:3395",projection:td,transformation:function(){var f=.5/(Math.PI*td.R);return _i(f,.5,-f,.5)}()}),fu=ee({},Pt,{code:"EPSG:4326",projection:zl,transformation:_i(1/180,1,-1/180,.5)}),sh=ee({},ui,{projection:zl,transformation:_i(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,m){var T=m.lng-f.lng,M=m.lat-f.lat;return Math.sqrt(T*T+M*M)},infinite:!0});ui.Earth=Pt,ui.EPSG3395=id,ui.EPSG3857=Or,ui.EPSG900913=ar,ui.EPSG4326=fu,ui.Simple=sh;var fs=zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[Ee(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[Ee(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var m=f.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var T=this.getEvents();m.on(T,this),this.once("remove",function(){m.off(T,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});Un.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var m=Ee(f);return this._layers[m]||(this._layers[m]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f)),this},removeLayer:function(f){var m=Ee(f);return this._layers[m]?(this._loaded&&f.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return Ee(f)in this._layers},eachLayer:function(f,m){for(var T in this._layers)f.call(m,this._layers[T]);return this},_addLayers:function(f){for(var m=0,T=(f=f?Be(f)?f:[f]:[]).length;m<T;m++)this.addLayer(f[m])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[Ee(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var m=Ee(f);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,m=-1/0,T=this._getZoomSpan();for(var M in this._zoomBoundLayers){var N=this._zoomBoundLayers[M].options;f=void 0===N.minZoom?f:Math.min(f,N.minZoom),m=void 0===N.maxZoom?m:Math.max(m,N.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=f===1/0?void 0:f,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xc=fs.extend({initialize:function(f,m){var T,M;if(tt(this,m),this._layers={},f)for(T=0,M=f.length;T<M;T++)this.addLayer(f[T])},addLayer:function(f){var m=this.getLayerId(f);return this._layers[m]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var m=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(f){return("number"==typeof f?f:this.getLayerId(f))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var T,M,m=Array.prototype.slice.call(arguments,1);for(T in this._layers)(M=this._layers[T])[f]&&M[f].apply(M,m);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,m){for(var T in this._layers)f.call(m,this._layers[T]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return Ee(f)}}),hn=xc.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),xc.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),xc.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new pt;for(var m in this._layers){var T=this._layers[m];f.extend(T.getBounds?T.getBounds():T.getLatLng())}return f}}),Hs=tn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){tt(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,m){var T=this._getIconUrl(f);if(!T){if("icon"===f)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(T,m&&"IMG"===m.tagName?m:null);return this._setIconStyles(M,f),(this.options.crossOrigin||""===this.options.crossOrigin)&&(M.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),M},_setIconStyles:function(f,m){var T=this.options,M=T[m+"Size"];"number"==typeof M&&(M=[M,M]);var N=xe(M),H=xe("shadow"===m&&T.shadowAnchor||T.iconAnchor||N&&N.divideBy(2,!0));f.className="leaflet-marker-"+m+" "+(T.className||""),H&&(f.style.marginLeft=-H.x+"px",f.style.marginTop=-H.y+"px"),N&&(f.style.width=N.x+"px",f.style.height=N.y+"px")},_createImg:function(f,m){return(m=m||document.createElement("img")).src=f,m},_getIconUrl:function(f){return De.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});var Hl=Hs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return"string"!=typeof Hl.imagePath&&(Hl.imagePath=this._detectIconPath()),(this.options.imagePath||Hl.imagePath)+Hs.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var m=function(T,M,N){var H=M.exec(T);return H&&H[N]};return(f=m(f,/^url\((['"])?(.+)\1\)$/,2))&&m(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Ot("div","leaflet-default-icon-path",document.body),m=xt(f,"background-image")||xt(f,"backgroundImage");if(document.body.removeChild(f),m=this._stripUrl(m))return m;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),ul=Jr.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new fa(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Fi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var m=this._marker,T=m._map,M=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,H=Jo(m._icon),ce=T.getPixelBounds(),Ie=T.getPixelOrigin(),ke=Ke(ce.min._subtract(Ie).add(N),ce.max._subtract(Ie).subtract(N));if(!ke.contains(H)){var ct=xe((Math.max(ke.max.x,H.x)-ke.max.x)/(ce.max.x-ke.max.x)-(Math.min(ke.min.x,H.x)-ke.min.x)/(ce.min.x-ke.min.x),(Math.max(ke.max.y,H.y)-ke.max.y)/(ce.max.y-ke.max.y)-(Math.min(ke.min.y,H.y)-ke.min.y)/(ce.min.y-ke.min.y)).multiplyBy(M);T.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),Yn(m._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=rt(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(Se(this._panRequest),this._panRequest=rt(this._adjustPan.bind(this,f)))},_onDrag:function(f){var m=this._marker,T=m._shadow,M=Jo(m._icon),N=m._map.layerPointToLatLng(M);T&&Yn(T,M),m._latlng=N,f.latlng=N,f.oldLatLng=this._oldLatLng,m.fire("move",f).fire("drag",f)},_onDragEnd:function(f){Se(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),Io=fs.extend({options:{icon:new Hl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,m){tt(this,m),this._latlng=gt(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var m=this._latlng;return this._latlng=gt(f),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=f.icon.createIcon(this._icon),M=!1;T!==this._icon&&(this._icon&&this._removeIcon(),M=!0,f.title&&(T.title=f.title),"IMG"===T.tagName&&(T.alt=f.alt||"")),Qt(T,m),f.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&an(T,"focus",this._panOnFocus,this);var N=f.icon.createShadow(this._shadow),H=!1;N!==this._shadow&&(this._removeShadow(),H=!0),N&&(Qt(N,m),N.alt=""),this._shadow=N,f.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&H&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fi(this._icon,"focus",this._panOnFocus,this),In(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&In(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Yn(this._icon,f),this._shadow&&Yn(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var m=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(Qt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ul)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ul(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Ao(this._icon,f),this._shadow&&Ao(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var m=this.options.icon.options,T=m.iconSize?xe(m.iconSize):xe(0,0),M=m.iconAnchor?xe(m.iconAnchor):xe(0,0);f.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:T.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var pa=fs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return tt(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ac=pa.extend({options:{fill:!0,radius:10},initialize:function(f,m){tt(this,m),this._latlng=gt(f),this._radius=this.options.radius},setLatLng:function(f){var m=this._latlng;return this._latlng=gt(f),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var m=f&&f.radius||this._radius;return pa.prototype.setStyle.call(this,f),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,m=this._radiusY||f,T=this._clickTolerance(),M=[f+T,m+T];this._pxBounds=new ze(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ba=Ac.extend({initialize:function(f,m,T){if("number"==typeof m&&(m=ee({},T,{radius:m})),tt(this,m),this._latlng=gt(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new pt(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:pa.prototype.setStyle,_project:function(){var f=this._latlng.lng,m=this._latlng.lat,T=this._map,M=T.options.crs;if(M.distance===Pt.distance){var N=Math.PI/180,H=this._mRadius/Pt.R/N,ce=T.project([m+H,f]),Ie=T.project([m-H,f]),ke=ce.add(Ie).divideBy(2),ct=T.unproject(ke).lat,Rt=Math.acos((Math.cos(H*N)-Math.sin(m*N)*Math.sin(ct*N))/(Math.cos(m*N)*Math.cos(ct*N)))/N;(isNaN(Rt)||0===Rt)&&(Rt=H/Math.cos(Math.PI/180*m)),this._point=ke.subtract(T.getPixelOrigin()),this._radius=isNaN(Rt)?0:ke.x-T.project([ct,f-Rt]).x,this._radiusY=ke.y-ce.y}else{var sn=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint(sn).x}this._updateBounds()}});var or=pa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,m){tt(this,m),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var N,H,m=1/0,T=null,M=Vl,ce=0,Ie=this._parts.length;ce<Ie;ce++)for(var ke=this._parts[ce],ct=1,Rt=ke.length;ct<Rt;ct++){var sn=M(f,N=ke[ct-1],H=ke[ct],!0);sn<m&&(m=sn,T=M(f,N,H))}return T&&(T.distance=Math.sqrt(m)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,m){return m=m||this._defaultShape(),f=gt(f),m.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new pt,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return yr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var m=[],T=yr(f),M=0,N=f.length;M<N;M++)T?(m[M]=gt(f[M]),this._bounds.extend(m[M])):m[M]=this._convertLatLngs(f[M]);return m},_project:function(){var f=new ze;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),m=new Cn(f,f);this._rawPxBounds&&(this._pxBounds=new ze([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(f,m,T){var H,ce,N=f.length;if(f[0]instanceof We){for(ce=[],H=0;H<N;H++)ce[H]=this._map.latLngToLayerPoint(f[H]),T.extend(ce[H]);m.push(ce)}else for(H=0;H<N;H++)this._projectLatlngs(f[H],m,T)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(f)){if(this.options.noClip)return void(this._parts=this._rings);var T,M,N,H,ce,Ie,ke,m=this._parts;for(T=0,N=0,H=this._rings.length;T<H;T++)for(M=0,ce=(ke=this._rings[T]).length;M<ce-1;M++)(Ie=fo(ke[M],ke[M+1],f,M,!0))&&(m[N]=m[N]||[],m[N].push(Ie[0]),(Ie[1]!==ke[M+1]||M===ce-2)&&(m[N].push(Ie[1]),N++))}},_simplifyPoints:function(){for(var f=this._parts,m=this.options.smoothFactor,T=0,M=f.length;T<M;T++)f[T]=Ec(f[T],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,m){var T,M,N,H,ce,Ie,ke=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(T=0,H=this._parts.length;T<H;T++)for(M=0,N=(ce=(Ie=this._parts[T]).length)-1;M<ce;N=M++)if((m||0!==M)&&vr(f,Ie[N],Ie[M])<=ke)return!0;return!1}});or._flat=Zl;var Vo=or.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return La(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var m=or.prototype._convertLatLngs.call(this,f),T=m.length;return T>=2&&m[0]instanceof We&&m[0].equals(m[T-1])&&m.pop(),m},_setLatLngs:function(f){or.prototype._setLatLngs.call(this,f),yr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,m=this.options.weight,T=new Cn(m,m);if(f=new ze(f.min.subtract(T),f.max.add(T)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(f)){if(this.options.noClip)return void(this._parts=this._rings);for(var H,M=0,N=this._rings.length;M<N;M++)(H=sl(this._rings[M],f,!0)).length&&this._parts.push(H)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var T,M,N,H,ce,Ie,ke,ct,m=!1;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(H=0,ke=this._parts.length;H<ke;H++)for(ce=0,Ie=(ct=(T=this._parts[H]).length)-1;ce<ct;Ie=ce++)(M=T[ce]).y>f.y!=(N=T[Ie]).y>f.y&&f.x<(N.x-M.x)*(f.y-M.y)/(N.y-M.y)+M.x&&(m=!m);return m||or.prototype._containsPoint.call(this,f,!0)}});var js=hn.extend({initialize:function(f,m){tt(this,m),this._layers={},f&&this.addData(f)},addData:function(f){var T,M,N,m=Be(f)?f:f.features;if(m){for(T=0,M=m.length;T<M;T++)((N=m[T]).geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var H=this.options;if(H.filter&&!H.filter(f))return this;var ce=Ws(f,H);return ce?(ce.feature=hl(f),ce.defaultOptions=ce.options,this.resetStyle(ce),H.onEachFeature&&H.onEachFeature(f,ce),this.addLayer(ce)):this},resetStyle:function(f){return void 0===f?this.eachLayer(this.resetStyle,this):(f.options=ee({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(m){this._setLayerStyle(m,f)},this)},_setLayerStyle:function(f,m){f.setStyle&&("function"==typeof m&&(m=m(f.feature)),f.setStyle(m))}});function Ws(f,m){var Ie,ke,ct,Rt,T="Feature"===f.type?f.geometry:f,M=T?T.coordinates:null,N=[],H=m&&m.pointToLayer,ce=m&&m.coordsToLatLng||ah;if(!M&&!T)return null;switch(T.type){case"Point":return od(H,f,Ie=ce(M),m);case"MultiPoint":for(ct=0,Rt=M.length;ct<Rt;ct++)Ie=ce(M[ct]),N.push(od(H,f,Ie,m));return new hn(N);case"LineString":case"MultiLineString":return ke=qi(M,"LineString"===T.type?0:1,ce),new or(ke,m);case"Polygon":case"MultiPolygon":return ke=qi(M,"Polygon"===T.type?1:2,ce),new Vo(ke,m);case"GeometryCollection":for(ct=0,Rt=T.geometries.length;ct<Rt;ct++){var sn=Ws({geometry:T.geometries[ct],type:"Feature",properties:f.properties},m);sn&&N.push(sn)}return new hn(N);case"FeatureCollection":for(ct=0,Rt=T.features.length;ct<Rt;ct++){var jn=Ws(T.features[ct],m);jn&&N.push(jn)}return new hn(N);default:throw new Error("Invalid GeoJSON object.")}}function od(f,m,T,M){return f?f(m,T):new Io(T,M&&M.markersInheritOptions&&M)}function ah(f){return new We(f[1],f[0],f[2])}function qi(f,m,T){for(var ce,M=[],N=0,H=f.length;N<H;N++)ce=m?qi(f[N],m-1,T):(T||ah)(f[N]),M.push(ce);return M}function ql(f,m){return void 0!==(f=gt(f)).alt?[he(f.lng,m),he(f.lat,m),he(f.alt,m)]:[he(f.lng,m),he(f.lat,m)]}function Za(f,m,T,M){for(var N=[],H=0,ce=f.length;H<ce;H++)N.push(m?Za(f[H],yr(f[H])?0:m-1,T,M):ql(f[H],M));return!m&&T&&N.length>0&&N.push(N[0].slice()),N}function dl(f,m){return f.feature?ee({},f.feature,{geometry:m}):hl(m)}function hl(f){return"Feature"===f.type||"FeatureCollection"===f.type?f:{type:"Feature",properties:{},geometry:f}}var gu={toGeoJSON:function(f){return dl(this,{type:"Point",coordinates:ql(this.getLatLng(),f)})}};function fl(f,m){return new js(f,m)}Io.include(gu),Ba.include(gu),Ac.include(gu),or.include({toGeoJSON:function(f){var m=!yr(this._latlngs);return dl(this,{type:(m?"Multi":"")+"LineString",coordinates:Za(this._latlngs,m?1:0,!1,f)})}}),Vo.include({toGeoJSON:function(f){var m=!yr(this._latlngs),T=m&&!yr(this._latlngs[0]),M=Za(this._latlngs,T?2:m?1:0,!0,f);return m||(M=[M]),dl(this,{type:(T?"Multi":"")+"Polygon",coordinates:M})}}),xc.include({toMultiPoint:function(f){var m=[];return this.eachLayer(function(T){m.push(T.toGeoJSON(f).geometry.coordinates)}),dl(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(f){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===m)return this.toMultiPoint(f);var T="GeometryCollection"===m,M=[];return this.eachLayer(function(N){if(N.toGeoJSON){var H=N.toGeoJSON(f);if(T)M.push(H.geometry);else{var ce=hl(H);"FeatureCollection"===ce.type?M.push.apply(M,ce.features):M.push(ce)}}}),T?dl(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});var sd=fl,za=fs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,m,T){this._url=f,this._bounds=Je(m),tt(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){In(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Qo(this._image),this},bringToBack:function(){return this._map&&Xi(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=Je(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f="IMG"===this._url.tagName,m=this._image=f?this._url:Ot("img");Qt(m,"leaflet-image-layer"),this._zoomAnimated&&Qt(m,"leaflet-zoom-animated"),this.options.className&&Qt(m,this.options.className),m.onselectstart=Ne,m.onmousemove=Ne,m.onload=Te(this.fire,this,"load"),m.onerror=Te(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(m.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f?this._url=m.src:(m.src=this._url,m.alt=this.options.alt)},_animateZoom:function(f){var m=this._map.getZoomScale(f.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Fo(this._image,T,m)},_reset:function(){var f=this._image,m=new ze(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=m.getSize();Yn(f,m.min),f.style.width=T.x+"px",f.style.height=T.y+"px"},_updateOpacity:function(){Ao(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Ic=za.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f="VIDEO"===this._url.tagName,m=this._image=f?this._url:Ot("video");if(Qt(m,"leaflet-image-layer"),this._zoomAnimated&&Qt(m,"leaflet-zoom-animated"),this.options.className&&Qt(m,this.options.className),m.onselectstart=Ne,m.onmousemove=Ne,m.onloadeddata=Te(this.fire,this,"load"),f){for(var T=m.getElementsByTagName("source"),M=[],N=0;N<T.length;N++)M.push(T[N].src);this._url=T.length>0?M:[m.src]}else{Be(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var H=0;H<this._url.length;H++){var ce=Ot("source");ce.src=this._url[H],m.appendChild(ce)}}}});var mu=za.extend({_initImage:function(){var f=this._image=this._url;Qt(f,"leaflet-image-layer"),this._zoomAnimated&&Qt(f,"leaflet-zoom-animated"),this.options.className&&Qt(f,this.options.className),f.onselectstart=Ne,f.onmousemove=Ne}});var Bi=fs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,m){f&&(f instanceof We||Be(f))?(this._latlng=gt(f),tt(this,m)):(tt(this,f),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(f){return(f=arguments.length?f:this._source._map).hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Ao(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Ao(this._container,1),this.bringToFront(),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Ao(this._container,0),this._removeTimeout=setTimeout(Te(In,void 0,this._container),200)):In(this._container),this.options.interactive&&(Fi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=gt(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qo(this._container),this},bringToBack:function(){return this._map&&Xi(this._container),this},_prepareOpen:function(f){var m=this._source;if(!m._map)return!1;if(m instanceof hn){m=null;var T=this._source._layers;for(var M in T)if(T[M]._map){m=T[M];break}if(!m)return!1;this._source=m}if(!f)if(m.getCenter)f=m.getCenter();else if(m.getLatLng)f=m.getLatLng();else{if(!m.getBounds)throw new Error("Unable to get source layer LatLng.");f=m.getBounds().getCenter()}return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,m="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof m)f.innerHTML=m;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),m=xe(this.options.offset),T=this._getAnchor();this._zoomAnimated?Yn(this._container,f.add(T)):m=m.add(f).add(T);var M=this._containerBottom=-m.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=M+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Un.include({_initOverlay:function(f,m,T,M){var N=m;return N instanceof f||(N=new f(M).setContent(m)),T&&N.setLatLng(T),N}}),fs.include({_initOverlay:function(f,m,T,M){var N=T;return N instanceof f?(tt(N,M),N._source=this):(N=m&&!M?m:new f(M,this)).setContent(T),N}});var es=Bi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return!(f=arguments.length?f:this._source._map).hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,Bi.prototype.openOn.call(this,f)},onAdd:function(f){Bi.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pa||this._source.on("preclick",Xo))},onRemove:function(f){Bi.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pa||this._source.off("preclick",Xo))},getEvents:function(){var f=Bi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",m=this._container=Ot("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=Ot("div",f+"-content-wrapper",m);if(this._contentNode=Ot("div",f+"-content",T),Bo(m),Jd(this._contentNode),an(m,"contextmenu",Xo),this._tipContainer=Ot("div",f+"-tip-container",m),this._tip=Ot("div",f+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=Ot("a",f+"-close-button",m);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',an(M,"click",function(N){ho(N),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,m=f.style;m.width="",m.whiteSpace="nowrap";var T=f.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),m.width=T+1+"px",m.whiteSpace="",m.height="";var N=this.options.maxHeight,H="leaflet-popup-scrolled";N&&f.offsetHeight>N?(m.height=N+"px",Qt(f,H)):Fi(f,H),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var m=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),T=this._getAnchor();Yn(this._container,m.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var f=this._map,m=parseInt(xt(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+m,M=this._containerWidth,N=new Cn(this._containerLeft,-T-this._containerBottom);N._add(Jo(this._container));var H=f.layerPointToContainerPoint(N),ce=xe(this.options.autoPanPadding),Ie=xe(this.options.autoPanPaddingTopLeft||ce),ke=xe(this.options.autoPanPaddingBottomRight||ce),ct=f.getSize(),Rt=0,sn=0;H.x+M+ke.x>ct.x&&(Rt=H.x+M-ct.x+ke.x),H.x-Rt-Ie.x<0&&(Rt=H.x-Ie.x),H.y+T+ke.y>ct.y&&(sn=H.y+T-ct.y+ke.y),H.y-sn-Ie.y<0&&(sn=H.y-Ie.y),(Rt||sn)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Rt,sn]))}},_getAnchor:function(){return xe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Un.mergeOptions({closePopupOnClick:!0}),Un.include({openPopup:function(f,m,T){return this._initOverlay(es,f,m,T).openOn(this),this},closePopup:function(f){return(f=arguments.length?f:this._popup)&&f.close(),this}}),fs.include({bindPopup:function(f,m){return this._popup=this._initOverlay(es,this._popup,f,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof hn||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(this._popup&&this._map){Na(f);var m=f.layer||f.target;if(this._popup._source===m&&!(m instanceof pa))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng));this._popup._source=m,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){13===f.originalEvent.keyCode&&this._openPopup(f)}});var Sc=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){Bi.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){Bi.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=Bi.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){this._contentNode=this._container=Ot("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Ee(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var m,T,M=this._map,N=this._container,H=M.latLngToContainerPoint(M.getCenter()),ce=M.layerPointToContainerPoint(f),Ie=this.options.direction,ke=N.offsetWidth,ct=N.offsetHeight,Rt=xe(this.options.offset),sn=this._getAnchor();"top"===Ie?(m=ke/2,T=ct):"bottom"===Ie?(m=ke/2,T=0):"center"===Ie?(m=ke/2,T=ct/2):"right"===Ie?(m=0,T=ct/2):"left"===Ie?(m=ke,T=ct/2):ce.x<H.x?(Ie="right",m=0,T=ct/2):(Ie="left",m=ke+2*(Rt.x+sn.x),T=ct/2),f=f.subtract(xe(m,T,!0)).add(Rt).add(sn),Fi(N,"leaflet-tooltip-right"),Fi(N,"leaflet-tooltip-left"),Fi(N,"leaflet-tooltip-top"),Fi(N,"leaflet-tooltip-bottom"),Qt(N,"leaflet-tooltip-"+Ie),Yn(N,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Ao(this._container,f)},_animateZoom:function(f){var m=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(m)},_getAnchor:function(){return xe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Un.include({openTooltip:function(f,m,T){return this._initOverlay(Sc,f,m,T).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),fs.include({bindTooltip:function(f,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Sc,this._tooltip,f,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(f||!this._tooltipHandlersAdded){var m=f?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[m](T),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof hn||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var m="function"==typeof f.getElement&&f.getElement();m&&(an(m,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),an(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var m="function"==typeof f.getElement&&f.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;return void this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(f)})}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var T,M,m=f.latlng;this._tooltip.options.sticky&&f.originalEvent&&(T=this._map.mouseEventToContainerPoint(f.originalEvent),M=this._map.containerPointToLayerPoint(T),m=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(m)}});var _u=Hs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var m=f&&"DIV"===f.tagName?f:document.createElement("div"),T=this.options;if(T.html instanceof Element?(oi(m),m.appendChild(T.html)):m.innerHTML=!1!==T.html?T.html:"",T.bgPos){var M=xe(T.bgPos);m.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});Hs.Default=Hl;var Wl=fs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){tt(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),In(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=$e(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof Cn?f:new Cn(f,f)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var H,m=this.getPane().children,T=-f(-1/0,1/0),M=0,N=m.length;M<N;M++)H=m[M].style.zIndex,m[M]!==this._container&&H&&(T=f(T,+H));isFinite(T)&&(this.options.zIndex=T+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){Ao(this._container,this.options.opacity);var f=+new Date,m=!1,T=!1;for(var M in this._tiles){var N=this._tiles[M];if(N.current&&N.loaded){var H=Math.min(1,(f-N.loaded)/200);Ao(N.el,H),H<1?m=!0:(N.active?T=!0:this._onOpaqueTile(N),N.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),m&&(Se(this._fadeFrame),this._fadeFrame=rt(this._updateOpacity,this))}},_onOpaqueTile:Ne,_initContainer:function(){this._container||(this._container=Ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,m=this.options.maxZoom;if(void 0!==f){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===f?(this._levels[T].el.style.zIndex=m-Math.abs(f-T),this._onUpdateLevel(T)):(In(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var M=this._levels[f],N=this._map;return M||((M=this._levels[f]={}).el=Ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=m,M.origin=N.project(N.unproject(N.getPixelOrigin()),f).round(),M.zoom=f,this._setZoomTransform(M,N.getCenter(),N.getZoom()),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:Ne,_onRemoveLevel:Ne,_onCreateLevel:Ne,_pruneTiles:function(){if(this._map){var f,m,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom)return void this._removeAllTiles();for(f in this._tiles)(m=this._tiles[f]).retain=m.current;for(f in this._tiles)if((m=this._tiles[f]).current&&!m.active){var M=m.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var m in this._tiles)this._tiles[m].coords.z===f&&this._removeTile(m)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)In(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,m,T,M){var N=Math.floor(f/2),H=Math.floor(m/2),ce=T-1,Ie=new Cn(+N,+H);Ie.z=+ce;var ke=this._tileCoordsToKey(Ie),ct=this._tiles[ke];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),ce>M&&this._retainParent(N,H,ce,M))},_retainChildren:function(f,m,T,M){for(var N=2*f;N<2*f+2;N++)for(var H=2*m;H<2*m+2;H++){var ce=new Cn(N,H);ce.z=T+1;var Ie=this._tileCoordsToKey(ce),ke=this._tiles[Ie];ke&&ke.active?ke.retain=!0:(ke&&ke.loaded&&(ke.retain=!0),T+1<M&&this._retainChildren(N,H,T+1,M))}},_resetView:function(f){var m=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var m=this.options;return void 0!==m.minNativeZoom&&f<m.minNativeZoom?m.minNativeZoom:void 0!==m.maxNativeZoom&&m.maxNativeZoom<f?m.maxNativeZoom:f},_setView:function(f,m,T,M){var N=Math.round(m);N=void 0!==this.options.maxZoom&&N>this.options.maxZoom||void 0!==this.options.minZoom&&N<this.options.minZoom?void 0:this._clampZoom(N),(!M||this.options.updateWhenZooming&&N!==this._tileZoom)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==N&&this._update(f),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(f,m)},_setZoomTransforms:function(f,m){for(var T in this._levels)this._setZoomTransform(this._levels[T],f,m)},_setZoomTransform:function(f,m,T){var M=this._map.getZoomScale(T,f.zoom),N=f.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(m,T)).round();De.any3d?Fo(f.el,N,M):Yn(f.el,N)},_resetGrid:function(){var f=this._map,m=f.options.crs,T=this._tileSize=this.getTileSize(),M=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,m.wrapLng[0]],M).x/T.x),Math.ceil(f.project([0,m.wrapLng[1]],M).x/T.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([m.wrapLat[0],0],M).y/T.x),Math.ceil(f.project([m.wrapLat[1],0],M).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var m=this._map,T=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),M=m.getZoomScale(T,this._tileZoom),N=m.project(f,this._tileZoom).floor(),H=m.getSize().divideBy(2*M);return new ze(N.subtract(H),N.add(H))},_update:function(f){var m=this._map;if(m){var T=this._clampZoom(m.getZoom());if(void 0===f&&(f=m.getCenter()),void 0!==this._tileZoom){var M=this._getTiledPixelBounds(f),N=this._pxBoundsToTileRange(M),H=N.getCenter(),ce=[],Ie=this.options.keepBuffer,ke=new ze(N.getBottomLeft().subtract([Ie,-Ie]),N.getTopRight().add([Ie,-Ie]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var Rt=this._tiles[ct].coords;(Rt.z!==this._tileZoom||!ke.contains(new Cn(Rt.x,Rt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(T-this._tileZoom)>1)return void this._setView(f,T);for(var sn=N.min.y;sn<=N.max.y;sn++)for(var jn=N.min.x;jn<=N.max.x;jn++){var ni=new Cn(jn,sn);if(ni.z=this._tileZoom,this._isValidTile(ni)){var Vi=this._tiles[this._tileCoordsToKey(ni)];Vi?Vi.current=!0:ce.push(ni)}}if(ce.sort(function(Mo,Gs){return Mo.distanceTo(H)-Gs.distanceTo(H)}),0!==ce.length){this._loading||(this._loading=!0,this.fire("loading"));var So=document.createDocumentFragment();for(jn=0;jn<ce.length;jn++)this._addTile(ce[jn],So);this._level.el.appendChild(So)}}}},_isValidTile:function(f){var m=this._map.options.crs;if(!m.infinite){var T=this._globalTileRange;if(!m.wrapLng&&(f.x<T.min.x||f.x>T.max.x)||!m.wrapLat&&(f.y<T.min.y||f.y>T.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(f);return Je(this.options.bounds).overlaps(M)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var m=this._map,T=this.getTileSize(),M=f.scaleBy(T),N=M.add(T);return[m.unproject(M,f.z),m.unproject(N,f.z)]},_tileCoordsToBounds:function(f){var m=this._tileCoordsToNwSe(f),T=new pt(m[0],m[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var m=f.split(":"),T=new Cn(+m[0],+m[1]);return T.z=+m[2],T},_removeTile:function(f){var m=this._tiles[f];m&&(In(m.el),delete this._tiles[f],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){Qt(f,"leaflet-tile");var m=this.getTileSize();f.style.width=m.x+"px",f.style.height=m.y+"px",f.onselectstart=Ne,f.onmousemove=Ne,De.ielt9&&this.options.opacity<1&&Ao(f,this.options.opacity)},_addTile:function(f,m){var T=this._getTilePos(f),M=this._tileCoordsToKey(f),N=this.createTile(this._wrapCoords(f),Te(this._tileReady,this,f));this._initTile(N),this.createTile.length<2&&rt(Te(this._tileReady,this,f,null,N)),Yn(N,T),this._tiles[M]={el:N,coords:f,current:!0},m.appendChild(N),this.fire("tileloadstart",{tile:N,coords:f})},_tileReady:function(f,m,T){m&&this.fire("tileerror",{error:m,tile:T,coords:f});var M=this._tileCoordsToKey(f);(T=this._tiles[M])&&(T.loaded=+new Date,this._map._fadeAnimated?(Ao(T.el,0),Se(this._fadeFrame),this._fadeFrame=rt(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),m||(Qt(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?rt(this._pruneTiles,this):setTimeout(Te(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var m=new Cn(this._wrapX?je(f.x,this._wrapX):f.x,this._wrapY?je(f.y,this._wrapY):f.y);return m.z=f.z,m},_pxBoundsToTileRange:function(f){var m=this.getTileSize();return new ze(f.min.unscaleBy(m).floor(),f.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});var ga=Wl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,m){this._url=f,(m=tt(this,m)).detectRetina&&De.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),"string"==typeof m.subdomains&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,m){return this._url===f&&void 0===m&&(m=!0),this._url=f,m||this.redraw(),this},createTile:function(f,m){var T=document.createElement("img");return an(T,"load",Te(this._tileOnLoad,this,m,T)),an(T,"error",Te(this._tileOnError,this,m,T)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(T.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(f),T},getTileUrl:function(f){var m={r:De.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-f.y;this.options.tms&&(m.y=T),m["-y"]=T}return Vt(this._url,ee(m,this.options))},_tileOnLoad:function(f,m){De.ielt9?setTimeout(Te(f,this,null,m),0):f(null,m)},_tileOnError:function(f,m,T){var M=this.options.errorTileUrl;M&&m.getAttribute("src")!==M&&(m.src=M),f(T,m)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom;return this.options.zoomReverse&&(f=this.options.maxZoom-f),f+this.options.zoomOffset},_getSubdomain:function(f){var m=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var f,m;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&((m=this._tiles[f].el).onload=Ne,m.onerror=Ne,!m.complete)){m.src=ut;var T=this._tiles[f].coords;In(m),delete this._tiles[f],this.fire("tileabort",{tile:m,coords:T})}},_removeTile:function(f){var m=this._tiles[f];if(m)return m.el.setAttribute("src",ut),Wl.prototype._removeTile.call(this,f)},_tileReady:function(f,m,T){if(this._map&&(!T||T.getAttribute("src")!==ut))return Wl.prototype._tileReady.call(this,f,m,T)}});function vu(f,m){return new ga(f,m)}var ld=ga.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,m){this._url=f;var T=ee({},this.defaultWmsParams);for(var M in m)M in this.options||(T[M]=m[M]);var N=(m=tt(this,m)).detectRetina&&De.retina?2:1,H=this.getTileSize();T.width=H.x*N,T.height=H.y*N,this.wmsParams=T},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ga.prototype.onAdd.call(this,f)},getTileUrl:function(f){var m=this._tileCoordsToNwSe(f),T=this._crs,M=Ke(T.project(m[0]),T.project(m[1])),N=M.min,H=M.max,ce=(this._wmsVersion>=1.3&&this._crs===fu?[N.y,N.x,H.y,H.x]:[N.x,N.y,H.x,H.y]).join(","),Ie=ga.prototype.getTileUrl.call(this,f);return Ie+it(this.wmsParams,Ie,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ce},setParams:function(f,m){return ee(this.wmsParams,f),m||this.redraw(),this}});ga.WMS=ld,vu.wms=function uh(f,m){return new ld(f,m)};var ps=fs.extend({options:{padding:.1},initialize:function(f){tt(this,f),Ee(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,m){var T=this._map.getZoomScale(m,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,m),H=M.multiplyBy(-T).add(N).subtract(this._map._getNewPixelOrigin(f,m));De.any3d?Fo(this._container,H,T):Yn(this._container,H)},_reset:function(){for(var f in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,m=this._map.getSize(),T=this._map.containerPointToLayerPoint(m.multiplyBy(-f)).round();this._bounds=new ze(T,T.add(m.multiplyBy(1+2*f)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),pl=ps.extend({options:{tolerance:0},getEvents:function(){var f=ps.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ps.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");an(f,"mousemove",this._onMouseMove,this),an(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),an(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){Se(this._redrawRequest),delete this._ctx,In(this._container),fi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var m in this._redrawBounds=null,this._layers)this._layers[m]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ps.prototype._update.call(this);var f=this._bounds,m=this._container,T=f.getSize(),M=De.retina?2:1;Yn(m,f.min),m.width=M*T.x,m.height=M*T.y,m.style.width=T.x+"px",m.style.height=T.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){ps.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[Ee(f)]=f;var m=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var m=f._order,T=m.next,M=m.prev;T?T.prev=M:this._drawLast=M,M?M.next=T:this._drawFirst=T,delete f._order,delete this._layers[Ee(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if("string"==typeof f.options.dashArray){var M,N,m=f.options.dashArray.split(/[, ]+/),T=[];for(N=0;N<m.length;N++){if(M=Number(m[N]),isNaN(M))return;T.push(M)}f.options._dashArray=T}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||rt(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var m=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ze,this._redrawBounds.extend(f._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(f._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var m=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,m=this._redrawBounds;if(this._ctx.save(),m){var T=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)f=M.layer,(!m||f._pxBounds&&f._pxBounds.intersects(m))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,m){if(this._drawing){var T,M,N,H,ce=f._parts,Ie=ce.length,ke=this._ctx;if(Ie){for(ke.beginPath(),T=0;T<Ie;T++){for(M=0,N=ce[T].length;M<N;M++)ke[M?"lineTo":"moveTo"]((H=ce[T][M]).x,H.y);m&&ke.closePath()}this._fillStroke(ke,f)}}},_updateCircle:function(f){if(this._drawing&&!f._empty()){var m=f._point,T=this._ctx,M=Math.max(Math.round(f._radius),1),N=(Math.max(Math.round(f._radiusY),1)||M)/M;1!==N&&(T.save(),T.scale(1,N)),T.beginPath(),T.arc(m.x,m.y/N,M,0,2*Math.PI,!1),1!==N&&T.restore(),this._fillStroke(T,f)}},_fillStroke:function(f,m){var T=m.options;T.fill&&(f.globalAlpha=T.fillOpacity,f.fillStyle=T.fillColor||T.color,f.fill(T.fillRule||"evenodd")),T.stroke&&0!==T.weight&&(f.setLineDash&&f.setLineDash(m.options&&m.options._dashArray||[]),f.globalAlpha=T.opacity,f.lineWidth=T.weight,f.strokeStyle=T.color,f.lineCap=T.lineCap,f.lineJoin=T.lineJoin,f.stroke())},_onClick:function(f){for(var T,M,m=this._map.mouseEventToLayerPoint(f),N=this._drawFirst;N;N=N.next)(T=N.layer).options.interactive&&T._containsPoint(m)&&("click"!==f.type&&"preclick"!==f.type||!this._map._draggableMoved(T))&&(M=T);this._fireEvent(!!M&&[M],f)},_onMouseMove:function(f){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var m=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,m)}},_handleMouseOut:function(f){var m=this._hoveredLayer;m&&(Fi(this._container,"leaflet-interactive"),this._fireEvent([m],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,m){if(!this._mouseHoverThrottled){for(var T,M,N=this._drawFirst;N;N=N.next)(T=N.layer).options.interactive&&T._containsPoint(m)&&(M=T);M!==this._hoveredLayer&&(this._handleMouseOut(f),M&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([M],f,"mouseover"),this._hoveredLayer=M)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],f),this._mouseHoverThrottled=!0,setTimeout(Te(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,m,T){this._map._fireDOMEvent(m,T||m.type,f)},_bringToFront:function(f){var m=f._order;if(m){var T=m.next,M=m.prev;if(!T)return;T.prev=M,M?M.next=T:T&&(this._drawFirst=T),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(f)}},_bringToBack:function(f){var m=f._order;if(m){var T=m.next,M=m.prev;if(!M)return;M.next=T,T?T.prev=M:M&&(this._drawLast=M),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(f)}}});function $l(f){return De.canvas?new pl(f):null}var ts=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ip={_initContainer:function(){this._container=Ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ps.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var m=f._container=ts("shape");Qt(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",f._path=ts("path"),m.appendChild(f._path),this._updateStyle(f),this._layers[Ee(f)]=f},_addPath:function(f){var m=f._container;this._container.appendChild(m),f.options.interactive&&f.addInteractiveTarget(m)},_removePath:function(f){var m=f._container;In(m),f.removeInteractiveTarget(m),delete this._layers[Ee(f)]},_updateStyle:function(f){var m=f._stroke,T=f._fill,M=f.options,N=f._container;N.stroked=!!M.stroke,N.filled=!!M.fill,M.stroke?(m||(m=f._stroke=ts("stroke")),N.appendChild(m),m.weight=M.weight+"px",m.color=M.color,m.opacity=M.opacity,m.dashStyle=M.dashArray?Be(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):"",m.endcap=M.lineCap.replace("butt","flat"),m.joinstyle=M.lineJoin):m&&(N.removeChild(m),f._stroke=null),M.fill?(T||(T=f._fill=ts("fill")),N.appendChild(T),T.color=M.fillColor||M.color,T.opacity=M.fillOpacity):T&&(N.removeChild(T),f._fill=null)},_updateCircle:function(f){var m=f._point.round(),T=Math.round(f._radius),M=Math.round(f._radiusY||T);this._setPath(f,f._empty()?"M0 0":"AL "+m.x+","+m.y+" "+T+","+M+" 0,23592600")},_setPath:function(f,m){f._path.v=m},_bringToFront:function(f){Qo(f._container)},_bringToBack:function(f){Xi(f._container)}},yu=De.vml?ts:Rr,Ha=ps.extend({_initContainer:function(){this._container=yu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){In(this._container),fi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ps.prototype._update.call(this);var f=this._bounds,m=f.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,T.setAttribute("width",m.x),T.setAttribute("height",m.y)),Yn(T,f.min),T.setAttribute("viewBox",[f.min.x,f.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(f){var m=f._path=yu("path");f.options.className&&Qt(m,f.options.className),f.options.interactive&&Qt(m,"leaflet-interactive"),this._updateStyle(f),this._layers[Ee(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){In(f._path),f.removeInteractiveTarget(f._path),delete this._layers[Ee(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var m=f._path,T=f.options;m&&(T.stroke?(m.setAttribute("stroke",T.color),m.setAttribute("stroke-opacity",T.opacity),m.setAttribute("stroke-width",T.weight),m.setAttribute("stroke-linecap",T.lineCap),m.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?m.setAttribute("stroke-dasharray",T.dashArray):m.removeAttribute("stroke-dasharray"),T.dashOffset?m.setAttribute("stroke-dashoffset",T.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),T.fill?(m.setAttribute("fill",T.fillColor||T.color),m.setAttribute("fill-opacity",T.fillOpacity),m.setAttribute("fill-rule",T.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(f,m){this._setPath(f,ir(f._parts,m))},_updateCircle:function(f){var m=f._point,T=Math.max(Math.round(f._radius),1),N="a"+T+","+(Math.max(Math.round(f._radiusY),1)||T)+" 0 1,0 ",H=f._empty()?"M0 0":"M"+(m.x-T)+","+m.y+N+2*T+",0 "+N+2*-T+",0 ";this._setPath(f,H)},_setPath:function(f,m){f._path.setAttribute("d",m)},_bringToFront:function(f){Qo(f._path)},_bringToBack:function(f){Xi(f._path)}});function cd(f){return De.svg||De.vml?new Ha(f):null}De.vml&&Ha.include(Ip),Un.include({getRenderer:function(f){var m=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(f){if("overlayPane"===f||void 0===f)return!1;var m=this._paneRenderers[f];return void 0===m&&(m=this._createRenderer({pane:f}),this._paneRenderers[f]=m),m},_createRenderer:function(f){return this.options.preferCanvas&&$l(f)||cd(f)}});var $s=Vo.extend({initialize:function(f,m){Vo.prototype.initialize.call(this,this._boundsToLatLngs(f),m)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return[(f=Je(f)).getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});Ha.create=yu,Ha.pointsToPath=ir,js.geometryToLayer=Ws,js.coordsToLatLng=ah,js.coordsToLatLngs=qi,js.latLngToCoords=ql,js.latLngsToCoords=Za,js.getFeature=dl,js.asFeature=hl,Un.mergeOptions({boxZoom:!0});var Gl=Jr.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){an(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){fi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){In(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||1!==f.which&&1!==f.button)return!1;this._clearDeferredResetState(),this._resetState(),Ds(),Ci(),this._startPoint=this._map.mouseEventToContainerPoint(f),an(document,{contextmenu:Na,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Ot("div","leaflet-zoom-box",this._container),Qt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var m=new ze(this._point,this._startPoint),T=m.getSize();Yn(this._box,m.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(In(this._box),Fi(this._container,"leaflet-crosshair")),Kr(),Uo(),fi(document,{contextmenu:Na,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if((1===f.which||1===f.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Te(this._resetState,this),0);var m=new pt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(f){27===f.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Un.addInitHook("addHandler","boxZoom",Gl),Un.mergeOptions({doubleClickZoom:!0});var Mc=Jr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var m=this._map,T=m.getZoom(),M=m.options.zoomDelta,N=f.originalEvent.shiftKey?T-M:T+M;"center"===m.options.doubleClickZoom?m.setZoom(N):m.setZoomAround(f.containerPoint,N)}});Un.addInitHook("addHandler","doubleClickZoom",Mc),Un.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gl=Jr.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new fa(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}Qt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Fi(this._map._container,"leaflet-grab"),Fi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=Je(this._map.options.maxBounds);this._offsetLimit=Ke(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var m=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(m),this._prunePositions(m)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,m){return f-(f-m)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var f=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;f.x<m.min.x&&(f.x=this._viscousLimit(f.x,m.min.x)),f.y<m.min.y&&(f.y=this._viscousLimit(f.y,m.min.y)),f.x>m.max.x&&(f.x=this._viscousLimit(f.x,m.max.x)),f.y>m.max.y&&(f.y=this._viscousLimit(f.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,m=Math.round(f/2),T=this._initialWorldOffset,M=this._draggable._newPos.x,N=(M-m+T)%f+m-T,H=(M+m+T)%f-m-T,ce=Math.abs(N+T)<Math.abs(H+T)?N:H;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ce},_onDragEnd:function(f){var m=this._map,T=m.options,M=!T.inertia||f.noInertia||this._times.length<2;if(m.fire("dragend",f),M)m.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),ce=T.easeLinearity,Ie=N.multiplyBy(ce/((this._lastTime-this._times[0])/1e3)),ke=Ie.distanceTo([0,0]),ct=Math.min(T.inertiaMaxSpeed,ke),Rt=Ie.multiplyBy(ct/ke),sn=ct/(T.inertiaDeceleration*ce),jn=Rt.multiplyBy(-sn/2).round();jn.x||jn.y?(jn=m._limitOffset(jn,m.options.maxBounds),rt(function(){m.panBy(jn,{duration:sn,easeLinearity:ce,noMoveStart:!0,animate:!0})})):m.fire("moveend")}}});Un.addInitHook("addHandler","dragging",gl),Un.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dd=Jr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),an(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),fi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,m=document.documentElement,T=f.scrollTop||m.scrollTop,M=f.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(M,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var M,N,m=this._panKeys={},T=this.keyCodes;for(M=0,N=T.left.length;M<N;M++)m[T.left[M]]=[-1*f,0];for(M=0,N=T.right.length;M<N;M++)m[T.right[M]]=[f,0];for(M=0,N=T.down.length;M<N;M++)m[T.down[M]]=[0,f];for(M=0,N=T.up.length;M<N;M++)m[T.up[M]]=[0,-1*f]},_setZoomDelta:function(f){var M,N,m=this._zoomKeys={},T=this.keyCodes;for(M=0,N=T.zoomIn.length;M<N;M++)m[T.zoomIn[M]]=f;for(M=0,N=T.zoomOut.length;M<N;M++)m[T.zoomOut[M]]=-f},_addHooks:function(){an(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){fi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var M,m=f.keyCode,T=this._map;if(m in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(M=this._panKeys[m],f.shiftKey&&(M=xe(M).multiplyBy(3)),T.options.maxBounds&&(M=T._limitOffset(xe(M),T.options.maxBounds)),T.options.worldCopyJump){var N=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(M)));T.panTo(N)}else T.panBy(M)}else if(m in this._zoomKeys)T.setZoom(T.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[m]);else{if(27!==m||!T._popup||!T._popup.options.closeOnEscapeKey)return;T.closePopup()}Na(f)}}});Un.addInitHook("addHandler","keyboard",dd),Un.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ma=Jr.extend({addHooks:function(){an(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){fi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var m=Xu(f),T=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var M=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Te(this._performZoom,this),M),Na(f)},_performZoom:function(){var f=this._map,m=f.getZoom(),T=this._map.options.zoomSnap||0;f._stop();var N=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,H=T?Math.ceil(N/T)*T:N,ce=f._limitZoom(m+(this._delta>0?H:-H))-m;this._delta=0,this._startTime=null,ce&&("center"===f.options.scrollWheelZoom?f.setZoom(m+ce):f.setZoomAround(this._lastMousePos,m+ce))}});Un.addInitHook("addHandler","scrollWheelZoom",ma);Un.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var _l=Jr.extend({addHooks:function(){an(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){fi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),1===f.touches.length){var m=f.touches[0];this._startPos=this._newPos=new Cn(m.clientX,m.clientY),this._holdTimeout=setTimeout(Te(function(){this._cancel(),this._isTapValid()&&(an(document,"touchend",ho),an(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),600),an(document,"touchend touchcancel contextmenu",this._cancel,this),an(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){fi(document,"touchend",ho),fi(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),fi(document,"touchend touchcancel contextmenu",this._cancel,this),fi(document,"touchmove",this._onMove,this)},_onMove:function(f){var m=f.touches[0];this._newPos=new Cn(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,m){var T=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});T._simulated=!0,m.target.dispatchEvent(T)}});Un.addInitHook("addHandler","tapHold",_l),Un.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var qa=Jr.extend({addHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),an(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Fi(this._map._container,"leaflet-touch-zoom"),fi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var m=this._map;if(f.touches&&2===f.touches.length&&!m._animatingZoom&&!this._zooming){var T=m.mouseEventToContainerPoint(f.touches[0]),M=m.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),"center"!==m.options.touchZoom&&(this._pinchStartLatLng=m.containerPointToLatLng(T.add(M)._divideBy(2))),this._startDist=T.distanceTo(M),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),an(document,"touchmove",this._onTouchMove,this),an(document,"touchend touchcancel",this._onTouchEnd,this),ho(f)}},_onTouchMove:function(f){if(f.touches&&2===f.touches.length&&this._zooming){var m=this._map,T=m.mouseEventToContainerPoint(f.touches[0]),M=m.mouseEventToContainerPoint(f.touches[1]),N=T.distanceTo(M)/this._startDist;if(this._zoom=m.getScaleZoom(N,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&N<1||this._zoom>m.getMaxZoom()&&N>1)&&(this._zoom=m._limitZoom(this._zoom)),"center"===m.options.touchZoom){if(this._center=this._startLatLng,1===N)return}else{var H=T._add(M)._divideBy(2)._subtract(this._centerPoint);if(1===N&&0===H.x&&0===H.y)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(H),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),Se(this._animRequest);var ce=Te(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=rt(ce,this,!0),ho(f)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,Se(this._animRequest),fi(document,"touchmove",this._onTouchMove,this),fi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Un.addInitHook("addHandler","touchZoom",qa),Un.BoxZoom=Gl,Un.DoubleClickZoom=Mc,Un.Drag=gl,Un.Keyboard=dd,Un.ScrollWheelZoom=ma,Un.TapHold=_l,Un.TouchZoom=qa,z.Bounds=ze,z.Browser=De,z.CRS=ui,z.Canvas=pl,z.Circle=Ba,z.CircleMarker=Ac,z.Class=tn,z.Control=Is,z.DivIcon=_u,z.DivOverlay=Bi,z.DomEvent=eh,z.DomUtil=Qd,z.Draggable=fa,z.Evented=zt,z.FeatureGroup=hn,z.GeoJSON=js,z.GridLayer=Wl,z.Handler=Jr,z.Icon=Hs,z.ImageOverlay=za,z.LatLng=We,z.LatLngBounds=pt,z.Layer=fs,z.LayerGroup=xc,z.LineUtil=An,z.Map=Un,z.Marker=Io,z.Mixin=ed,z.Path=pa,z.Point=Cn,z.PolyUtil=Tc,z.Polygon=Vo,z.Polyline=or,z.Popup=es,z.PosAnimation=th,z.Projection=nd,z.Rectangle=$s,z.Renderer=ps,z.SVG=Ha,z.SVGOverlay=mu,z.TileLayer=ga,z.Tooltip=Sc,z.Transformation=ri,z.Util=Lt,z.VideoOverlay=Ic,z.bind=Te,z.bounds=Ke,z.canvas=$l,z.circle=function Xr(f,m,T){return new Ba(f,m,T)},z.circleMarker=function Ua(f,m){return new Ac(f,m)},z.control=Zs,z.divIcon=function xp(f){return new _u(f)},z.extend=ee,z.featureGroup=function(f,m){return new hn(f,m)},z.geoJSON=fl,z.geoJson=sd,z.gridLayer=function Ap(f){return new Wl(f)},z.icon=function hr(f){return new Hs(f)},z.imageOverlay=function(f,m,T){return new za(f,m,T)},z.latLng=gt,z.latLngBounds=Je,z.layerGroup=function(f,m){return new xc(f,m)},z.map=function As(f,m){return new Un(f,m)},z.marker=function pu(f,m){return new Io(f,m)},z.point=xe,z.polygon=function qs(f,m){return new Vo(f,m)},z.polyline=function Va(f,m){return new or(f,m)},z.popup=function(f,m){return new es(f,m)},z.rectangle=function ud(f,m){return new $s(f,m)},z.setOptions=tt,z.stamp=Ee,z.svg=cd,z.svgOverlay=function ch(f,m,T){return new mu(f,m,T)},z.tileLayer=vu,z.tooltip=function(f,m){return new Sc(f,m)},z.transformation=_i,z.version="1.9.4",z.videoOverlay=function lh(f,m,T){return new Ic(f,m,T)};var Yl=window.L;z.noConflict=function(){return window.L=Yl,this},window.L=z}(Xe)},9751:(Yt,Xe,z)=>{"use strict";z.d(Xe,{y:()=>je});var o=z(930),ee=z(727),W=z(8822),Te=z(9635),Oe=z(2416),Ee=z(576),$e=z(2806);let je=(()=>{class Ce{constructor(it){it&&(this._subscribe=it)}lift(it){const Et=new Ce;return Et.source=this,Et.operator=it,Et}subscribe(it,Et,Vt){const Be=function fe(Ce){return Ce&&Ce instanceof o.Lv||function he(Ce){return Ce&&(0,Ee.m)(Ce.next)&&(0,Ee.m)(Ce.error)&&(0,Ee.m)(Ce.complete)}(Ce)&&(0,ee.Nn)(Ce)}(it)?it:new o.Hp(it,Et,Vt);return(0,$e.x)(()=>{const{operator:st,source:ut}=this;Be.add(st?st.call(Be,ut):ut?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(it){try{return this._subscribe(it)}catch(Et){it.error(Et)}}forEach(it,Et){return new(Et=Ne(Et))((Vt,Be)=>{const st=new o.Hp({next:ut=>{try{it(ut)}catch(mt){Be(mt),st.unsubscribe()}},error:Be,complete:Vt});this.subscribe(st)})}_subscribe(it){var Et;return null===(Et=this.source)||void 0===Et?void 0:Et.subscribe(it)}[W.L](){return this}pipe(...it){return(0,Te.U)(it)(this)}toPromise(it){return new(it=Ne(it))((Et,Vt)=>{let Be;this.subscribe(st=>Be=st,st=>Vt(st),()=>Et(Be))})}}return Ce.create=tt=>new Ce(tt),Ce})();function Ne(Ce){var tt;return null!==(tt=Ce??Oe.v.Promise)&&void 0!==tt?tt:Promise}},7579:(Yt,Xe,z)=>{"use strict";z.d(Xe,{x:()=>$e});var o=z(9751),ee=z(727);const Te=(0,z(3888).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=z(8737),Ee=z(2806);let $e=(()=>{class Ne extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const Ce=new je(this,this);return Ce.operator=fe,Ce}_throwIfClosed(){if(this.closed)throw new Te}next(fe){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(fe)}})}error(fe){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(fe)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:Ce,isStopped:tt,observers:it}=this;return Ce||tt?ee.Lc:(this.currentObservers=null,it.push(fe),new ee.w0(()=>{this.currentObservers=null,(0,Oe.P)(it,fe)}))}_checkFinalizedStatuses(fe){const{hasError:Ce,thrownError:tt,isStopped:it}=this;Ce?fe.error(tt):it&&fe.complete()}asObservable(){const fe=new o.y;return fe.source=this,fe}}return Ne.create=(he,fe)=>new je(he,fe),Ne})();class je extends $e{constructor(he,fe){super(),this.destination=he,this.source=fe}next(he){var fe,Ce;null===(Ce=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===Ce||Ce.call(fe,he)}error(he){var fe,Ce;null===(Ce=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===Ce||Ce.call(fe,he)}complete(){var he,fe;null===(fe=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===fe||fe.call(he)}_subscribe(he){var fe,Ce;return null!==(Ce=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(he))&&void 0!==Ce?Ce:ee.Lc}}},930:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Hp:()=>Vt,Lv:()=>Ce});var o=z(576),ee=z(727),W=z(2416),Te=z(7849),Oe=z(5032);const Ee=Ne("C",void 0,void 0);function Ne(nt,Qe,lt){return{kind:nt,value:Qe,error:lt}}var he=z(3410),fe=z(2806);class Ce extends ee.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,ee.Nn)(Qe)&&Qe.add(this)):this.destination=mt}static create(Qe,lt,vt){return new Vt(Qe,lt,vt)}next(Qe){this.isStopped?ut(function je(nt){return Ne("N",nt,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?ut(function $e(nt){return Ne("E",void 0,nt)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?ut(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function it(nt,Qe){return tt.call(nt,Qe)}class Et{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:lt}=this;if(lt.next)try{lt.next(Qe)}catch(vt){Be(vt)}}error(Qe){const{partialObserver:lt}=this;if(lt.error)try{lt.error(Qe)}catch(vt){Be(vt)}else Be(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(lt){Be(lt)}}}class Vt extends Ce{constructor(Qe,lt,vt){let rt;if(super(),(0,o.m)(Qe)||!Qe)rt={next:Qe??void 0,error:lt??void 0,complete:vt??void 0};else{let Se;this&&W.v.useDeprecatedNextContext?(Se=Object.create(Qe),Se.unsubscribe=()=>this.unsubscribe(),rt={next:Qe.next&&it(Qe.next,Se),error:Qe.error&&it(Qe.error,Se),complete:Qe.complete&&it(Qe.complete,Se)}):rt=Qe}this.destination=new Et(rt)}}function Be(nt){W.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(nt):(0,Te.h)(nt)}function ut(nt,Qe){const{onStoppedNotification:lt}=W.v;lt&&he.z.setTimeout(()=>lt(nt,Qe))}const mt={closed:!0,next:Oe.Z,error:function st(nt){throw nt},complete:Oe.Z}},727:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Lc:()=>Ee,w0:()=>Oe,Nn:()=>$e});var o=z(576);const W=(0,z(3888).d)(Ne=>function(fe){Ne(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Ce,tt)=>`${tt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var Te=z(8737);class Oe{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const it of fe)it.remove(this);else fe.remove(this);const{initialTeardown:Ce}=this;if((0,o.m)(Ce))try{Ce()}catch(it){he=it instanceof W?it.errors:[it]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const it of tt)try{je(it)}catch(Et){he=he??[],Et instanceof W?he=[...he,...Et.errors]:he.push(Et)}}if(he)throw new W(he)}}add(he){var fe;if(he&&he!==this)if(this.closed)je(he);else{if(he instanceof Oe){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(he)}}_hasParent(he){const{_parentage:fe}=this;return fe===he||Array.isArray(fe)&&fe.includes(he)}_addParent(he){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(he),fe):fe?[fe,he]:he}_removeParent(he){const{_parentage:fe}=this;fe===he?this._parentage=null:Array.isArray(fe)&&(0,Te.P)(fe,he)}remove(he){const{_finalizers:fe}=this;fe&&(0,Te.P)(fe,he),he instanceof Oe&&he._removeParent(this)}}Oe.EMPTY=(()=>{const Ne=new Oe;return Ne.closed=!0,Ne})();const Ee=Oe.EMPTY;function $e(Ne){return Ne instanceof Oe||Ne&&"closed"in Ne&&(0,o.m)(Ne.remove)&&(0,o.m)(Ne.add)&&(0,o.m)(Ne.unsubscribe)}function je(Ne){(0,o.m)(Ne)?Ne():Ne.unsubscribe()}},2416:(Yt,Xe,z)=>{"use strict";z.d(Xe,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Yt,Xe,z)=>{"use strict";z.d(Xe,{E:()=>ee});const ee=new(z(9751).y)(Oe=>Oe.complete())},8996:(Yt,Xe,z)=>{"use strict";z.d(Xe,{D:()=>Qe});var o=z(8421),ee=z(5363),W=z(9468),Ee=z(9751),je=z(2202),Ne=z(576),he=z(9672);function Ce(lt,vt){if(!lt)throw new Error("Iterable cannot be null");return new Ee.y(rt=>{(0,he.f)(rt,vt,()=>{const Se=lt[Symbol.asyncIterator]();(0,he.f)(rt,vt,()=>{Se.next().then(Lt=>{Lt.done?rt.complete():rt.next(Lt.value)})},0,!0)})})}var tt=z(3670),it=z(8239),Et=z(1144),Vt=z(6495),Be=z(2206),st=z(4532),ut=z(3260);function Qe(lt,vt){return vt?function nt(lt,vt){if(null!=lt){if((0,tt.c)(lt))return function Te(lt,vt){return(0,o.Xf)(lt).pipe((0,W.R)(vt),(0,ee.Q)(vt))}(lt,vt);if((0,Et.z)(lt))return function $e(lt,vt){return new Ee.y(rt=>{let Se=0;return vt.schedule(function(){Se===lt.length?rt.complete():(rt.next(lt[Se++]),rt.closed||this.schedule())})})}(lt,vt);if((0,it.t)(lt))return function Oe(lt,vt){return(0,o.Xf)(lt).pipe((0,W.R)(vt),(0,ee.Q)(vt))}(lt,vt);if((0,Be.D)(lt))return Ce(lt,vt);if((0,Vt.T)(lt))return function fe(lt,vt){return new Ee.y(rt=>{let Se;return(0,he.f)(rt,vt,()=>{Se=lt[je.h](),(0,he.f)(rt,vt,()=>{let Lt,tn;try{({value:Lt,done:tn}=Se.next())}catch(Zt){return void rt.error(Zt)}tn?rt.complete():rt.next(Lt)},0,!0)}),()=>(0,Ne.m)(Se?.return)&&Se.return()})}(lt,vt);if((0,ut.L)(lt))return function mt(lt,vt){return Ce((0,ut.Q)(lt),vt)}(lt,vt)}throw(0,st.z)(lt)}(lt,vt):(0,o.Xf)(lt)}},8421:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Xf:()=>tt});var o=z(7582),ee=z(1144),W=z(8239),Te=z(9751),Oe=z(3670),Ee=z(2206),$e=z(4532),je=z(6495),Ne=z(3260),he=z(576),fe=z(7849),Ce=z(8822);function tt(nt){if(nt instanceof Te.y)return nt;if(null!=nt){if((0,Oe.c)(nt))return function it(nt){return new Te.y(Qe=>{const lt=nt[Ce.L]();if((0,he.m)(lt.subscribe))return lt.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(nt);if((0,ee.z)(nt))return function Et(nt){return new Te.y(Qe=>{for(let lt=0;lt<nt.length&&!Qe.closed;lt++)Qe.next(nt[lt]);Qe.complete()})}(nt);if((0,W.t)(nt))return function Vt(nt){return new Te.y(Qe=>{nt.then(lt=>{Qe.closed||(Qe.next(lt),Qe.complete())},lt=>Qe.error(lt)).then(null,fe.h)})}(nt);if((0,Ee.D)(nt))return st(nt);if((0,je.T)(nt))return function Be(nt){return new Te.y(Qe=>{for(const lt of nt)if(Qe.next(lt),Qe.closed)return;Qe.complete()})}(nt);if((0,Ne.L)(nt))return function ut(nt){return st((0,Ne.Q)(nt))}(nt)}throw(0,$e.z)(nt)}function st(nt){return new Te.y(Qe=>{(function mt(nt,Qe){var lt,vt,rt,Se;return(0,o.mG)(this,void 0,void 0,function*(){try{for(lt=(0,o.KL)(nt);!(vt=yield lt.next()).done;)if(Qe.next(vt.value),Qe.closed)return}catch(Lt){rt={error:Lt}}finally{try{vt&&!vt.done&&(Se=lt.return)&&(yield Se.call(lt))}finally{if(rt)throw rt.error}}Qe.complete()})})(nt,Qe).catch(lt=>Qe.error(lt))})}},6451:(Yt,Xe,z)=>{"use strict";z.d(Xe,{T:()=>Ee});var o=z(8189),ee=z(8421),W=z(515),Te=z(3269),Oe=z(8996);function Ee(...$e){const je=(0,Te.yG)($e),Ne=(0,Te._6)($e,1/0),he=$e;return he.length?1===he.length?(0,ee.Xf)(he[0]):(0,o.J)(Ne)((0,Oe.D)(he,je)):W.E}},5403:(Yt,Xe,z)=>{"use strict";z.d(Xe,{x:()=>ee});var o=z(930);function ee(Te,Oe,Ee,$e,je){return new W(Te,Oe,Ee,$e,je)}class W extends o.Lv{constructor(Oe,Ee,$e,je,Ne,he){super(Oe),this.onFinalize=Ne,this.shouldUnsubscribe=he,this._next=Ee?function(fe){try{Ee(fe)}catch(Ce){Oe.error(Ce)}}:super._next,this._error=je?function(fe){try{je(fe)}catch(Ce){Oe.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(fe){Oe.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(Oe=this.onFinalize)||void 0===Oe||Oe.call(this))}}}},4004:(Yt,Xe,z)=>{"use strict";z.d(Xe,{U:()=>W});var o=z(4482),ee=z(5403);function W(Te,Oe){return(0,o.e)((Ee,$e)=>{let je=0;Ee.subscribe((0,ee.x)($e,Ne=>{$e.next(Te.call(Oe,Ne,je++))}))})}},8189:(Yt,Xe,z)=>{"use strict";z.d(Xe,{J:()=>W});var o=z(5577),ee=z(4671);function W(Te=1/0){return(0,o.z)(ee.y,Te)}},5577:(Yt,Xe,z)=>{"use strict";z.d(Xe,{z:()=>je});var o=z(4004),ee=z(8421),W=z(4482),Te=z(9672),Oe=z(5403),$e=z(576);function je(Ne,he,fe=1/0){return(0,$e.m)(he)?je((Ce,tt)=>(0,o.U)((it,Et)=>he(Ce,it,tt,Et))((0,ee.Xf)(Ne(Ce,tt))),fe):("number"==typeof he&&(fe=he),(0,W.e)((Ce,tt)=>function Ee(Ne,he,fe,Ce,tt,it,Et,Vt){const Be=[];let st=0,ut=0,mt=!1;const nt=()=>{mt&&!Be.length&&!st&&he.complete()},Qe=vt=>st<Ce?lt(vt):Be.push(vt),lt=vt=>{it&&he.next(vt),st++;let rt=!1;(0,ee.Xf)(fe(vt,ut++)).subscribe((0,Oe.x)(he,Se=>{tt?.(Se),it?Qe(Se):he.next(Se)},()=>{rt=!0},void 0,()=>{if(rt)try{for(st--;Be.length&&st<Ce;){const Se=Be.shift();Et?(0,Te.f)(he,Et,()=>lt(Se)):lt(Se)}nt()}catch(Se){he.error(Se)}}))};return Ne.subscribe((0,Oe.x)(he,Qe,()=>{mt=!0,nt()})),()=>{Vt?.()}}(Ce,tt,Ne,fe)))}},5363:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Q:()=>Te});var o=z(9672),ee=z(4482),W=z(5403);function Te(Oe,Ee=0){return(0,ee.e)(($e,je)=>{$e.subscribe((0,W.x)(je,Ne=>(0,o.f)(je,Oe,()=>je.next(Ne),Ee),()=>(0,o.f)(je,Oe,()=>je.complete(),Ee),Ne=>(0,o.f)(je,Oe,()=>je.error(Ne),Ee)))})}},3099:(Yt,Xe,z)=>{"use strict";z.d(Xe,{B:()=>Oe});var o=z(8421),ee=z(7579),W=z(930),Te=z(4482);function Oe($e={}){const{connector:je=(()=>new ee.x),resetOnError:Ne=!0,resetOnComplete:he=!0,resetOnRefCountZero:fe=!0}=$e;return Ce=>{let tt,it,Et,Vt=0,Be=!1,st=!1;const ut=()=>{it?.unsubscribe(),it=void 0},mt=()=>{ut(),tt=Et=void 0,Be=st=!1},nt=()=>{const Qe=tt;mt(),Qe?.unsubscribe()};return(0,Te.e)((Qe,lt)=>{Vt++,!st&&!Be&&ut();const vt=Et=Et??je();lt.add(()=>{Vt--,0===Vt&&!st&&!Be&&(it=Ee(nt,fe))}),vt.subscribe(lt),!tt&&Vt>0&&(tt=new W.Hp({next:rt=>vt.next(rt),error:rt=>{st=!0,ut(),it=Ee(mt,Ne,rt),vt.error(rt)},complete:()=>{Be=!0,ut(),it=Ee(mt,he),vt.complete()}}),(0,o.Xf)(Qe).subscribe(tt))})(Ce)}}function Ee($e,je,...Ne){if(!0===je)return void $e();if(!1===je)return;const he=new W.Hp({next:()=>{he.unsubscribe(),$e()}});return(0,o.Xf)(je(...Ne)).subscribe(he)}},9468:(Yt,Xe,z)=>{"use strict";z.d(Xe,{R:()=>ee});var o=z(4482);function ee(W,Te=0){return(0,o.e)((Oe,Ee)=>{Ee.add(W.schedule(()=>Oe.subscribe(Ee),Te))})}},8505:(Yt,Xe,z)=>{"use strict";z.d(Xe,{b:()=>Oe});var o=z(576),ee=z(4482),W=z(5403),Te=z(4671);function Oe(Ee,$e,je){const Ne=(0,o.m)(Ee)||$e||je?{next:Ee,error:$e,complete:je}:Ee;return Ne?(0,ee.e)((he,fe)=>{var Ce;null===(Ce=Ne.subscribe)||void 0===Ce||Ce.call(Ne);let tt=!0;he.subscribe((0,W.x)(fe,it=>{var Et;null===(Et=Ne.next)||void 0===Et||Et.call(Ne,it),fe.next(it)},()=>{var it;tt=!1,null===(it=Ne.complete)||void 0===it||it.call(Ne),fe.complete()},it=>{var Et;tt=!1,null===(Et=Ne.error)||void 0===Et||Et.call(Ne,it),fe.error(it)},()=>{var it,Et;tt&&(null===(it=Ne.unsubscribe)||void 0===it||it.call(Ne)),null===(Et=Ne.finalize)||void 0===Et||Et.call(Ne)}))}):Te.y}},4408:(Yt,Xe,z)=>{"use strict";z.d(Xe,{o:()=>Oe});var o=z(727);class ee extends o.w0{constructor($e,je){super()}schedule($e,je=0){return this}}const W={setInterval(Ee,$e,...je){const{delegate:Ne}=W;return Ne?.setInterval?Ne.setInterval(Ee,$e,...je):setInterval(Ee,$e,...je)},clearInterval(Ee){const{delegate:$e}=W;return($e?.clearInterval||clearInterval)(Ee)},delegate:void 0};var Te=z(8737);class Oe extends ee{constructor($e,je){super($e,je),this.scheduler=$e,this.work=je,this.pending=!1}schedule($e,je=0){var Ne;if(this.closed)return this;this.state=$e;const he=this.id,fe=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(fe,he,je)),this.pending=!0,this.delay=je,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(fe,this.id,je),this}requestAsyncId($e,je,Ne=0){return W.setInterval($e.flush.bind($e,this),Ne)}recycleAsyncId($e,je,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return je;null!=je&&W.clearInterval(je)}execute($e,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute($e,je);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,je){let he,Ne=!1;try{this.work($e)}catch(fe){Ne=!0,he=fe||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:$e,scheduler:je}=this,{actions:Ne}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Te.P)(Ne,this),null!=$e&&(this.id=this.recycleAsyncId(je,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(Yt,Xe,z)=>{"use strict";z.d(Xe,{v:()=>W});var o=z(6063);class ee{constructor(Oe,Ee=ee.now){this.schedulerActionCtor=Oe,this.now=Ee}schedule(Oe,Ee=0,$e){return new this.schedulerActionCtor(this,Oe).schedule($e,Ee)}}ee.now=o.l.now;class W extends ee{constructor(Oe,Ee=ee.now){super(Oe,Ee),this.actions=[],this._active=!1}flush(Oe){const{actions:Ee}=this;if(this._active)return void Ee.push(Oe);let $e;this._active=!0;do{if($e=Oe.execute(Oe.state,Oe.delay))break}while(Oe=Ee.shift());if(this._active=!1,$e){for(;Oe=Ee.shift();)Oe.unsubscribe();throw $e}}}},4986:(Yt,Xe,z)=>{"use strict";z.d(Xe,{P:()=>Te,z:()=>W});var o=z(4408);const W=new(z(7565).v)(o.o),Te=W},6063:(Yt,Xe,z)=>{"use strict";z.d(Xe,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(Yt,Xe,z)=>{"use strict";z.d(Xe,{z:()=>o});const o={setTimeout(ee,W,...Te){const{delegate:Oe}=o;return Oe?.setTimeout?Oe.setTimeout(ee,W,...Te):setTimeout(ee,W,...Te)},clearTimeout(ee){const{delegate:W}=o;return(W?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(Yt,Xe,z)=>{"use strict";z.d(Xe,{h:()=>ee});const ee=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Yt,Xe,z)=>{"use strict";z.d(Xe,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Yt,Xe,z)=>{"use strict";z.d(Xe,{_6:()=>Ee,jO:()=>Te,yG:()=>Oe});var o=z(576),ee=z(3532);function W($e){return $e[$e.length-1]}function Te($e){return(0,o.m)(W($e))?$e.pop():void 0}function Oe($e){return(0,ee.K)(W($e))?$e.pop():void 0}function Ee($e,je){return"number"==typeof W($e)?$e.pop():je}},8737:(Yt,Xe,z)=>{"use strict";function o(ee,W){if(ee){const Te=ee.indexOf(W);0<=Te&&ee.splice(Te,1)}}z.d(Xe,{P:()=>o})},3888:(Yt,Xe,z)=>{"use strict";function o(ee){const Te=ee(Oe=>{Error.call(Oe),Oe.stack=(new Error).stack});return Te.prototype=Object.create(Error.prototype),Te.prototype.constructor=Te,Te}z.d(Xe,{d:()=>o})},2806:(Yt,Xe,z)=>{"use strict";z.d(Xe,{O:()=>Te,x:()=>W});var o=z(2416);let ee=null;function W(Oe){if(o.v.useDeprecatedSynchronousErrorHandling){const Ee=!ee;if(Ee&&(ee={errorThrown:!1,error:null}),Oe(),Ee){const{errorThrown:$e,error:je}=ee;if(ee=null,$e)throw je}}else Oe()}function Te(Oe){o.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=Oe)}},9672:(Yt,Xe,z)=>{"use strict";function o(ee,W,Te,Oe=0,Ee=!1){const $e=W.schedule(function(){Te(),Ee?ee.add(this.schedule(null,Oe)):this.unsubscribe()},Oe);if(ee.add($e),!Ee)return $e}z.d(Xe,{f:()=>o})},4671:(Yt,Xe,z)=>{"use strict";function o(ee){return ee}z.d(Xe,{y:()=>o})},1144:(Yt,Xe,z)=>{"use strict";z.d(Xe,{z:()=>o});const o=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Yt,Xe,z)=>{"use strict";z.d(Xe,{D:()=>ee});var o=z(576);function ee(W){return Symbol.asyncIterator&&(0,o.m)(W?.[Symbol.asyncIterator])}},576:(Yt,Xe,z)=>{"use strict";function o(ee){return"function"==typeof ee}z.d(Xe,{m:()=>o})},3670:(Yt,Xe,z)=>{"use strict";z.d(Xe,{c:()=>W});var o=z(8822),ee=z(576);function W(Te){return(0,ee.m)(Te[o.L])}},6495:(Yt,Xe,z)=>{"use strict";z.d(Xe,{T:()=>W});var o=z(2202),ee=z(576);function W(Te){return(0,ee.m)(Te?.[o.h])}},8239:(Yt,Xe,z)=>{"use strict";z.d(Xe,{t:()=>ee});var o=z(576);function ee(W){return(0,o.m)(W?.then)}},3260:(Yt,Xe,z)=>{"use strict";z.d(Xe,{L:()=>Te,Q:()=>W});var o=z(7582),ee=z(576);function W(Oe){return(0,o.FC)(this,arguments,function*(){const $e=Oe.getReader();try{for(;;){const{value:je,done:Ne}=yield(0,o.qq)($e.read());if(Ne)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(je)}}finally{$e.releaseLock()}})}function Te(Oe){return(0,ee.m)(Oe?.getReader)}},3532:(Yt,Xe,z)=>{"use strict";z.d(Xe,{K:()=>ee});var o=z(576);function ee(W){return W&&(0,o.m)(W.schedule)}},4482:(Yt,Xe,z)=>{"use strict";z.d(Xe,{A:()=>ee,e:()=>W});var o=z(576);function ee(Te){return(0,o.m)(Te?.lift)}function W(Te){return Oe=>{if(ee(Oe))return Oe.lift(function(Ee){try{return Te(Ee,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Yt,Xe,z)=>{"use strict";function o(){}z.d(Xe,{Z:()=>o})},9635:(Yt,Xe,z)=>{"use strict";z.d(Xe,{U:()=>W,z:()=>ee});var o=z(4671);function ee(...Te){return W(Te)}function W(Te){return 0===Te.length?o.y:1===Te.length?Te[0]:function(Ee){return Te.reduce(($e,je)=>je($e),Ee)}}},7849:(Yt,Xe,z)=>{"use strict";z.d(Xe,{h:()=>W});var o=z(2416),ee=z(3410);function W(Te){ee.z.setTimeout(()=>{const{onUnhandledError:Oe}=o.v;if(!Oe)throw Te;Oe(Te)})}},4532:(Yt,Xe,z)=>{"use strict";function o(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(Xe,{z:()=>o})},4650:(Yt,Xe,z)=>{"use strict";z.d(Xe,{$8M:()=>pd,$WT:()=>uo,$Z:()=>T1,AFp:()=>FC,ALo:()=>Wf,AaK:()=>je,AcB:()=>_h,AsE:()=>Kb,CHM:()=>rd,CRH:()=>YO,CZH:()=>Zy,CqO:()=>K,D6c:()=>AR,EJc:()=>Cg,EpF:()=>cy,F$t:()=>uy,F4k:()=>zo,FYo:()=>eb,FiY:()=>Nc,G7q:()=>cA,Gf:()=>mA,GfV:()=>n1,Gpc:()=>fe,HOy:()=>my,Hsn:()=>dy,IIB:()=>LC,JOm:()=>bn,KtG:()=>Hs,LFG:()=>Rn,LSH:()=>zw,Lbi:()=>w_,Lck:()=>_C,MAs:()=>B1,MMx:()=>Oy,MR2:()=>PP,NdJ:()=>xl,OlP:()=>di,Oqu:()=>Yb,P3R:()=>$D,PXZ:()=>ws,PiD:()=>Xl,Q6J:()=>Ob,QGY:()=>be,QbO:()=>Uu,Qsj:()=>BP,R0b:()=>hc,RDi:()=>mP,Rgc:()=>Fy,SBq:()=>eg,Sil:()=>xA,Suo:()=>GO,TTD:()=>oh,TgZ:()=>Nb,VKq:()=>CC,WLB:()=>TC,X6Q:()=>RA,XFs:()=>jt,Xpm:()=>En,Xts:()=>qw,Y36:()=>og,YKP:()=>mC,YNc:()=>U1,Yjl:()=>Nn,Yz7:()=>rn,Z0I:()=>Or,ZZ4:()=>Jf,_Bn:()=>p_,_UZ:()=>Fb,_Vd:()=>Xp,_c5:()=>WA,_uU:()=>ux,aQg:()=>Xf,c2e:()=>BC,cJS:()=>ri,cg1:()=>kd,dDg:()=>jC,dqk:()=>ti,eFA:()=>kA,eJc:()=>_A,ekj:()=>jb,eoX:()=>WC,f3M:()=>Ji,g9A:()=>EA,gM2:()=>lA,h0i:()=>zh,hGG:()=>$A,hij:()=>s_,iGM:()=>$O,ifc:()=>Y,ip1:()=>Nd,jDz:()=>vC,kL8:()=>Cx,kYT:()=>ht,l5B:()=>BO,lG2:()=>wn,lcZ:()=>ZO,lqb:()=>Of,lri:()=>Gy,n5z:()=>fd,n_E:()=>IC,oAB:()=>Me,oxw:()=>Ur,q4F:()=>r1,qLn:()=>Vm,qOj:()=>xd,qZA:()=>Lb,rWj:()=>Yy,r_U:()=>pR,s9C:()=>Bb,sBO:()=>NA,s_b:()=>$f,soG:()=>Hy,tBr:()=>bh,tb:()=>MA,tp0:()=>qt,uIk:()=>F1,vHH:()=>Be,vpe:()=>Rd,wAp:()=>Mn,xi3:()=>aA,xp6:()=>g1,z2F:()=>t0,zSh:()=>kh,zs3:()=>ng});var o=z(7579),ee=z(727),W=z(9751),Te=z(6451),Oe=z(3099);function Ee(l){for(let u in l)if(l[u]===Ee)return u;throw Error("Could not find renamed property on target object.")}function $e(l,u){for(const d in u)u.hasOwnProperty(d)&&!l.hasOwnProperty(d)&&(l[d]=u[d])}function je(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(je).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const u=l.toString();if(null==u)return""+u;const d=u.indexOf("\n");return-1===d?u:u.substring(0,d)}function Ne(l,u){return null==l||""===l?null===u?"":u:null==u||""===u?l:l+" "+u}const he=Ee({__forward_ref__:Ee});function fe(l){return l.__forward_ref__=fe,l.toString=function(){return je(this())},l}function Ce(l){return tt(l)?l():l}function tt(l){return"function"==typeof l&&l.hasOwnProperty(he)&&l.__forward_ref__===fe}function it(l){return l&&!!l.\u0275providers}const Vt="https://g.co/ng/security#xss";class Be extends Error{constructor(u,d){super(st(u,d)),this.code=u}}function st(l,u){return`NG0${Math.abs(l)}${u?": "+u.trim():""}`}function ut(l){return"string"==typeof l?l:null==l?"":String(l)}function vt(l,u){throw new Be(-201,!1)}function Je(l,u){null==l&&function We(l,u,d,g){throw new Error(`ASSERTION ERROR: ${l}`+(null==g?"":` [Expected=> ${d} ${g} ${u} <=Actual]`))}(u,l,null,"!=")}function rn(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function ri(l){return{providers:l.providers||[],imports:l.imports||[]}}function _i(l){return ar(l,ao)||ar(l,nl)}function Or(l){return null!==_i(l)}function ar(l,u){return l.hasOwnProperty(u)?l[u]:null}function ir(l){return l&&(l.hasOwnProperty(To)||l.hasOwnProperty(Yi))?l[To]:null}const ao=Ee({\u0275prov:Ee}),To=Ee({\u0275inj:Ee}),nl=Ee({ngInjectableDef:Ee}),Yi=Ee({ngInjectorDef:Ee});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let Ki;function lr(l){const u=Ki;return Ki=l,u}function lo(l,u,d){const g=_i(l);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:d&jt.Optional?null:void 0!==u?u:void vt(je(l))}const ti=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zn={},$r="__NG_DI_FLAG__",Hi="ngTempTokenPath",Gr="ngTokenPath",Qi=/\n/gm,Tr="\u0275",kn="__source";let Ko;function zn(l){const u=Ko;return Ko=l,u}function Eo(l,u=jt.Default){if(void 0===Ko)throw new Be(-203,!1);return null===Ko?lo(l,void 0,u):Ko.get(l,u&jt.Optional?null:void 0,u)}function Rn(l,u=jt.Default){return(function Es(){return Ki}()||Eo)(Ce(l),u)}function Ji(l,u=jt.Default){return Rn(l,Yr(u))}function Yr(l){return typeof l>"u"||"number"==typeof l?l:0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)}function cr(l){const u=[];for(let d=0;d<l.length;d++){const g=Ce(l[d]);if(Array.isArray(g)){if(0===g.length)throw new Be(900,!1);let _,w=jt.Default;for(let E=0;E<g.length;E++){const S=g[E],O=co(S);"number"==typeof O?-1===O?_=S.token:w|=O:_=S}u.push(Rn(_,w))}else u.push(Rn(g))}return u}function Do(l,u){return l[$r]=u,l.prototype[$r]=u,l}function co(l){return l[$r]}function oe(l){return{toString:l}.toString()}var G=(()=>((G=G||{})[G.OnPush=0]="OnPush",G[G.Default=1]="Default",G))(),Y=(()=>{return(l=Y||(Y={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",Y;var l})();const q={},ge=[],De=Ee({\u0275cmp:Ee}),kt=Ee({\u0275dir:Ee}),pn=Ee({\u0275pipe:Ee}),cn=Ee({\u0275mod:Ee}),Fn=Ee({\u0275fac:Ee}),_n=Ee({__NG_ELEMENT_ID__:Ee});let Ai=0;function En(l){return oe(()=>{const u=Fl(l),d={...u,decls:l.decls,vars:l.vars,template:l.template,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,onPush:l.changeDetection===G.OnPush,directiveDefs:null,pipeDefs:null,dependencies:u.standalone&&l.dependencies||null,getStandaloneInjector:null,data:l.data||{},encapsulation:l.encapsulation||Y.Emulated,id:"c"+Ai++,styles:l.styles||ge,_:null,schemas:l.schemas||null,tView:null};wc(d);const g=l.dependencies;return d.directiveDefs=da(g,!1),d.pipeDefs=da(g,!0),d})}function ua(l){return on(l)||pi(l)}function He(l){return null!==l}function Me(l){return oe(()=>({type:l.type,bootstrap:l.bootstrap||ge,declarations:l.declarations||ge,imports:l.imports||ge,exports:l.exports||ge,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null}))}function ht(l,u){return oe(()=>{const d=Nr(l,!0);d.declarations=u.declarations||ge,d.imports=u.imports||ge,d.exports=u.exports||ge})}function Kt(l,u){if(null==l)return q;const d={};for(const g in l)if(l.hasOwnProperty(g)){let _=l[g],w=_;Array.isArray(_)&&(w=_[1],_=_[0]),d[_]=g,u&&(u[_]=w)}return d}function wn(l){return oe(()=>{const u=Fl(l);return wc(u),u})}function Nn(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,standalone:!0===l.standalone,onDestroy:l.type.prototype.ngOnDestroy||null}}function on(l){return l[De]||null}function pi(l){return l[kt]||null}function Xn(l){return l[pn]||null}function uo(l){const u=on(l)||pi(l)||Xn(l);return null!==u&&u.standalone}function Nr(l,u){const d=l[cn]||null;if(!d&&!0===u)throw new Error(`Type ${je(l)} does not have '\u0275mod' property.`);return d}function Fl(l){const u={};return{type:l.type,providersResolver:null,factory:null,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:u,exportAs:l.exportAs||null,standalone:!0===l.standalone,selectors:l.selectors||ge,viewQuery:l.viewQuery||null,features:l.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kt(l.inputs,u),outputs:Kt(l.outputs)}}function wc(l){l.features?.forEach(u=>u(l))}function da(l,u){if(!l)return null;const d=u?Xn:ua;return()=>("function"==typeof l?l():l).map(g=>d(g)).filter(He)}const Dr=0,xt=1,Ot=2,In=3,oi=4,Qo=5,Xi=6,Li=7,Qt=8,Fi=9,si=10,On=11,Ao=12,hs=13,ka=14,Fo=15,Yn=16,Jo=17,Ds=18,Kr=19,ur=20,_r=21,Ci=22,Ul=1,il=2,Oa=7,xs=8,Ra=9,xr=10;function an(l){return Array.isArray(l)&&"object"==typeof l[Ul]}function Ii(l){return Array.isArray(l)&&!0===l[Ul]}function fi(l){return 0!=(4&l.flags)}function bc(l){return l.componentOffset>-1}function rl(l){return 1==(1&l.flags)}function Qr(l){return!!l.template}function Vs(l){return 0!=(256&l[Ot])}function zs(l,u){return l.hasOwnProperty(Fn)?l[Fn]:null}class rh{constructor(u,d,g){this.previousValue=u,this.currentValue=d,this.firstChange=g}isFirstChange(){return this.firstChange}}function oh(){return Bl}function Bl(l){return l.type.prototype.ngOnChanges&&(l.setInput=Jr),uf}function uf(){const l=Cc(this),u=l?.current;if(u){const d=l.previous;if(d===q)l.previous=u;else for(let g in u)d[g]=u[g];l.current=null,this.ngOnChanges(u)}}function Jr(l,u,d,g){const _=this.declaredInputs[d],w=Cc(l)||function fa(l,u){return l[ed]=u}(l,{previous:q,current:null}),E=w.current||(w.current={}),S=w.previous,O=S[_];E[_]=new rh(O&&O.currentValue,u,S===q),l[g]=u}oh.ngInherit=!0;const ed="__ngSimpleChanges__";function Cc(l){return l[ed]||null}const Ui=function(l,u,d){};function vr(l){for(;Array.isArray(l);)l=l[Dr];return l}function ll(l,u){return vr(u[l])}function Ar(l,u){return vr(u[l.index])}function Dc(l,u){return l.data[u]}function fo(l,u){return l[u]}function dr(l,u){const d=u[l];return an(d)?d:d[Dr]}function Fa(l){return 64==(64&l[Ot])}function yr(l,u){return null==u?null:l[u]}function Zl(l){l[Ds]=0}function cl(l,u){l[Qo]+=u;let d=l,g=l[In];for(;null!==g&&(1===u&&1===d[Qo]||-1===u&&0===d[Qo]);)g[Qo]+=u,d=g,g=g[In]}const An={lFrame:za(null),bindingsEnabled:!0};function sh(){return An.bindingsEnabled}function qe(){return An.lFrame.lView}function hn(){return An.lFrame.tView}function rd(l){return An.lFrame.contextLView=l,l[Qt]}function Hs(l){return An.lFrame.contextLView=null,l}function hr(){let l=Hl();for(;null!==l&&64===l.type;)l=l.parent;return l}function Hl(){return An.lFrame.currentTNode}function Io(l,u){const d=An.lFrame;d.currentTNode=l,d.isParent=u}function pu(){return An.lFrame.isParent}function pa(){An.lFrame.isParent=!1}function Xr(){const l=An.lFrame;let u=l.bindingRootIndex;return-1===u&&(u=l.bindingRootIndex=l.tView.bindingStartIndex),u}function or(){return An.lFrame.bindingIndex}function Vo(){return An.lFrame.bindingIndex++}function qs(l){const u=An.lFrame,d=u.bindingIndex;return u.bindingIndex=u.bindingIndex+l,d}function od(l,u){const d=An.lFrame;d.bindingIndex=d.bindingRootIndex=l,qi(u)}function qi(l){An.lFrame.currentDirectiveIndex=l}function Za(){return An.lFrame.currentQueryIndex}function dl(l){An.lFrame.currentQueryIndex=l}function hl(l){const u=l[xt];return 2===u.type?u.declTNode:1===u.type?l[Xi]:null}function gu(l,u,d){if(d&jt.SkipSelf){let _=u,w=l;for(;!(_=_.parent,null!==_||d&jt.Host||(_=hl(w),null===_||(w=w[Fo],10&_.type))););if(null===_)return!1;u=_,l=w}const g=An.lFrame=sd();return g.currentTNode=u,g.lView=l,!0}function fl(l){const u=sd(),d=l[xt];An.lFrame=u,u.currentTNode=d.firstChild,u.lView=l,u.tView=d,u.contextLView=l,u.bindingIndex=d.bindingStartIndex,u.inI18n=!1}function sd(){const l=An.lFrame,u=null===l?null:l.child;return null===u?za(l):u}function za(l){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=u),u}function ad(){const l=An.lFrame;return An.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const Ic=ad;function lh(){const l=ad();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Bi(){return An.lFrame.selectedIndex}function es(l){An.lFrame.selectedIndex=l}function ji(){const l=An.lFrame;return Dc(l.tView,l.selectedIndex)}function ga(l,u){for(let d=u.directiveStart,g=u.directiveEnd;d<g;d++){const w=l.data[d].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:S,ngAfterViewInit:O,ngAfterViewChecked:U,ngOnDestroy:j}=w;E&&(l.contentHooks??(l.contentHooks=[])).push(-d,E),S&&((l.contentHooks??(l.contentHooks=[])).push(d,S),(l.contentCheckHooks??(l.contentCheckHooks=[])).push(d,S)),O&&(l.viewHooks??(l.viewHooks=[])).push(-d,O),U&&((l.viewHooks??(l.viewHooks=[])).push(d,U),(l.viewCheckHooks??(l.viewCheckHooks=[])).push(d,U)),null!=j&&(l.destroyHooks??(l.destroyHooks=[])).push(d,j)}}function vu(l,u,d){ps(l,u,3,d)}function ld(l,u,d,g){(3&l[Ot])===d&&ps(l,u,d,g)}function uh(l,u){let d=l[Ot];(3&d)===u&&(d&=2047,d+=1,l[Ot]=d)}function ps(l,u,d,g){const w=g??-1,E=u.length-1;let S=0;for(let O=void 0!==g?65535&l[Ds]:0;O<E;O++)if("number"==typeof u[O+1]){if(S=u[O],null!=g&&S>=g)break}else u[O]<0&&(l[Ds]+=65536),(S<w||-1==w)&&(pl(l,d,u,O),l[Ds]=(4294901760&l[Ds])+O+2),O++}function pl(l,u,d,g){const _=d[g]<0,w=d[g+1],S=l[_?-d[g]:d[g]];if(_){if(l[Ot]>>11<l[Ds]>>16&&(3&l[Ot])===u){l[Ot]+=2048,Ui(4,S,w);try{w.call(S)}finally{Ui(5,S,w)}}}else{Ui(4,S,w);try{w.call(S)}finally{Ui(5,S,w)}}}const $l=-1;class ts{constructor(u,d,g){this.factory=u,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=g}}function gl(l,u,d){let g=0;for(;g<d.length;){const _=d[g];if("number"==typeof _){if(0!==_)break;g++;const w=d[g++],E=d[g++],S=d[g++];l.setAttribute(u,E,S,w)}else{const w=_,E=d[++g];ma(w)?l.setProperty(u,w,E):l.setAttribute(u,w,E),g++}}return g}function dd(l){return 3===l||4===l||6===l}function ma(l){return 64===l.charCodeAt(0)}function ml(l,u){if(null!==u&&0!==u.length)if(null===l||0===l.length)l=u.slice();else{let d=-1;for(let g=0;g<u.length;g++){const _=u[g];"number"==typeof _?d=_:0===d||_l(l,d,_,null,-1===d||2===d?u[++g]:null)}}return l}function _l(l,u,d,g,_){let w=0,E=l.length;if(-1===u)E=-1;else for(;w<l.length;){const S=l[w++];if("number"==typeof S){if(S===u){E=-1;break}if(S>u){E=w-1;break}}}for(;w<l.length;){const S=l[w];if("number"==typeof S)break;if(S===d){if(null===g)return void(null!==_&&(l[w+1]=_));if(g===l[w+1])return void(l[w+2]=_)}w++,null!==g&&w++,null!==_&&w++}-1!==E&&(l.splice(E,0,u),w=E+1),l.splice(w++,0,d),null!==g&&l.splice(w++,0,g),null!==_&&l.splice(w++,0,_)}function qa(l){return l!==$l}function Yl(l){return 32767&l}function m(l,u){let d=function f(l){return l>>16}(l),g=u;for(;d>0;)g=g[Fo],d--;return g}let T=!0;function M(l){const u=T;return T=l,u}const H=255,ce=5;let Ie=0;const ke={};function Rt(l,u){const d=jn(l,u);if(-1!==d)return d;const g=u[xt];g.firstCreatePass&&(l.injectorIndex=u.length,sn(g.data,l),sn(u,null),sn(g.blueprint,null));const _=ni(l,u),w=l.injectorIndex;if(qa(_)){const E=Yl(_),S=m(_,u),O=S[xt].data;for(let U=0;U<8;U++)u[w+U]=S[E+U]|O[E+U]}return u[w+8]=_,w}function sn(l,u){l.push(0,0,0,0,0,0,0,0,u)}function jn(l,u){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===u[l.injectorIndex+8]?-1:l.injectorIndex}function ni(l,u){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let d=0,g=null,_=u;for(;null!==_;){if(g=wl(_),null===g)return $l;if(d++,_=_[Fo],-1!==g.injectorIndex)return g.injectorIndex|d<<16}return $l}function Vi(l,u,d){!function ct(l,u,d){let g;"string"==typeof d?g=d.charCodeAt(0)||0:d.hasOwnProperty(_n)&&(g=d[_n]),null==g&&(g=d[_n]=Ie++);const _=g&H;u.data[l+(_>>ce)]|=1<<_}(l,u,d)}function Mo(l,u,d){if(d&jt.Optional||void 0!==l)return l;vt()}function Gs(l,u,d,g){if(d&jt.Optional&&void 0===g&&(g=null),!(d&(jt.Self|jt.Host))){const _=l[Fi],w=lr(void 0);try{return _?_.get(u,g,d&jt.Optional):lo(u,g,d&jt.Optional)}finally{lr(w)}}return Mo(g,0,d)}function dh(l,u,d,g=jt.Default,_){if(null!==l){if(1024&u[Ot]){const E=function fh(l,u,d,g,_){let w=l,E=u;for(;null!==w&&null!==E&&1024&E[Ot]&&!(256&E[Ot]);){const S=wu(w,E,d,g|jt.Self,ke);if(S!==ke)return S;let O=w.parent;if(!O){const U=E[_r];if(U){const j=U.get(d,ke,g);if(j!==ke)return j}O=wl(E),E=E[Fo]}w=O}return _}(l,u,d,g,ke);if(E!==ke)return E}const w=wu(l,u,d,g,ke);if(w!==ke)return w}return Gs(u,d,g,_)}function wu(l,u,d,g,_){const w=function hh(l){if("string"==typeof l)return l.charCodeAt(0)||0;const u=l.hasOwnProperty(_n)?l[_n]:void 0;return"number"==typeof u?u>=0?u&H:hd:u}(d);if("function"==typeof w){if(!gu(u,l,g))return g&jt.Host?Mo(_,0,g):Gs(u,d,g,_);try{const E=w(g);if(null!=E||g&jt.Optional)return E;vt()}finally{Ic()}}else if("number"==typeof w){let E=null,S=jn(l,u),O=$l,U=g&jt.Host?u[Yn][Xi]:null;for((-1===S||g&jt.SkipSelf)&&(O=-1===S?ni(l,u):u[S+8],O!==$l&&yl(g,!1)?(E=u[xt],S=Yl(O),u=m(O,u)):S=-1);-1!==S;){const j=u[xt];if(Si(w,S,j.data)){const ne=Ir(S,u,d,E,g,U);if(ne!==ke)return ne}O=u[S+8],O!==$l&&yl(g,u[xt].data[S+8]===U)&&Si(w,S,u)?(E=j,S=Yl(O),u=m(O,u)):S=-1}}return _}function Ir(l,u,d,g,_,w){const E=u[xt],S=E.data[l+8],j=vl(S,E,d,null==g?bc(S)&&T:g!=E&&0!=(3&S.type),_&jt.Host&&w===S);return null!==j?er(u,E,j,S):ke}function vl(l,u,d,g,_){const w=l.providerIndexes,E=u.data,S=1048575&w,O=l.directiveStart,j=w>>20,ve=_?S+j:l.directiveEnd;for(let Pe=g?S:S+j;Pe<ve;Pe++){const Ye=E[Pe];if(Pe<O&&d===Ye||Pe>=O&&Ye.type===d)return Pe}if(_){const Pe=E[O];if(Pe&&Qr(Pe)&&Pe.type===d)return O}return null}function er(l,u,d,g){let _=l[d];const w=u.data;if(function Ip(l){return l instanceof ts}(_)){const E=_;E.resolving&&function nt(l,u){const d=u?`. Dependency path: ${u.join(" > ")} > ${l}`:"";throw new Be(-200,`Circular dependency in DI detected for ${l}${d}`)}(function mt(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():ut(l)}(w[d]));const S=M(E.canSeeViewProviders);E.resolving=!0;const O=E.injectImpl?lr(E.injectImpl):null;gu(l,g,jt.Default);try{_=l[d]=E.factory(void 0,w,l,g),u.firstCreatePass&&d>=g.directiveStart&&function Ap(l,u,d){const{ngOnChanges:g,ngOnInit:_,ngDoCheck:w}=u.type.prototype;if(g){const E=Bl(u);(d.preOrderHooks??(d.preOrderHooks=[])).push(l,E),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(l,E)}_&&(d.preOrderHooks??(d.preOrderHooks=[])).push(0-l,_),w&&((d.preOrderHooks??(d.preOrderHooks=[])).push(l,w),(d.preOrderCheckHooks??(d.preOrderCheckHooks=[])).push(l,w))}(d,w[d],u)}finally{null!==O&&lr(O),M(S),E.resolving=!1,Ic()}}return _}function Si(l,u,d){return!!(d[u+(l>>ce)]&1<<l)}function yl(l,u){return!(l&jt.Self||l&jt.Host&&u)}class Kl{constructor(u,d){this._tNode=u,this._lView=d}get(u,d,g){return dh(this._tNode,this._lView,u,Yr(g),d)}}function hd(){return new Kl(hr(),qe())}function fd(l){return oe(()=>{const u=l.prototype.constructor,d=u[Fn]||Ys(u),g=Object.prototype;let _=Object.getPrototypeOf(l.prototype).constructor;for(;_&&_!==g;){const w=_[Fn]||Ys(_);if(w&&w!==d)return w;_=Object.getPrototypeOf(_)}return w=>new w})}function Ys(l){return tt(l)?()=>{const u=Ys(Ce(l));return u&&u()}:zs(l)}function wl(l){const u=l[xt],d=u.type;return 2===d?u.declTNode:1===d?l[Xi]:null}function pd(l){return function So(l,u){if("class"===u)return l.classes;if("style"===u)return l.styles;const d=l.attrs;if(d){const g=d.length;let _=0;for(;_<g;){const w=d[_];if(dd(w))break;if(0===w)_+=2;else if("number"==typeof w)for(_++;_<g&&"string"==typeof d[_];)_++;else{if(w===u)return d[_+1];_+=2}}}return null}(hr(),l)}const kc="__parameters__",ph="__prop__metadata__";function Sp(l){return function(...d){if(l){const g=l(...d);for(const _ in g)this[_]=g[_]}}}function Oc(l,u,d){return oe(()=>{const g=Sp(u);function _(...w){if(this instanceof _)return g.apply(this,w),this;const E=new _(...w);return S.annotation=E,S;function S(O,U,j){const ne=O.hasOwnProperty(kc)?O[kc]:Object.defineProperty(O,kc,{value:[]})[kc];for(;ne.length<=j;)ne.push(null);return(ne[j]=ne[j]||[]).push(E),O}}return d&&(_.prototype=Object.create(d.prototype)),_.prototype.ngMetadataName=l,_.annotationCls=_,_})}function gh(l,u,d,g){return oe(()=>{const _=Sp(u);function w(...E){if(this instanceof w)return _.apply(this,E),this;const S=new w(...E);return function O(U,j){const ne=U.constructor,ve=ne.hasOwnProperty(ph)?ne[ph]:Object.defineProperty(ne,ph,{value:{}})[ph];ve[j]=ve.hasOwnProperty(j)&&ve[j]||[],ve[j].unshift(S),g&&g(U,j,...E)}}return d&&(w.prototype=Object.create(d.prototype)),w.prototype.ngMetadataName=l,w.annotationCls=w,w})}class di{constructor(u,d){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=rn({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}class mh{}const _h=gh("ContentChildren",(l,u={})=>({selector:l,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...u}),mh);function Ql(l,u){l.forEach(d=>Array.isArray(d)?Ql(d,u):u(d))}function mf(l,u,d){u>=l.length?l.push(d):l.splice(u,0,d)}function gd(l,u){return u>=l.length-1?l.pop():l.splice(u,1)[0]}function bu(l,u){const d=[];for(let g=0;g<l;g++)d.push(u);return d}function Ks(l,u,d){let g=Qs(l,u);return g>=0?l[1|g]=d:(g=~g,function wh(l,u,d,g){let _=l.length;if(_==u)l.push(d,g);else if(1===_)l.push(g,l[0]),l[0]=d;else{for(_--,l.push(l[_-1],l[_]);_>u;)l[_]=l[_-2],_--;l[u]=d,l[u+1]=g}}(l,g,u,d)),g}function ai(l,u){const d=Qs(l,u);if(d>=0)return l[1|d]}function Qs(l,u){return function ns(l,u,d){let g=0,_=l.length>>d;for(;_!==g;){const w=g+(_-g>>1),E=l[w<<d];if(u===E)return w<<d;E>u?_=w:g=w+1}return~(_<<d)}(l,u,1)}const bh=Do(Oc("Inject",l=>({token:l})),-1),Nc=Do(Oc("Optional"),8),Xl=Do(Oc("Self"),2),qt=Do(Oc("SkipSelf"),4);var bn=(()=>((bn=bn||{})[bn.Important=1]="Important",bn[bn.DashCase=2]="DashCase",bn))();const Df=new Map;let Tl=0;const me="__ngContext__";function ye(l,u){an(u)?(l[me]=u[ur],function Up(l){Df.set(l[ur],l)}(u)):l[me]=u}let Os;function Zo(l,u){return Os(l,u)}function Vp(l){const u=l[In];return Ii(u)?u[In]:u}function Cd(l){return Tm(l[hs])}function Td(l){return Tm(l[oi])}function Tm(l){for(;null!==l&&!Ii(l);)l=l[oi];return l}function Iu(l,u,d,g,_){if(null!=g){let w,E=!1;Ii(g)?w=g:an(g)&&(E=!0,g=g[Dr]);const S=vr(g);0===l&&null!==d?null==_?ms(u,d,S):Hn(u,d,S,_||null,!0):1===l&&null!==d?Hn(u,d,S,_||null,!0):2===l?function Mw(l,u,d){const g=El(l,u);g&&function Su(l,u,d,g){l.removeChild(u,d,g)}(l,g,u,d)}(u,S,E):3===l&&u.destroyNode(S),null!=w&&function Sm(l,u,d,g,_){const w=d[Oa];w!==vr(d)&&Iu(u,l,g,w,_);for(let S=xr;S<d.length;S++){const O=d[S];Im(O[xt],O,l,u,g,w)}}(u,l,w,d,_)}}function Dm(l,u,d){return l.createElement(u,d)}function I(l,u){const d=l[Ra],g=d.indexOf(u),_=u[In];512&u[Ot]&&(u[Ot]&=-513,cl(_,-1)),d.splice(g,1)}function Z(l,u){if(l.length<=xr)return;const d=xr+u,g=l[d];if(g){const _=g[Jo];null!==_&&_!==l&&I(_,g),u>0&&(l[d-1][oi]=g[oi]);const w=gd(l,xr+u);!function Rv(l,u){Im(l,u,u[On],2,null,null),u[Dr]=null,u[Xi]=null}(g[xt],g);const E=w[Kr];null!==E&&E.detachView(w[xt]),g[In]=null,g[oi]=null,g[Ot]&=-65}return g}function $(l,u){if(!(128&u[Ot])){const d=u[On];d.destroyNode&&Im(l,u,d,3,null,null),function x(l){let u=l[hs];if(!u)return we(l[xt],l);for(;u;){let d=null;if(an(u))d=u[hs];else{const g=u[xr];g&&(d=g)}if(!d){for(;u&&!u[oi]&&u!==l;)an(u)&&we(u[xt],u),u=u[In];null===u&&(u=l),an(u)&&we(u[xt],u),d=u&&u[oi]}u=d}}(u)}}function we(l,u){if(!(128&u[Ot])){u[Ot]&=-65,u[Ot]|=128,function yt(l,u){let d;if(null!=l&&null!=(d=l.destroyHooks))for(let g=0;g<d.length;g+=2){const _=u[d[g]];if(!(_ instanceof ts)){const w=d[g+1];if(Array.isArray(w))for(let E=0;E<w.length;E+=2){const S=_[w[E]],O=w[E+1];Ui(4,S,O);try{O.call(S)}finally{Ui(5,S,O)}}else{Ui(4,_,w);try{w.call(_)}finally{Ui(5,_,w)}}}}}(l,u),function Ue(l,u){const d=l.cleanup,g=u[Li];let _=-1;if(null!==d)for(let w=0;w<d.length-1;w+=2)if("string"==typeof d[w]){const E=d[w+3];E>=0?g[_=E]():g[_=-E].unsubscribe(),w+=2}else{const E=g[_=d[w+1]];d[w].call(E)}if(null!==g){for(let w=_+1;w<g.length;w++)(0,g[w])();u[Li]=null}}(l,u),1===u[xt].type&&u[On].destroy();const d=u[Jo];if(null!==d&&Ii(u[In])){d!==u[In]&&I(d,u);const g=u[Kr];null!==g&&g.detachView(l)}!function Bp(l){Df.delete(l[ur])}(u)}}function It(l,u,d){return function ln(l,u,d){let g=u;for(;null!==g&&40&g.type;)g=(u=g).parent;if(null===g)return d[Dr];{const{componentOffset:_}=g;if(_>-1){const{encapsulation:w}=l.data[g.directiveStart+_];if(w===Y.None||w===Y.Emulated)return null}return Ar(g,d)}}(l,u.parent,d)}function Hn(l,u,d,g,_){l.insertBefore(u,d,g,_)}function ms(l,u,d){l.appendChild(u,d)}function Vc(l,u,d,g,_){null!==g?Hn(l,u,d,g,_):ms(l,u,d)}function El(l,u){return l.parentNode(u)}function zp(l,u,d){return Mu(l,u,d)}let Hp,Ow,Nv,Mu=function Mf(l,u,d){return 40&l.type?Ar(l,d):null};function Sh(l,u,d,g){const _=It(l,g,u),w=u[On],S=zp(g.parent||u[Xi],g,u);if(null!=_)if(Array.isArray(d))for(let O=0;O<d.length;O++)Vc(w,_,d[O],S,!1);else Vc(w,_,d,S,!1);void 0!==Hp&&Hp(w,g,u,d,_)}function jp(l,u){if(null!==u){const d=u.type;if(3&d)return Ar(u,l);if(4&d)return Pu(-1,l[u.index]);if(8&d){const g=u.child;if(null!==g)return jp(l,g);{const _=l[u.index];return Ii(_)?Pu(-1,_):vr(_)}}if(32&d)return Zo(u,l)()||vr(l[u.index]);{const g=Mh(l,u);return null!==g?Array.isArray(g)?g[0]:jp(Vp(l[Yn]),g):jp(l,u.next)}}return null}function Mh(l,u){return null!==u?l[Yn][Xi].projection[u.projection]:null}function Pu(l,u){const d=xr+l+1;if(d<u.length){const g=u[d],_=g[xt].firstChild;if(null!==_)return jp(g,_)}return u[Oa]}function Am(l,u,d,g,_,w,E){for(;null!=d;){const S=g[d.index],O=d.type;if(E&&0===u&&(S&&ye(vr(S),g),d.flags|=2),32!=(32&d.flags))if(8&O)Am(l,u,d.child,g,_,w,!1),Iu(u,l,_,S,w);else if(32&O){const U=Zo(d,g);let j;for(;j=U();)Iu(u,l,_,j,w);Iu(u,l,_,S,w)}else 16&O?Pw(l,u,g,d,_,w):Iu(u,l,_,S,w);d=E?d.projectionNext:d.next}}function Im(l,u,d,g,_,w){Am(d,g,l.firstChild,u,_,w,!1)}function Pw(l,u,d,g,_,w){const E=d[Yn],O=E[Xi].projection[g.projection];if(Array.isArray(O))for(let U=0;U<O.length;U++)Iu(u,l,_,O[U],w);else Am(l,u,O,E[In],_,w,!0)}function Ph(l,u,d){""===d?l.removeAttribute(u,"class"):l.setAttribute(u,"class",d)}function Mm(l,u,d){const{mergedAttrs:g,classes:_,styles:w}=d;null!==g&&gl(l,u,g),null!==_&&Ph(l,u,_),null!==w&&function kw(l,u,d){l.setAttribute(u,"style",d)}(l,u,w)}function mP(l){Ow=l}function LD(l){return function Rw(){if(void 0===Nv&&(Nv=null,ti.trustedTypes))try{Nv=ti.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return Nv}()?.createScriptURL(l)||l}class FD{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vt})`}}function Ou(l){return l instanceof FD?l.changingThisBreaksApplicationSecurity:l}function Dl(l,u){const d=function $p(l){return l instanceof FD&&l.getTypeName()||null}(l);if(null!=d&&d!==u){if("ResourceURL"===d&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${d} (see ${Vt})`)}return d===u}const ZD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var po=(()=>((po=po||{})[po.NONE=0]="NONE",po[po.HTML=1]="HTML",po[po.STYLE=2]="STYLE",po[po.SCRIPT=3]="SCRIPT",po[po.URL=4]="URL",po[po.RESOURCE_URL=5]="RESOURCE_URL",po))();function zw(l){const u=Fm();return u?u.sanitize(po.URL,l)||"":Dl(l,"URL")?Ou(l):function Om(l){return(l=String(l)).match(ZD)?l:"unsafe:"+l}(ut(l))}function Vv(l){const u=Fm();if(u)return LD(u.sanitize(po.RESOURCE_URL,l)||"");if(Dl(l,"ResourceURL"))return LD(Ou(l));throw new Be(904,!1)}function $D(l,u,d){return function SP(l,u){return"src"===u&&("embed"===l||"frame"===l||"iframe"===l||"media"===l||"script"===l)||"href"===u&&("base"===l||"link"===l)?Vv:zw}(u,d)(l)}function Fm(){const l=qe();return l&&l[Ao]}const qw=new di("ENVIRONMENT_INITIALIZER"),kf=new di("INJECTOR",-1),Yp=new di("INJECTOR_DEF_TYPES");class GD{get(u,d=Zn){if(d===Zn){const g=new Error(`NullInjectorError: No provider for ${je(u)}!`);throw g.name="NullInjectorError",g}return d}}function PP(l){return{\u0275providers:l}}function Um(...l){return{\u0275providers:Kp(0,l),\u0275fromNgModule:!0}}function Kp(l,...u){const d=[],g=new Set;let _;return Ql(u,w=>{const E=w;jw(E,d,[],g)&&(_||(_=[]),_.push(E))}),void 0!==_&&YD(_,d),d}function YD(l,u){for(let d=0;d<l.length;d++){const{providers:_}=l[d];Ww(_,w=>{u.push(w)})}}function jw(l,u,d,g){if(!(l=Ce(l)))return!1;let _=null,w=ir(l);const E=!w&&on(l);if(w||E){if(E&&!E.standalone)return!1;_=l}else{const O=l.ngModule;if(w=ir(O),!w)return!1;_=O}const S=g.has(_);if(E){if(S)return!1;if(g.add(_),E.dependencies){const O="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const U of O)jw(U,u,d,g)}}else{if(!w)return!1;{if(null!=w.imports&&!S){let U;g.add(_);try{Ql(w.imports,j=>{jw(j,u,d,g)&&(U||(U=[]),U.push(j))})}finally{}void 0!==U&&YD(U,u)}if(!S){const U=zs(_)||(()=>new _);u.push({provide:_,useFactory:U,deps:ge},{provide:Yp,useValue:_,multi:!0},{provide:qw,useValue:()=>Rn(_),multi:!0})}const O=w.providers;null==O||S||Ww(O,j=>{u.push(j)})}}return _!==l&&void 0!==l.providers}function Ww(l,u){for(let d of l)it(d)&&(d=d.\u0275providers),Array.isArray(d)?Ww(d,u):u(d)}const kP=Ee({provide:String,useValue:Ee});function $w(l){return null!==l&&"object"==typeof l&&kP in l}function Ed(l){return"function"==typeof l}const kh=new di("Set Injector scope."),zv={},RP={};let Gw;function Hv(){return void 0===Gw&&(Gw=new GD),Gw}class Of{}class QD extends Of{get destroyed(){return this._destroyed}constructor(u,d,g,_){super(),this.parent=d,this.source=g,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jp(u,E=>this.processProvider(E)),this.records.set(kf,Qp(void 0,this)),_.has("environment")&&this.records.set(Of,Qp(void 0,this));const w=this.records.get(kh);null!=w&&"string"==typeof w.value&&this.scopes.add(w.value),this.injectorDefTypes=new Set(this.get(Yp.multi,ge,jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();for(const u of this._onDestroyHooks)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(u){this._onDestroyHooks.push(u)}runInContext(u){this.assertNotDestroyed();const d=zn(this),g=lr(void 0);try{return u()}finally{zn(d),lr(g)}}get(u,d=Zn,g=jt.Default){this.assertNotDestroyed(),g=Yr(g);const _=zn(this),w=lr(void 0);try{if(!(g&jt.SkipSelf)){let S=this.records.get(u);if(void 0===S){const O=function Jw(l){return"function"==typeof l||"object"==typeof l&&l instanceof di}(u)&&_i(u);S=O&&this.injectableDefInScope(O)?Qp(Yw(u),zv):null,this.records.set(u,S)}if(null!=S)return this.hydrate(u,S)}return(g&jt.Self?Hv():this.parent).get(u,d=g&jt.Optional&&d===Zn?null:d)}catch(E){if("NullInjectorError"===E.name){if((E[Hi]=E[Hi]||[]).unshift(je(u)),_)throw E;return function xo(l,u,d,g){const _=l[Hi];throw u[kn]&&_.unshift(u[kn]),l.message=function le(l,u,d,g=null){l=l&&"\n"===l.charAt(0)&&l.charAt(1)==Tr?l.slice(2):l;let _=je(u);if(Array.isArray(u))_=u.map(je).join(" -> ");else if("object"==typeof u){let w=[];for(let E in u)if(u.hasOwnProperty(E)){let S=u[E];w.push(E+":"+("string"==typeof S?JSON.stringify(S):je(S)))}_=`{${w.join(", ")}}`}return`${d}${g?"("+g+")":""}[${_}]: ${l.replace(Qi,"\n  ")}`}("\n"+l.message,_,d,g),l[Gr]=_,l[Hi]=null,l}(E,u,"R3InjectorError",this.source)}throw E}finally{lr(w),zn(_)}}resolveInjectorInitializers(){const u=zn(this),d=lr(void 0);try{const g=this.get(qw.multi,ge,jt.Self);for(const _ of g)_()}finally{zn(u),lr(d)}}toString(){const u=[],d=this.records;for(const g of d.keys())u.push(je(g));return`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processProvider(u){let d=Ed(u=Ce(u))?u:Ce(u&&u.provide);const g=function LP(l){return $w(l)?Qp(void 0,l.useValue):Qp(Kw(l),zv)}(u);if(Ed(u)||!0!==u.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Qp(void 0,zv,!0),_.factory=()=>cr(_.multi),this.records.set(d,_)),d=u,_.multi.push(u)}this.records.set(d,g)}hydrate(u,d){return d.value===zv&&(d.value=RP,d.value=d.factory()),"object"==typeof d.value&&d.value&&function JD(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(u){if(!u.providedIn)return!1;const d=Ce(u.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function Yw(l){const u=_i(l),d=null!==u?u.factory:zs(l);if(null!==d)return d;if(l instanceof di)throw new Be(204,!1);if(l instanceof Function)return function NP(l){const u=l.length;if(u>0)throw bu(u,"?"),new Be(204,!1);const d=function Rr(l){return l&&(l[ao]||l[nl])||null}(l);return null!==d?()=>d.factory(l):()=>new l}(l);throw new Be(204,!1)}function Kw(l,u,d){let g;if(Ed(l)){const _=Ce(l);return zs(_)||Yw(_)}if($w(l))g=()=>Ce(l.useValue);else if(function KD(l){return!(!l||!l.useFactory)}(l))g=()=>l.useFactory(...cr(l.deps||[]));else if(function OP(l){return!(!l||!l.useExisting)}(l))g=()=>Rn(Ce(l.useExisting));else{const _=Ce(l&&(l.useClass||l.provide));if(!function Qw(l){return!!l.deps}(l))return zs(_)||Yw(_);g=()=>new _(...cr(l.deps))}return g}function Qp(l,u,d=!1){return{factory:l,value:u,multi:d?[]:void 0}}function Jp(l,u){for(const d of l)Array.isArray(d)?Jp(d,u):d&&it(d)?Jp(d.\u0275providers,u):u(d)}class FP{}class XD{}class t1{resolveComponentFactory(u){throw function UP(l){const u=Error(`No component factory found for ${je(l)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=l,u}(u)}}let Xp=(()=>{class l{}return l.NULL=new t1,l})();function qv(){return Dd(hr(),qe())}function Dd(l,u){return new eg(Ar(l,u))}let eg=(()=>{class l{constructor(d){this.nativeElement=d}}return l.__NG_ELEMENT_ID__=qv,l})();function Bm(l){return l instanceof eg?l.nativeElement:l}class eb{}let BP=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function VP(){const l=qe(),d=dr(hr().index,l);return(an(d)?d:l)[On]}(),l})(),ZP=(()=>{class l{}return l.\u0275prov=rn({token:l,providedIn:"root",factory:()=>null}),l})();class n1{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const r1=new n1("15.2.9"),jv={},tb="ngOriginalError";function nb(l){return l[tb]}class Vm{constructor(){this._console=console}handleError(u){const d=this._findOriginalError(u);this._console.error("ERROR",u),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(u){let d=u&&nb(u);for(;d&&nb(d);)d=nb(d);return d||null}}function Ru(l){return l instanceof Function?l():l}function u1(l,u,d){let g=l.length;for(;;){const _=l.indexOf(u,d);if(-1===_)return _;if(0===_||l.charCodeAt(_-1)<=32){const w=u.length;if(_+w===g||l.charCodeAt(_+w)<=32)return _}d=_+1}}const ib="ng-template";function rb(l,u,d){let g=0,_=!0;for(;g<l.length;){let w=l[g++];if("string"==typeof w&&_){const E=l[g++];if(d&&"class"===w&&-1!==u1(E.toLowerCase(),u,0))return!0}else{if(1===w){for(;g<l.length&&"string"==typeof(w=l[g++]);)if(w.toLowerCase()===u)return!0;return!1}"number"==typeof w&&(_=!1)}}return!1}function ob(l){return 4===l.type&&l.value!==ib}function tg(l,u,d){return u===(4!==l.type||d?l.value:ib)}function sb(l,u,d){let g=4;const _=l.attrs||[],w=function h1(l){for(let u=0;u<l.length;u++)if(dd(l[u]))return u;return l.length}(_);let E=!1;for(let S=0;S<u.length;S++){const O=u[S];if("number"!=typeof O){if(!E)if(4&g){if(g=2|1&g,""!==O&&!tg(l,O,d)||""===O&&1===u.length){if(zc(g))return!1;E=!0}}else{const U=8&g?O:u[++S];if(8&g&&null!==l.attrs){if(!rb(l.attrs,U,d)){if(zc(g))return!1;E=!0}continue}const ne=d1(8&g?"class":O,_,ob(l),d);if(-1===ne){if(zc(g))return!1;E=!0;continue}if(""!==U){let ve;ve=ne>w?"":_[ne+1].toLowerCase();const Pe=8&g?ve:null;if(Pe&&-1!==u1(Pe,U,0)||2&g&&U!==ve){if(zc(g))return!1;E=!0}}}}else{if(!E&&!zc(g)&&!zc(O))return!1;if(E&&zc(O))continue;E=!1,g=O|1&g}}return zc(g)||E}function zc(l){return 0==(1&l)}function d1(l,u,d,g){if(null===u)return-1;let _=0;if(g||!d){let w=!1;for(;_<u.length;){const E=u[_];if(E===l)return _;if(3===E||6===E)w=!0;else{if(1===E||2===E){let S=u[++_];for(;"string"==typeof S;)S=u[++_];continue}if(4===E)break;if(0===E){_+=4;continue}}_+=w?1:2}return-1}return function f1(l,u){let d=l.indexOf(4);if(d>-1)for(d++;d<l.length;){const g=l[d];if("number"==typeof g)return-1;if(g===u)return d;d++}return-1}(u,l)}function zm(l,u,d=!1){for(let g=0;g<u.length;g++)if(sb(l,u[g],d))return!0;return!1}function GP(l,u){e:for(let d=0;d<u.length;d++){const g=u[d];if(l.length===g.length){for(let _=0;_<l.length;_++)if(l[_]!==g[_])continue e;return!0}}return!1}function p1(l,u){return l?":not("+u.trim()+")":u}function YP(l){let u=l[0],d=1,g=2,_="",w=!1;for(;d<l.length;){let E=l[d];if("string"==typeof E)if(2&g){const S=l[++d];_+="["+E+(S.length>0?'="'+S+'"':"")+"]"}else 8&g?_+="."+E:4&g&&(_+=" "+E);else""!==_&&!zc(E)&&(u+=p1(w,_),_=""),g=E,w=w||!zc(g);d++}return""!==_&&(u+=p1(w,_)),u}const Bn={};function g1(l){m1(hn(),qe(),Bi()+l,!1)}function m1(l,u,d,g){if(!g)if(3==(3&u[Ot])){const w=l.preOrderCheckHooks;null!==w&&vu(u,w,d)}else{const w=l.preOrderHooks;null!==w&&ld(u,w,0,d)}es(d)}function v1(l,u=null,d=null,g){const _=ab(l,u,d,g);return _.resolveInjectorInitializers(),_}function ab(l,u=null,d=null,g,_=new Set){const w=[d||ge,Um(l)];return g=g||("object"==typeof l?void 0:je(l)),new QD(w,u||Hv(),g||null,_)}let ng=(()=>{class l{static create(d,g){if(Array.isArray(d))return v1({name:""},g,d,"");{const _=d.name??"";return v1({name:_},d.parent,d.providers,_)}}}return l.THROW_IF_NOT_FOUND=Zn,l.NULL=new GD,l.\u0275prov=rn({token:l,providedIn:"any",factory:()=>Rn(kf)}),l.__NG_ELEMENT_ID__=-1,l})();function og(l,u=jt.Default){const d=qe();return null===d?Rn(l,u):dh(hr(),d,Ce(l),u)}function T1(){throw new Error("invalid")}function E1(l,u){const d=l.contentQueries;if(null!==d)for(let g=0;g<d.length;g+=2){const w=d[g+1];if(-1!==w){const E=l.data[w];dl(d[g]),E.contentQueries(2,u[w],w)}}}function Kv(l,u,d,g,_,w,E,S,O,U,j){const ne=u.blueprint.slice();return ne[Dr]=_,ne[Ot]=76|g,(null!==j||l&&1024&l[Ot])&&(ne[Ot]|=1024),Zl(ne),ne[In]=ne[Fo]=l,ne[Qt]=d,ne[si]=E||l&&l[si],ne[On]=S||l&&l[On],ne[Ao]=O||l&&l[Ao]||null,ne[Fi]=U||l&&l[Fi]||null,ne[Xi]=w,ne[ur]=function xf(){return Tl++}(),ne[_r]=j,ne[Yn]=2==u.type?l[Yn]:ne,ne}function $m(l,u,d,g,_){let w=l.data[u];if(null===w)w=function Gm(l,u,d,g,_){const w=Hl(),E=pu(),O=l.data[u]=function oB(l,u,d,g,_,w){return{type:d,index:g,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:w,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?w:w&&w.parent,d,u,g,_);return null===l.firstChild&&(l.firstChild=O),null!==w&&(E?null==w.child&&null!==O.parent&&(w.child=O):null===w.next&&(w.next=O,O.prev=w)),O}(l,u,d,g,_),function js(){return An.lFrame.inI18n}()&&(w.flags|=32);else if(64&w.type){w.type=d,w.value=g,w.attrs=_;const E=function ul(){const l=An.lFrame,u=l.currentTNode;return l.isParent?u:u.parent}();w.injectorIndex=null===E?-1:E.injectorIndex}return Io(w,!0),w}function Qv(l,u,d,g){if(0===d)return-1;const _=u.length;for(let w=0;w<d;w++)u.push(g),l.blueprint.push(g),l.data.push(null);return _}function Jv(l,u,d){fl(u);try{const g=l.viewQuery;null!==g&&Hc(1,g,d);const _=l.template;null!==_&&ae(l,u,_,1,d),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&E1(l,u),l.staticViewQueries&&Hc(2,l.viewQuery,d);const w=l.components;null!==w&&function D1(l,u){for(let d=0;d<u.length;d++)wk(l,u[d])}(u,w)}catch(g){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),g}finally{u[Ot]&=-5,lh()}}function hb(l,u,d,g){const _=u[Ot];if(128!=(128&_)){fl(u);try{Zl(u),function Va(l){return An.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==d&&ae(l,u,d,2,g);const E=3==(3&_);if(E){const U=l.preOrderCheckHooks;null!==U&&vu(u,U,null)}else{const U=l.preOrderHooks;null!==U&&ld(u,U,0,null),uh(u,0)}if(function wb(l){for(let u=Cd(l);null!==u;u=Td(u)){if(!u[il])continue;const d=u[Ra];for(let g=0;g<d.length;g++){const _=d[g];512&_[Ot]||cl(_[In],1),_[Ot]|=512}}}(u),function yb(l){for(let u=Cd(l);null!==u;u=Td(u))for(let d=xr;d<u.length;d++){const g=u[d],_=g[xt];Fa(g)&&hb(_,g,_.template,g[Qt])}}(u),null!==l.contentQueries&&E1(l,u),E){const U=l.contentCheckHooks;null!==U&&vu(u,U)}else{const U=l.contentHooks;null!==U&&ld(u,U,1),uh(u,1)}!function dk(l,u){const d=l.hostBindingOpCodes;if(null!==d)try{for(let g=0;g<d.length;g++){const _=d[g];if(_<0)es(~_);else{const w=_,E=d[++g],S=d[++g];od(E,w),S(2,u[w])}}}finally{es(-1)}}(l,u);const S=l.components;null!==S&&function hk(l,u){for(let d=0;d<u.length;d++)yk(l,u[d])}(u,S);const O=l.viewQuery;if(null!==O&&Hc(2,O,g),E){const U=l.viewCheckHooks;null!==U&&vu(u,U)}else{const U=l.viewHooks;null!==U&&ld(u,U,2),uh(u,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),u[Ot]&=-41,512&u[Ot]&&(u[Ot]&=-513,cl(u[In],-1))}finally{lh()}}}function ae(l,u,d,g,_){const w=Bi(),E=2&g;try{es(-1),E&&u.length>Ci&&m1(l,u,Ci,!1),Ui(E?2:0,_),d(g,_)}finally{es(w),Ui(E?3:1,_)}}function Nf(l,u,d){if(fi(u)){const _=u.directiveEnd;for(let w=u.directiveStart;w<_;w++){const E=l.data[w];E.contentQueries&&E.contentQueries(1,d[w],w)}}}function se(l,u,d){sh()&&(function mk(l,u,d,g){const _=d.directiveStart,w=d.directiveEnd;bc(d)&&function gb(l,u,d){const g=Ar(u,l),_=fk(d),w=l[si],E=ny(l,Kv(l,_,null,d.onPush?32:16,g,u,w,w.createRenderer(g,d),null,null,null));l[u.index]=E}(u,d,l.data[_+d.componentOffset]),l.firstCreatePass||Rt(d,u),ye(g,u);const E=d.initialInputs;for(let S=_;S<w;S++){const O=l.data[S],U=er(u,l,S,d);ye(U,u),null!==E&&_b(0,S-_,U,O,0,E),Qr(O)&&(dr(d.index,u)[Qt]=er(u,l,S,d))}}(l,u,d,Ar(d,u)),64==(64&d.flags)&&P1(l,u,d))}function Nu(l,u,d=Ar){const g=u.localNames;if(null!==g){let _=u.index+1;for(let w=0;w<g.length;w+=2){const E=g[w+1],S=-1===E?d(u,l):l[E];l[_++]=S}}}function fk(l){const u=l.tView;return null===u||u.incompleteFirstPass?l.tView=x1(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):u}function x1(l,u,d,g,_,w,E,S,O,U){const j=Ci+g,ne=j+_,ve=function rB(l,u){const d=[];for(let g=0;g<u;g++)d.push(g<l?null:Bn);return d}(j,ne),Pe="function"==typeof U?U():U;return ve[xt]={type:l,blueprint:ve,template:d,queries:null,viewQuery:S,declTNode:u,data:ve.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof w?w():w,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:O,consts:Pe,incompleteFirstPass:!1}}function I1(l,u,d,g){const _=sg(u);null===d?_.push(g):(_.push(d),l.firstCreatePass&&O1(l).push(g,_.length-1))}function pk(l,u,d,g){for(let _ in l)if(l.hasOwnProperty(_)){d=null===d?{}:d;const w=l[_];null===g?Ym(d,u,_,w):g.hasOwnProperty(_)&&Ym(d,u,g[_],w)}return d}function Ym(l,u,d,g){l.hasOwnProperty(d)?l[d].push(u,g):l[d]=[u,g]}function oc(l,u,d,g,_,w,E,S){const O=Ar(u,d);let j,U=u.inputs;!S&&null!=U&&(j=U[g])?(Jm(l,d,j,g,_),bc(u)&&function lB(l,u){const d=dr(u,l);16&d[Ot]||(d[Ot]|=32)}(d,u.index)):3&u.type&&(g=function aB(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(g),_=null!=E?E(_,u.value||"",g):_,w.setProperty(O,g,_))}function S1(l,u,d,g){if(sh()){const _=null===g?null:{"":-1},w=function ey(l,u){const d=l.directiveRegistry;let g=null,_=null;if(d)for(let w=0;w<d.length;w++){const E=d[w];if(zm(u,E.selectors,!1))if(g||(g=[]),Qr(E))if(null!==E.findHostDirectiveDefs){const S=[];_=_||new Map,E.findHostDirectiveDefs(E,S,_),g.unshift(...S,E),fb(l,u,S.length)}else g.unshift(E),fb(l,u,0);else _=_||new Map,E.findHostDirectiveDefs?.(E,g,_),g.push(E)}return null===g?null:[g,_]}(l,d);let E,S;null===w?E=S=null:[E,S]=w,null!==E&&gk(l,u,d,E,_,S),_&&function pb(l,u,d){if(u){const g=l.localNames=[];for(let _=0;_<u.length;_+=2){const w=d[u[_+1]];if(null==w)throw new Be(-301,!1);g.push(u[_],w)}}}(d,g,_)}d.mergedAttrs=ml(d.mergedAttrs,d.attrs)}function gk(l,u,d,g,_,w){for(let U=0;U<g.length;U++)Vi(Rt(d,u),l,g[U].type);!function Km(l,u,d){l.flags|=1,l.directiveStart=u,l.directiveEnd=u+d,l.providerIndexes=u}(d,l.data.length,g.length);for(let U=0;U<g.length;U++){const j=g[U];j.providersResolver&&j.providersResolver(j)}let E=!1,S=!1,O=Qv(l,u,g.length,null);for(let U=0;U<g.length;U++){const j=g[U];d.mergedAttrs=ml(d.mergedAttrs,j.hostAttrs),_k(l,d,u,O,j),ty(O,j,_),null!==j.contentQueries&&(d.flags|=4),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(d.flags|=64);const ne=j.type.prototype;!E&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((l.preOrderHooks??(l.preOrderHooks=[])).push(d.index),E=!0),!S&&(ne.ngOnChanges||ne.ngDoCheck)&&((l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(d.index),S=!0),O++}!function sB(l,u,d){const _=u.directiveEnd,w=l.data,E=u.attrs,S=[];let O=null,U=null;for(let j=u.directiveStart;j<_;j++){const ne=w[j],ve=d?d.get(ne):null,Ye=ve?ve.outputs:null;O=pk(ne.inputs,j,O,ve?ve.inputs:null),U=pk(ne.outputs,j,U,Ye);const wt=null===O||null===E||ob(u)?null:vk(O,j,E);S.push(wt)}null!==O&&(O.hasOwnProperty("class")&&(u.flags|=8),O.hasOwnProperty("style")&&(u.flags|=16)),u.initialInputs=S,u.inputs=O,u.outputs=U}(l,d,w)}function P1(l,u,d){const g=d.directiveStart,_=d.directiveEnd,w=d.index,E=function ah(){return An.lFrame.currentDirectiveIndex}();try{es(w);for(let S=g;S<_;S++){const O=l.data[S],U=u[S];qi(S),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&k1(O,U)}}finally{es(-1),qi(E)}}function k1(l,u){null!==l.hostBindings&&l.hostBindings(1,u)}function fb(l,u,d){u.componentOffset=d,(l.components??(l.components=[])).push(u.index)}function ty(l,u,d){if(d){if(u.exportAs)for(let g=0;g<u.exportAs.length;g++)d[u.exportAs[g]]=l;Qr(u)&&(d[""]=l)}}function _k(l,u,d,g,_){l.data[g]=_;const w=_.factory||(_.factory=zs(_.type)),E=new ts(w,Qr(_),og);l.blueprint[g]=E,d[g]=E,function Xv(l,u,d,g,_){const w=_.hostBindings;if(w){let E=l.hostBindingOpCodes;null===E&&(E=l.hostBindingOpCodes=[]);const S=~u.index;(function M1(l){let u=l.length;for(;u>0;){const d=l[--u];if("number"==typeof d&&d<0)return d}return 0})(E)!=S&&E.push(S),E.push(d,g,w)}}(l,u,g,Qv(l,d,_.hostVars,Bn),_)}function Lu(l,u,d,g,_,w){const E=Ar(l,u);!function mb(l,u,d,g,_,w,E){if(null==w)l.removeAttribute(u,_,d);else{const S=null==E?ut(w):E(w,g||"",_);l.setAttribute(u,_,S,d)}}(u[On],E,w,l.value,d,g,_)}function _b(l,u,d,g,_,w){const E=w[u];if(null!==E){const S=g.setInput;for(let O=0;O<E.length;){const U=E[O++],j=E[O++],ne=E[O++];null!==S?g.setInput(d,ne,U,j):d[j]=ne}}}function vk(l,u,d){let g=null,_=0;for(;_<d.length;){const w=d[_];if(0!==w)if(5!==w){if("number"==typeof w)break;if(l.hasOwnProperty(w)){null===g&&(g=[]);const E=l[w];for(let S=0;S<E.length;S+=2)if(E[S]===u){g.push(w,E[S+1],d[_+1]);break}}_+=2}else _+=2;else _+=4}return g}function vb(l,u,d,g){return[l,!0,!1,u,null,0,g,d,null,null]}function yk(l,u){const d=dr(u,l);if(Fa(d)){const g=d[xt];48&d[Ot]?hb(g,d,g.template,d[Qt]):d[Qo]>0&&bb(d)}}function bb(l){for(let g=Cd(l);null!==g;g=Td(g))for(let _=xr;_<g.length;_++){const w=g[_];if(Fa(w))if(512&w[Ot]){const E=w[xt];hb(E,w,E.template,w[Qt])}else w[Qo]>0&&bb(w)}const d=l[xt].components;if(null!==d)for(let g=0;g<d.length;g++){const _=dr(d[g],l);Fa(_)&&_[Qo]>0&&bb(_)}}function wk(l,u){const d=dr(u,l),g=d[xt];(function bk(l,u){for(let d=u.length;d<l.blueprint.length;d++)u.push(l.blueprint[d])})(g,d),Jv(g,d,d[Qt])}function ny(l,u){return l[hs]?l[ka][oi]=u:l[hs]=u,l[ka]=u,u}function iy(l){for(;l;){l[Ot]|=32;const u=Vp(l);if(Vs(l)&&!u)return l;l=u}return null}function ry(l,u,d,g=!0){const _=u[si];_.begin&&_.begin();try{hb(l,u,l.template,d)}catch(E){throw g&&Qm(u,E),E}finally{_.end&&_.end()}}function Hc(l,u,d){dl(0),u(l,d)}function sg(l){return l[Li]||(l[Li]=[])}function O1(l){return l.cleanup||(l.cleanup=[])}function Qm(l,u){const d=l[Fi],g=d?d.get(Vm,null):null;g&&g.handleError(u)}function Jm(l,u,d,g,_){for(let w=0;w<d.length;){const E=d[w++],S=d[w++],O=u[E],U=l.data[E];null!==U.setInput?U.setInput(O,_,g,S):O[S]=_}}function Kn(l,u,d){const g=ll(u,l);!function Em(l,u,d){l.setValue(u,d)}(l[On],g,d)}function Oh(l,u,d){let g=d?l.styles:null,_=d?l.classes:null,w=0;if(null!==u)for(let E=0;E<u.length;E++){const S=u[E];"number"==typeof S?w=S:1==w?_=Ne(_,S):2==w&&(g=Ne(g,S+": "+u[++E]+";"))}d?l.styles=g:l.stylesWithoutHost=g,d?l.classes=_:l.classesWithoutHost=_}function ag(l,u,d,g,_=!1){for(;null!==d;){const w=u[d.index];if(null!==w&&g.push(vr(w)),Ii(w))for(let S=xr;S<w.length;S++){const O=w[S],U=O[xt].firstChild;null!==U&&ag(O[xt],O,U,g)}const E=d.type;if(8&E)ag(l,u,d.child,g);else if(32&E){const S=Zo(d,u);let O;for(;O=S();)g.push(O)}else if(16&E){const S=Mh(u,d);if(Array.isArray(S))g.push(...S);else{const O=Vp(u[Yn]);ag(O[xt],O,S,g,!0)}}d=_?d.projectionNext:d.next}return g}class Xm{get rootNodes(){const u=this._lView,d=u[xt];return ag(d,u,d.firstChild,[])}constructor(u,d){this._lView=u,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(u){this._lView[Qt]=u}get destroyed(){return 128==(128&this._lView[Ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[In];if(Ii(u)){const d=u[xs],g=d?d.indexOf(this):-1;g>-1&&(Z(u,g),gd(d,g))}this._attachedToViewContainer=!1}$(this._lView[xt],this._lView)}onDestroy(u){I1(this._lView[xt],this._lView,null,u)}markForCheck(){iy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-65}reattach(){this._lView[Ot]|=64}detectChanges(){ry(this._lView[xt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zp(l,u){Im(l,u,u[On],2,null,null)}(this._lView[xt],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Be(902,!1);this._appRef=u}}class sc extends Xm{constructor(u){super(u),this._view=u}detectChanges(){const u=this._view;ry(u[xt],u,u[Qt],!1)}checkNoChanges(){}get context(){return null}}class e_ extends Xp{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const d=on(u);return new Rh(d,this.ngModule)}}function Lf(l){const u=[];for(let d in l)l.hasOwnProperty(d)&&u.push({propName:l[d],templateName:d});return u}class lg{constructor(u,d){this.injector=u,this.parentInjector=d}get(u,d,g){g=Yr(g);const _=this.injector.get(u,jv,g);return _!==jv||d===jv?_:this.parentInjector.get(u,d,g)}}class Rh extends XD{get inputs(){return Lf(this.componentDef.inputs)}get outputs(){return Lf(this.componentDef.outputs)}constructor(u,d){super(),this.componentDef=u,this.ngModule=d,this.componentType=u.type,this.selector=function KP(l){return l.map(YP).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!d}create(u,d,g,_){let w=(_=_||this.ngModule)instanceof Of?_:_?.injector;w&&null!==this.componentDef.getStandaloneInjector&&(w=this.componentDef.getStandaloneInjector(w)||w);const E=w?new lg(u,w):u,S=E.get(eb,null);if(null===S)throw new Be(407,!1);const O=E.get(ZP,null),U=S.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",ne=g?function A1(l,u,d){return l.selectRootElement(u,d===Y.ShadowDom)}(U,g,this.componentDef.encapsulation):Dm(U,j,function Tk(l){const u=l.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(j)),ve=this.componentDef.onPush?288:272,Pe=x1(0,null,null,1,0,null,null,null,null,null),Ye=Kv(null,Pe,null,ve,null,null,S,U,O,E,null);let wt,Mt;fl(Ye);try{const Xt=this.componentDef;let Pn,ft=null;Xt.findHostDirectiveDefs?(Pn=[],ft=new Map,Xt.findHostDirectiveDefs(Xt,Pn,ft),Pn.push(Xt)):Pn=[Xt];const $n=function _s(l,u){const d=l[xt],g=Ci;return l[g]=u,$m(d,g,2,"#host",null)}(Ye,ne),Vr=function oy(l,u,d,g,_,w,E,S){const O=_[xt];!function Tb(l,u,d,g){for(const _ of l)u.mergedAttrs=ml(u.mergedAttrs,_.hostAttrs);null!==u.mergedAttrs&&(Oh(u,u.mergedAttrs,!0),null!==d&&Mm(g,d,u))}(g,l,u,E);const U=w.createRenderer(u,d),j=Kv(_,fk(d),null,d.onPush?32:16,_[l.index],l,w,U,S||null,null,null);return O.firstCreatePass&&fb(O,l,g.length-1),ny(_,j),_[l.index]=j}($n,ne,Xt,Pn,Ye,S,U);Mt=Dc(Pe,Ci),ne&&function vs(l,u,d,g){if(g)gl(l,d,["ng-version",r1.full]);else{const{attrs:_,classes:w}=function QP(l){const u=[],d=[];let g=1,_=2;for(;g<l.length;){let w=l[g];if("string"==typeof w)2===_?""!==w&&u.push(w,l[++g]):8===_&&d.push(w);else{if(!zc(_))break;_=w}g++}return{attrs:u,classes:d}}(u.selectors[0]);_&&gl(l,d,_),w&&w.length>0&&Ph(l,d,w.join(" "))}}(U,Xt,ne,g),void 0!==d&&function Eb(l,u,d){const g=l.projection=[];for(let _=0;_<u.length;_++){const w=d[_];g.push(null!=w?Array.from(w):null)}}(Mt,this.ngContentSelectors,d),wt=function Ek(l,u,d,g,_,w){const E=hr(),S=_[xt],O=Ar(E,_);gk(S,_,E,d,null,g);for(let j=0;j<d.length;j++)ye(er(_,S,E.directiveStart+j,E),_);P1(S,_,E),O&&ye(O,_);const U=er(_,S,E.directiveStart+E.componentOffset,E);if(l[Qt]=_[Qt]=U,null!==w)for(const j of w)j(U,u);return Nf(S,E,l),U}(Vr,Xt,Pn,ft,Ye,[dB]),Jv(Pe,Ye,null)}finally{lh()}return new Cb(this.componentType,wt,Dd(Mt,Ye),Ye,Mt)}}class Cb extends FP{constructor(u,d,g,_,w){super(),this.location=g,this._rootLView=_,this._tNode=w,this.instance=d,this.hostView=this.changeDetectorRef=new sc(_),this.componentType=u}setInput(u,d){const g=this._tNode.inputs;let _;if(null!==g&&(_=g[u])){const w=this._rootLView;Jm(w[xt],w,_,u,d),iy(dr(this._tNode.index,w))}}get injector(){return new Kl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}function dB(){const l=hr();ga(qe()[xt],l)}function xd(l){let u=function t_(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),d=!0;const g=[l];for(;u;){let _;if(Qr(l))_=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Be(903,!1);_=u.\u0275dir}if(_){if(d){g.push(_);const E=l;E.inputs=cg(l.inputs),E.declaredInputs=cg(l.declaredInputs),E.outputs=cg(l.outputs);const S=_.hostBindings;S&&xb(l,S);const O=_.viewQuery,U=_.contentQueries;if(O&&Db(l,O),U&&vn(l,U),$e(l.inputs,_.inputs),$e(l.declaredInputs,_.declaredInputs),$e(l.outputs,_.outputs),Qr(_)&&_.data.animation){const j=l.data;j.animation=(j.animation||[]).concat(_.data.animation)}}const w=_.features;if(w)for(let E=0;E<w.length;E++){const S=w[E];S&&S.ngInherit&&S(l),S===xd&&(d=!1)}}u=Object.getPrototypeOf(u)}!function ac(l){let u=0,d=null;for(let g=l.length-1;g>=0;g--){const _=l[g];_.hostVars=u+=_.hostVars,_.hostAttrs=ml(_.hostAttrs,d=ml(d,_.hostAttrs))}}(g)}function cg(l){return l===q?{}:l===ge?[]:l}function Db(l,u){const d=l.viewQuery;l.viewQuery=d?(g,_)=>{u(g,_),d(g,_)}:u}function vn(l,u){const d=l.contentQueries;l.contentQueries=d?(g,_,w)=>{u(g,_,w),d(g,_,w)}:u}function xb(l,u){const d=l.hostBindings;l.hostBindings=d?(g,_)=>{u(g,_),d(g,_)}:u}function ug(l){return!!Ib(l)&&(Array.isArray(l)||!(l instanceof Map)&&Symbol.iterator in l)}function Ib(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Ad(l,u,d){return l[u]=d}function wa(l,u,d){return!Object.is(l[u],d)&&(l[u]=d,!0)}function dg(l,u,d,g){const _=wa(l,u,d);return wa(l,u+1,g)||_}function qc(l,u,d,g,_,w){const E=dg(l,u,d,g);return dg(l,u+2,_,w)||E}function F1(l,u,d,g){const _=qe();return wa(_,Vo(),u)&&(hn(),Lu(ji(),_,l,u,d,g)),F1}function ba(l,u,d,g){return wa(l,Vo(),d)?u+ut(d)+g:Bn}function U1(l,u,d,g,_,w,E,S){const O=qe(),U=hn(),j=l+Ci,ne=U.firstCreatePass?function kb(l,u,d,g,_,w,E,S,O){const U=u.consts,j=$m(u,l,4,E||null,yr(U,S));S1(u,d,j,yr(U,O)),ga(u,j);const ne=j.tView=x1(2,j,g,_,w,u.directiveRegistry,u.pipeRegistry,null,u.schemas,U);return null!==u.queries&&(u.queries.template(u,j),ne.queries=u.queries.embeddedTView(j)),j}(j,U,O,u,d,g,_,w,E):U.data[j];Io(ne,!1);const ve=O[On].createComment("");Sh(U,O,ve,ne),ye(ve,O),ny(O,O[j]=vb(ve,O,ve,ne)),rl(ne)&&se(U,O,ne),null!=E&&Nu(O,ne,S)}function B1(l){return fo(function Ac(){return An.lFrame.contextLView}(),Ci+l)}function Ob(l,u,d){const g=qe();return wa(g,Vo(),u)&&oc(hn(),ji(),g,l,u,g[On],d,!1),Ob}function Rb(l,u,d,g,_){const E=_?"class":"style";Jm(l,d,u.inputs[E],E,g)}function Nb(l,u,d,g){const _=qe(),w=hn(),E=Ci+l,S=_[On],O=w.firstCreatePass?function fB(l,u,d,g,_,w){const E=u.consts,O=$m(u,l,2,g,yr(E,_));return S1(u,d,O,yr(E,w)),null!==O.attrs&&Oh(O,O.attrs,!1),null!==O.mergedAttrs&&Oh(O,O.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,O),O}(E,w,_,u,d,g):w.data[E],U=_[E]=Dm(S,u,function Wl(){return An.lFrame.currentNamespace}()),j=rl(O);return Io(O,!0),Mm(S,U,O),32!=(32&O.flags)&&Sh(w,_,U,O),0===function nd(){return An.lFrame.elementDepthCount}()&&ye(U,_),function id(){An.lFrame.elementDepthCount++}(),j&&(se(w,_,O),Nf(w,O,_)),null!==g&&Nu(_,O),Nb}function Lb(){let l=hr();pu()?pa():(l=l.parent,Io(l,!1));const u=l;!function fu(){An.lFrame.elementDepthCount--}();const d=hn();return d.firstCreatePass&&(ga(d,l),fi(l)&&d.queries.elementEnd(l)),null!=u.classesWithoutHost&&function $s(l){return 0!=(8&l.flags)}(u)&&Rb(d,u,qe(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function ud(l){return 0!=(16&l.flags)}(u)&&Rb(d,u,qe(),u.stylesWithoutHost,!1),Lb}function Fb(l,u,d,g){return Nb(l,u,d,g),Lb(),Fb}function cy(){return qe()}function be(l){return!!l&&"function"==typeof l.then}function zo(l){return!!l&&"function"==typeof l.subscribe}const K=zo;function xl(l,u,d,g){const _=qe(),w=hn(),E=hr();return function q1(l,u,d,g,_,w,E){const S=rl(g),U=l.firstCreatePass&&O1(l),j=u[Qt],ne=sg(u);let ve=!0;if(3&g.type||E){const wt=Ar(g,u),Mt=E?E(wt):wt,Xt=ne.length,Pn=E?$n=>E(vr($n[g.index])):g.index;let ft=null;if(!E&&S&&(ft=function H1(l,u,d,g){const _=l.cleanup;if(null!=_)for(let w=0;w<_.length-1;w+=2){const E=_[w];if(E===d&&_[w+1]===g){const S=u[Li],O=_[w+2];return S.length>O?S[O]:null}"string"==typeof E&&(w+=2)}return null}(l,u,_,g.index)),null!==ft)(ft.__ngLastListenerFn__||ft).__ngNextListenerFn__=w,ft.__ngLastListenerFn__=w,ve=!1;else{w=W1(g,u,j,w,!1);const $n=d.listen(Mt,_,w);ne.push(w,$n),U&&U.push(_,Pn,Xt,Xt+1)}}else w=W1(g,u,j,w,!1);const Pe=g.outputs;let Ye;if(ve&&null!==Pe&&(Ye=Pe[_])){const wt=Ye.length;if(wt)for(let Mt=0;Mt<wt;Mt+=2){const Vr=u[Ye[Mt]][Ye[Mt+1]].subscribe(w),Oo=ne.length;ne.push(w,Vr),U&&U.push(_,g.index,Oo,-(Oo+1))}}}(w,_,_[On],E,l,u,g),xl}function j1(l,u,d,g){try{return Ui(6,u,d),!1!==d(g)}catch(_){return Qm(l,_),!1}finally{Ui(7,u,d)}}function W1(l,u,d,g,_){return function w(E){if(E===Function)return g;iy(l.componentOffset>-1?dr(l.index,u):u);let O=j1(u,d,g,E),U=w.__ngNextListenerFn__;for(;U;)O=j1(u,d,U,E)&&O,U=U.__ngNextListenerFn__;return _&&!1===O&&(E.preventDefault(),E.returnValue=!1),O}}function Ur(l=1){return function mu(l){return(An.lFrame.contextLView=function ch(l,u){for(;l>0;)u=u[Fo],l--;return u}(l,An.lFrame.contextLView))[Qt]}(l)}function Cr(l,u){let d=null;const g=function Wv(l){const u=l.attrs;if(null!=u){const d=u.indexOf(5);if(!(1&d))return u[d+1]}return null}(l);for(let _=0;_<u.length;_++){const w=u[_];if("*"!==w){if(null===g?zm(l,w,!0):GP(g,w))return _}else d=_}return d}function uy(l){const u=qe()[Yn][Xi];if(!u.projection){const g=u.projection=bu(l?l.length:1,null),_=g.slice();let w=u.child;for(;null!==w;){const E=l?Cr(w,l):0;null!==E&&(_[E]?_[E].projectionNext=w:g[E]=w,_[E]=w),w=w.next}}}function dy(l,u=0,d){const g=qe(),_=hn(),w=$m(_,Ci+l,16,null,d||null);null===w.projection&&(w.projection=u),pa(),32!=(32&w.flags)&&function OD(l,u,d){Pw(u[On],0,u,d,It(l,d,u),zp(d.parent||u[Xi],d,u))}(_,g,w)}function Bb(l,u,d){return Vb(l,"",u,"",d),Bb}function Vb(l,u,d,g,_){const w=qe(),E=ba(w,u,d,g);return E!==Bn&&oc(hn(),ji(),w,l,E,w[On],_,!1),Vb}function i_(l,u){return l<<17|u<<2}function Uh(l){return l>>17&32767}function Bh(l){return 2|l}function Vh(l){return(131068&l)>>2}function hy(l,u){return-131069&l|u<<2}function Bf(l){return 1|l}function X1(l,u,d,g,_){const w=l[d+1],E=null===u;let S=g?Uh(w):Vh(w),O=!1;for(;0!==S&&(!1===O||E);){const j=l[S+1];Nk(l[S],u)&&(O=!0,l[S+1]=g?Bf(j):Bh(j)),S=g?Uh(j):Vh(j)}O&&(l[d+1]=g?Bh(w):Bf(w))}function Nk(l,u){return null===l||null==u||(Array.isArray(l)?l[1]:l)===u||!(!Array.isArray(l)||"string"!=typeof u)&&Qs(l,u)>=0}function jb(l,u){return function Al(l,u,d,g){const _=qe(),w=hn(),E=qs(2);w.firstUpdatePass&&function rx(l,u,d,g){const _=l.data;if(null===_[d+1]){const w=_[Bi()],E=function Wb(l,u){return u>=l.expandoStartIndex}(l,d);(function pg(l,u){return 0!=(l.flags&(u?8:16))})(w,g)&&null===u&&!E&&(u=!1),u=function ox(l,u,d,g){const _=function ql(l){const u=An.lFrame.currentDirectiveIndex;return-1===u?null:l[u]}(l);let w=g?u.residualClasses:u.residualStyles;if(null===_)0===(g?u.classBindings:u.styleBindings)&&(d=ja(d=$b(null,l,u,d,g),u.attrs,g),w=null);else{const E=u.directiveStylingLast;if(-1===E||l[E]!==_)if(d=$b(_,l,u,d,g),null===w){let O=function sx(l,u,d){const g=d?u.classBindings:u.styleBindings;if(0!==Vh(g))return l[Uh(g)]}(l,u,g);void 0!==O&&Array.isArray(O)&&(O=$b(null,l,u,O[1],g),O=ja(O,u.attrs,g),function Vk(l,u,d,g){l[Uh(d?u.classBindings:u.styleBindings)]=g}(l,u,g,O))}else w=function Zk(l,u,d){let g;const _=u.directiveEnd;for(let w=1+u.directiveStylingLast;w<_;w++)g=ja(g,l[w].hostAttrs,d);return ja(g,u.attrs,d)}(l,u,g)}return void 0!==w&&(g?u.residualClasses=w:u.residualStyles=w),d}(_,w,u,g),function Ok(l,u,d,g,_,w){let E=w?u.classBindings:u.styleBindings,S=Uh(E),O=Vh(E);l[g]=d;let j,U=!1;if(Array.isArray(d)?(j=d[1],(null===j||Qs(d,j)>0)&&(U=!0)):j=d,_)if(0!==O){const ve=Uh(l[S+1]);l[g+1]=i_(ve,S),0!==ve&&(l[ve+1]=hy(l[ve+1],g)),l[S+1]=function kk(l,u){return 131071&l|u<<17}(l[S+1],g)}else l[g+1]=i_(S,0),0!==S&&(l[S+1]=hy(l[S+1],g)),S=g;else l[g+1]=i_(O,0),0===S?S=g:l[O+1]=hy(l[O+1],g),O=g;U&&(l[g+1]=Bh(l[g+1])),X1(l,j,g,!0),X1(l,j,g,!1),function Rk(l,u,d,g,_){const w=_?l.residualClasses:l.residualStyles;null!=w&&"string"==typeof u&&Qs(w,u)>=0&&(d[g+1]=Bf(d[g+1]))}(u,j,l,g,w),E=i_(S,O),w?u.classBindings=E:u.styleBindings=E}(_,w,u,d,E,g)}}(w,l,E,g),u!==Bn&&wa(_,E,u)&&function cx(l,u,d,g,_,w,E,S){if(!(3&u.type))return;const O=l.data,U=O[S+1],j=function r_(l){return 1==(1&l)}(U)?ea(O,u,d,_,Vh(U),E):void 0;Zf(j)||(Zf(w)||function Pk(l){return 2==(2&l)}(U)&&(w=ea(O,null,d,_,S,E)),function ku(l,u,d,g,_){if(u)_?l.addClass(d,g):l.removeClass(d,g);else{let w=-1===g.indexOf("-")?void 0:bn.DashCase;null==_?l.removeStyle(d,g,w):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),w|=bn.Important),l.setStyle(d,g,_,w))}}(g,E,ll(Bi(),d),_,w))}(w,w.data[Bi()],_,_[On],l,_[E+1]=function Hk(l,u){return null==l||""===l||("string"==typeof u?l+=u:"object"==typeof l&&(l=je(Ou(l)))),l}(u,d),g,E)}(l,u,null,!0),jb}function $b(l,u,d,g,_){let w=null;const E=d.directiveEnd;let S=d.directiveStylingLast;for(-1===S?S=d.directiveStart:S++;S<E&&(w=u[S],g=ja(g,w.hostAttrs,_),w!==l);)S++;return null!==l&&(d.directiveStylingLast=S),g}function ja(l,u,d){const g=d?1:2;let _=-1;if(null!==u)for(let w=0;w<u.length;w++){const E=u[w];"number"==typeof E?_=E:_===g&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Ks(l,E,!!d||u[++w]))}return void 0===l?null:l}function ea(l,u,d,g,_,w){const E=null===u;let S;for(;_>0;){const O=l[_],U=Array.isArray(O),j=U?O[1]:O,ne=null===j;let ve=d[_+1];ve===Bn&&(ve=ne?ge:void 0);let Pe=ne?ai(ve,g):j===g?ve:void 0;if(U&&!Zf(Pe)&&(Pe=ai(O,g)),Zf(Pe)&&(S=Pe,E))return S;const Ye=l[_+1];_=E?Uh(Ye):Vh(Ye)}if(null!==u){let O=w?u.residualClasses:u.residualStyles;null!=O&&(S=ai(O,g))}return S}function Zf(l){return void 0!==l}function ux(l,u=""){const d=qe(),g=hn(),_=l+Ci,w=g.firstCreatePass?$m(g,_,1,u,null):g.data[_],E=d[_]=function Ih(l,u){return l.createText(u)}(d[On],u);Sh(g,d,E,w),Io(w,!1)}function Yb(l){return s_("",l,""),Yb}function s_(l,u,d){const g=qe(),_=ba(g,l,u,d);return _!==Bn&&Kn(g,Bi(),_),s_}function Kb(l,u,d,g,_){const w=qe(),E=function Nh(l,u,d,g,_,w){const S=dg(l,or(),d,_);return qs(2),S?u+ut(d)+g+ut(_)+w:Bn}(w,l,u,d,g,_);return E!==Bn&&Kn(w,Bi(),E),Kb}function my(l,u,d,g,_,w,E,S,O){const U=qe(),j=function hg(l,u,d,g,_,w,E,S,O,U){const ne=qc(l,or(),d,_,E,O);return qs(4),ne?u+ut(d)+g+ut(_)+w+ut(E)+S+ut(O)+U:Bn}(U,l,u,d,g,_,w,E,S,O);return j!==Bn&&Kn(U,Bi(),j),my}const Hf=void 0;var eO=["en",[["a","p"],["AM","PM"],Hf],[["AM","PM"],Hf,Hf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hf,"{1} 'at' {0}",Hf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xk(l){const d=Math.floor(Math.abs(l)),g=l.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===g?1:5}];let mg={};function kd(l){const u=function nO(l){return l.toLowerCase().replace(/_/g,"-")}(l);let d=tC(u);if(d)return d;const g=u.split("-")[0];if(d=tC(g),d)return d;if("en"===g)return eO;throw new Be(701,!1)}function Cx(l){return kd(l)[Mn.PluralCase]}function tC(l){return l in mg||(mg[l]=ti.ng&&ti.ng.common&&ti.ng.common.locales&&ti.ng.common.locales[l]),mg[l]}var Mn=(()=>((Mn=Mn||{})[Mn.LocaleId=0]="LocaleId",Mn[Mn.DayPeriodsFormat=1]="DayPeriodsFormat",Mn[Mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mn[Mn.DaysFormat=3]="DaysFormat",Mn[Mn.DaysStandalone=4]="DaysStandalone",Mn[Mn.MonthsFormat=5]="MonthsFormat",Mn[Mn.MonthsStandalone=6]="MonthsStandalone",Mn[Mn.Eras=7]="Eras",Mn[Mn.FirstDayOfWeek=8]="FirstDayOfWeek",Mn[Mn.WeekendRange=9]="WeekendRange",Mn[Mn.DateFormat=10]="DateFormat",Mn[Mn.TimeFormat=11]="TimeFormat",Mn[Mn.DateTimeFormat=12]="DateTimeFormat",Mn[Mn.NumberSymbols=13]="NumberSymbols",Mn[Mn.NumberFormats=14]="NumberFormats",Mn[Mn.CurrencyCode=15]="CurrencyCode",Mn[Mn.CurrencySymbol=16]="CurrencySymbol",Mn[Mn.CurrencyName=17]="CurrencyName",Mn[Mn.Currencies=18]="Currencies",Mn[Mn.Directionality=19]="Directionality",Mn[Mn.PluralCase=20]="PluralCase",Mn[Mn.ExtraData=21]="ExtraData",Mn))();const qf="en-US";let Ex=qf;function fC(l,u,d,g,_){if(l=Ce(l),Array.isArray(l))for(let w=0;w<l.length;w++)fC(l[w],u,d,g,_);else{const w=hn(),E=qe();let S=Ed(l)?l:Ce(l.provide),O=Kw(l);const U=hr(),j=1048575&U.providerIndexes,ne=U.directiveStart,ve=U.providerIndexes>>20;if(Ed(l)||!l.multi){const Pe=new ts(O,_,og),Ye=f_(S,u,_?j:j+ve,ne);-1===Ye?(Vi(Rt(U,E),w,S),h_(w,l,u.length),u.push(S),U.directiveStart++,U.directiveEnd++,_&&(U.providerIndexes+=1048576),d.push(Pe),E.push(Pe)):(d[Ye]=Pe,E[Ye]=Pe)}else{const Pe=f_(S,u,j+ve,ne),Ye=f_(S,u,j,j+ve),Mt=Ye>=0&&d[Ye];if(_&&!Mt||!_&&!(Pe>=0&&d[Pe])){Vi(Rt(U,E),w,S);const Xt=function MO(l,u,d,g,_){const w=new ts(l,d,og);return w.multi=[],w.index=u,w.componentProviders=0,My(w,_,g&&!d),w}(_?SO:pC,d.length,_,g,O);!_&&Mt&&(d[Ye].providerFactory=Xt),h_(w,l,u.length,0),u.push(S),U.directiveStart++,U.directiveEnd++,_&&(U.providerIndexes+=1048576),d.push(Xt),E.push(Xt)}else h_(w,l,Pe>-1?Pe:Ye,My(d[_?Ye:Pe],O,!_&&g));!_&&g&&Mt&&d[Ye].componentProviders++}}}function h_(l,u,d,g){const _=Ed(u),w=function Zv(l){return!!l.useClass}(u);if(_||w){const O=(w?Ce(u.useClass):u).prototype.ngOnDestroy;if(O){const U=l.destroyHooks||(l.destroyHooks=[]);if(!_&&u.multi){const j=U.indexOf(d);-1===j?U.push(d,[g,O]):U[j+1].push(g,O)}else U.push(d,O)}}}function My(l,u,d){return d&&l.componentProviders++,l.multi.push(u)-1}function f_(l,u,d,g){for(let _=d;_<g;_++)if(u[_]===l)return _;return-1}function pC(l,u,d,g){return gC(this.multi,[])}function SO(l,u,d,g){const _=this.multi;let w;if(this.providerFactory){const E=this.providerFactory.componentProviders,S=er(d,d[xt],this.providerFactory.index,g);w=S.slice(0,E),gC(_,w);for(let O=E;O<S.length;O++)w.push(S[O])}else w=[],gC(_,w);return w}function gC(l,u){for(let d=0;d<l.length;d++)u.push((0,l[d])());return u}function p_(l,u=[]){return d=>{d.providersResolver=(g,_)=>function hC(l,u,d){const g=hn();if(g.firstCreatePass){const _=Qr(l);fC(d,g.data,g.blueprint,_,!0),fC(u,g.data,g.blueprint,_,!1)}}(g,_?_(l):l,u)}}class zh{}class mC{}function _C(l,u){return new Py(l,u??null)}class Py extends zh{constructor(u,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new e_(this);const g=Nr(u);this._bootstrapComponents=Ru(g.bootstrap),this._r3Injector=ab(u,d,[{provide:zh,useValue:this},{provide:Xp,useValue:this.componentFactoryResolver}],je(u),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(u)}get injector(){return this._r3Injector}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class ky extends mC{constructor(u){super(),this.moduleType=u}create(u){return new Py(this.moduleType,u)}}class PO extends zh{constructor(u,d,g){super(),this.componentFactoryResolver=new e_(this),this.instance=null;const _=new QD([...u,{provide:zh,useValue:this},{provide:Xp,useValue:this.componentFactoryResolver}],d||Hv(),g,new Set(["environment"]));this.injector=_,_.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(u){this.injector.onDestroy(u)}}function Oy(l,u,d=null){return new PO(l,u,d).injector}let bg=(()=>{class l{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const g=Kp(0,d.type),_=g.length>0?Oy([g],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,_)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return l.\u0275prov=rn({token:l,providedIn:"environment",factory:()=>new l(Rn(Of))}),l})();function vC(l){l.getStandaloneInjector=u=>u.get(bg).getOrCreateStandaloneInjector(l)}function CC(l,u,d,g){return rA(qe(),Xr(),l,u,d,g)}function TC(l,u,d,g,_){return DC(qe(),Xr(),l,u,d,g,_)}function BO(l,u,d,g,_,w,E){return xC(qe(),Xr(),l,u,d,g,_,w,E)}function Ry(l,u){const d=l[u];return d===Bn?void 0:d}function rA(l,u,d,g,_,w){const E=u+d;return wa(l,E,_)?Ad(l,E+1,w?g.call(w,_):g(_)):Ry(l,E+1)}function DC(l,u,d,g,_,w,E){const S=u+d;return dg(l,S,_,w)?Ad(l,S+2,E?g.call(E,_,w):g(_,w)):Ry(l,S+2)}function xC(l,u,d,g,_,w,E,S,O){const U=u+d;return qc(l,U,_,w,E,S)?Ad(l,U+4,O?g.call(O,_,w,E,S):g(_,w,E,S)):Ry(l,U+4)}function Wf(l,u){const d=hn();let g;const _=l+Ci;d.firstCreatePass?(g=function DB(l,u){if(u)for(let d=u.length-1;d>=0;d--){const g=u[d];if(l===g.name)return g}}(u,d.pipeRegistry),d.data[_]=g,g.onDestroy&&(d.destroyHooks??(d.destroyHooks=[])).push(_,g.onDestroy)):g=d.data[_];const w=g.factory||(g.factory=zs(g.type)),E=lr(og);try{const S=M(!1),O=w();return M(S),function Mk(l,u,d,g){d>=l.data.length&&(l.data[d]=null,l.blueprint[d]=null),u[d]=g}(d,qe(),_,O),O}finally{lr(E)}}function ZO(l,u,d){const g=l+Ci,_=qe(),w=fo(_,g);return Ly(_,g)?rA(_,Xr(),u,w.transform,d,w):w.transform(d)}function aA(l,u,d,g){const _=l+Ci,w=qe(),E=fo(w,_);return Ly(w,_)?DC(w,Xr(),u,E.transform,d,g,E):E.transform(d,g)}function lA(l,u,d,g,_,w){const E=l+Ci,S=qe(),O=fo(S,E);return Ly(S,E)?xC(S,Xr(),u,O.transform,d,g,_,w,O):O.transform(d,g,_,w)}function cA(l,u,d){const g=l+Ci,_=qe(),w=fo(_,g);return Ly(_,g)?function Ny(l,u,d,g,_,w){let E=u+d,S=!1;for(let O=0;O<_.length;O++)wa(l,E++,_[O])&&(S=!0);return S?Ad(l,E,g.apply(w,_)):Ry(l,E)}(_,Xr(),u,w.transform,d,w):w.transform.apply(w,d)}function Ly(l,u){return l[xt].data[u].pure}function AC(l){return u=>{setTimeout(l,void 0,u)}}const Rd=class AB extends o.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,d,g){let _=u,w=d||(()=>null),E=g;if(u&&"object"==typeof u){const O=u;_=O.next?.bind(O),w=O.error?.bind(O),E=O.complete?.bind(O)}this.__isAsync&&(w=AC(w),_&&(_=AC(_)),E&&(E=AC(E)));const S=super.subscribe({next:_,error:w,complete:E});return u instanceof ee.w0&&u.add(S),S}};function IB(){return this._results[Symbol.iterator]()}class IC{get changes(){return this._changes||(this._changes=new Rd)}constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=IC.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=IB)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,d){return this._results.reduce(u,d)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,d){const g=this;g.dirty=!1;const _=function Ms(l){return l.flat(Number.POSITIVE_INFINITY)}(u);(this._changesDetected=!function gf(l,u,d){if(l.length!==u.length)return!1;for(let g=0;g<l.length;g++){let _=l[g],w=u[g];if(d&&(_=d(_),w=d(w)),w!==_)return!1}return!0}(g._results,_,d))&&(g._results=_,g.length=_.length,g.last=_[this.length-1],g.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fy=(()=>{class l{}return l.__NG_ELEMENT_ID__=zO,l})();const SB=Fy,SC=class extends SB{constructor(u,d,g){super(),this._declarationLView=u,this._declarationTContainer=d,this.elementRef=g}createEmbeddedView(u,d){const g=this._declarationTContainer.tView,_=Kv(this._declarationLView,g,u,16,null,g.declTNode,null,null,null,null,d||null);_[Jo]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[Kr];return null!==E&&(_[Kr]=E.createEmbeddedView(g)),Jv(g,_,u),new Xm(_)}};function zO(){return m_(hr(),qe())}function m_(l,u){return 4&l.type?new SC(u,l,Dd(l,u)):null}let $f=(()=>{class l{}return l.__NG_ELEMENT_ID__=HO,l})();function HO(){return jO(hr(),qe())}const qO=$f,uA=class extends qO{constructor(u,d,g){super(),this._lContainer=u,this._hostTNode=d,this._hostLView=g}get element(){return Dd(this._hostTNode,this._hostLView)}get injector(){return new Kl(this._hostTNode,this._hostLView)}get parentInjector(){const u=ni(this._hostTNode,this._hostLView);if(qa(u)){const d=m(u,this._hostLView),g=Yl(u);return new Kl(d[xt].data[g+8],d)}return new Kl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const d=dA(this._lContainer);return null!==d&&d[u]||null}get length(){return this._lContainer.length-xr}createEmbeddedView(u,d,g){let _,w;"number"==typeof g?_=g:null!=g&&(_=g.index,w=g.injector);const E=u.createEmbeddedView(d||{},w);return this.insert(E,_),E}createComponent(u,d,g,_,w){const E=u&&!function yh(l){return"function"==typeof l}(u);let S;if(E)S=d;else{const ne=d||{};S=ne.index,g=ne.injector,_=ne.projectableNodes,w=ne.environmentInjector||ne.ngModuleRef}const O=E?u:new Rh(on(u)),U=g||this.parentInjector;if(!w&&null==O.ngModule){const ve=(E?U:this.parentInjector).get(Of,null);ve&&(w=ve)}const j=O.create(U,_,void 0,w);return this.insert(j.hostView,S),j}insert(u,d){const g=u._lView,_=g[xt];if(function Vl(l){return Ii(l[In])}(g)){const j=this.indexOf(u);if(-1!==j)this.detach(j);else{const ne=g[In],ve=new uA(ne,ne[Xi],ne[In]);ve.detach(ve.indexOf(u))}}const w=this._adjustIndex(d),E=this._lContainer;!function y(l,u,d,g){const _=xr+g,w=d.length;g>0&&(d[_-1][oi]=u),g<w-xr?(u[oi]=d[_],mf(d,xr+g,u)):(d.push(u),u[oi]=null),u[In]=d;const E=u[Jo];null!==E&&d!==E&&function C(l,u){const d=l[Ra];u[Yn]!==u[In][In][Yn]&&(l[il]=!0),null===d?l[Ra]=[u]:d.push(u)}(E,u);const S=u[Kr];null!==S&&S.insertView(l),u[Ot]|=64}(_,g,E,w);const S=Pu(w,E),O=g[On],U=El(O,E[Oa]);return null!==U&&function Sw(l,u,d,g,_,w){g[Dr]=_,g[Xi]=u,Im(l,g,d,1,_,w)}(_,E[Xi],O,g,U,S),u.attachToViewContainerRef(),mf(MC(E),w,u),u}move(u,d){return this.insert(u,d)}indexOf(u){const d=dA(this._lContainer);return null!==d?d.indexOf(u):-1}remove(u){const d=this._adjustIndex(u,-1),g=Z(this._lContainer,d);g&&(gd(MC(this._lContainer),d),$(g[xt],g))}detach(u){const d=this._adjustIndex(u,-1),g=Z(this._lContainer,d);return g&&null!=gd(MC(this._lContainer),d)?new Xm(g):null}_adjustIndex(u,d=0){return u??this.length+d}};function dA(l){return l[xs]}function MC(l){return l[xs]||(l[xs]=[])}function jO(l,u){let d;const g=u[l.index];if(Ii(g))d=g;else{let _;if(8&l.type)_=vr(g);else{const w=u[On];_=w.createComment("");const E=Ar(l,u);Hn(w,El(w,E),_,function xm(l,u){return l.nextSibling(u)}(w,E),!1)}u[l.index]=d=vb(g,u,_,l),ny(u,d)}return new uA(d,l,u)}class PC{constructor(u){this.queryList=u,this.matches=null}clone(){return new PC(this.queryList)}setDirty(){this.queryList.setDirty()}}class kC{constructor(u=[]){this.queries=u}createEmbeddedView(u){const d=u.queries;if(null!==d){const g=null!==u.contentQueries?u.contentQueries[0]:d.length,_=[];for(let w=0;w<g;w++){const E=d.getByIndex(w);_.push(this.queries[E.indexInDeclarationView].clone())}return new kC(_)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let d=0;d<this.queries.length;d++)null!==JO(u,d).matches&&this.queries[d].setDirty()}}class hA{constructor(u,d,g=null){this.predicate=u,this.flags=d,this.read=g}}class Uy{constructor(u=[]){this.queries=u}elementStart(u,d){for(let g=0;g<this.queries.length;g++)this.queries[g].elementStart(u,d)}elementEnd(u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(u)}embeddedTView(u){let d=null;for(let g=0;g<this.length;g++){const _=null!==d?d.length:0,w=this.getByIndex(g).embeddedTView(u,_);w&&(w.indexInDeclarationView=g,null!==d?d.push(w):d=[w])}return null!==d?new Uy(d):null}template(u,d){for(let g=0;g<this.queries.length;g++)this.queries[g].template(u,d)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class __{constructor(u,d=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(u,d){this.isApplyingToNode(d)&&this.matchTNode(u,d)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,d){this.elementStart(u,d)}embeddedTView(u,d){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,d),new __(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let g=u.parent;for(;null!==g&&8&g.type&&g.index!==d;)g=g.parent;return d===(null!==g?g.index:-1)}return this._appliesToNextNode}matchTNode(u,d){const g=this.metadata.predicate;if(Array.isArray(g))for(let _=0;_<g.length;_++){const w=g[_];this.matchTNodeWithReadOption(u,d,fA(d,w)),this.matchTNodeWithReadOption(u,d,vl(d,u,w,!1,!1))}else g===Fy?4&d.type&&this.matchTNodeWithReadOption(u,d,-1):this.matchTNodeWithReadOption(u,d,vl(d,u,g,!1,!1))}matchTNodeWithReadOption(u,d,g){if(null!==g){const _=this.metadata.read;if(null!==_)if(_===eg||_===$f||_===Fy&&4&d.type)this.addMatch(d.index,-2);else{const w=vl(d,u,_,!1,!1);null!==w&&this.addMatch(d.index,w)}else this.addMatch(d.index,g)}}addMatch(u,d){null===this.matches?this.matches=[u,d]:this.matches.push(u,d)}}function fA(l,u){const d=l.localNames;if(null!==d)for(let g=0;g<d.length;g+=2)if(d[g]===u)return d[g+1];return null}function OC(l,u,d,g){return-1===d?function MB(l,u){return 11&l.type?Dd(l,u):4&l.type?m_(l,u):null}(u,l):-2===d?function WO(l,u,d){return d===eg?Dd(u,l):d===Fy?m_(u,l):d===$f?jO(u,l):void 0}(l,u,g):er(l,l[xt],d,u)}function pA(l,u,d,g){const _=u[Kr].queries[g];if(null===_.matches){const w=l.data,E=d.matches,S=[];for(let O=0;O<E.length;O+=2){const U=E[O];S.push(U<0?null:OC(u,w[U],E[O+1],d.metadata.read))}_.matches=S}return _.matches}function gA(l,u,d,g){const _=l.queries.getByIndex(d),w=_.matches;if(null!==w){const E=pA(l,u,_,d);for(let S=0;S<w.length;S+=2){const O=w[S];if(O>0)g.push(E[S/2]);else{const U=w[S+1],j=u[-O];for(let ne=xr;ne<j.length;ne++){const ve=j[ne];ve[Jo]===ve[In]&&gA(ve[xt],ve,U,g)}if(null!==j[Ra]){const ne=j[Ra];for(let ve=0;ve<ne.length;ve++){const Pe=ne[ve];gA(Pe[xt],Pe,U,g)}}}}}return g}function $O(l){const u=qe(),d=hn(),g=Za();dl(g+1);const _=JO(d,g);if(l.dirty&&function Ss(l){return 4==(4&l[Ot])}(u)===(2==(2&_.metadata.flags))){if(null===_.matches)l.reset([]);else{const w=_.crossesNgTemplate?gA(d,u,g,[]):pA(d,u,_,g);l.reset(w,Bm),l.notifyOnChanges()}return!0}return!1}function mA(l,u,d){const g=hn();g.firstCreatePass&&(QO(g,new hA(l,u,d),-1),2==(2&u)&&(g.staticViewQueries=!0)),KO(g,qe(),u)}function GO(l,u,d,g){const _=hn();if(_.firstCreatePass){const w=hr();QO(_,new hA(u,d,g),w.index),function kB(l,u){const d=l.contentQueries||(l.contentQueries=[]);u!==(d.length?d[d.length-1]:-1)&&d.push(l.queries.length-1,u)}(_,l),2==(2&d)&&(_.staticContentQueries=!0)}KO(_,qe(),d)}function YO(){return function PB(l,u){return l[Kr].queries[u].queryList}(qe(),Za())}function KO(l,u,d){const g=new IC(4==(4&d));I1(l,u,g,g.destroy),null===u[Kr]&&(u[Kr]=new kC),u[Kr].queries.push(new PC(g))}function QO(l,u,d){null===l.queries&&(l.queries=new Uy),l.queries.track(new __(u,d))}function JO(l,u){return l.queries.getByIndex(u)}function _A(l){return!!Nr(l)}const LC=gh("Input",l=>({bindingPropertyName:l})),pR=gh("Output",l=>({bindingPropertyName:l}));function Gf(...l){}const Nd=new di("Application Initializer");let Zy=(()=>{class l{constructor(d){this.appInits=d,this.resolve=Gf,this.reject=Gf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((g,_)=>{this.resolve=g,this.reject=_})}runInitializers(){if(this.initialized)return;const d=[],g=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const w=this.appInits[_]();if(be(w))d.push(w);else if(K(w)){const E=new Promise((S,O)=>{w.subscribe({complete:S,error:O})});d.push(E)}}Promise.all(d).then(()=>{g()}).catch(_=>{this.reject(_)}),0===d.length&&g(),this.initialized=!0}}return l.\u0275fac=function(d){return new(d||l)(Rn(Nd,8))},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const FC=new di("AppId",{providedIn:"root",factory:function zy(){return`${ys()}${ys()}${ys()}`}});function ys(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EA=new di("Platform Initializer"),w_=new di("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Uu=new di("AnimationModuleType");let BC=(()=>{class l{log(d){console.log(d)}warn(d){console.warn(d)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const Hy=new di("LocaleId",{providedIn:"root",factory:()=>Ji(Hy,jt.Optional|jt.SkipSelf)||function mR(){return typeof $localize<"u"&&$localize.locale||qf}()}),Cg=new di("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yR{constructor(u,d){this.ngModuleFactory=u,this.componentFactories=d}}let xA=(()=>{class l{compileModuleSync(d){return new ky(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const g=this.compileModuleSync(d),w=Ru(Nr(d).declarations).reduce((E,S)=>{const O=on(S);return O&&E.push(new Rh(O)),E},[]);return new yR(g,w)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const b_=(()=>Promise.resolve(0))();function zC(l){typeof Zone>"u"?b_.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class hc{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:g=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rd(!1),this.onMicrotaskEmpty=new Rd(!1),this.onStable=new Rd(!1),this.onError=new Rd(!1),typeof Zone>"u")throw new Be(908,!1);Zone.assertZonePatched();const _=this;_._nesting=0,_._outer=_._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!g&&d,_.shouldCoalesceRunChangeDetection=g,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function C_(){let l=ti.requestAnimationFrame,u=ti.cancelAnimationFrame;if(typeof Zone<"u"&&l&&u){const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d);const g=u[Zone.__symbol__("OriginalDelegate")];g&&(u=g)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function IA(l){const u=()=>{!function bR(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(ti,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,$y(l),l.isCheckStableRunning=!0,T_(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),$y(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,g,_,w,E,S)=>{try{return HC(l),d.invokeTask(_,w,E,S)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===w.type||l.shouldCoalesceRunChangeDetection)&&u(),E_(l)}},onInvoke:(d,g,_,w,E,S,O)=>{try{return HC(l),d.invoke(_,w,E,S,O)}finally{l.shouldCoalesceRunChangeDetection&&u(),E_(l)}},onHasTask:(d,g,_,w)=>{d.hasTask(_,w),g===_&&("microTask"==w.change?(l._hasPendingMicrotasks=w.microTask,$y(l),T_(l)):"macroTask"==w.change&&(l.hasPendingMacrotasks=w.macroTask))},onHandleError:(d,g,_,w)=>(d.handleError(_,w),l.runOutsideAngular(()=>l.onError.emit(w)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hc.isInAngularZone())throw new Be(909,!1)}static assertNotInAngularZone(){if(hc.isInAngularZone())throw new Be(909,!1)}run(u,d,g){return this._inner.run(u,d,g)}runTask(u,d,g,_){const w=this._inner,E=w.scheduleEventTask("NgZoneEvent: "+_,u,Wy,Gf,Gf);try{return w.runTask(E,d,g)}finally{w.cancelTask(E)}}runGuarded(u,d,g){return this._inner.runGuarded(u,d,g)}runOutsideAngular(u){return this._outer.run(u)}}const Wy={};function T_(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function $y(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function HC(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function E_(l){l._nesting--,T_(l)}class qC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rd,this.onMicrotaskEmpty=new Rd,this.onStable=new Rd,this.onError=new Rd}run(u,d,g){return u.apply(d,g)}runGuarded(u,d,g){return u.apply(d,g)}runOutsideAngular(u){return u()}runTask(u,d,g,_){return u.apply(d,g)}}const Gy=new di(""),Yy=new di("");let $C,jC=(()=>{class l{constructor(d,g,_){this._ngZone=d,this.registry=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$C||(function SA(l){$C=l}(_),_.addToWindow(g)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hc.assertNotInAngularZone(),zC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zC(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(g=>!g.updateCb||!g.updateCb(d)||(clearTimeout(g.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,g,_){let w=-1;g&&g>0&&(w=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==w),d(this._didWork,this.getPendingTasks())},g)),this._callbacks.push({doneCb:d,timeoutId:w,updateCb:_})}whenStable(d,g,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,g,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,g,_){return[]}}return l.\u0275fac=function(d){return new(d||l)(Rn(hc),Rn(WC),Rn(Yy))},l.\u0275prov=rn({token:l,factory:l.\u0275fac}),l})(),WC=(()=>{class l{constructor(){this._applications=new Map}registerApplication(d,g){this._applications.set(d,g)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,g=!0){return $C?.findTestabilityInTree(this,d,g)??null}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();const Bu=!1;let Ld=null;const Ky=new di("AllowMultipleToken"),Qy=new di("PlatformDestroyListeners"),MA=new di("appBootstrapListener");class ws{constructor(u,d){this.name=u,this.token=d}}function kA(l,u,d=[]){const g=`Platform: ${u}`,_=new di(g);return(w=[])=>{let E=QC();if(!E||E.injector.get(Ky,!1)){const S=[...d,...w,{provide:_,useValue:!0}];l?l(S):function Ls(l){if(Ld&&!Ld.get(Ky,!1))throw new Be(400,!1);Ld=l;const u=l.get(OA);(function Xy(l){const u=l.get(EA,null);u&&u.forEach(d=>d())})(l)}(function KC(l=[],u){return ng.create({name:u,providers:[{provide:kh,useValue:"platform"},{provide:Qy,useValue:new Set([()=>Ld=null])},...l]})}(S,g))}return function CR(l){const u=QC();if(!u)throw new Be(401,!1);return u}()}}function QC(){return Ld?.get(OA)??null}let OA=(()=>{class l{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,g){const _=function Eg(l,u){let d;return d="noop"===l?new qC:("zone.js"===l?void 0:l)||new hc(u),d}(g?.ngZone,function Tg(l){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!l||!l.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!l||!l.ngZoneRunCoalescing)||!1}}(g)),w=[{provide:hc,useValue:_}];return _.run(()=>{const E=ng.create({providers:w,parent:this.injector,name:d.moduleType.name}),S=d.create(E),O=S.injector.get(Vm,null);if(!O)throw new Be(402,!1);return _.runOutsideAngular(()=>{const U=_.onError.subscribe({next:j=>{O.handleError(j)}});S.onDestroy(()=>{Yf(this._modules,S),U.unsubscribe()})}),function e0(l,u,d){try{const g=d();return be(g)?g.catch(_=>{throw u.runOutsideAngular(()=>l.handleError(_)),_}):g}catch(g){throw u.runOutsideAngular(()=>l.handleError(g)),g}}(O,_,()=>{const U=S.injector.get(Zy);return U.runInitializers(),U.donePromise.then(()=>(function Dx(l){Je(l,"Expected localeId to be defined"),"string"==typeof l&&(Ex=l.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Hy,qf)||qf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(d,g=[]){const _=JC({},g);return function GC(l,u,d){const g=new ky(d);return Promise.resolve(g)}(0,0,d).then(w=>this.bootstrapModuleFactory(w,_))}_moduleDoBootstrap(d){const g=d.injector.get(t0);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(_=>g.bootstrap(_));else{if(!d.instance.ngDoBootstrap)throw new Be(-403,!1);d.instance.ngDoBootstrap(g)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be(404,!1);this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g());const d=this._injector.get(Qy,null);d&&(d.forEach(g=>g()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(d){return new(d||l)(Rn(ng))},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();function JC(l,u){return Array.isArray(u)?u.reduce(JC,l):{...l,...u}}let t0=(()=>{class l{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(d,g,_){this._zone=d,this._injector=g,this._exceptionHandler=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new W.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),E=new W.y(S=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{hc.assertNotInAngularZone(),zC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{hc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{O.unsubscribe(),U.unsubscribe()}});this.isStable=(0,Te.T)(w,E.pipe((0,Oe.B)()))}bootstrap(d,g){const _=d instanceof XD;if(!this._injector.get(Zy).done){!_&&uo(d);throw new Be(405,Bu)}let E;E=_?d:this._injector.get(Xp).resolveComponentFactory(d),this.componentTypes.push(E.componentType);const S=function YC(l){return l.isBoundToModule}(E)?void 0:this._injector.get(zh),U=E.create(ng.NULL,[],g||E.selector,S),j=U.location.nativeElement,ne=U.injector.get(Gy,null);return ne?.registerApplication(j),U.onDestroy(()=>{this.detachView(U.hostView),Yf(this.components,U),ne?.unregisterApplication(j)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Be(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const g=d;this._views.push(g),g.attachToAppRef(this)}detachView(d){const g=d;Yf(this._views,g),g.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const g=this._injector.get(MA,[]);g.push(...this._bootstrapListeners),g.forEach(_=>_(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>Yf(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new Be(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return l.\u0275fac=function(d){return new(d||l)(Rn(hc),Rn(Of),Rn(Vm))},l.\u0275prov=rn({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function Yf(l,u){const d=l.indexOf(u);d>-1&&l.splice(d,1)}function RA(){return!1}let NA=(()=>{class l{}return l.__NG_ELEMENT_ID__=o0,l})();function o0(l){return function ER(l,u,d){if(bc(l)&&!d){const g=dr(l.index,u);return new Xm(g,g)}return 47&l.type?new Xm(u[Yn],u):null}(hr(),qe(),16==(16&l))}class S_{constructor(){}supports(u){return ug(u)}create(u){return new zA(u)}}const M_=(l,u)=>u;class zA{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||M_}forEachItem(u){let d;for(d=this._itHead;null!==d;d=d._next)u(d)}forEachOperation(u){let d=this._itHead,g=this._removalsHead,_=0,w=null;for(;d||g;){const E=!g||d&&d.currentIndex<l0(g,_,w)?d:g,S=l0(E,_,w),O=E.currentIndex;if(E===g)_--,g=g._nextRemoved;else if(d=d._next,null==E.previousIndex)_++;else{w||(w=[]);const U=S-_,j=O-_;if(U!=j){for(let ve=0;ve<U;ve++){const Pe=ve<w.length?w[ve]:w[ve]=0,Ye=Pe+ve;j<=Ye&&Ye<U&&(w[ve]=Pe+1)}w[E.previousIndex]=j-U}}S!==O&&u(E,S,O)}}forEachPreviousItem(u){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)u(d)}forEachAddedItem(u){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)u(d)}forEachMovedItem(u){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)u(d)}forEachRemovedItem(u){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)u(d)}forEachIdentityChange(u){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)u(d)}diff(u){if(null==u&&(u=[]),!ug(u))throw new Be(900,!1);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let _,w,E,d=this._itHead,g=!1;if(Array.isArray(u)){this.length=u.length;for(let S=0;S<this.length;S++)w=u[S],E=this._trackByFn(S,w),null!==d&&Object.is(d.trackById,E)?(g&&(d=this._verifyReinsertion(d,w,E,S)),Object.is(d.item,w)||this._addIdentityChange(d,w)):(d=this._mismatch(d,w,E,S),g=!0),d=d._next}else _=0,function xk(l,u){if(Array.isArray(l))for(let d=0;d<l.length;d++)u(l[d]);else{const d=l[Symbol.iterator]();let g;for(;!(g=d.next()).done;)u(g.value)}}(u,S=>{E=this._trackByFn(_,S),null!==d&&Object.is(d.trackById,E)?(g&&(d=this._verifyReinsertion(d,S,E,_)),Object.is(d.item,S)||this._addIdentityChange(d,S)):(d=this._mismatch(d,S,E,_),g=!0),d=d._next,_++}),this.length=_;return this._truncate(d),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,d,g,_){let w;return null===u?w=this._itTail:(w=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null))?(Object.is(u.item,d)||this._addIdentityChange(u,d),this._reinsertAfter(u,w,_)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(g,_))?(Object.is(u.item,d)||this._addIdentityChange(u,d),this._moveAfter(u,w,_)):u=this._addAfter(new DR(d,g),w,_),u}_verifyReinsertion(u,d,g,_){let w=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null);return null!==w?u=this._reinsertAfter(w,u._prev,_):u.currentIndex!=_&&(u.currentIndex=_,this._addToMoves(u,_)),u}_truncate(u){for(;null!==u;){const d=u._next;this._addToRemovals(this._unlink(u)),u=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,d,g){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const _=u._prevRemoved,w=u._nextRemoved;return null===_?this._removalsHead=w:_._nextRemoved=w,null===w?this._removalsTail=_:w._prevRemoved=_,this._insertAfter(u,d,g),this._addToMoves(u,g),u}_moveAfter(u,d,g){return this._unlink(u),this._insertAfter(u,d,g),this._addToMoves(u,g),u}_addAfter(u,d,g){return this._insertAfter(u,d,g),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,d,g){const _=null===d?this._itHead:d._next;return u._next=_,u._prev=d,null===_?this._itTail=u:_._prev=u,null===d?this._itHead=u:d._next=u,null===this._linkedRecords&&(this._linkedRecords=new P_),this._linkedRecords.put(u),u.currentIndex=g,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const d=u._prev,g=u._next;return null===d?this._itHead=g:d._next=g,null===g?this._itTail=d:g._prev=d,u}_addToMoves(u,d){return u.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new P_),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,d){return u.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class DR{constructor(u,d){this.item=u,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iT{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,d){let g;for(g=this._head;null!==g;g=g._nextDup)if((null===d||d<=g.currentIndex)&&Object.is(g.trackById,u))return g;return null}remove(u){const d=u._prevDup,g=u._nextDup;return null===d?this._head=g:d._nextDup=g,null===g?this._tail=d:g._prevDup=d,null===this._head}}class P_{constructor(){this.map=new Map}put(u){const d=u.trackById;let g=this.map.get(d);g||(g=new iT,this.map.set(d,g)),g.add(u)}get(u,d){const _=this.map.get(u);return _?_.get(u,d):null}remove(u){const d=u.trackById;return this.map.get(d).remove(u)&&this.map.delete(d),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function l0(l,u,d){const g=l.previousIndex;if(null===g)return g;let _=0;return d&&g<d.length&&(_=d[g]),g+u+_}class rT{constructor(){}supports(u){return u instanceof Map||Ib(u)}create(){return new HA}}class HA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let d;for(d=this._mapHead;null!==d;d=d._next)u(d)}forEachPreviousItem(u){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)u(d)}forEachChangedItem(u){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)u(d)}forEachAddedItem(u){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)u(d)}forEachRemovedItem(u){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)u(d)}diff(u){if(u){if(!(u instanceof Map||Ib(u)))throw new Be(900,!1)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(u,(g,_)=>{if(d&&d.key===_)this._maybeAddToChanges(d,g),this._appendAfter=d,d=d._next;else{const w=this._getOrCreateRecordForKey(_,g);d=this._insertBeforeOrAppend(d,w)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let g=d;null!==g;g=g._nextRemoved)g===this._mapHead&&(this._mapHead=null),this._records.delete(g.key),g._nextRemoved=g._next,g.previousValue=g.currentValue,g.currentValue=null,g._prev=null,g._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,d){if(u){const g=u._prev;return d._next=u,d._prev=g,u._prev=d,g&&(g._next=d),u===this._mapHead&&(this._mapHead=d),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(u,d){if(this._records.has(u)){const _=this._records.get(u);this._maybeAddToChanges(_,d);const w=_._prev,E=_._next;return w&&(w._next=E),E&&(E._prev=w),_._next=null,_._prev=null,_}const g=new qA(u);return this._records.set(u,g),g.currentValue=d,this._addToAdditions(g),g}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,d){Object.is(d,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=d,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,d){u instanceof Map?u.forEach(d):Object.keys(u).forEach(g=>d(u[g],g))}}class qA{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jA(){return new Jf([new S_])}let Jf=(()=>{class l{constructor(d){this.factories=d}static create(d,g){if(null!=g){const _=g.factories.slice();d=d.concat(_)}return new l(d)}static extend(d){return{provide:l,useFactory:g=>l.create(d,g||jA()),deps:[[l,new qt,new Nc]]}}find(d){const g=this.factories.find(_=>_.supports(d));if(null!=g)return g;throw new Be(901,!1)}}return l.\u0275prov=rn({token:l,providedIn:"root",factory:jA}),l})();function k_(){return new Xf([new rT])}let Xf=(()=>{class l{constructor(d){this.factories=d}static create(d,g){if(g){const _=g.factories.slice();d=d.concat(_)}return new l(d)}static extend(d){return{provide:l,useFactory:g=>l.create(d,g||k_()),deps:[[l,new qt,new Nc]]}}find(d){const g=this.factories.find(_=>_.supports(d));if(g)return g;throw new Be(901,!1)}}return l.\u0275prov=rn({token:l,providedIn:"root",factory:k_}),l})();const WA=kA(null,"core",[]);let $A=(()=>{class l{constructor(d){}}return l.\u0275fac=function(d){return new(d||l)(Rn(t0))},l.\u0275mod=Me({type:l}),l.\u0275inj=ri({}),l})();function AR(l){return"boolean"==typeof l?l:null!=l&&"false"!==l}},3942:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Z:()=>Et});var o=z(2090),ee=z(4859),W=z(6881),Te=z(1877);class Oe{constructor(Be,st){this._delegate=Be,this.firebase=st,(0,W._addComponent)(Be,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(Be,st=W._DEFAULT_ENTRY_NAME){var ut;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(Be);return!mt.isInitialized()&&"EXPLICIT"===(null===(ut=mt.getComponent())||void 0===ut?void 0:ut.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:st})}_removeServiceInstance(Be,st=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(st)}_addComponent(Be){(0,W._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,W._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function Ne(){const Vt=function je(Vt){const Be={},st={__esModule:!0,initializeApp:function nt(rt,Se={}){const Lt=W.initializeApp(rt,Se);if((0,o.r3)(Be,Lt.name))return Be[Lt.name];const tn=new Vt(Lt,st);return Be[Lt.name]=tn,tn},app:mt,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function lt(rt){const Se=rt.name,Lt=Se.replace("-compat","");if(W._registerComponent(rt)&&"PUBLIC"===rt.type){const tn=(Zt=mt())=>{if("function"!=typeof Zt[Lt])throw $e.create("invalid-app-argument",{appName:Se});return Zt[Lt]()};void 0!==rt.serviceProps&&(0,o.ZB)(tn,rt.serviceProps),st[Lt]=tn,Vt.prototype[Lt]=function(...Zt){return this._getService.bind(this,Se).apply(this,rt.multipleInstances?Zt:[])}}return"PUBLIC"===rt.type?st[Lt]:null},removeApp:function ut(rt){delete Be[rt]},useAsService:function vt(rt,Se){return"serverAuth"===Se?null:Se},modularAPIs:W}};function mt(rt){if(!(0,o.r3)(Be,rt=rt||W._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:rt});return Be[rt]}return st.default=st,Object.defineProperty(st,"apps",{get:function Qe(){return Object.keys(Be).map(rt=>Be[rt])}}),mt.App=Vt,st}(Oe);return Vt.INTERNAL=Object.assign(Object.assign({},Vt.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function Be(st){(0,o.ZB)(Vt,st)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),Vt}(),fe=new Te.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Et=he;!function it(Vt){(0,W.registerVersion)("@firebase/app-compat","0.2.13",Vt)}()},6881:(Yt,Xe,z)=>{"use strict";z.r(Xe),z.d(Xe,{FirebaseError:()=>Te.ZR,SDK_VERSION:()=>Ko,_DEFAULT_ENTRY_NAME:()=>lo,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>xn,_apps:()=>ti,_clearComponents:()=>Gr,_components:()=>Ln,_getProvider:()=>$r,_registerComponent:()=>Zn,_removeServiceInstance:()=>Hi,deleteApp:()=>rr,getApp:()=>Eo,getApps:()=>Rn,initializeApp:()=>zn,onLog:()=>cr,registerVersion:()=>Yr,setLogLevel:()=>Do});var o=z(5861),ee=z(4859),W=z(1877),Te=z(2090);const Oe=(He,Me)=>Me.some(ht=>He instanceof ht);let Ee,$e;const he=new WeakMap,fe=new WeakMap,Ce=new WeakMap,tt=new WeakMap,it=new WeakMap;let Be={get(He,Me,ht){if(He instanceof IDBTransaction){if("done"===Me)return fe.get(He);if("objectStoreNames"===Me)return He.objectStoreNames||Ce.get(He);if("store"===Me)return ht.objectStoreNames[1]?void 0:ht.objectStore(ht.objectStoreNames[0])}return nt(He[Me])},set:(He,Me,ht)=>(He[Me]=ht,!0),has:(He,Me)=>He instanceof IDBTransaction&&("done"===Me||"store"===Me)||Me in He};function mt(He){return"function"==typeof He?function ut(He){return He!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(He)?function(...Me){return He.apply(Qe(this),Me),nt(he.get(this))}:function(...Me){return nt(He.apply(Qe(this),Me))}:function(Me,...ht){const Kt=He.call(Qe(this),Me,...ht);return Ce.set(Kt,Me.sort?Me.sort():[Me]),nt(Kt)}}(He):(He instanceof IDBTransaction&&function Vt(He){if(fe.has(He))return;const Me=new Promise((ht,Kt)=>{const wn=()=>{He.removeEventListener("complete",Nn),He.removeEventListener("error",on),He.removeEventListener("abort",on)},Nn=()=>{ht(),wn()},on=()=>{Kt(He.error||new DOMException("AbortError","AbortError")),wn()};He.addEventListener("complete",Nn),He.addEventListener("error",on),He.addEventListener("abort",on)});fe.set(He,Me)}(He),Oe(He,function je(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(He,Be):He)}function nt(He){if(He instanceof IDBRequest)return function Et(He){const Me=new Promise((ht,Kt)=>{const wn=()=>{He.removeEventListener("success",Nn),He.removeEventListener("error",on)},Nn=()=>{ht(nt(He.result)),wn()},on=()=>{Kt(He.error),wn()};He.addEventListener("success",Nn),He.addEventListener("error",on)});return Me.then(ht=>{ht instanceof IDBCursor&&he.set(ht,He)}).catch(()=>{}),it.set(Me,He),Me}(He);if(tt.has(He))return tt.get(He);const Me=mt(He);return Me!==He&&(tt.set(He,Me),it.set(Me,He)),Me}const Qe=He=>it.get(He),rt=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Lt=new Map;function tn(He,Me){if(!(He instanceof IDBDatabase)||Me in He||"string"!=typeof Me)return;if(Lt.get(Me))return Lt.get(Me);const ht=Me.replace(/FromIndex$/,""),Kt=Me!==ht,wn=Se.includes(ht);if(!(ht in(Kt?IDBIndex:IDBObjectStore).prototype)||!wn&&!rt.includes(ht))return;const Nn=function(){var on=(0,o.Z)(function*(pi,...Xn){const uo=this.transaction(pi,wn?"readwrite":"readonly");let Nr=uo.store;return Kt&&(Nr=Nr.index(Xn.shift())),(yield Promise.all([Nr[ht](...Xn),wn&&uo.done]))[0]});return function(Xn){return on.apply(this,arguments)}}();return Lt.set(Me,Nn),Nn}!function st(He){Be=He(Be)}(He=>({...He,get:(Me,ht,Kt)=>tn(Me,ht)||He.get(Me,ht,Kt),has:(Me,ht)=>!!tn(Me,ht)||He.has(Me,ht)}));class Zt{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function dn(He){return"VERSION"===He.getComponent()?.type}(ht)){const Kt=ht.getImmediate();return`${Kt.library}/${Kt.version}`}return null}).filter(ht=>ht).join(" ")}}const zt="@firebase/app",Fe=new W.Yd("@firebase/app"),lo="[DEFAULT]",Wr={[zt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ti=new Map,Ln=new Map;function Wt(He,Me){try{He.container.addComponent(Me)}catch(ht){Fe.debug(`Component ${Me.name} failed to register with FirebaseApp ${He.name}`,ht)}}function xn(He,Me){He.container.addOrOverwriteComponent(Me)}function Zn(He){const Me=He.name;if(Ln.has(Me))return Fe.debug(`There were multiple attempts to register component ${Me}.`),!1;Ln.set(Me,He);for(const ht of ti.values())Wt(ht,He);return!0}function $r(He,Me){const ht=He.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),He.container.getProvider(Me)}function Hi(He,Me,ht=lo){$r(He,Me).clearInstance(ht)}function Gr(){Ln.clear()}const Tr=new Te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kn{constructor(Me,ht,Kt){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=Kt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Ko="9.23.0";function zn(He,Me={}){let ht=He;"object"!=typeof Me&&(Me={name:Me});const Kt=Object.assign({name:lo,automaticDataCollectionEnabled:!1},Me),wn=Kt.name;if("string"!=typeof wn||!wn)throw Tr.create("bad-app-name",{appName:String(wn)});if(ht||(ht=(0,Te.aH)()),!ht)throw Tr.create("no-options");const Nn=ti.get(wn);if(Nn){if((0,Te.vZ)(ht,Nn.options)&&(0,Te.vZ)(Kt,Nn.config))return Nn;throw Tr.create("duplicate-app",{appName:wn})}const on=new ee.H0(wn);for(const Xn of Ln.values())on.addComponent(Xn);const pi=new kn(ht,Kt,on);return ti.set(wn,pi),pi}function Eo(He=lo){const Me=ti.get(He);if(!Me&&He===lo&&(0,Te.aH)())return zn();if(!Me)throw Tr.create("no-app",{appName:He});return Me}function Rn(){return Array.from(ti.values())}function rr(He){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,o.Z)(function*(He){const Me=He.name;ti.has(Me)&&(ti.delete(Me),yield Promise.all(He.container.getProviders().map(ht=>ht.delete())),He.isDeleted=!0)})).apply(this,arguments)}function Yr(He,Me,ht){var Kt;let wn=null!==(Kt=Wr[He])&&void 0!==Kt?Kt:He;ht&&(wn+=`-${ht}`);const Nn=wn.match(/\s|\//),on=Me.match(/\s|\//);if(Nn||on){const pi=[`Unable to register library "${wn}" with version "${Me}":`];return Nn&&pi.push(`library name "${wn}" contains illegal characters (whitespace or "/")`),Nn&&on&&pi.push("and"),on&&pi.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void Fe.warn(pi.join(" "))}Zn(new ee.wA(`${wn}-version`,()=>({library:wn,version:Me}),"VERSION"))}function cr(He,Me){if(null!==He&&"function"!=typeof He)throw Tr.create("invalid-log-argument");(0,W.Am)(He,Me)}function Do(He){(0,W.Ub)(He)}const co="firebase-heartbeat-database",xo=1,le="firebase-heartbeat-store";let oe=null;function G(){return oe||(oe=function lt(He,Me,{blocked:ht,upgrade:Kt,blocking:wn,terminated:Nn}={}){const on=indexedDB.open(He,Me),pi=nt(on);return Kt&&on.addEventListener("upgradeneeded",Xn=>{Kt(nt(on.result),Xn.oldVersion,Xn.newVersion,nt(on.transaction),Xn)}),ht&&on.addEventListener("blocked",Xn=>ht(Xn.oldVersion,Xn.newVersion,Xn)),pi.then(Xn=>{Nn&&Xn.addEventListener("close",()=>Nn()),wn&&Xn.addEventListener("versionchange",uo=>wn(uo.oldVersion,uo.newVersion,uo))}).catch(()=>{}),pi}(co,xo,{upgrade:(He,Me)=>{0===Me&&He.createObjectStore(le)}}).catch(He=>{throw Tr.create("idb-open",{originalErrorMessage:He.message})})),oe}function q(){return(q=(0,o.Z)(function*(He){try{return yield(yield G()).transaction(le).objectStore(le).get(kt(He))}catch(Me){if(Me instanceof Te.ZR)Fe.warn(Me.message);else{const ht=Tr.create("idb-get",{originalErrorMessage:Me?.message});Fe.warn(ht.message)}}})).apply(this,arguments)}function ge(He,Me){return De.apply(this,arguments)}function De(){return(De=(0,o.Z)(function*(He,Me){try{const Kt=(yield G()).transaction(le,"readwrite");yield Kt.objectStore(le).put(Me,kt(He)),yield Kt.done}catch(ht){if(ht instanceof Te.ZR)Fe.warn(ht.message);else{const Kt=Tr.create("idb-set",{originalErrorMessage:ht?.message});Fe.warn(Kt.message)}}})).apply(this,arguments)}function kt(He){return`${He.name}!${He.options.appId}`}class Fn{constructor(Me){this.container=Me,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new En(ht),this._heartbeatsCachePromise=this._storage.read().then(Kt=>(this._heartbeatsCache=Kt,Kt))}triggerHeartbeat(){var Me=this;return(0,o.Z)(function*(){const Kt=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wn=_n();if(null===Me._heartbeatsCache&&(Me._heartbeatsCache=yield Me._heartbeatsCachePromise),Me._heartbeatsCache.lastSentHeartbeatDate!==wn&&!Me._heartbeatsCache.heartbeats.some(Nn=>Nn.date===wn))return Me._heartbeatsCache.heartbeats.push({date:wn,agent:Kt}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(Nn=>{const on=new Date(Nn.date).valueOf();return Date.now()-on<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,o.Z)(function*(){if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null===Me._heartbeatsCache||0===Me._heartbeatsCache.heartbeats.length)return"";const ht=_n(),{heartbeatsToSend:Kt,unsentEntries:wn}=function Ai(He,Me=1024){const ht=[];let Kt=He.slice();for(const wn of He){const Nn=ht.find(on=>on.agent===wn.agent);if(Nn){if(Nn.dates.push(wn.date),Er(ht)>Me){Nn.dates.pop();break}}else if(ht.push({agent:wn.agent,dates:[wn.date]}),Er(ht)>Me){ht.pop();break}Kt=Kt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:Kt}}(Me._heartbeatsCache.heartbeats),Nn=(0,Te.L)(JSON.stringify({version:2,heartbeats:Kt}));return Me._heartbeatsCache.lastSentHeartbeatDate=ht,wn.length>0?(Me._heartbeatsCache.heartbeats=wn,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),Nn})()}}function _n(){return(new Date).toISOString().substring(0,10)}class En{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,Te.hl)()&&(0,Te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,o.Z)(function*(){return(yield Me._canUseIndexedDBPromise)&&(yield function Y(He){return q.apply(this,arguments)}(Me.app))||{heartbeats:[]}})()}overwrite(Me){var ht=this;return(0,o.Z)(function*(){var Kt;if(yield ht._canUseIndexedDBPromise){const Nn=yield ht.read();return ge(ht.app,{lastSentHeartbeatDate:null!==(Kt=Me.lastSentHeartbeatDate)&&void 0!==Kt?Kt:Nn.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var ht=this;return(0,o.Z)(function*(){var Kt;if(yield ht._canUseIndexedDBPromise){const Nn=yield ht.read();return ge(ht.app,{lastSentHeartbeatDate:null!==(Kt=Me.lastSentHeartbeatDate)&&void 0!==Kt?Kt:Nn.lastSentHeartbeatDate,heartbeats:[...Nn.heartbeats,...Me.heartbeats]})}})()}}function Er(He){return(0,Te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ua(He){Zn(new ee.wA("platform-logger",Me=>new Zt(Me),"PRIVATE")),Zn(new ee.wA("heartbeat",Me=>new Fn(Me),"PRIVATE")),Yr(zt,"0.9.13",He),Yr(zt,"0.9.13","esm2017"),Yr("fire-js","")}("")},4859:(Yt,Xe,z)=>{"use strict";z.d(Xe,{H0:()=>je,wA:()=>W,zt:()=>Oe});var o=z(5861),ee=z(2090);class W{constructor(he,fe,Ce){this.name=he,this.instanceFactory=fe,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const Te="[DEFAULT]";class Oe{constructor(he,fe){this.name=he,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const fe=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(fe)){const Ce=new ee.BH;if(this.instancesDeferred.set(fe,Ce),this.isInitialized(fe)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:fe});tt&&Ce.resolve(tt)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(he){var fe;const Ce=this.normalizeInstanceIdentifier(he?.identifier),tt=null!==(fe=he?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(it){if(tt)return null;throw it}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function $e(Ne){return"EAGER"===Ne.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:Te})}catch{}for(const[fe,Ce]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(fe);try{const it=this.getOrInitializeService({instanceIdentifier:tt});Ce.resolve(it)}catch{}}}}clearInstance(he=Te){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,o.Z)(function*(){const fe=Array.from(he.instances.values());yield Promise.all([...fe.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...fe.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=Te){return this.instances.has(he)}getOptions(he=Te){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:fe={}}=he,Ce=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:Ce,options:fe});for(const[it,Et]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(it)&&Et.resolve(tt);return tt}onInit(he,fe){var Ce;const tt=this.normalizeInstanceIdentifier(fe),it=null!==(Ce=this.onInitCallbacks.get(tt))&&void 0!==Ce?Ce:new Set;it.add(he),this.onInitCallbacks.set(tt,it);const Et=this.instances.get(tt);return Et&&he(Et,tt),()=>{it.delete(he)}}invokeOnInitCallbacks(he,fe){const Ce=this.onInitCallbacks.get(fe);if(Ce)for(const tt of Ce)try{tt(he,fe)}catch{}}getOrInitializeService({instanceIdentifier:he,options:fe={}}){let Ce=this.instances.get(he);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=he,Ne===Te?void 0:Ne),options:fe}),this.instances.set(he,Ce),this.instancesOptions.set(he,fe),this.invokeOnInitCallbacks(Ce,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Ce)}catch{}var Ne;return Ce||null}normalizeInstanceIdentifier(he=Te){return this.component?this.component.multipleInstances?he:Te:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const fe=this.getProvider(he.name);if(fe.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);fe.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const fe=new Oe(he,this);return this.providers.set(he,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Am:()=>Ne,Ub:()=>je,Yd:()=>$e,in:()=>ee});const o=[];var ee=(()=>{return(he=ee||(ee={}))[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",ee;var he})();const W={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Te=ee.INFO,Oe={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},Ee=(he,fe,...Ce)=>{if(fe<he.logLevel)return;const tt=(new Date).toISOString(),it=Oe[fe];if(!it)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[it](`[${tt}]  ${he.name}:`,...Ce)};class $e{constructor(fe){this.name=fe,this._logLevel=Te,this._logHandler=Ee,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in ee))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?W[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...fe),this._logHandler(this,ee.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...fe),this._logHandler(this,ee.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...fe),this._logHandler(this,ee.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...fe),this._logHandler(this,ee.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...fe),this._logHandler(this,ee.ERROR,...fe)}}function je(he){o.forEach(fe=>{fe.setLogLevel(he)})}function Ne(he,fe){for(const Ce of o){let tt=null;fe&&fe.level&&(tt=W[fe.level]),Ce.userLogHandler=null===he?null:(it,Et,...Vt)=>{const Be=Vt.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");Et>=(tt??it.logLevel)&&he({level:ee[Et].toLowerCase(),message:Be,args:Vt,type:it.name})}}}},259:(Yt,Xe,z)=>{"use strict";z.d(Xe,{C6:()=>o.getApps,KN:()=>o.registerVersion,Mq:()=>o.getApp,ZF:()=>o.initializeApp});var o=z(6881);(0,o.registerVersion)("firebase","9.23.0","app")},9260:(Yt,Xe,z)=>{"use strict";z.d(Xe,{Z:()=>o.Z});var o=z(3942);o.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Yt,Xe,z)=>{"use strict";z.r(Xe);var o=z(5861),ee=z(3942),W=z(1389),Te=z(2090),$e=(z(6881),z(1877),z(4859));function je(){return window}const Ne=2e3;function fe(){return fe=(0,o.Z)(function*(G,Y,q){var ge;const{BuildInfo:De}=je();(0,W.as)(Y.sessionId,"AuthEvent did not contain a session ID");const kt=yield function st(G){return ut.apply(this,arguments)}(Y.sessionId),pn={};return(0,W.at)()?pn.ibi=De.packageName:(0,W.au)()?pn.apn=De.packageName:(0,W.av)(G,"operation-not-supported-in-this-environment"),De.displayName&&(pn.appDisplayName=De.displayName),pn.sessionId=kt,(0,W.aw)(G,q,Y.type,void 0,null!==(ge=Y.eventId)&&void 0!==ge?ge:void 0,pn)}),fe.apply(this,arguments)}function tt(){return(tt=(0,o.Z)(function*(G){const{BuildInfo:Y}=je(),q={};(0,W.at)()?q.iosBundleId=Y.packageName:(0,W.au)()?q.androidPackageName=Y.packageName:(0,W.av)(G,"operation-not-supported-in-this-environment"),yield(0,W.ax)(G,q)})).apply(this,arguments)}function Vt(){return(Vt=(0,o.Z)(function*(G,Y,q){const{cordova:ge}=je();let De=()=>{};try{yield new Promise((kt,pn)=>{let cn=null;function Fn(){var En;kt();const Er=null===(En=ge.plugins.browsertab)||void 0===En?void 0:En.close;"function"==typeof Er&&Er(),"function"==typeof q?.close&&q.close()}function _n(){cn||(cn=window.setTimeout(()=>{pn((0,W.az)(G,"redirect-cancelled-by-user"))},Ne))}function Ai(){"visible"===document?.visibilityState&&_n()}Y.addPassiveListener(Fn),document.addEventListener("resume",_n,!1),(0,W.au)()&&document.addEventListener("visibilitychange",Ai,!1),De=()=>{Y.removePassiveListener(Fn),document.removeEventListener("resume",_n,!1),document.removeEventListener("visibilitychange",Ai,!1),cn&&window.clearTimeout(cn)}})}finally{De()}})).apply(this,arguments)}function ut(){return(ut=(0,o.Z)(function*(G){const Y=function mt(G){if((0,W.as)(/[0-9a-zA-Z]+/.test(G),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(G);const Y=new ArrayBuffer(G.length),q=new Uint8Array(Y);for(let ge=0;ge<G.length;ge++)q[ge]=G.charCodeAt(ge);return q}(G),q=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(q)).map(De=>De.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const nt=20;class Qe extends W.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,o.Z)(function*(){yield Y.initPromise})()}}function rt(G){return Se.apply(this,arguments)}function Se(){return(Se=(0,o.Z)(function*(G){const Y=yield Zt()._get(dn(G));return Y&&(yield Zt()._remove(dn(G))),Y})).apply(this,arguments)}function tn(){const G=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<nt;q++){const ge=Math.floor(Math.random()*Y.length);G.push(Y.charAt(ge))}return G.join("")}function Zt(){return(0,W.aC)(W.b)}function dn(G){return(0,W.aD)("authEvent",G.config.apiKey,G.name)}function Fe(G){if(!G?.includes("?"))return{};const[Y,...q]=G.split("?");return(0,Te.zd)(q.join("?"))}const Ke=class ze{constructor(){this._redirectPersistence=W.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=W.aE,this._overrideRedirectResult=W.aF}_initialize(Y){var q=this;return(0,o.Z)(function*(){const ge=Y._key();let De=q.eventManagers.get(ge);return De||(De=new Qe(Y),q.eventManagers.set(ge,De),q.attachCallbackListeners(Y,De)),De})()}_openPopup(Y){(0,W.av)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,q,ge,De){var kt=this;return(0,o.Z)(function*(){!function Be(G){var Y,q,ge,De,kt,pn,cn,Fn,_n,Ai;const En=je();(0,W.aA)("function"==typeof(null===(Y=En?.universalLinks)||void 0===Y?void 0:Y.subscribe),G,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,W.aA)(typeof(null===(q=En?.BuildInfo)||void 0===q?void 0:q.packageName)<"u",G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,W.aA)("function"==typeof(null===(kt=null===(De=null===(ge=En?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===De?void 0:De.browsertab)||void 0===kt?void 0:kt.openUrl),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,W.aA)("function"==typeof(null===(Fn=null===(cn=null===(pn=En?.cordova)||void 0===pn?void 0:pn.plugins)||void 0===cn?void 0:cn.browsertab)||void 0===Fn?void 0:Fn.isAvailable),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,W.aA)("function"==typeof(null===(Ai=null===(_n=En?.cordova)||void 0===_n?void 0:_n.InAppBrowser)||void 0===Ai?void 0:Ai.open),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const pn=yield kt._initialize(Y);yield pn.initialized(),pn.resetRedirect(),(0,W.aG)(),yield kt._originValidation(Y);const cn=function lt(G,Y,q=null){return{type:Y,eventId:q,urlResponse:null,sessionId:tn(),postBody:null,tenantId:G.tenantId,error:(0,W.az)(G,"no-auth-event")}}(Y,ge,De);yield function vt(G,Y){return Zt()._set(dn(G),Y)}(Y,cn);const Fn=yield function he(G,Y,q){return fe.apply(this,arguments)}(Y,cn,q),_n=yield function it(G){const{cordova:Y}=je();return new Promise(q=>{Y.plugins.browsertab.isAvailable(ge=>{let De=null;ge?Y.plugins.browsertab.openUrl(G):De=Y.InAppBrowser.open(G,(0,W.ay)()?"_blank":"_system","location=yes"),q(De)})})}(Fn);return function Et(G,Y,q){return Vt.apply(this,arguments)}(Y,pn,_n)})()}_isIframeWebStorageSupported(Y,q){throw new Error("Method not implemented.")}_originValidation(Y){const q=Y._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function Ce(G){return tt.apply(this,arguments)}(Y)),this.originValidationPromises[q]}attachCallbackListeners(Y,q){const{universalLinks:ge,handleOpenURL:De,BuildInfo:kt}=je(),pn=setTimeout((0,o.Z)(function*(){yield rt(Y),q.onEvent(pt())}),500),cn=function(){var Ai=(0,o.Z)(function*(En){clearTimeout(pn);const Er=yield rt(Y);let ua=null;Er&&En?.url&&(ua=function Lt(G,Y){var q,ge;const De=function Cn(G){const Y=Fe(G),q=Y.link?decodeURIComponent(Y.link):void 0,ge=Fe(q).link,De=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return Fe(De).link||De||ge||q||G}(Y);if(De.includes("/__/auth/callback")){const kt=Fe(De),pn=kt.firebaseError?function zt(G){try{return JSON.parse(G)}catch{return null}}(decodeURIComponent(kt.firebaseError)):null,cn=null===(ge=null===(q=pn?.code)||void 0===q?void 0:q.split("auth/"))||void 0===ge?void 0:ge[1],Fn=cn?(0,W.az)(cn):null;return Fn?{type:G.type,eventId:G.eventId,tenantId:G.tenantId,error:Fn,urlResponse:null,sessionId:null,postBody:null}:{type:G.type,eventId:G.eventId,tenantId:G.tenantId,sessionId:G.sessionId,urlResponse:De,postBody:null}}return null}(Er,En.url)),q.onEvent(ua||pt())});return function(Er){return Ai.apply(this,arguments)}}();typeof ge<"u"&&"function"==typeof ge.subscribe&&ge.subscribe(null,cn);const Fn=De,_n=`${kt.packageName.toLowerCase()}://`;je().handleOpenURL=function(){var Ai=(0,o.Z)(function*(En){if(En.toLowerCase().startsWith(_n)&&cn({url:En}),"function"==typeof Fn)try{Fn(En)}catch(Er){console.error(Er)}});return function(En){return Ai.apply(this,arguments)}}()}};function pt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,W.az)("no-auth-event")}}const ui=1e3;function Pt(){var G;return(null===(G=self?.location)||void 0===G?void 0:G.protocol)||null}function Vn(G=(0,Te.z$)()){return!("file:"!==Pt()&&"ionic:"!==Pt()&&"capacitor:"!==Pt()||!G.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rr(){try{const G=self.localStorage,Y=W.aL();if(G)return G.setItem(Y,"1"),G.removeItem(Y),!function ar(G=(0,Te.z$)()){return function _i(){return(0,Te.w1)()&&11===document?.documentMode}()||function Or(G=(0,Te.z$)()){return/Edge\/\d+/.test(G)}(G)}()||(0,Te.hl)()}catch{return ir()&&(0,Te.hl)()}return!1}function ir(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ao(){return(function rn(){return"http:"===Pt()||"https:"===Pt()}()||(0,Te.ru)()||Vn())&&!function ri(){return(0,Te.b$)()||(0,Te.UG)()}()&&Rr()&&!ir()}function To(){return Vn()&&typeof document<"u"}function Yi(){return(Yi=(0,o.Z)(function*(){return!!To()&&new Promise(G=>{const Y=setTimeout(()=>{G(!1)},ui);document.addEventListener("deviceready",()=>{clearTimeout(Y),G(!0)})})})).apply(this,arguments)}const Ki={LOCAL:"local",NONE:"none",SESSION:"session"},Es=W.aA,lr="persistence";function Wr(G){return ti.apply(this,arguments)}function ti(){return(ti=(0,o.Z)(function*(G){yield G._initializationPromise;const Y=Wt(),q=W.aD(lr,G.config.apiKey,G.name);Y&&Y.setItem(q,G._getPersistence())})).apply(this,arguments)}function Wt(){var G;try{return(null===(G=function jt(){return typeof window<"u"?window:null}())||void 0===G?void 0:G.sessionStorage)||null}catch{return null}}const xn=W.aA;class Zn{constructor(){this.browserResolver=W.aC(W.k),this.cordovaResolver=W.aC(Ke),this.underlyingResolver=null,this._redirectPersistence=W.a,this._completeRedirectFn=W.aE,this._overrideRedirectResult=W.aF}_initialize(Y){var q=this;return(0,o.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,q,ge,De){var kt=this;return(0,o.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openPopup(Y,q,ge,De)})()}_openRedirect(Y,q,ge,De){var kt=this;return(0,o.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openRedirect(Y,q,ge,De)})()}_isIframeWebStorageSupported(Y,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,q)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return To()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,o.Z)(function*(){if(Y.underlyingResolver)return;const q=yield function nl(){return Yi.apply(this,arguments)}();Y.underlyingResolver=q?Y.cordovaResolver:Y.browserResolver})()}}function $r(G){return G.unwrap()}function Gr(G){return Tr(G)}function Tr(G){const{_tokenResponse:Y}=G instanceof Te.ZR?G.customData:G;if(!Y)return null;if(!(G instanceof Te.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return W.P.credentialFromResult(G);const q=Y.providerId;if(!q||q===W.p.PASSWORD)return null;let ge;switch(q){case W.p.GOOGLE:ge=W.V;break;case W.p.FACEBOOK:ge=W.U;break;case W.p.GITHUB:ge=W.W;break;case W.p.TWITTER:ge=W.Z;break;default:const{oauthIdToken:De,oauthAccessToken:kt,oauthTokenSecret:pn,pendingToken:cn,nonce:Fn}=Y;return kt||pn||De||cn?cn?q.startsWith("saml.")?W.aO._create(q,cn):W.L._fromParams({providerId:q,signInMethod:q,pendingToken:cn,idToken:De,accessToken:kt}):new W.X(q).credential({idToken:De,accessToken:kt,rawNonce:Fn}):null}return G instanceof Te.ZR?ge.credentialFromError(G):ge.credentialFromResult(G)}function kn(G,Y){return Y.catch(q=>{throw q instanceof Te.ZR&&function Qi(G,Y){var q;const ge=null===(q=Y.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===Y?.code)Y.resolver=new Eo(G,W.aq(G,Y));else if(ge){const De=Tr(Y),kt=Y;De&&(kt.credential=De,kt.tenantId=ge.tenantId||void 0,kt.email=ge.email||void 0,kt.phoneNumber=ge.phoneNumber||void 0)}}(G,q),q}).then(q=>{const De=q.user;return{operationType:q.operationType,credential:Gr(q),additionalUserInfo:W.ao(q),user:Rn.getOrCreate(De)}})}function Ko(G,Y){return zn.apply(this,arguments)}function zn(){return(zn=(0,o.Z)(function*(G,Y){const q=yield Y;return{verificationId:q.verificationId,confirm:ge=>kn(G,q.confirm(ge))}})).apply(this,arguments)}class Eo{constructor(Y,q){this.resolver=q,this.auth=function Hi(G){return G.wrapped()}(Y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return kn($r(this.auth),this.resolver.resolveSignIn(Y))}}class Rn{constructor(Y){this._delegate=Y,this.multiFactor=W.ar(Y)}static getOrCreate(Y){return Rn.USER_MAP.has(Y)||Rn.USER_MAP.set(Y,new Rn(Y)),Rn.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var q=this;return(0,o.Z)(function*(){return kn(q.auth,W.a0(q._delegate,Y))})()}linkWithPhoneNumber(Y,q){var ge=this;return(0,o.Z)(function*(){return Ko(ge.auth,W.l(ge._delegate,Y,q))})()}linkWithPopup(Y){var q=this;return(0,o.Z)(function*(){return kn(q.auth,W.d(q._delegate,Y,Zn))})()}linkWithRedirect(Y){var q=this;return(0,o.Z)(function*(){return yield Wr(W.aH(q.auth)),W.g(q._delegate,Y,Zn)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var q=this;return(0,o.Z)(function*(){return kn(q.auth,W.a1(q._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,q){return Ko(this.auth,W.r(this._delegate,Y,q))}reauthenticateWithPopup(Y){return kn(this.auth,W.e(this._delegate,Y,Zn))}reauthenticateWithRedirect(Y){var q=this;return(0,o.Z)(function*(){return yield Wr(W.aH(q.auth)),W.h(q._delegate,Y,Zn)})()}sendEmailVerification(Y){return W.ae(this._delegate,Y)}unlink(Y){var q=this;return(0,o.Z)(function*(){return yield W.an(q._delegate,Y),q})()}updateEmail(Y){return W.aj(this._delegate,Y)}updatePassword(Y){return W.ak(this._delegate,Y)}updatePhoneNumber(Y){return W.u(this._delegate,Y)}updateProfile(Y){return W.ai(this._delegate,Y)}verifyBeforeUpdateEmail(Y,q){return W.af(this._delegate,Y,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rn.USER_MAP=new WeakMap;const rr=W.aA;let Ji=(()=>{class G{constructor(q,ge){if(this.app=q,ge.isInitialized())return this._delegate=ge.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:De}=q.options;rr(De,"invalid-api-key",{appName:q.name}),rr(De,"invalid-api-key",{appName:q.name});const kt=typeof window<"u"?Zn:void 0;this._delegate=ge.initialize({options:{persistence:cr(De,q.name),popupRedirectResolver:kt}}),this._delegate._updateErrorMap(W.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,ge){W.I(this._delegate,q,ge)}applyActionCode(q){return W.a5(this._delegate,q)}checkActionCode(q){return W.a6(this._delegate,q)}confirmPasswordReset(q,ge){return W.a4(this._delegate,q,ge)}createUserWithEmailAndPassword(q,ge){var De=this;return(0,o.Z)(function*(){return kn(De._delegate,W.a8(De._delegate,q,ge))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return W.ad(this._delegate,q)}isSignInWithEmailLink(q){return W.ab(this._delegate,q)}getRedirectResult(){var q=this;return(0,o.Z)(function*(){rr(ao(),q._delegate,"operation-not-supported-in-this-environment");const ge=yield W.j(q._delegate,Zn);return ge?kn(q._delegate,Promise.resolve(ge)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function Je(G,Y){(0,W.aH)(G)._logFramework(Y)}(this._delegate,q)}onAuthStateChanged(q,ge,De){const{next:kt,error:pn,complete:cn}=Yr(q,ge,De);return this._delegate.onAuthStateChanged(kt,pn,cn)}onIdTokenChanged(q,ge,De){const{next:kt,error:pn,complete:cn}=Yr(q,ge,De);return this._delegate.onIdTokenChanged(kt,pn,cn)}sendSignInLinkToEmail(q,ge){return W.aa(this._delegate,q,ge)}sendPasswordResetEmail(q,ge){return W.a3(this._delegate,q,ge||void 0)}setPersistence(q){var ge=this;return(0,o.Z)(function*(){let De;switch(function lo(G,Y){Es(Object.values(Ki).includes(Y),G,"invalid-persistence-type"),(0,Te.b$)()?Es(Y!==Ki.SESSION,G,"unsupported-persistence-type"):(0,Te.UG)()?Es(Y===Ki.NONE,G,"unsupported-persistence-type"):ir()?Es(Y===Ki.NONE||Y===Ki.LOCAL&&(0,Te.hl)(),G,"unsupported-persistence-type"):Es(Y===Ki.NONE||Rr(),G,"unsupported-persistence-type")}(ge._delegate,q),q){case Ki.SESSION:De=W.a;break;case Ki.LOCAL:De=(yield W.aC(W.i)._isAvailable())?W.i:W.b;break;case Ki.NONE:De=W.N;break;default:return W.av("argument-error",{appName:ge._delegate.name})}return ge._delegate.setPersistence(De)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return kn(this._delegate,W._(this._delegate))}signInWithCredential(q){return kn(this._delegate,W.$(this._delegate,q))}signInWithCustomToken(q){return kn(this._delegate,W.a2(this._delegate,q))}signInWithEmailAndPassword(q,ge){return kn(this._delegate,W.a9(this._delegate,q,ge))}signInWithEmailLink(q,ge){return kn(this._delegate,W.ac(this._delegate,q,ge))}signInWithPhoneNumber(q,ge){return Ko(this._delegate,W.s(this._delegate,q,ge))}signInWithPopup(q){var ge=this;return(0,o.Z)(function*(){return rr(ao(),ge._delegate,"operation-not-supported-in-this-environment"),kn(ge._delegate,W.c(ge._delegate,q,Zn))})()}signInWithRedirect(q){var ge=this;return(0,o.Z)(function*(){return rr(ao(),ge._delegate,"operation-not-supported-in-this-environment"),yield Wr(ge._delegate),W.f(ge._delegate,q,Zn)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return W.a7(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return G.Persistence=Ki,G})();function Yr(G,Y,q){let ge=G;"function"!=typeof G&&({next:ge,error:Y,complete:q}=G);const De=ge;return{next:pn=>De(pn&&Rn.getOrCreate(pn)),error:Y,complete:q}}function cr(G,Y){const q=function Ln(G,Y){const q=Wt();if(!q)return[];const ge=W.aD(lr,G,Y);switch(q.getItem(ge)){case Ki.NONE:return[W.N];case Ki.LOCAL:return[W.i,W.a];case Ki.SESSION:return[W.a];default:return[]}}(G,Y);if(typeof self<"u"&&!q.includes(W.i)&&q.push(W.i),typeof window<"u")for(const ge of[W.b,W.a])q.includes(ge)||q.push(ge);return q.includes(W.N)||q.push(W.N),q}class Do{constructor(){this.providerId="phone",this._delegate=new W.P($r(ee.Z.auth()))}static credential(Y,q){return W.P.credential(Y,q)}verifyPhoneNumber(Y,q){return this._delegate.verifyPhoneNumber(Y,q)}unwrap(){return this._delegate}}Do.PHONE_SIGN_IN_METHOD=W.P.PHONE_SIGN_IN_METHOD,Do.PROVIDER_ID=W.P.PROVIDER_ID;const co=W.aA;class xo{constructor(Y,q,ge=ee.Z.app()){var De;co(null===(De=ge.options)||void 0===De?void 0:De.apiKey,"invalid-api-key",{appName:ge.name}),this._delegate=new W.R(Y,q,ge.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function oe(G){G.INTERNAL.registerComponent(new $e.wA("auth-compat",Y=>{const q=Y.getProvider("app-compat").getImmediate(),ge=Y.getProvider("auth");return new Ji(q,ge)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W.A.EMAIL_SIGNIN,PASSWORD_RESET:W.A.PASSWORD_RESET,RECOVER_EMAIL:W.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W.A.VERIFY_EMAIL}},EmailAuthProvider:W.Q,FacebookAuthProvider:W.U,GithubAuthProvider:W.W,GoogleAuthProvider:W.V,OAuthProvider:W.X,SAMLAuthProvider:W.Y,PhoneAuthProvider:Do,PhoneMultiFactorGenerator:W.m,RecaptchaVerifier:xo,TwitterAuthProvider:W.Z,Auth:Ji,AuthCredential:W.J,Error:Te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),G.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(Yt,Xe,z)=>{"use strict";function o(W,Te,Oe,Ee,$e,je,Ne){try{var he=W[je](Ne),fe=he.value}catch(Ce){return void Oe(Ce)}he.done?Te(fe):Promise.resolve(fe).then(Ee,$e)}function ee(W){return function(){var Te=this,Oe=arguments;return new Promise(function(Ee,$e){var je=W.apply(Te,Oe);function Ne(fe){o(je,Ee,$e,Ne,he,"next",fe)}function he(fe){o(je,Ee,$e,Ne,he,"throw",fe)}Ne(void 0)})}}z.d(Xe,{Z:()=>ee})},7582:(Yt,Xe,z)=>{"use strict";z.d(Xe,{FC:()=>Qe,KL:()=>vt,_T:()=>Te,mG:()=>Ce,pi:()=>W,qq:()=>nt});var W=function(){return W=Object.assign||function(xe){for(var ze,Ke=1,pt=arguments.length;Ke<pt;Ke++)for(var Je in ze=arguments[Ke])Object.prototype.hasOwnProperty.call(ze,Je)&&(xe[Je]=ze[Je]);return xe},W.apply(this,arguments)};function Te(Fe,xe){var ze={};for(var Ke in Fe)Object.prototype.hasOwnProperty.call(Fe,Ke)&&xe.indexOf(Ke)<0&&(ze[Ke]=Fe[Ke]);if(null!=Fe&&"function"==typeof Object.getOwnPropertySymbols){var pt=0;for(Ke=Object.getOwnPropertySymbols(Fe);pt<Ke.length;pt++)xe.indexOf(Ke[pt])<0&&Object.prototype.propertyIsEnumerable.call(Fe,Ke[pt])&&(ze[Ke[pt]]=Fe[Ke[pt]])}return ze}function Ce(Fe,xe,ze,Ke){return new(ze||(ze=Promise))(function(Je,We){function gt(rn){try{Pt(Ke.next(rn))}catch(Vn){We(Vn)}}function ui(rn){try{Pt(Ke.throw(rn))}catch(Vn){We(Vn)}}function Pt(rn){rn.done?Je(rn.value):function pt(Je){return Je instanceof ze?Je:new ze(function(We){We(Je)})}(rn.value).then(gt,ui)}Pt((Ke=Ke.apply(Fe,xe||[])).next())})}function nt(Fe){return this instanceof nt?(this.v=Fe,this):new nt(Fe)}function Qe(Fe,xe,ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,Ke=ze.apply(Fe,xe||[]),Je=[];return pt={},We("next"),We("throw"),We("return"),pt[Symbol.asyncIterator]=function(){return this},pt;function We(ri){Ke[ri]&&(pt[ri]=function(_i){return new Promise(function(Or,ar){Je.push([ri,_i,Or,ar])>1||gt(ri,_i)})})}function gt(ri,_i){try{!function ui(ri){ri.value instanceof nt?Promise.resolve(ri.value.v).then(Pt,rn):Vn(Je[0][2],ri)}(Ke[ri](_i))}catch(Or){Vn(Je[0][3],Or)}}function Pt(ri){gt("next",ri)}function rn(ri){gt("throw",ri)}function Vn(ri,_i){ri(_i),Je.shift(),Je.length&&gt(Je[0][0],Je[0][1])}}function vt(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,xe=Fe[Symbol.asyncIterator];return xe?xe.call(Fe):(Fe=function Vt(Fe){var xe="function"==typeof Symbol&&Symbol.iterator,ze=xe&&Fe[xe],Ke=0;if(ze)return ze.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&Ke>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[Ke++],done:!Fe}}};throw new TypeError(xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Fe),ze={},Ke("next"),Ke("throw"),Ke("return"),ze[Symbol.asyncIterator]=function(){return this},ze);function Ke(Je){ze[Je]=Fe[Je]&&function(We){return new Promise(function(gt,ui){!function pt(Je,We,gt,ui){Promise.resolve(ui).then(function(Pt){Je({value:Pt,done:gt})},We)}(gt,ui,(We=Fe[Je](We)).done,We.value)})}}}}},Yt=>{Yt(Yt.s=2432)}]);